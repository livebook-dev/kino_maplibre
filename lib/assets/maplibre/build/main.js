var jF=Object.create;var eC=Object.defineProperty;var qF=Object.getOwnPropertyDescriptor;var $F=Object.getOwnPropertyNames;var t3=Object.getPrototypeOf,e3=Object.prototype.hasOwnProperty;var Bd=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var _d=(n,e)=>()=>(n&&(e=n(n=0)),e);var ua=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),iC=(n,e)=>{for(var r in e)eC(n,r,{get:e[r],enumerable:!0})},i3=(n,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of $F(e))!e3.call(n,l)&&l!==r&&eC(n,l,{get:()=>e[l],enumerable:!(o=qF(e,l))||o.enumerable});return n};var xd=(n,e,r)=>(r=n!=null?jF(t3(n)):{},i3(e||!n||!n.__esModule?eC(r,"default",{value:n,enumerable:!0}):r,n));var sC=ua((rC,nC)=>{(function(n,e){typeof rC=="object"&&typeof nC<"u"?nC.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.maplibregl=e())})(rC,function(){"use strict";var n={},e={};function r(l,s,p){if(e[l]=p,l==="index"){var m="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",I={};return e.shared(I),e.index(n,I),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([m],{type:"text/javascript"}))),n}}r("shared",["exports"],function(l){"use strict";function s(A,i,c,d){return new(c||(c=Promise))(function(C,b){function v(Q){try{L(d.next(Q))}catch(Z){b(Z)}}function S(Q){try{L(d.throw(Q))}catch(Z){b(Z)}}function L(Q){var Z;Q.done?C(Q.value):(Z=Q.value,Z instanceof c?Z:new c(function(N){N(Z)})).then(v,S)}L((d=d.apply(A,i||[])).next())})}function p(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}typeof SuppressedError=="function"&&SuppressedError;var m=I;function I(A,i){this.x=A,this.y=i}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,i){return this.clone()._rotateAround(A,i)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var i=A.x-this.x,c=A.y-this.y;return i*i+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,i){return Math.atan2(this.x*i-this.y*A,this.x*A+this.y*i)},_matMult:function(A){var i=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=i,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var i=Math.cos(A),c=Math.sin(A),d=c*this.x+i*this.y;return this.x=i*this.x-c*this.y,this.y=d,this},_rotateAround:function(A,i){var c=Math.cos(A),d=Math.sin(A),C=i.y+d*(this.x-i.x)+c*(this.y-i.y);return this.x=i.x+c*(this.x-i.x)-d*(this.y-i.y),this.y=C,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(A){return A instanceof I?A:Array.isArray(A)?new I(A[0],A[1]):A};var w=p(m),_=E;function E(A,i,c,d){this.cx=3*A,this.bx=3*(c-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(d-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=i,this.p2x=c,this.p2y=d}E.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,i){if(i===void 0&&(i=1e-6),A<0)return 0;if(A>1)return 1;for(var c=A,d=0;d<8;d++){var C=this.sampleCurveX(c)-A;if(Math.abs(C)<i)return c;var b=this.sampleCurveDerivativeX(c);if(Math.abs(b)<1e-6)break;c-=C/b}var v=0,S=1;for(c=A,d=0;d<20&&(C=this.sampleCurveX(c),!(Math.abs(C-A)<i));d++)A>C?v=c:S=c,c=.5*(S-v)+v;return c},solve:function(A,i){return this.sampleCurveY(this.solveCurveX(A,i))}};var U=p(_);let F,V;function H(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function Y(){if(V==null&&(V=!1,H())){let i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let d=0;d<5*5;d++){let C=4*d;i.fillStyle=`rgb(${C},${C+1},${C+2})`,i.fillRect(d%5,Math.floor(d/5),1,1)}let c=i.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){V=!0;break}}}return V||!1}function D(A,i,c,d){let C=new U(A,i,c,d);return b=>C.solve(b)}let tt=D(.25,.1,.25,1);function ot(A,i,c){return Math.min(c,Math.max(i,A))}function bt(A,i,c){let d=c-i,C=((A-i)%d+d)%d+i;return C===i?c:C}function kt(A,...i){for(let c of i)for(let d in c)A[d]=c[d];return A}let Lt=1;function vt(A,i,c){let d={};for(let C in A)d[C]=i.call(this,A[C],C,A);return d}function ft(A,i,c){let d={};for(let C in A)i.call(this,A[C],C,A)&&(d[C]=A[C]);return d}function Mt(A){return Array.isArray(A)?A.map(Mt):typeof A=="object"&&A?vt(A,Mt):A}let qt={};function at(A){qt[A]||(typeof console<"u"&&console.warn(A),qt[A]=!0)}function st(A,i,c){return(c.y-A.y)*(i.x-A.x)>(i.y-A.y)*(c.x-A.x)}function wt(A){return typeof WorkerGlobalScope<"u"&&A!==void 0&&A instanceof WorkerGlobalScope}let yt=null;function te(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}let jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Xt(A,i,c,d,C){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let b=new VideoFrame(A,{timestamp:0});try{let v=b?.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);let S=v.startsWith("BGR"),L=new Uint8ClampedArray(d*C*4);if(yield b.copyTo(L,function(Q,Z,N,O,q){let nt=4*Math.max(-Z,0),lt=(Math.max(0,N)-N)*O*4+nt,Bt=4*O,Gt=Math.max(0,Z),re=Math.max(0,N);return{rect:{x:Gt,y:re,width:Math.min(Q.width,Z+O)-Gt,height:Math.min(Q.height,N+q)-re},layout:[{offset:lt,stride:Bt}]}}(A,i,c,d,C)),S)for(let Q=0;Q<L.length;Q+=4){let Z=L[Q];L[Q]=L[Q+2],L[Q+2]=Z}return L}finally{b.close()}})}let Wt,Ct,Et="AbortError";function ue(){return new Error(Et)}let J={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function dt(A){return J.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))]}let mt="global-dispatcher";class Ut extends Error{constructor(i,c,d,C){super(`AJAXError: ${c} (${i}): ${d}`),this.status=i,this.statusText=c,this.url=d,this.body=C}}let Pt=()=>wt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ie=function(A,i){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){let d=dt(A.url);if(d)return d(A,i);if(wt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,targetMapId:mt},i)}if(!(/^file:/.test(c=A.url)||/^file:/.test(Pt())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,C){return s(this,void 0,void 0,function*(){let b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Pt(),signal:C.signal});d.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");let v=yield fetch(b);if(!v.ok){let Q=yield v.blob();throw new Ut(v.status,v.statusText,d.url,Q)}let S;S=d.type==="arrayBuffer"||d.type==="image"?v.arrayBuffer():d.type==="json"?v.json():v.text();let L=yield S;if(C.signal.aborted)throw ue();return{data:L,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}})}(A,i);if(wt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,mustQueue:!0,targetMapId:mt},i)}var c;return function(d,C){return new Promise((b,v)=>{var S;let L=new XMLHttpRequest;L.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(L.responseType="arraybuffer");for(let Q in d.headers)L.setRequestHeader(Q,d.headers[Q]);d.type==="json"&&(L.responseType="text",!((S=d.headers)===null||S===void 0)&&S.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=d.credentials==="include",L.onerror=()=>{v(new Error(L.statusText))},L.onload=()=>{if(!C.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let Q=L.response;if(d.type==="json")try{Q=JSON.parse(L.response)}catch(Z){return void v(Z)}b({data:Q,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{let Q=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});v(new Ut(L.status,L.statusText,d.url,Q))}},C.signal.addEventListener("abort",()=>{L.abort(),v(ue())}),L.send(d.body)})}(A,i)};function le(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;let i=new URL(A),c=window.location;return i.protocol===c.protocol&&i.host===c.host}function ce(A,i,c){c[A]&&c[A].indexOf(i)!==-1||(c[A]=c[A]||[],c[A].push(i))}function Qe(A,i,c){if(c&&c[A]){let d=c[A].indexOf(i);d!==-1&&c[A].splice(d,1)}}class Ee{constructor(i,c={}){kt(this,c),this.type=i}}class We extends Ee{constructor(i,c={}){super("error",kt({error:i},c))}}class Je{on(i,c){return this._listeners=this._listeners||{},ce(i,c,this._listeners),this}off(i,c){return Qe(i,c,this._listeners),Qe(i,c,this._oneTimeListeners),this}once(i,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},ce(i,c,this._oneTimeListeners),this):new Promise(d=>this.once(i,d))}fire(i,c){typeof i=="string"&&(i=new Ee(i,c||{}));let d=i.type;if(this.listens(d)){i.target=this;let C=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(let S of C)S.call(this,i);let b=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(let S of b)Qe(d,S,this._oneTimeListeners),S.call(this,i);let v=this._eventedParent;v&&(kt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(i))}else i instanceof We&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,c){return this._eventedParent=i,this._eventedParentData=c,this}}var Dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let de=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Tt(A,i){let c={};for(let d in A)d!=="ref"&&(c[d]=A[d]);return de.forEach(d=>{d in i&&(c[d]=i[d])}),c}function Xe(A,i){if(Array.isArray(A)){if(!Array.isArray(i)||A.length!==i.length)return!1;for(let c=0;c<A.length;c++)if(!Xe(A[c],i[c]))return!1;return!0}if(typeof A=="object"&&A!==null&&i!==null){if(typeof i!="object"||Object.keys(A).length!==Object.keys(i).length)return!1;for(let c in A)if(!Xe(A[c],i[c]))return!1;return!0}return A===i}function Oe(A,i){A.push(i)}function Le(A,i,c){Oe(c,{command:"addSource",args:[A,i[A]]})}function He(A,i,c){Oe(i,{command:"removeSource",args:[A]}),c[A]=!0}function Ke(A,i,c,d){He(A,c,d),Le(A,i,c)}function ze(A,i,c){let d;for(d in A[c])if(Object.prototype.hasOwnProperty.call(A[c],d)&&d!=="data"&&!Xe(A[c][d],i[c][d]))return!1;for(d in i[c])if(Object.prototype.hasOwnProperty.call(i[c],d)&&d!=="data"&&!Xe(A[c][d],i[c][d]))return!1;return!0}function ti(A,i,c,d,C,b){A=A||{},i=i||{};for(let v in A)Object.prototype.hasOwnProperty.call(A,v)&&(Xe(A[v],i[v])||c.push({command:b,args:[d,v,i[v],C]}));for(let v in i)Object.prototype.hasOwnProperty.call(i,v)&&!Object.prototype.hasOwnProperty.call(A,v)&&(Xe(A[v],i[v])||c.push({command:b,args:[d,v,i[v],C]}))}function ci(A){return A.id}function Si(A,i){return A[i.id]=i,A}class he{constructor(i,c,d,C){this.message=(i?`${i}: `:"")+d,C&&(this.identifier=C),c!=null&&c.__line__&&(this.line=c.__line__)}}function Zi(A,...i){for(let c of i)for(let d in c)A[d]=c[d];return A}class Hi extends Error{constructor(i,c){super(c),this.message=c,this.key=i}}class pi{constructor(i,c=[]){this.parent=i,this.bindings={};for(let[d,C]of c)this.bindings[d]=C}concat(i){return new pi(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}let Ei={kind:"null"},ne={kind:"number"},ui={kind:"string"},Ve={kind:"boolean"},rr={kind:"color"},Ni={kind:"object"},$e={kind:"value"},wr={kind:"collator"},zi={kind:"formatted"},_r={kind:"padding"},nr={kind:"resolvedImage"},It={kind:"variableAnchorOffsetCollection"};function K(A,i){return{kind:"array",itemType:A,N:i}}function z(A){if(A.kind==="array"){let i=z(A.itemType);return typeof A.N=="number"?`array<${i}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${i}>`}return A.kind}let it=[Ei,ne,ui,Ve,rr,zi,Ni,K($e),_r,nr,It];function gt(A,i){if(i.kind==="error")return null;if(A.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!gt(A.itemType,i.itemType))&&(typeof A.N!="number"||A.N===i.N))return null}else{if(A.kind===i.kind)return null;if(A.kind==="value"){for(let c of it)if(!gt(c,i))return null}}return`Expected ${z(A)} but found ${z(i)} instead.`}function Ht(A,i){return i.some(c=>c.kind===A.kind)}function Nt(A,i){return i.some(c=>c==="null"?A===null:c==="array"?Array.isArray(A):c==="object"?A&&!Array.isArray(A)&&typeof A=="object":c===typeof A)}function Jt(A,i){return A.kind==="array"&&i.kind==="array"?A.itemType.kind===i.itemType.kind&&typeof A.N=="number":A.kind===i.kind}let Rt=.96422,Ot=.82521,me=4/29,Ae=6/29,Se=3*Ae*Ae,Ye=Ae*Ae*Ae,je=Math.PI/180,Mi=180/Math.PI;function Ti(A){return(A%=360)<0&&(A+=360),A}function Vi([A,i,c,d]){let C,b,v=pr((.2225045*(A=vi(A))+.7168786*(i=vi(i))+.0606169*(c=vi(c)))/1);A===i&&i===c?C=b=v:(C=pr((.4360747*A+.3850649*i+.1430804*c)/Rt),b=pr((.0139322*A+.0971045*i+.7141733*c)/Ot));let S=116*v-16;return[S<0?0:S,500*(C-v),200*(v-b),d]}function vi(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function pr(A){return A>Ye?Math.pow(A,1/3):A/Se+me}function ur([A,i,c,d]){let C=(A+16)/116,b=isNaN(i)?C:C+i/500,v=isNaN(c)?C:C-c/200;return C=1*Oi(C),b=Rt*Oi(b),v=Ot*Oi(v),[Qi(3.1338561*b-1.6168667*C-.4906146*v),Qi(-.9787684*b+1.9161415*C+.033454*v),Qi(.0719453*b-.2289914*C+1.4052427*v),d]}function Qi(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function Oi(A){return A>Ae?A*A*A:Se*(A-me)}function sr(A){return parseInt(A.padEnd(2,A),16)/255}function Zt(A,i){return Ne(i?A/100:A,0,1)}function Ne(A,i,c){return Math.min(Math.max(i,A),c)}function ke(A){return!A.some(Number.isNaN)}let Wi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Fi{constructor(i,c,d,C=1,b=!0){this.r=i,this.g=c,this.b=d,this.a=C,b||(this.r*=C,this.g*=C,this.b*=C,C||this.overwriteGetter("rgb",[i,c,d,C]))}static parse(i){if(i instanceof Fi)return i;if(typeof i!="string")return;let c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];let C=Wi[d];if(C){let[v,S,L]=C;return[v/255,S/255,L/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){let v=d.length<6?1:2,S=1;return[sr(d.slice(S,S+=v)),sr(d.slice(S,S+=v)),sr(d.slice(S,S+=v)),sr(d.slice(S,S+v)||"ff")]}if(d.startsWith("rgb")){let v=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){let[S,L,Q,Z,N,O,q,nt,lt,Bt,Gt,re]=v,Kt=[Z||" ",q||" ",Bt].join("");if(Kt==="  "||Kt==="  /"||Kt===",,"||Kt===",,,"){let Yt=[Q,O,lt].join(""),ge=Yt==="%%%"?100:Yt===""?255:0;if(ge){let Re=[Ne(+L/ge,0,1),Ne(+N/ge,0,1),Ne(+nt/ge,0,1),Gt?Zt(+Gt,re):1];if(ke(Re))return Re}}return}}let b=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){let[v,S,L,Q,Z,N,O,q,nt]=b,lt=[L||" ",Z||" ",O].join("");if(lt==="  "||lt==="  /"||lt===",,"||lt===",,,"){let Bt=[+S,Ne(+Q,0,100),Ne(+N,0,100),q?Zt(+q,nt):1];if(ke(Bt))return function([Gt,re,Kt,Yt]){function ge(Re){let ni=(Re+Gt/30)%12,Gi=re*Math.min(Kt,1-Kt);return Kt-Gi*Math.max(-1,Math.min(ni-3,9-ni,1))}return Gt=Ti(Gt),re/=100,Kt/=100,[ge(0),ge(8),ge(4),Yt]}(Bt)}}}(i);return c?new Fi(...c,!1):void 0}get rgb(){let{r:i,g:c,b:d,a:C}=this,b=C||1/0;return this.overwriteGetter("rgb",[i/b,c/b,d/b,C])}get hcl(){return this.overwriteGetter("hcl",function(i){let[c,d,C,b]=Vi(i),v=Math.sqrt(d*d+C*C);return[Math.round(1e4*v)?Ti(Math.atan2(C,d)*Mi):NaN,v,c,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Vi(this.rgb))}overwriteGetter(i,c){return Object.defineProperty(this,i,{value:c}),c}toString(){let[i,c,d,C]=this.rgb;return`rgba(${[i,c,d].map(b=>Math.round(255*b)).join(",")},${C})`}}Fi.black=new Fi(0,0,0,1),Fi.white=new Fi(1,1,1,1),Fi.transparent=new Fi(0,0,0,0),Fi.red=new Fi(1,0,0,1);class rn{constructor(i,c,d){this.sensitivity=i?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,c){return this.collator.compare(i,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fr{constructor(i,c,d,C,b){this.text=i,this.image=c,this.scale=d,this.fontStack=C,this.textColor=b}}class jr{constructor(i){this.sections=i}static fromString(i){return new jr([new Fr(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof jr?i:jr.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class br{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof br)return i;if(typeof i=="number")return new br([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(let c of i)if(typeof c!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new br(i)}}toString(){return JSON.stringify(this.values)}}let on=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class dn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof dn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let c=0;c<i.length;c+=2){let d=i[c],C=i[c+1];if(typeof d!="string"||!on.has(d)||!Array.isArray(C)||C.length!==2||typeof C[0]!="number"||typeof C[1]!="number")return}return new dn(i)}}toString(){return JSON.stringify(this.values)}}class pn{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new pn({name:i,available:!1}):null}}function vo(A,i,c,d){return typeof A=="number"&&A>=0&&A<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[A,i,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[A,i,c,d]:[A,i,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function es(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Fi||A instanceof rn||A instanceof jr||A instanceof br||A instanceof dn||A instanceof pn)return!0;if(Array.isArray(A)){for(let i of A)if(!es(i))return!1;return!0}if(typeof A=="object"){for(let i in A)if(!es(A[i]))return!1;return!0}return!1}function Or(A){if(A===null)return Ei;if(typeof A=="string")return ui;if(typeof A=="boolean")return Ve;if(typeof A=="number")return ne;if(A instanceof Fi)return rr;if(A instanceof rn)return wr;if(A instanceof jr)return zi;if(A instanceof br)return _r;if(A instanceof dn)return It;if(A instanceof pn)return nr;if(Array.isArray(A)){let i=A.length,c;for(let d of A){let C=Or(d);if(c){if(c===C)continue;c=$e;break}c=C}return K(c||$e,i)}return Ni}function is(A){let i=typeof A;return A===null?"":i==="string"||i==="number"||i==="boolean"?String(A):A instanceof Fi||A instanceof jr||A instanceof br||A instanceof dn||A instanceof pn?A.toString():JSON.stringify(A)}class Jn{constructor(i,c){this.type=i,this.value=c}static parse(i,c){if(i.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!es(i[1]))return c.error("invalid value");let d=i[1],C=Or(d),b=c.expectedType;return C.kind!=="array"||C.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(C=b),new Jn(C,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class $i{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}let io={string:ui,number:ne,boolean:Ve,object:Ni};class wn{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");let d,C=1,b=i[0];if(b==="array"){let S,L;if(i.length>2){let Q=i[1];if(typeof Q!="string"||!(Q in io)||Q==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=io[Q],C++}else S=$e;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return c.error('The length argument to "array" must be a positive integer literal',2);L=i[2],C++}d=K(S,L)}else{if(!io[b])throw new Error(`Types doesn't contain name = ${b}`);d=io[b]}let v=[];for(;C<i.length;C++){let S=c.parse(i[C],C,$e);if(!S)return null;v.push(S)}return new wn(d,v)}evaluate(i){for(let c=0;c<this.args.length;c++){let d=this.args[c].evaluate(i);if(!gt(this.type,Or(d)))return d;if(c===this.args.length-1)throw new $i(`Expected value to be of type ${z(this.type)}, but found ${z(Or(d))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Wo={"to-boolean":Ve,"to-color":rr,"to-number":ne,"to-string":ui};class Bn{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");let d=i[0];if(!Wo[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&i.length!==2)return c.error("Expected one argument.");let C=Wo[d],b=[];for(let v=1;v<i.length;v++){let S=c.parse(i[v],v,$e);if(!S)return null;b.push(S)}return new Bn(C,b)}evaluate(i){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(i));case"color":{let c,d;for(let C of this.args){if(c=C.evaluate(i),d=null,c instanceof Fi)return c;if(typeof c=="string"){let b=i.parseColor(c);if(b)return b}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:vo(c[0],c[1],c[2],c[3]),!d))return new Fi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new $i(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(let d of this.args){c=d.evaluate(i);let C=br.parse(c);if(C)return C}throw new $i(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(let d of this.args){c=d.evaluate(i);let C=dn.parse(c);if(C)return C}throw new $i(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(let d of this.args){if(c=d.evaluate(i),c===null)return 0;let C=Number(c);if(!isNaN(C))return C}throw new $i(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return jr.fromString(is(this.args[0].evaluate(i)));case"resolvedImage":return pn.fromString(is(this.args[0].evaluate(i)));default:return is(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let ht=["Unknown","Point","LineString","Polygon"];class pt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ht[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let c=this._parseColorCache[i];return c||(c=this._parseColorCache[i]=Fi.parse(i)),c}}class At{constructor(i,c,d=[],C,b=new pi,v=[]){this.registry=i,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=b,this.errors=v,this.expectedType=C,this._isConstant=c}parse(i,c,d,C,b={}){return c?this.concat(c,d,C)._parse(i,b):this._parse(i,b)}_parse(i,c){function d(C,b,v){return v==="assert"?new wn(b,[C]):v==="coerce"?new Bn(b,[C]):C}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let C=i[0];if(typeof C!="string")return this.error(`Expression name must be a string, but found ${typeof C} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let b=this.registry[C];if(b){let v=b.parse(i,this);if(!v)return null;if(this.expectedType){let S=this.expectedType,L=v.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||L.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string")if(S.kind!=="padding"||L.kind!=="value"&&L.kind!=="number"&&L.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||L.kind!=="value"&&L.kind!=="array"){if(this.checkSubtype(S,L))return null}else v=d(v,S,c.typeAnnotation||"coerce");else v=d(v,S,c.typeAnnotation||"coerce");else v=d(v,S,c.typeAnnotation||"coerce");else v=d(v,S,c.typeAnnotation||"assert")}if(!(v instanceof Jn)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){let S=new pt;try{v=new Jn(v.type,v.evaluate(S))}catch(L){return this.error(L.message),null}}return v}return this.error(`Unknown expression "${C}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,c,d){let C=typeof i=="number"?this.path.concat(i):this.path,b=d?this.scope.concat(d):this.scope;return new At(this.registry,this._isConstant,C,c||null,b,this.errors)}error(i,...c){let d=`${this.key}${c.map(C=>`[${C}]`).join("")}`;this.errors.push(new Hi(d,i))}checkSubtype(i,c){let d=gt(i,c);return d&&this.error(d),d}}class St{constructor(i,c){this.type=c.type,this.bindings=[].concat(i),this.result=c}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(let c of this.bindings)i(c[1]);i(this.result)}static parse(i,c){if(i.length<4)return c.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);let d=[];for(let b=1;b<i.length-1;b+=2){let v=i[b];if(typeof v!="string")return c.error(`Expected string, but found ${typeof v} instead.`,b);if(/[^a-zA-Z0-9_]/.test(v))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);let S=c.parse(i[b+1],b+1);if(!S)return null;d.push([v,S])}let C=c.parse(i[i.length-1],i.length-1,c.expectedType,d);return C?new St(d,C):null}outputDefined(){return this.result.outputDefined()}}class _t{constructor(i,c){this.type=c.type,this.name=i,this.boundExpression=c}static parse(i,c){if(i.length!==2||typeof i[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");let d=i[1];return c.scope.has(d)?new _t(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class zt{constructor(i,c,d){this.type=i,this.index=c,this.input=d}static parse(i,c){if(i.length!==3)return c.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let d=c.parse(i[1],1,ne),C=c.parse(i[2],2,K(c.expectedType||$e));return d&&C?new zt(C.type.itemType,d,C):null}evaluate(i){let c=this.index.evaluate(i),d=this.input.evaluate(i);if(c<0)throw new $i(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new $i(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new $i(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class ee{constructor(i,c){this.type=Ve,this.needle=i,this.haystack=c}static parse(i,c){if(i.length!==3)return c.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let d=c.parse(i[1],1,$e),C=c.parse(i[2],2,$e);return d&&C?Ht(d.type,[Ve,ui,ne,Ei,$e])?new ee(d,C):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${z(d.type)} instead`):null}evaluate(i){let c=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!d)return!1;if(!Nt(c,["boolean","string","number","null"]))throw new $i(`Expected first argument to be of type boolean, string, number or null, but found ${z(Or(c))} instead.`);if(!Nt(d,["string","array"]))throw new $i(`Expected second argument to be of type array or string, but found ${z(Or(d))} instead.`);return d.indexOf(c)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class be{constructor(i,c,d){this.type=ne,this.needle=i,this.haystack=c,this.fromIndex=d}static parse(i,c){if(i.length<=2||i.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let d=c.parse(i[1],1,$e),C=c.parse(i[2],2,$e);if(!d||!C)return null;if(!Ht(d.type,[Ve,ui,ne,Ei,$e]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${z(d.type)} instead`);if(i.length===4){let b=c.parse(i[3],3,ne);return b?new be(d,C,b):null}return new be(d,C)}evaluate(i){let c=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!Nt(c,["boolean","string","number","null"]))throw new $i(`Expected first argument to be of type boolean, string, number or null, but found ${z(Or(c))} instead.`);let C;if(this.fromIndex&&(C=this.fromIndex.evaluate(i)),Nt(d,["string"])){let b=d.indexOf(c,C);return b===-1?-1:[...d.slice(0,b)].length}if(Nt(d,["array"]))return d.indexOf(c,C);throw new $i(`Expected second argument to be of type array or string, but found ${z(Or(d))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Ie{constructor(i,c,d,C,b,v){this.inputType=i,this.type=c,this.input=d,this.cases=C,this.outputs=b,this.otherwise=v}static parse(i,c){if(i.length<5)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return c.error("Expected an even number of arguments.");let d,C;c.expectedType&&c.expectedType.kind!=="value"&&(C=c.expectedType);let b={},v=[];for(let Q=2;Q<i.length-1;Q+=2){let Z=i[Q],N=i[Q+1];Array.isArray(Z)||(Z=[Z]);let O=c.concat(Q);if(Z.length===0)return O.error("Expected at least one branch label.");for(let nt of Z){if(typeof nt!="number"&&typeof nt!="string")return O.error("Branch labels must be numbers or strings.");if(typeof nt=="number"&&Math.abs(nt)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof nt=="number"&&Math.floor(nt)!==nt)return O.error("Numeric branch labels must be integer values.");if(d){if(O.checkSubtype(d,Or(nt)))return null}else d=Or(nt);if(b[String(nt)]!==void 0)return O.error("Branch labels must be unique.");b[String(nt)]=v.length}let q=c.parse(N,Q,C);if(!q)return null;C=C||q.type,v.push(q)}let S=c.parse(i[1],1,$e);if(!S)return null;let L=c.parse(i[i.length-1],i.length-1,C);return L?S.type.kind!=="value"&&c.concat(1).checkSubtype(d,S.type)?null:new Ie(d,C,S,b,v,L):null}evaluate(i){let c=this.input.evaluate(i);return(Or(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class pe{constructor(i,c,d){this.type=i,this.branches=c,this.otherwise=d}static parse(i,c){if(i.length<4)return c.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);let C=[];for(let v=1;v<i.length-1;v+=2){let S=c.parse(i[v],v,Ve);if(!S)return null;let L=c.parse(i[v+1],v+1,d);if(!L)return null;C.push([S,L]),d=d||L.type}let b=c.parse(i[i.length-1],i.length-1,d);if(!b)return null;if(!d)throw new Error("Can't infer output type");return new pe(d,C,b)}evaluate(i){for(let[c,d]of this.branches)if(c.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(let[c,d]of this.branches)i(c),i(d);i(this.otherwise)}outputDefined(){return this.branches.every(([i,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class $t{constructor(i,c,d,C){this.type=i,this.input=c,this.beginIndex=d,this.endIndex=C}static parse(i,c){if(i.length<=2||i.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let d=c.parse(i[1],1,$e),C=c.parse(i[2],2,ne);if(!d||!C)return null;if(!Ht(d.type,[K($e),ui,$e]))return c.error(`Expected first argument to be of type array or string, but found ${z(d.type)} instead`);if(i.length===4){let b=c.parse(i[3],3,ne);return b?new $t(d.type,d,C,b):null}return new $t(d.type,d,C)}evaluate(i){let c=this.input.evaluate(i),d=this.beginIndex.evaluate(i),C;if(this.endIndex&&(C=this.endIndex.evaluate(i)),Nt(c,["string"]))return[...c].slice(d,C).join("");if(Nt(c,["array"]))return c.slice(d,C);throw new $i(`Expected first argument to be of type array or string, but found ${z(Or(c))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function fe(A,i){let c=A.length-1,d,C,b=0,v=c,S=0;for(;b<=v;)if(S=Math.floor((b+v)/2),d=A[S],C=A[S+1],d<=i){if(S===c||i<C)return S;b=S+1}else{if(!(d>i))throw new $i("Input is not a number.");v=S-1}return 0}class Ce{constructor(i,c,d){this.type=i,this.input=c,this.labels=[],this.outputs=[];for(let[C,b]of d)this.labels.push(C),this.outputs.push(b)}static parse(i,c){if(i.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return c.error("Expected an even number of arguments.");let d=c.parse(i[1],1,ne);if(!d)return null;let C=[],b=null;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);for(let v=1;v<i.length;v+=2){let S=v===1?-1/0:i[v],L=i[v+1],Q=v,Z=v+1;if(typeof S!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(C.length&&C[C.length-1][0]>=S)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Q);let N=c.parse(L,Z,b);if(!N)return null;b=b||N.type,C.push([S,N])}return new Ce(b,d,C)}evaluate(i){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(i);let C=this.input.evaluate(i);if(C<=c[0])return d[0].evaluate(i);let b=c.length;return C>=c[b-1]?d[b-1].evaluate(i):d[fe(c,C)].evaluate(i)}eachChild(i){i(this.input);for(let c of this.outputs)i(c)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Te(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Li=ki;function ki(A,i,c,d){this.cx=3*A,this.bx=3*(c-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(d-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=i,this.p2x=c,this.p2y=d}ki.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,i){if(i===void 0&&(i=1e-6),A<0)return 0;if(A>1)return 1;for(var c=A,d=0;d<8;d++){var C=this.sampleCurveX(c)-A;if(Math.abs(C)<i)return c;var b=this.sampleCurveDerivativeX(c);if(Math.abs(b)<1e-6)break;c-=C/b}var v=0,S=1;for(c=A,d=0;d<20&&(C=this.sampleCurveX(c),!(Math.abs(C-A)<i));d++)A>C?v=c:S=c,c=.5*(S-v)+v;return c},solve:function(A,i){return this.sampleCurveY(this.solveCurveX(A,i))}};var Ze=Te(Li);function Fe(A,i,c){return A+c*(i-A)}function ii(A,i,c){return A.map((d,C)=>Fe(d,i[C],c))}let ai={number:Fe,color:function(A,i,c,d="rgb"){switch(d){case"rgb":{let[C,b,v,S]=ii(A.rgb,i.rgb,c);return new Fi(C,b,v,S,!1)}case"hcl":{let[C,b,v,S]=A.hcl,[L,Q,Z,N]=i.hcl,O,q;if(isNaN(C)||isNaN(L))isNaN(C)?isNaN(L)?O=NaN:(O=L,v!==1&&v!==0||(q=Q)):(O=C,Z!==1&&Z!==0||(q=b));else{let re=L-C;L>C&&re>180?re-=360:L<C&&C-L>180&&(re+=360),O=C+c*re}let[nt,lt,Bt,Gt]=function([re,Kt,Yt,ge]){return re=isNaN(re)?0:re*je,ur([Yt,Math.cos(re)*Kt,Math.sin(re)*Kt,ge])}([O,q??Fe(b,Q,c),Fe(v,Z,c),Fe(S,N,c)]);return new Fi(nt,lt,Bt,Gt,!1)}case"lab":{let[C,b,v,S]=ur(ii(A.lab,i.lab,c));return new Fi(C,b,v,S,!1)}}},array:ii,padding:function(A,i,c){return new br(ii(A.values,i.values,c))},variableAnchorOffsetCollection:function(A,i,c){let d=A.values,C=i.values;if(d.length!==C.length)throw new $i(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${i.toString()}`);let b=[];for(let v=0;v<d.length;v+=2){if(d[v]!==C[v])throw new $i(`Cannot interpolate values containing mismatched anchors. from[${v}]: ${d[v]}, to[${v}]: ${C[v]}`);b.push(d[v]);let[S,L]=d[v+1],[Q,Z]=C[v+1];b.push([Fe(S,Q,c),Fe(L,Z,c)])}return new dn(b)}};class wi{constructor(i,c,d,C,b){this.type=i,this.operator=c,this.interpolation=d,this.input=C,this.labels=[],this.outputs=[];for(let[v,S]of b)this.labels.push(v),this.outputs.push(S)}static interpolationFactor(i,c,d,C){let b=0;if(i.name==="exponential")b=ar(c,i.base,d,C);else if(i.name==="linear")b=ar(c,1,d,C);else if(i.name==="cubic-bezier"){let v=i.controlPoints;b=new Ze(v[0],v[1],v[2],v[3]).solve(ar(c,1,d,C))}return b}static parse(i,c){let[d,C,b,...v]=i;if(!Array.isArray(C)||C.length===0)return c.error("Expected an interpolation type expression.",1);if(C[0]==="linear")C={name:"linear"};else if(C[0]==="exponential"){let Q=C[1];if(typeof Q!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);C={name:"exponential",base:Q}}else{if(C[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(C[0])}`,1,0);{let Q=C.slice(1);if(Q.length!==4||Q.some(Z=>typeof Z!="number"||Z<0||Z>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);C={name:"cubic-bezier",controlPoints:Q}}}if(i.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(b=c.parse(b,2,ne),!b)return null;let S=[],L=null;d==="interpolate-hcl"||d==="interpolate-lab"?L=rr:c.expectedType&&c.expectedType.kind!=="value"&&(L=c.expectedType);for(let Q=0;Q<v.length;Q+=2){let Z=v[Q],N=v[Q+1],O=Q+3,q=Q+4;if(typeof Z!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(S.length&&S[S.length-1][0]>=Z)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);let nt=c.parse(N,q,L);if(!nt)return null;L=L||nt.type,S.push([Z,nt])}return Jt(L,ne)||Jt(L,rr)||Jt(L,_r)||Jt(L,It)||Jt(L,K(ne))?new wi(L,d,C,b,S):c.error(`Type ${z(L)} is not interpolatable.`)}evaluate(i){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(i);let C=this.input.evaluate(i);if(C<=c[0])return d[0].evaluate(i);let b=c.length;if(C>=c[b-1])return d[b-1].evaluate(i);let v=fe(c,C),S=wi.interpolationFactor(this.interpolation,C,c[v],c[v+1]),L=d[v].evaluate(i),Q=d[v+1].evaluate(i);switch(this.operator){case"interpolate":return ai[this.type.kind](L,Q,S);case"interpolate-hcl":return ai.color(L,Q,S,"hcl");case"interpolate-lab":return ai.color(L,Q,S,"lab")}}eachChild(i){i(this.input);for(let c of this.outputs)i(c)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ar(A,i,c,d){let C=d-c,b=A-c;return C===0?0:i===1?b/C:(Math.pow(i,b)-1)/(Math.pow(i,C)-1)}class si{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expectected at least one argument.");let d=null,C=c.expectedType;C&&C.kind!=="value"&&(d=C);let b=[];for(let S of i.slice(1)){let L=c.parse(S,1+b.length,d,void 0,{typeAnnotation:"omit"});if(!L)return null;d=d||L.type,b.push(L)}if(!d)throw new Error("No output type");let v=C&&b.some(S=>gt(C,S.type));return new si(v?$e:d,b)}evaluate(i){let c,d=null,C=0;for(let b of this.args)if(C++,d=b.evaluate(i),d&&d instanceof pn&&!d.available&&(c||(c=d.name),d=null,C===this.args.length&&(d=c)),d!==null)break;return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function vr(A,i){return A==="=="||A==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function nn(A,i,c,d){return d.compare(i,c)===0}function Br(A,i,c){let d=A!=="=="&&A!=="!=";return class kb{constructor(b,v,S){this.type=Ve,this.lhs=b,this.rhs=v,this.collator=S,this.hasUntypedArgument=b.type.kind==="value"||v.type.kind==="value"}static parse(b,v){if(b.length!==3&&b.length!==4)return v.error("Expected two or three arguments.");let S=b[0],L=v.parse(b[1],1,$e);if(!L)return null;if(!vr(S,L.type))return v.concat(1).error(`"${S}" comparisons are not supported for type '${z(L.type)}'.`);let Q=v.parse(b[2],2,$e);if(!Q)return null;if(!vr(S,Q.type))return v.concat(2).error(`"${S}" comparisons are not supported for type '${z(Q.type)}'.`);if(L.type.kind!==Q.type.kind&&L.type.kind!=="value"&&Q.type.kind!=="value")return v.error(`Cannot compare types '${z(L.type)}' and '${z(Q.type)}'.`);d&&(L.type.kind==="value"&&Q.type.kind!=="value"?L=new wn(Q.type,[L]):L.type.kind!=="value"&&Q.type.kind==="value"&&(Q=new wn(L.type,[Q])));let Z=null;if(b.length===4){if(L.type.kind!=="string"&&Q.type.kind!=="string"&&L.type.kind!=="value"&&Q.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(Z=v.parse(b[3],3,wr),!Z)return null}return new kb(L,Q,Z)}evaluate(b){let v=this.lhs.evaluate(b),S=this.rhs.evaluate(b);if(d&&this.hasUntypedArgument){let L=Or(v),Q=Or(S);if(L.kind!==Q.kind||L.kind!=="string"&&L.kind!=="number")throw new $i(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${L.kind}, ${Q.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){let L=Or(v),Q=Or(S);if(L.kind!=="string"||Q.kind!=="string")return i(b,v,S)}return this.collator?c(b,v,S,this.collator.evaluate(b)):i(b,v,S)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}let ms=Br("==",function(A,i,c){return i===c},nn),Rn=Br("!=",function(A,i,c){return i!==c},function(A,i,c,d){return!nn(0,i,c,d)}),wo=Br("<",function(A,i,c){return i<c},function(A,i,c,d){return d.compare(i,c)<0}),el=Br(">",function(A,i,c){return i>c},function(A,i,c,d){return d.compare(i,c)>0}),Fc=Br("<=",function(A,i,c){return i<=c},function(A,i,c,d){return d.compare(i,c)<=0}),Gl=Br(">=",function(A,i,c){return i>=c},function(A,i,c,d){return d.compare(i,c)>=0});class Fa{constructor(i,c,d){this.type=wr,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=c}static parse(i,c){if(i.length!==2)return c.error("Expected one argument.");let d=i[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");let C=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Ve);if(!C)return null;let b=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Ve);if(!b)return null;let v=null;return d.locale&&(v=c.parse(d.locale,1,ui),!v)?null:new Fa(C,b,v)}evaluate(i){return new rn(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class ka{constructor(i,c,d,C,b){this.type=ui,this.number=i,this.locale=c,this.currency=d,this.minFractionDigits=C,this.maxFractionDigits=b}static parse(i,c){if(i.length!==3)return c.error("Expected two arguments.");let d=c.parse(i[1],1,ne);if(!d)return null;let C=i[2];if(typeof C!="object"||Array.isArray(C))return c.error("NumberFormat options argument must be an object.");let b=null;if(C.locale&&(b=c.parse(C.locale,1,ui),!b))return null;let v=null;if(C.currency&&(v=c.parse(C.currency,1,ui),!v))return null;let S=null;if(C["min-fraction-digits"]&&(S=c.parse(C["min-fraction-digits"],1,ne),!S))return null;let L=null;return C["max-fraction-digits"]&&(L=c.parse(C["max-fraction-digits"],1,ne),!L)?null:new ka(d,b,v,S,L)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Bo{constructor(i){this.type=zi,this.sections=i}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");let d=i[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");let C=[],b=!1;for(let v=1;v<=i.length-1;++v){let S=i[v];if(b&&typeof S=="object"&&!Array.isArray(S)){b=!1;let L=null;if(S["font-scale"]&&(L=c.parse(S["font-scale"],1,ne),!L))return null;let Q=null;if(S["text-font"]&&(Q=c.parse(S["text-font"],1,K(ui)),!Q))return null;let Z=null;if(S["text-color"]&&(Z=c.parse(S["text-color"],1,rr),!Z))return null;let N=C[C.length-1];N.scale=L,N.font=Q,N.textColor=Z}else{let L=c.parse(i[v],1,$e);if(!L)return null;let Q=L.type.kind;if(Q!=="string"&&Q!=="value"&&Q!=="null"&&Q!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,C.push({content:L,scale:null,font:null,textColor:null})}}return new Bo(C)}evaluate(i){return new jr(this.sections.map(c=>{let d=c.content.evaluate(i);return Or(d)===nr?new Fr("",d,null,null,null):new Fr(is(d),null,c.scale?c.scale.evaluate(i):null,c.font?c.font.evaluate(i).join(","):null,c.textColor?c.textColor.evaluate(i):null)}))}eachChild(i){for(let c of this.sections)i(c.content),c.scale&&i(c.scale),c.font&&i(c.font),c.textColor&&i(c.textColor)}outputDefined(){return!1}}class _o{constructor(i){this.type=nr,this.input=i}static parse(i,c){if(i.length!==2)return c.error("Expected two arguments.");let d=c.parse(i[1],1,ui);return d?new _o(d):c.error("No image name provided.")}evaluate(i){let c=this.input.evaluate(i),d=pn.fromString(c);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(c)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}}class il{constructor(i){this.type=ne,this.input=i}static parse(i,c){if(i.length!==2)return c.error(`Expected 1 argument, but found ${i.length-1} instead.`);let d=c.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${z(d.type)} instead.`):new il(d):null}evaluate(i){let c=this.input.evaluate(i);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new $i(`Expected value to be of type string or array, but found ${z(Or(c))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}let Gn=8192;function rl(A,i){let c=(180+A[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,C=Math.pow(2,i.z);return[Math.round(c*C*Gn),Math.round(d*C*Gn)]}function pa(A,i){let c=Math.pow(2,i.z);return[(C=(A[0]/Gn+i.x)/c,360*C-180),(d=(A[1]/Gn+i.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,C}function xo(A,i){A[0]=Math.min(A[0],i[0]),A[1]=Math.min(A[1],i[1]),A[2]=Math.max(A[2],i[0]),A[3]=Math.max(A[3],i[1])}function ro(A,i){return!(A[0]<=i[0]||A[2]>=i[2]||A[1]<=i[1]||A[3]>=i[3])}function fr(A,i,c){let d=A[0]-i[0],C=A[1]-i[1],b=A[0]-c[0],v=A[1]-c[1];return d*v-b*C==0&&d*b<=0&&C*v<=0}function La(A,i,c,d){return(C=[d[0]-c[0],d[1]-c[1]])[0]*(b=[i[0]-A[0],i[1]-A[1]])[1]-C[1]*b[0]!=0&&!(!hA(A,i,c,d)||!hA(c,d,A,i));var C,b}function Jo(A,i,c){for(let d of c)for(let C=0;C<d.length-1;++C)if(La(A,i,d[C],d[C+1]))return!0;return!1}function Cs(A,i,c=!1){let d=!1;for(let S of i)for(let L=0;L<S.length-1;L++){if(fr(A,S[L],S[L+1]))return c;(b=S[L])[1]>(C=A)[1]!=(v=S[L+1])[1]>C[1]&&C[0]<(v[0]-b[0])*(C[1]-b[1])/(v[1]-b[1])+b[0]&&(d=!d)}var C,b,v;return d}function kc(A,i){for(let c of i)if(Cs(A,c))return!0;return!1}function Xo(A,i){for(let c of A)if(!Cs(c,i))return!1;for(let c=0;c<A.length-1;++c)if(Jo(A[c],A[c+1],i))return!1;return!0}function no(A,i){for(let c of i)if(Xo(A,c))return!0;return!1}function hA(A,i,c,d){let C=d[0]-c[0],b=d[1]-c[1],v=(A[0]-c[0])*b-C*(A[1]-c[1]),S=(i[0]-c[0])*b-C*(i[1]-c[1]);return v>0&&S<0||v<0&&S>0}function Yo(A,i,c){let d=[];for(let C=0;C<A.length;C++){let b=[];for(let v=0;v<A[C].length;v++){let S=rl(A[C][v],c);xo(i,S),b.push(S)}d.push(b)}return d}function Zl(A,i,c){let d=[];for(let C=0;C<A.length;C++){let b=Yo(A[C],i,c);d.push(b)}return d}function Ea(A,i,c,d){if(A[0]<c[0]||A[0]>c[2]){let C=.5*d,b=A[0]-c[0]>C?-d:c[0]-A[0]>C?d:0;b===0&&(b=A[0]-c[2]>C?-d:c[2]-A[0]>C?d:0),A[0]+=b}xo(i,A)}function Pl(A,i,c,d){let C=Math.pow(2,d.z)*Gn,b=[d.x*Gn,d.y*Gn],v=[];for(let S of A)for(let L of S){let Q=[L.x+b[0],L.y+b[1]];Ea(Q,i,c,C),v.push(Q)}return v}function gA(A,i,c,d){let C=Math.pow(2,d.z)*Gn,b=[d.x*Gn,d.y*Gn],v=[];for(let L of A){let Q=[];for(let Z of L){let N=[Z.x+b[0],Z.y+b[1]];xo(i,N),Q.push(N)}v.push(Q)}if(i[2]-i[0]<=C/2){(S=i)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(let L of v)for(let Q of L)Ea(Q,i,c,C)}var S;return v}class so{constructor(i,c){this.type=Ve,this.geojson=i,this.geometries=c}static parse(i,c){if(i.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(es(i[1])){let d=i[1];if(d.type==="FeatureCollection"){let C=[];for(let b of d.features){let{type:v,coordinates:S}=b.geometry;v==="Polygon"&&C.push(S),v==="MultiPolygon"&&C.push(...S)}if(C.length)return new so(d,{type:"MultiPolygon",coordinates:C})}else if(d.type==="Feature"){let C=d.geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new so(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new so(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(c,d){let C=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(d.type==="Polygon"){let S=Yo(d.coordinates,b,v),L=Pl(c.geometry(),C,b,v);if(!ro(C,b))return!1;for(let Q of L)if(!Cs(Q,S))return!1}if(d.type==="MultiPolygon"){let S=Zl(d.coordinates,b,v),L=Pl(c.geometry(),C,b,v);if(!ro(C,b))return!1;for(let Q of L)if(!kc(Q,S))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(c,d){let C=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(d.type==="Polygon"){let S=Yo(d.coordinates,b,v),L=gA(c.geometry(),C,b,v);if(!ro(C,b))return!1;for(let Q of L)if(!Xo(Q,S))return!1}if(d.type==="MultiPolygon"){let S=Zl(d.coordinates,b,v),L=gA(c.geometry(),C,b,v);if(!ro(C,b))return!1;for(let Q of L)if(!no(Q,S))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let nl=class{constructor(A=[],i=(c,d)=>c<d?-1:c>d?1:0){if(this.data=A,this.length=this.data.length,this.compare=i,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;let A=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),A}peek(){return this.data[0]}_up(A){let{data:i,compare:c}=this,d=i[A];for(;A>0;){let C=A-1>>1,b=i[C];if(c(d,b)>=0)break;i[A]=b,A=C}i[A]=d}_down(A){let{data:i,compare:c}=this,d=this.length>>1,C=i[A];for(;A<d;){let b=1+(A<<1),v=b+1;if(v<this.length&&c(i[v],i[b])<0&&(b=v),c(i[b],C)>=0)break;i[A]=i[b],A=b}i[A]=C}};function dA(A,i,c,d,C){pA(A,i,c,d||A.length-1,C||Hl)}function pA(A,i,c,d,C){for(;d>c;){if(d-c>600){var b=d-c+1,v=i-c+1,S=Math.log(b),L=.5*Math.exp(2*S/3),Q=.5*Math.sqrt(S*L*(b-L)/b)*(v-b/2<0?-1:1);pA(A,i,Math.max(c,Math.floor(i-v*L/b+Q)),Math.min(d,Math.floor(i+(b-v)*L/b+Q)),C)}var Z=A[i],N=c,O=d;for(jo(A,c,i),C(A[d],Z)>0&&jo(A,c,d);N<O;){for(jo(A,N,O),N++,O--;C(A[N],Z)<0;)N++;for(;C(A[O],Z)>0;)O--}C(A[c],Z)===0?jo(A,c,O):jo(A,++O,d),O<=i&&(c=O+1),i<=O&&(d=O-1)}}function jo(A,i,c){var d=A[i];A[i]=A[c],A[c]=d}function Hl(A,i){return A<i?-1:A>i?1:0}function fA(A,i){if(A.length<=1)return[A];let c=[],d,C;for(let b of A){let v=Ta(b);v!==0&&(b.area=Math.abs(v),C===void 0&&(C=v<0),C===v<0?(d&&c.push(d),d=[b]):d.push(b))}if(d&&c.push(d),i>1)for(let b=0;b<c.length;b++)c[b].length<=i||(dA(c[b],i,1,c[b].length-1,mA),c[b]=c[b].slice(0,i));return c}function mA(A,i){return i.area-A.area}function Ta(A){let i=0;for(let c,d,C=0,b=A.length,v=b-1;C<b;v=C++)c=A[C],d=A[v],i+=(d.x-c.x)*(c.y+d.y);return i}let CA=1/298.257223563,qo=CA*(2-CA),IA=Math.PI/180;class T{constructor(i){let c=6378.137*IA*1e3,d=Math.cos(i*IA),C=1/(1-qo*(1-d*d)),b=Math.sqrt(C);this.kx=c*b*d,this.ky=c*b*C*(1-qo)}distance(i,c){let d=this.wrap(i[0]-c[0])*this.kx,C=(i[1]-c[1])*this.ky;return Math.sqrt(d*d+C*C)}pointOnLine(i,c){let d,C,b,v,S=1/0;for(let L=0;L<i.length-1;L++){let Q=i[L][0],Z=i[L][1],N=this.wrap(i[L+1][0]-Q)*this.kx,O=(i[L+1][1]-Z)*this.ky,q=0;N===0&&O===0||(q=(this.wrap(c[0]-Q)*this.kx*N+(c[1]-Z)*this.ky*O)/(N*N+O*O),q>1?(Q=i[L+1][0],Z=i[L+1][1]):q>0&&(Q+=N/this.kx*q,Z+=O/this.ky*q)),N=this.wrap(c[0]-Q)*this.kx,O=(c[1]-Z)*this.ky;let nt=N*N+O*O;nt<S&&(S=nt,d=Q,C=Z,b=L,v=q)}return{point:[d,C],index:b,t:Math.max(0,Math.min(1,v))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function $(A,i){return i[0]-A[0]}function xt(A){return A[1]-A[0]+1}function Vt(A,i){return A[1]>=A[0]&&A[1]<i}function ae(A,i){if(A[0]>A[1])return[null,null];let c=xt(A);if(i){if(c===2)return[A,null];let C=Math.floor(c/2);return[[A[0],A[0]+C],[A[0]+C,A[1]]]}if(c===1)return[A,null];let d=Math.floor(c/2)-1;return[[A[0],A[0]+d],[A[0]+d+1,A[1]]]}function ye(A,i){if(!Vt(i,A.length))return[1/0,1/0,-1/0,-1/0];let c=[1/0,1/0,-1/0,-1/0];for(let d=i[0];d<=i[1];++d)xo(c,A[d]);return c}function Pe(A){let i=[1/0,1/0,-1/0,-1/0];for(let c of A)for(let d of c)xo(i,d);return i}function Ai(A){return A[0]!==-1/0&&A[1]!==-1/0&&A[2]!==1/0&&A[3]!==1/0}function Ri(A,i,c){if(!Ai(A)||!Ai(i))return NaN;let d=0,C=0;return A[2]<i[0]&&(d=i[0]-A[2]),A[0]>i[2]&&(d=A[0]-i[2]),A[1]>i[3]&&(C=A[1]-i[3]),A[3]<i[1]&&(C=i[1]-A[3]),c.distance([0,0],[d,C])}function Ki(A,i,c){let d=c.pointOnLine(i,A);return c.distance(A,d.point)}function tr(A,i,c,d,C){let b=Math.min(Ki(A,[c,d],C),Ki(i,[c,d],C)),v=Math.min(Ki(c,[A,i],C),Ki(d,[A,i],C));return Math.min(b,v)}function mr(A,i,c,d,C){if(!Vt(i,A.length)||!Vt(d,c.length))return 1/0;let b=1/0;for(let v=i[0];v<i[1];++v){let S=A[v],L=A[v+1];for(let Q=d[0];Q<d[1];++Q){let Z=c[Q],N=c[Q+1];if(La(S,L,Z,N))return 0;b=Math.min(b,tr(S,L,Z,N,C))}}return b}function ji(A,i,c,d,C){if(!Vt(i,A.length)||!Vt(d,c.length))return NaN;let b=1/0;for(let v=i[0];v<=i[1];++v)for(let S=d[0];S<=d[1];++S)if(b=Math.min(b,C.distance(A[v],c[S])),b===0)return b;return b}function an(A,i,c){if(Cs(A,i,!0))return 0;let d=1/0;for(let C of i){let b=C[0],v=C[C.length-1];if(b!==v&&(d=Math.min(d,Ki(A,[v,b],c)),d===0))return d;let S=c.pointOnLine(C,A);if(d=Math.min(d,c.distance(A,S.point)),d===0)return d}return d}function Bi(A,i,c,d){if(!Vt(i,A.length))return NaN;for(let b=i[0];b<=i[1];++b)if(Cs(A[b],c,!0))return 0;let C=1/0;for(let b=i[0];b<i[1];++b){let v=A[b],S=A[b+1];for(let L of c)for(let Q=0,Z=L.length,N=Z-1;Q<Z;N=Q++){let O=L[N],q=L[Q];if(La(v,S,O,q))return 0;C=Math.min(C,tr(v,S,O,q,d))}}return C}function fn(A,i){for(let c of A)for(let d of c)if(Cs(d,i,!0))return!0;return!1}function qi(A,i,c,d=1/0){let C=Pe(A),b=Pe(i);if(d!==1/0&&Ri(C,b,c)>=d)return d;if(ro(C,b)){if(fn(A,i))return 0}else if(fn(i,A))return 0;let v=1/0;for(let S of A)for(let L=0,Q=S.length,Z=Q-1;L<Q;Z=L++){let N=S[Z],O=S[L];for(let q of i)for(let nt=0,lt=q.length,Bt=lt-1;nt<lt;Bt=nt++){let Gt=q[Bt],re=q[nt];if(La(N,O,Gt,re))return 0;v=Math.min(v,tr(N,O,Gt,re,c))}}return v}function Ar(A,i,c,d,C,b){if(!b)return;let v=Ri(ye(d,b),C,c);v<i&&A.push([v,b,[0,0]])}function Cn(A,i,c,d,C,b,v){if(!b||!v)return;let S=Ri(ye(d,b),ye(C,v),c);S<i&&A.push([S,b,v])}function Is(A,i,c,d,C=1/0){let b=Math.min(d.distance(A[0],c[0][0]),C);if(b===0)return b;let v=new nl([[0,[0,A.length-1],[0,0]]],$),S=Pe(c);for(;v.length>0;){let L=v.pop();if(L[0]>=b)continue;let Q=L[1],Z=i?50:100;if(xt(Q)<=Z){if(!Vt(Q,A.length))return NaN;if(i){let N=Bi(A,Q,c,d);if(isNaN(N)||N===0)return N;b=Math.min(b,N)}else for(let N=Q[0];N<=Q[1];++N){let O=an(A[N],c,d);if(b=Math.min(b,O),b===0)return 0}}else{let N=ae(Q,i);Ar(v,b,d,A,S,N[0]),Ar(v,b,d,A,S,N[1])}}return b}function fa(A,i,c,d,C,b=1/0){let v=Math.min(b,C.distance(A[0],c[0]));if(v===0)return v;let S=new nl([[0,[0,A.length-1],[0,c.length-1]]],$);for(;S.length>0;){let L=S.pop();if(L[0]>=v)continue;let Q=L[1],Z=L[2],N=i?50:100,O=d?50:100;if(xt(Q)<=N&&xt(Z)<=O){if(!Vt(Q,A.length)&&Vt(Z,c.length))return NaN;let q;if(i&&d)q=mr(A,Q,c,Z,C),v=Math.min(v,q);else if(i&&!d){let nt=A.slice(Q[0],Q[1]+1);for(let lt=Z[0];lt<=Z[1];++lt)if(q=Ki(c[lt],nt,C),v=Math.min(v,q),v===0)return v}else if(!i&&d){let nt=c.slice(Z[0],Z[1]+1);for(let lt=Q[0];lt<=Q[1];++lt)if(q=Ki(A[lt],nt,C),v=Math.min(v,q),v===0)return v}else q=ji(A,Q,c,Z,C),v=Math.min(v,q)}else{let q=ae(Q,i),nt=ae(Z,d);Cn(S,v,C,A,c,q[0],nt[0]),Cn(S,v,C,A,c,q[0],nt[1]),Cn(S,v,C,A,c,q[1],nt[0]),Cn(S,v,C,A,c,q[1],nt[1])}}return v}function Ua(A){return A.type==="MultiPolygon"?A.coordinates.map(i=>({type:"Polygon",coordinates:i})):A.type==="MultiLineString"?A.coordinates.map(i=>({type:"LineString",coordinates:i})):A.type==="MultiPoint"?A.coordinates.map(i=>({type:"Point",coordinates:i})):[A]}class oo{constructor(i,c){this.type=ne,this.geojson=i,this.geometries=c}static parse(i,c){if(i.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(es(i[1])){let d=i[1];if(d.type==="FeatureCollection")return new oo(d,d.features.map(C=>Ua(C.geometry)).flat());if(d.type==="Feature")return new oo(d,Ua(d.geometry));if("type"in d&&"coordinates"in d)return new oo(d,Ua(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(c,d){let C=c.geometry(),b=C.flat().map(L=>pa([L.x,L.y],c.canonical));if(C.length===0)return NaN;let v=new T(b[0][1]),S=1/0;for(let L of d){switch(L.type){case"Point":S=Math.min(S,fa(b,!1,[L.coordinates],!1,v,S));break;case"LineString":S=Math.min(S,fa(b,!1,L.coordinates,!0,v,S));break;case"Polygon":S=Math.min(S,Is(b,!1,L.coordinates,v,S))}if(S===0)return S}return S}(i,this.geometries);if(i.geometryType()==="LineString")return function(c,d){let C=c.geometry(),b=C.flat().map(L=>pa([L.x,L.y],c.canonical));if(C.length===0)return NaN;let v=new T(b[0][1]),S=1/0;for(let L of d){switch(L.type){case"Point":S=Math.min(S,fa(b,!0,[L.coordinates],!1,v,S));break;case"LineString":S=Math.min(S,fa(b,!0,L.coordinates,!0,v,S));break;case"Polygon":S=Math.min(S,Is(b,!0,L.coordinates,v,S))}if(S===0)return S}return S}(i,this.geometries);if(i.geometryType()==="Polygon")return function(c,d){let C=c.geometry();if(C.length===0||C[0].length===0)return NaN;let b=fA(C,0).map(L=>L.map(Q=>Q.map(Z=>pa([Z.x,Z.y],c.canonical)))),v=new T(b[0][0][0][1]),S=1/0;for(let L of d)for(let Q of b){switch(L.type){case"Point":S=Math.min(S,Is([L.coordinates],!1,Q,v,S));break;case"LineString":S=Math.min(S,Is(L.coordinates,!0,Q,v,S));break;case"Polygon":S=Math.min(S,qi(Q,L.coordinates,v,S))}if(S===0)return S}return S}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let ao={"==":ms,"!=":Rn,">":el,"<":wo,">=":Gl,"<=":Fc,array:wn,at:zt,boolean:wn,case:pe,coalesce:si,collator:Fa,format:Bo,image:_o,in:ee,"index-of":be,interpolate:wi,"interpolate-hcl":wi,"interpolate-lab":wi,length:il,let:St,literal:Jn,match:Ie,number:wn,"number-format":ka,object:wn,slice:$t,step:Ce,string:wn,"to-boolean":Bn,"to-color":Bn,"to-number":Bn,"to-string":Bn,var:_t,within:so,distance:oo};class Zn{constructor(i,c,d,C){this.name=i,this.type=c,this._evaluate=d,this.args=C}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,c){let d=i[0],C=Zn.definitions[d];if(!C)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);let b=Array.isArray(C)?C[0]:C.type,v=Array.isArray(C)?[[C[1],C[2]]]:C.overloads,S=v.filter(([Q])=>!Array.isArray(Q)||Q.length===i.length-1),L=null;for(let[Q,Z]of S){L=new At(c.registry,So,c.path,null,c.scope);let N=[],O=!1;for(let q=1;q<i.length;q++){let nt=i[q],lt=Array.isArray(Q)?Q[q-1]:Q.type,Bt=L.parse(nt,1+N.length,lt);if(!Bt){O=!0;break}N.push(Bt)}if(!O)if(Array.isArray(Q)&&Q.length!==N.length)L.error(`Expected ${Q.length} arguments, but found ${N.length} instead.`);else{for(let q=0;q<N.length;q++){let nt=Array.isArray(Q)?Q[q]:Q.type,lt=N[q];L.concat(q+1).checkSubtype(nt,lt.type)}if(L.errors.length===0)return new Zn(d,b,Z,N)}}if(S.length===1)c.errors.push(...L.errors);else{let Q=(S.length?S:v).map(([N])=>{return O=N,Array.isArray(O)?`(${O.map(z).join(", ")})`:`(${z(O.type)}...)`;var O}).join(" | "),Z=[];for(let N=1;N<i.length;N++){let O=c.parse(i[N],1+Z.length);if(!O)return null;Z.push(z(O.type))}c.error(`Expected arguments of type ${Q}, but found (${Z.join(", ")}) instead.`)}return null}static register(i,c){Zn.definitions=c;for(let d in c)i[d]=Zn}}function Qa(A,[i,c,d,C]){i=i.evaluate(A),c=c.evaluate(A),d=d.evaluate(A);let b=C?C.evaluate(A):1,v=vo(i,c,d,b);if(v)throw new $i(v);return new Fi(i/255,c/255,d/255,b,!1)}function ma(A,i){return A in i}function Pn(A,i){let c=i[A];return c===void 0?null:c}function Ls(A){return{type:A}}function So(A){if(A instanceof _t)return So(A.boundExpression);if(A instanceof Zn&&A.name==="error"||A instanceof Fa||A instanceof so||A instanceof oo)return!1;let i=A instanceof Bn||A instanceof wn,c=!0;return A.eachChild(d=>{c=i?c&&So(d):c&&d instanceof Jn}),!!c&&Fo(A)&&In(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fo(A){if(A instanceof Zn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof so||A instanceof oo)return!1;let i=!0;return A.eachChild(c=>{i&&!Fo(c)&&(i=!1)}),i}function ko(A){if(A instanceof Zn&&A.name==="feature-state")return!1;let i=!0;return A.eachChild(c=>{i&&!ko(c)&&(i=!1)}),i}function In(A,i){if(A instanceof Zn&&i.indexOf(A.name)>=0)return!1;let c=!0;return A.eachChild(d=>{c&&!In(d,i)&&(c=!1)}),c}function yA(A){return{result:"success",value:A}}function Lo(A){return{result:"error",value:A}}function $o(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Es(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Ra(A){return!!A.expression&&A.expression.interpolated}function gr(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function bA(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Ca(A){return A}function ys(A,i){let c=i.type==="color",d=A.stops&&typeof A.stops[0][0]=="object",C=d||!(d||A.property!==void 0),b=A.type||(Ra(i)?"exponential":"interval");if(c||i.type==="padding"){let Z=c?Fi.parse:br.parse;(A=Zi({},A)).stops&&(A.stops=A.stops.map(N=>[N[0],Z(N[1])])),A.default=Z(A.default?A.default:i.default)}if(A.colorSpace&&(v=A.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var v;let S,L,Q;if(b==="exponential")S=Eo;else if(b==="interval")S=bs;else if(b==="categorical"){S=ta,L=Object.create(null);for(let Z of A.stops)L[Z[0]]=Z[1];Q=typeof A.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);S=Ga}if(d){let Z={},N=[];for(let nt=0;nt<A.stops.length;nt++){let lt=A.stops[nt],Bt=lt[0].zoom;Z[Bt]===void 0&&(Z[Bt]={zoom:Bt,type:A.type,property:A.property,default:A.default,stops:[]},N.push(Bt)),Z[Bt].stops.push([lt[0].value,lt[1]])}let O=[];for(let nt of N)O.push([Z[nt].zoom,ys(Z[nt],i)]);let q={name:"linear"};return{kind:"composite",interpolationType:q,interpolationFactor:wi.interpolationFactor.bind(void 0,q),zoomStops:O.map(nt=>nt[0]),evaluate:({zoom:nt},lt)=>Eo({stops:O,base:A.base},i,nt).evaluate(nt,lt)}}if(C){let Z=b==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:Z,interpolationFactor:wi.interpolationFactor.bind(void 0,Z),zoomStops:A.stops.map(N=>N[0]),evaluate:({zoom:N})=>S(A,i,N,L,Q)}}return{kind:"source",evaluate(Z,N){let O=N&&N.properties?N.properties[A.property]:void 0;return O===void 0?Hn(A.default,i.default):S(A,i,O,L,Q)}}}function Hn(A,i,c){return A!==void 0?A:i!==void 0?i:c!==void 0?c:void 0}function ta(A,i,c,d,C){return Hn(typeof c===C?d[c]:void 0,A.default,i.default)}function bs(A,i,c){if(gr(c)!=="number")return Hn(A.default,i.default);let d=A.stops.length;if(d===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[d-1][0])return A.stops[d-1][1];let C=fe(A.stops.map(b=>b[0]),c);return A.stops[C][1]}function Eo(A,i,c){let d=A.base!==void 0?A.base:1;if(gr(c)!=="number")return Hn(A.default,i.default);let C=A.stops.length;if(C===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[C-1][0])return A.stops[C-1][1];let b=fe(A.stops.map(Z=>Z[0]),c),v=function(Z,N,O,q){let nt=q-O,lt=Z-O;return nt===0?0:N===1?lt/nt:(Math.pow(N,lt)-1)/(Math.pow(N,nt)-1)}(c,d,A.stops[b][0],A.stops[b+1][0]),S=A.stops[b][1],L=A.stops[b+1][1],Q=ai[i.type]||Ca;return typeof S.evaluate=="function"?{evaluate(...Z){let N=S.evaluate.apply(void 0,Z),O=L.evaluate.apply(void 0,Z);if(N!==void 0&&O!==void 0)return Q(N,O,v,A.colorSpace)}}:Q(S,L,v,A.colorSpace)}function Ga(A,i,c){switch(i.type){case"color":c=Fi.parse(c);break;case"formatted":c=jr.fromString(c.toString());break;case"resolvedImage":c=pn.fromString(c.toString());break;case"padding":c=br.parse(c);break;default:gr(c)===i.type||i.type==="enum"&&i.values[c]||(c=void 0)}return Hn(c,A.default,i.default)}Zn.register(ao,{error:[{kind:"error"},[ui],(A,[i])=>{throw new $i(i.evaluate(A))}],typeof:[ui,[$e],(A,[i])=>z(Or(i.evaluate(A)))],"to-rgba":[K(ne,4),[rr],(A,[i])=>{let[c,d,C,b]=i.evaluate(A).rgb;return[255*c,255*d,255*C,b]}],rgb:[rr,[ne,ne,ne],Qa],rgba:[rr,[ne,ne,ne,ne],Qa],has:{type:Ve,overloads:[[[ui],(A,[i])=>ma(i.evaluate(A),A.properties())],[[ui,Ni],(A,[i,c])=>ma(i.evaluate(A),c.evaluate(A))]]},get:{type:$e,overloads:[[[ui],(A,[i])=>Pn(i.evaluate(A),A.properties())],[[ui,Ni],(A,[i,c])=>Pn(i.evaluate(A),c.evaluate(A))]]},"feature-state":[$e,[ui],(A,[i])=>Pn(i.evaluate(A),A.featureState||{})],properties:[Ni,[],A=>A.properties()],"geometry-type":[ui,[],A=>A.geometryType()],id:[$e,[],A=>A.id()],zoom:[ne,[],A=>A.globals.zoom],"heatmap-density":[ne,[],A=>A.globals.heatmapDensity||0],"line-progress":[ne,[],A=>A.globals.lineProgress||0],accumulated:[$e,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[ne,Ls(ne),(A,i)=>{let c=0;for(let d of i)c+=d.evaluate(A);return c}],"*":[ne,Ls(ne),(A,i)=>{let c=1;for(let d of i)c*=d.evaluate(A);return c}],"-":{type:ne,overloads:[[[ne,ne],(A,[i,c])=>i.evaluate(A)-c.evaluate(A)],[[ne],(A,[i])=>-i.evaluate(A)]]},"/":[ne,[ne,ne],(A,[i,c])=>i.evaluate(A)/c.evaluate(A)],"%":[ne,[ne,ne],(A,[i,c])=>i.evaluate(A)%c.evaluate(A)],ln2:[ne,[],()=>Math.LN2],pi:[ne,[],()=>Math.PI],e:[ne,[],()=>Math.E],"^":[ne,[ne,ne],(A,[i,c])=>Math.pow(i.evaluate(A),c.evaluate(A))],sqrt:[ne,[ne],(A,[i])=>Math.sqrt(i.evaluate(A))],log10:[ne,[ne],(A,[i])=>Math.log(i.evaluate(A))/Math.LN10],ln:[ne,[ne],(A,[i])=>Math.log(i.evaluate(A))],log2:[ne,[ne],(A,[i])=>Math.log(i.evaluate(A))/Math.LN2],sin:[ne,[ne],(A,[i])=>Math.sin(i.evaluate(A))],cos:[ne,[ne],(A,[i])=>Math.cos(i.evaluate(A))],tan:[ne,[ne],(A,[i])=>Math.tan(i.evaluate(A))],asin:[ne,[ne],(A,[i])=>Math.asin(i.evaluate(A))],acos:[ne,[ne],(A,[i])=>Math.acos(i.evaluate(A))],atan:[ne,[ne],(A,[i])=>Math.atan(i.evaluate(A))],min:[ne,Ls(ne),(A,i)=>Math.min(...i.map(c=>c.evaluate(A)))],max:[ne,Ls(ne),(A,i)=>Math.max(...i.map(c=>c.evaluate(A)))],abs:[ne,[ne],(A,[i])=>Math.abs(i.evaluate(A))],round:[ne,[ne],(A,[i])=>{let c=i.evaluate(A);return c<0?-Math.round(-c):Math.round(c)}],floor:[ne,[ne],(A,[i])=>Math.floor(i.evaluate(A))],ceil:[ne,[ne],(A,[i])=>Math.ceil(i.evaluate(A))],"filter-==":[Ve,[ui,$e],(A,[i,c])=>A.properties()[i.value]===c.value],"filter-id-==":[Ve,[$e],(A,[i])=>A.id()===i.value],"filter-type-==":[Ve,[ui],(A,[i])=>A.geometryType()===i.value],"filter-<":[Ve,[ui,$e],(A,[i,c])=>{let d=A.properties()[i.value],C=c.value;return typeof d==typeof C&&d<C}],"filter-id-<":[Ve,[$e],(A,[i])=>{let c=A.id(),d=i.value;return typeof c==typeof d&&c<d}],"filter->":[Ve,[ui,$e],(A,[i,c])=>{let d=A.properties()[i.value],C=c.value;return typeof d==typeof C&&d>C}],"filter-id->":[Ve,[$e],(A,[i])=>{let c=A.id(),d=i.value;return typeof c==typeof d&&c>d}],"filter-<=":[Ve,[ui,$e],(A,[i,c])=>{let d=A.properties()[i.value],C=c.value;return typeof d==typeof C&&d<=C}],"filter-id-<=":[Ve,[$e],(A,[i])=>{let c=A.id(),d=i.value;return typeof c==typeof d&&c<=d}],"filter->=":[Ve,[ui,$e],(A,[i,c])=>{let d=A.properties()[i.value],C=c.value;return typeof d==typeof C&&d>=C}],"filter-id->=":[Ve,[$e],(A,[i])=>{let c=A.id(),d=i.value;return typeof c==typeof d&&c>=d}],"filter-has":[Ve,[$e],(A,[i])=>i.value in A.properties()],"filter-has-id":[Ve,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[Ve,[K(ui)],(A,[i])=>i.value.indexOf(A.geometryType())>=0],"filter-id-in":[Ve,[K($e)],(A,[i])=>i.value.indexOf(A.id())>=0],"filter-in-small":[Ve,[ui,K($e)],(A,[i,c])=>c.value.indexOf(A.properties()[i.value])>=0],"filter-in-large":[Ve,[ui,K($e)],(A,[i,c])=>function(d,C,b,v){for(;b<=v;){let S=b+v>>1;if(C[S]===d)return!0;C[S]>d?v=S-1:b=S+1}return!1}(A.properties()[i.value],c.value,0,c.value.length-1)],all:{type:Ve,overloads:[[[Ve,Ve],(A,[i,c])=>i.evaluate(A)&&c.evaluate(A)],[Ls(Ve),(A,i)=>{for(let c of i)if(!c.evaluate(A))return!1;return!0}]]},any:{type:Ve,overloads:[[[Ve,Ve],(A,[i,c])=>i.evaluate(A)||c.evaluate(A)],[Ls(Ve),(A,i)=>{for(let c of i)if(c.evaluate(A))return!0;return!1}]]},"!":[Ve,[Ve],(A,[i])=>!i.evaluate(A)],"is-supported-script":[Ve,[ui],(A,[i])=>{let c=A.globals&&A.globals.isSupportedScript;return!c||c(i.evaluate(A))}],upcase:[ui,[ui],(A,[i])=>i.evaluate(A).toUpperCase()],downcase:[ui,[ui],(A,[i])=>i.evaluate(A).toLowerCase()],concat:[ui,Ls($e),(A,i)=>i.map(c=>is(c.evaluate(A))).join("")],"resolved-locale":[ui,[wr],(A,[i])=>i.evaluate(A).resolvedLocale()]});class rs{constructor(i,c){var d;this.expression=i,this._warningHistory={},this._evaluator=new pt,this._defaultValue=c?(d=c).type==="color"&&bA(d.default)?new Fi(0,0,0,0):d.type==="color"?Fi.parse(d.default)||null:d.type==="padding"?br.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?dn.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(i,c,d,C,b,v){return this._evaluator.globals=i,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=C,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(i,c,d,C,b,v){this._evaluator.globals=i,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=C,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=v||null;try{let S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new $i(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function ea(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in ao}function To(A,i){let c=new At(ao,So,[],i?function(C){let b={color:rr,string:ui,number:ne,enum:ui,boolean:Ve,formatted:zi,padding:_r,resolvedImage:nr,variableAnchorOffsetCollection:It};return C.type==="array"?K(b[C.value]||$e,C.length):b[C.type]}(i):void 0),d=c.parse(A,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?yA(new rs(d,i)):Lo(c.errors)}class vs{constructor(i,c){this.kind=i,this._styleExpression=c,this.isStateDependent=i!=="constant"&&!ko(c.expression)}evaluateWithoutErrorHandling(i,c,d,C,b,v){return this._styleExpression.evaluateWithoutErrorHandling(i,c,d,C,b,v)}evaluate(i,c,d,C,b,v){return this._styleExpression.evaluate(i,c,d,C,b,v)}}class Mn{constructor(i,c,d,C){this.kind=i,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=i!=="camera"&&!ko(c.expression),this.interpolationType=C}evaluateWithoutErrorHandling(i,c,d,C,b,v){return this._styleExpression.evaluateWithoutErrorHandling(i,c,d,C,b,v)}evaluate(i,c,d,C,b,v){return this._styleExpression.evaluate(i,c,d,C,b,v)}interpolationFactor(i,c,d){return this.interpolationType?wi.interpolationFactor(this.interpolationType,i,c,d):0}}function Ao(A,i){let c=To(A,i);if(c.result==="error")return c;let d=c.value.expression,C=Fo(d);if(!C&&!$o(i))return Lo([new Hi("","data expressions not supported")]);let b=In(d,["zoom"]);if(!b&&!Es(i))return Lo([new Hi("","zoom expressions not supported")]);let v=Uo(d);return v||b?v instanceof Hi?Lo([v]):v instanceof wi&&!Ra(i)?Lo([new Hi("",'"interpolate" expressions cannot be used with this property')]):yA(v?new Mn(C?"camera":"composite",c.value,v.labels,v instanceof wi?v.interpolation:void 0):new vs(C?"constant":"source",c.value)):Lo([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ts{constructor(i,c){this._parameters=i,this._specification=c,Zi(this,ys(this._parameters,this._specification))}static deserialize(i){return new Ts(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Uo(A){let i=null;if(A instanceof St)i=Uo(A.result);else if(A instanceof si){for(let c of A.args)if(i=Uo(c),i)break}else(A instanceof Ce||A instanceof wi)&&A.input instanceof Zn&&A.input.name==="zoom"&&(i=A);return i instanceof Hi||A.eachChild(c=>{let d=Uo(c);d instanceof Hi?i=d:!i&&d?i=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Qo(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(let i of A.slice(1))if(!Qo(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}let lo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Za(A){if(A==null)return{filter:()=>!0,needGeometry:!1};Qo(A)||(A=xr(A));let i=To(A,lo);if(i.result==="error")throw new Error(i.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,C)=>i.value.evaluate(c,d,{},C),needGeometry:Ro(A)}}function Us(A,i){return A<i?-1:A>i?1:0}function Ro(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let i=1;i<A.length;i++)if(Ro(A[i]))return!0;return!1}function xr(A){if(!A)return!0;let i=A[0];return A.length<=1?i!=="any":i==="=="?kr(A[1],A[2],"=="):i==="!="?zr(kr(A[1],A[2],"==")):i==="<"||i===">"||i==="<="||i===">="?kr(A[1],A[2],i):i==="any"?(c=A.slice(1),["any"].concat(c.map(xr))):i==="all"?["all"].concat(A.slice(1).map(xr)):i==="none"?["all"].concat(A.slice(1).map(xr).map(zr)):i==="in"?Vr(A[1],A.slice(2)):i==="!in"?zr(Vr(A[1],A.slice(2))):i==="has"?qr(A[1]):i!=="!has"||zr(qr(A[1]));var c}function kr(A,i,c){switch(A){case"$type":return[`filter-type-${c}`,i];case"$id":return[`filter-id-${c}`,i];default:return[`filter-${c}`,A,i]}}function Vr(A,i){if(i.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(c=>typeof c!=typeof i[0])?["filter-in-large",A,["literal",i.sort(Us)]]:["filter-in-small",A,["literal",i]]}}function qr(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function zr(A){return["!",A]}function ns(A){let i=typeof A;if(i==="number"||i==="boolean"||i==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let C="[";for(let b of A)C+=`${ns(b)},`;return`${C}]`}let c=Object.keys(A).sort(),d="{";for(let C=0;C<c.length;C++)d+=`${JSON.stringify(c[C])}:${ns(A[c[C]])},`;return`${d}}`}function Pa(A){let i="";for(let c of de)i+=`/${ns(A[c])}`;return i}function sl(A){let i=A.value;return i?[new he(A.key,i,"constants have been deprecated as of v8")]:[]}function $r(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Qs(A){if(Array.isArray(A))return A.map(Qs);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){let i={};for(let c in A)i[c]=Qs(A[c]);return i}return $r(A)}function ss(A){let i=A.key,c=A.value,d=A.valueSpec||{},C=A.objectElementValidators||{},b=A.style,v=A.styleSpec,S=A.validateSpec,L=[],Q=gr(c);if(Q!=="object")return[new he(i,c,`object expected, ${Q} found`)];for(let Z in c){let N=Z.split(".")[0],O=d[N]||d["*"],q;if(C[N])q=C[N];else if(d[N])q=S;else if(C["*"])q=C["*"];else{if(!d["*"]){L.push(new he(i,c[Z],`unknown property "${Z}"`));continue}q=S}L=L.concat(q({key:(i&&`${i}.`)+Z,value:c[Z],valueSpec:O,style:b,styleSpec:v,object:c,objectKey:Z,validateSpec:S},c))}for(let Z in d)C[Z]||d[Z].required&&d[Z].default===void 0&&c[Z]===void 0&&L.push(new he(i,c,`missing required property "${Z}"`));return L}function vA(A){let i=A.value,c=A.valueSpec,d=A.style,C=A.styleSpec,b=A.key,v=A.arrayElementValidator||A.validateSpec;if(gr(i)!=="array")return[new he(b,i,`array expected, ${gr(i)} found`)];if(c.length&&i.length!==c.length)return[new he(b,i,`array length ${c.length} expected, length ${i.length} found`)];if(c["min-length"]&&i.length<c["min-length"])return[new he(b,i,`array length at least ${c["min-length"]} expected, length ${i.length} found`)];let S={type:c.value,values:c.values};C.$version<7&&(S.function=c.function),gr(c.value)==="object"&&(S=c.value);let L=[];for(let Q=0;Q<i.length;Q++)L=L.concat(v({array:i,arrayIndex:Q,value:i[Q],valueSpec:S,validateSpec:A.validateSpec,style:d,styleSpec:C,key:`${b}[${Q}]`}));return L}function Ml(A){let i=A.key,c=A.value,d=A.valueSpec,C=gr(c);return C==="number"&&c!=c&&(C="NaN"),C!=="number"?[new he(i,c,`number expected, ${C} found`)]:"minimum"in d&&c<d.minimum?[new he(i,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new he(i,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function ol(A){let i=A.valueSpec,c=$r(A.value.type),d,C,b,v={},S=c!=="categorical"&&A.value.property===void 0,L=!S,Q=gr(A.value.stops)==="array"&&gr(A.value.stops[0])==="array"&&gr(A.value.stops[0][0])==="object",Z=ss({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(q){if(c==="identity")return[new he(q.key,q.value,'identity function may not have a "stops" property')];let nt=[],lt=q.value;return nt=nt.concat(vA({key:q.key,value:lt,valueSpec:q.valueSpec,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec,arrayElementValidator:N})),gr(lt)==="array"&&lt.length===0&&nt.push(new he(q.key,lt,"array must have at least one stop")),nt},default:function(q){return q.validateSpec({key:q.key,value:q.value,valueSpec:i,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec})}}});return c==="identity"&&S&&Z.push(new he(A.key,A.value,'missing required property "property"')),c==="identity"||A.value.stops||Z.push(new he(A.key,A.value,'missing required property "stops"')),c==="exponential"&&A.valueSpec.expression&&!Ra(A.valueSpec)&&Z.push(new he(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(L&&!$o(A.valueSpec)?Z.push(new he(A.key,A.value,"property functions not supported")):S&&!Es(A.valueSpec)&&Z.push(new he(A.key,A.value,"zoom functions not supported"))),c!=="categorical"&&!Q||A.value.property!==void 0||Z.push(new he(A.key,A.value,'"property" property is required')),Z;function N(q){let nt=[],lt=q.value,Bt=q.key;if(gr(lt)!=="array")return[new he(Bt,lt,`array expected, ${gr(lt)} found`)];if(lt.length!==2)return[new he(Bt,lt,`array length 2 expected, length ${lt.length} found`)];if(Q){if(gr(lt[0])!=="object")return[new he(Bt,lt,`object expected, ${gr(lt[0])} found`)];if(lt[0].zoom===void 0)return[new he(Bt,lt,"object stop key must have zoom")];if(lt[0].value===void 0)return[new he(Bt,lt,"object stop key must have value")];if(b&&b>$r(lt[0].zoom))return[new he(Bt,lt[0].zoom,"stop zoom values must appear in ascending order")];$r(lt[0].zoom)!==b&&(b=$r(lt[0].zoom),C=void 0,v={}),nt=nt.concat(ss({key:`${Bt}[0]`,value:lt[0],valueSpec:{zoom:{}},validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec,objectElementValidators:{zoom:Ml,value:O}}))}else nt=nt.concat(O({key:`${Bt}[0]`,value:lt[0],valueSpec:{},validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec},lt));return ea(Qs(lt[1]))?nt.concat([new he(`${Bt}[1]`,lt[1],"expressions are not allowed in function stops.")]):nt.concat(q.validateSpec({key:`${Bt}[1]`,value:lt[1],valueSpec:i,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec}))}function O(q,nt){let lt=gr(q.value),Bt=$r(q.value),Gt=q.value!==null?q.value:nt;if(d){if(lt!==d)return[new he(q.key,Gt,`${lt} stop domain type must match previous stop domain type ${d}`)]}else d=lt;if(lt!=="number"&&lt!=="string"&&lt!=="boolean")return[new he(q.key,Gt,"stop domain value must be a number, string, or boolean")];if(lt!=="number"&&c!=="categorical"){let re=`number expected, ${lt} found`;return $o(i)&&c===void 0&&(re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new he(q.key,Gt,re)]}return c!=="categorical"||lt!=="number"||isFinite(Bt)&&Math.floor(Bt)===Bt?c!=="categorical"&&lt==="number"&&C!==void 0&&Bt<C?[new he(q.key,Gt,"stop domain values must appear in ascending order")]:(C=Bt,c==="categorical"&&Bt in v?[new he(q.key,Gt,"stop domain values must be unique")]:(v[Bt]=!0,[])):[new he(q.key,Gt,`integer expected, found ${Bt}`)]}}function Ia(A){let i=(A.expressionContext==="property"?Ao:To)(Qs(A.value),A.valueSpec);if(i.result==="error")return i.value.map(d=>new he(`${A.key}${d.key}`,A.value,d.message));let c=i.value.expression||i.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!c.outputDefined())return[new he(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!ko(c))return[new he(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!ko(c))return[new he(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!In(c,["zoom","feature-state"]))return[new he(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Fo(c))return[new he(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rs(A){let i=A.key,c=A.value,d=A.valueSpec,C=[];return Array.isArray(d.values)?d.values.indexOf($r(c))===-1&&C.push(new he(i,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf($r(c))===-1&&C.push(new he(i,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),C}function Xn(A){return Qo(Qs(A.value))?Ia(Zi({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yn(A)}function Yn(A){let i=A.value,c=A.key;if(gr(i)!=="array")return[new he(c,i,`array expected, ${gr(i)} found`)];let d=A.styleSpec,C,b=[];if(i.length<1)return[new he(c,i,"filter array must have at least 1 element")];switch(b=b.concat(Rs({key:`${c}[0]`,value:i[0],valueSpec:d.filter_operator,style:A.style,styleSpec:A.styleSpec})),$r(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&$r(i[1])==="$type"&&b.push(new he(c,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&b.push(new he(c,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(C=gr(i[1]),C!=="string"&&b.push(new he(`${c}[1]`,i[1],`string expected, ${C} found`)));for(let v=2;v<i.length;v++)C=gr(i[v]),$r(i[1])==="$type"?b=b.concat(Rs({key:`${c}[${v}]`,value:i[v],valueSpec:d.geometry_type,style:A.style,styleSpec:A.styleSpec})):C!=="string"&&C!=="number"&&C!=="boolean"&&b.push(new he(`${c}[${v}]`,i[v],`string, number, or boolean expected, ${C} found`));break;case"any":case"all":case"none":for(let v=1;v<i.length;v++)b=b.concat(Yn({key:`${c}[${v}]`,value:i[v],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":C=gr(i[1]),i.length!==2?b.push(new he(c,i,`filter array for "${i[0]}" operator must have 2 elements`)):C!=="string"&&b.push(new he(`${c}[1]`,i[1],`string expected, ${C} found`))}return b}function wA(A,i){let c=A.key,d=A.validateSpec,C=A.style,b=A.styleSpec,v=A.value,S=A.objectKey,L=b[`${i}_${A.layerType}`];if(!L)return[];let Q=S.match(/^(.*)-transition$/);if(i==="paint"&&Q&&L[Q[1]]&&L[Q[1]].transition)return d({key:c,value:v,valueSpec:b.transition,style:C,styleSpec:b});let Z=A.valueSpec||L[S];if(!Z)return[new he(c,v,`unknown property "${S}"`)];let N;if(gr(v)==="string"&&$o(Z)&&!Z.tokens&&(N=/^{([^}]+)}$/.exec(v)))return[new he(c,v,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];let O=[];return A.layerType==="symbol"&&(S==="text-field"&&C&&!C.glyphs&&O.push(new he(c,v,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&bA(Qs(v))&&$r(v.type)==="identity"&&O.push(new he(c,v,'"text-font" does not support identity functions'))),O.concat(d({key:A.key,value:v,valueSpec:Z,style:C,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:S}))}function Ha(A){return wA(A,"paint")}function Nl(A){return wA(A,"layout")}function BA(A){let i=[],c=A.value,d=A.key,C=A.style,b=A.styleSpec;c.type||c.ref||i.push(new he(d,c,'either "type" or "ref" is required'));let v=$r(c.type),S=$r(c.ref);if(c.id){let L=$r(c.id);for(let Q=0;Q<A.arrayIndex;Q++){let Z=C.layers[Q];$r(Z.id)===L&&i.push(new he(d,c.id,`duplicate layer id "${c.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in c){let L;["type","source","source-layer","filter","layout"].forEach(Q=>{Q in c&&i.push(new he(d,c[Q],`"${Q}" is prohibited for ref layers`))}),C.layers.forEach(Q=>{$r(Q.id)===S&&(L=Q)}),L?L.ref?i.push(new he(d,c.ref,"ref cannot reference another ref layer")):v=$r(L.type):i.push(new he(d,c.ref,`ref layer "${S}" not found`))}else if(v!=="background")if(c.source){let L=C.sources&&C.sources[c.source],Q=L&&$r(L.type);L?Q==="vector"&&v==="raster"?i.push(new he(d,c.source,`layer "${c.id}" requires a raster source`)):Q!=="raster-dem"&&v==="hillshade"?i.push(new he(d,c.source,`layer "${c.id}" requires a raster-dem source`)):Q==="raster"&&v!=="raster"?i.push(new he(d,c.source,`layer "${c.id}" requires a vector source`)):Q!=="vector"||c["source-layer"]?Q==="raster-dem"&&v!=="hillshade"?i.push(new he(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!c.paint||!c.paint["line-gradient"]||Q==="geojson"&&L.lineMetrics||i.push(new he(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new he(d,c,`layer "${c.id}" must specify a "source-layer"`)):i.push(new he(d,c.source,`source "${c.source}" not found`))}else i.push(new he(d,c,'missing required property "source"'));return i=i.concat(ss({key:d,value:c,valueSpec:b.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${d}.type`,value:c.type,valueSpec:b.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:c,objectKey:"type"}),filter:Xn,layout:L=>ss({layer:c,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":Q=>Nl(Zi({layerType:v},Q))}}),paint:L=>ss({layer:c,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":Q=>Ha(Zi({layerType:v},Q))}})}})),i}function Go(A){let i=A.value,c=A.key,d=gr(i);return d!=="string"?[new he(c,i,`string expected, ${d} found`)]:[]}let _A={promoteId:function({key:A,value:i}){if(gr(i)==="string")return Go({key:A,value:i});{let c=[];for(let d in i)c.push(...Go({key:`${A}.${d}`,value:i[d]}));return c}}};function xA(A){let i=A.value,c=A.key,d=A.styleSpec,C=A.style,b=A.validateSpec;if(!i.type)return[new he(c,i,'"type" is required')];let v=$r(i.type),S;switch(v){case"vector":case"raster":return S=ss({key:c,value:i,valueSpec:d[`source_${v.replace("-","_")}`],style:A.style,styleSpec:d,objectElementValidators:_A,validateSpec:b}),S;case"raster-dem":return S=function(L){var Q;let Z=(Q=L.sourceName)!==null&&Q!==void 0?Q:"",N=L.value,O=L.styleSpec,q=O.source_raster_dem,nt=L.style,lt=[],Bt=gr(N);if(N===void 0)return lt;if(Bt!=="object")return lt.push(new he("source_raster_dem",N,`object expected, ${Bt} found`)),lt;let Gt=$r(N.encoding)==="custom",re=["redFactor","greenFactor","blueFactor","baseShift"],Kt=L.value.encoding?`"${L.value.encoding}"`:"Default";for(let Yt in N)!Gt&&re.includes(Yt)?lt.push(new he(Yt,N[Yt],`In "${Z}": "${Yt}" is only valid when "encoding" is set to "custom". ${Kt} encoding found`)):q[Yt]?lt=lt.concat(L.validateSpec({key:Yt,value:N[Yt],valueSpec:q[Yt],validateSpec:L.validateSpec,style:nt,styleSpec:O})):lt.push(new he(Yt,N[Yt],`unknown property "${Yt}"`));return lt}({sourceName:c,value:i,style:A.style,styleSpec:d,validateSpec:b}),S;case"geojson":if(S=ss({key:c,value:i,valueSpec:d.source_geojson,style:C,styleSpec:d,validateSpec:b,objectElementValidators:_A}),i.cluster)for(let L in i.clusterProperties){let[Q,Z]=i.clusterProperties[L],N=typeof Q=="string"?[Q,["accumulated"],["get",L]]:Q;S.push(...Ia({key:`${c}.${L}.map`,value:Z,validateSpec:b,expressionContext:"cluster-map"})),S.push(...Ia({key:`${c}.${L}.reduce`,value:N,validateSpec:b,expressionContext:"cluster-reduce"}))}return S;case"video":return ss({key:c,value:i,valueSpec:d.source_video,style:C,validateSpec:b,styleSpec:d});case"image":return ss({key:c,value:i,valueSpec:d.source_image,style:C,validateSpec:b,styleSpec:d});case"canvas":return[new he(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rs({key:`${c}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:C,validateSpec:b,styleSpec:d})}}function al(A){let i=A.value,c=A.styleSpec,d=c.light,C=A.style,b=[],v=gr(i);if(i===void 0)return b;if(v!=="object")return b=b.concat([new he("light",i,`object expected, ${v} found`)]),b;for(let S in i){let L=S.match(/^(.*)-transition$/);b=b.concat(L&&d[L[1]]&&d[L[1]].transition?A.validateSpec({key:S,value:i[S],valueSpec:c.transition,validateSpec:A.validateSpec,style:C,styleSpec:c}):d[S]?A.validateSpec({key:S,value:i[S],valueSpec:d[S],validateSpec:A.validateSpec,style:C,styleSpec:c}):[new he(S,i[S],`unknown property "${S}"`)])}return b}function Al(A){let i=A.value,c=A.styleSpec,d=c.sky,C=A.style,b=gr(i);if(i===void 0)return[];if(b!=="object")return[new he("sky",i,`object expected, ${b} found`)];let v=[];for(let S in i)v=v.concat(d[S]?A.validateSpec({key:S,value:i[S],valueSpec:d[S],style:C,styleSpec:c}):[new he(S,i[S],`unknown property "${S}"`)]);return v}function SA(A){let i=A.value,c=A.styleSpec,d=c.terrain,C=A.style,b=[],v=gr(i);if(i===void 0)return b;if(v!=="object")return b=b.concat([new he("terrain",i,`object expected, ${v} found`)]),b;for(let S in i)b=b.concat(d[S]?A.validateSpec({key:S,value:i[S],valueSpec:d[S],validateSpec:A.validateSpec,style:C,styleSpec:c}):[new he(S,i[S],`unknown property "${S}"`)]);return b}function ll(A){let i=[],c=A.value,d=A.key;if(Array.isArray(c)){let C=[],b=[];for(let v in c)c[v].id&&C.includes(c[v].id)&&i.push(new he(d,c,`all the sprites' ids must be unique, but ${c[v].id} is duplicated`)),C.push(c[v].id),c[v].url&&b.includes(c[v].url)&&i.push(new he(d,c,`all the sprites' URLs must be unique, but ${c[v].url} is duplicated`)),b.push(c[v].url),i=i.concat(ss({key:`${d}[${v}]`,value:c[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return i}return Go({key:d,value:c})}let Vl={"*":()=>[],array:vA,boolean:function(A){let i=A.value,c=A.key,d=gr(i);return d!=="boolean"?[new he(c,i,`boolean expected, ${d} found`)]:[]},number:Ml,color:function(A){let i=A.key,c=A.value,d=gr(c);return d!=="string"?[new he(i,c,`color expected, ${d} found`)]:Fi.parse(String(c))?[]:[new he(i,c,`color expected, "${c}" found`)]},constants:sl,enum:Rs,filter:Xn,function:ol,layer:BA,object:ss,source:xA,light:al,sky:Al,terrain:SA,projection:function(A){let i=A.value,c=A.styleSpec,d=c.projection,C=A.style,b=gr(i);if(i===void 0)return[];if(b!=="object")return[new he("projection",i,`object expected, ${b} found`)];let v=[];for(let S in i)v=v.concat(d[S]?A.validateSpec({key:S,value:i[S],valueSpec:d[S],style:C,styleSpec:c}):[new he(S,i[S],`unknown property "${S}"`)]);return v},string:Go,formatted:function(A){return Go(A).length===0?[]:Ia(A)},resolvedImage:function(A){return Go(A).length===0?[]:Ia(A)},padding:function(A){let i=A.key,c=A.value;if(gr(c)==="array"){if(c.length<1||c.length>4)return[new he(i,c,`padding requires 1 to 4 values; ${c.length} values found`)];let d={type:"number"},C=[];for(let b=0;b<c.length;b++)C=C.concat(A.validateSpec({key:`${i}[${b}]`,value:c[b],validateSpec:A.validateSpec,valueSpec:d}));return C}return Ml({key:i,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(A){let i=A.key,c=A.value,d=gr(c),C=A.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new he(i,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let v=0;v<c.length;v+=2)b=b.concat(Rs({key:`${i}[${v}]`,value:c[v],valueSpec:C.layout_symbol["text-anchor"]})),b=b.concat(vA({key:`${i}[${v+1}]`,value:c[v+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:C}));return b},sprite:ll};function FA(A){let i=A.value,c=A.valueSpec,d=A.styleSpec;return A.validateSpec=FA,c.expression&&bA($r(i))?ol(A):c.expression&&ea(Qs(i))?Ia(A):c.type&&Vl[c.type]?Vl[c.type](A):ss(Zi({},A,{valueSpec:c.type?d[c.type]:c}))}function Lc(A){let i=A.value,c=A.key,d=Go(A);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new he(c,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new he(c,i,'"glyphs" url must include a "{range}" token'))),d}function Gs(A,i=Dt){let c=[];return c=c.concat(FA({key:"",value:A,valueSpec:i.$root,styleSpec:i,style:A,validateSpec:FA,objectElementValidators:{glyphs:Lc,"*":()=>[]}})),A.constants&&(c=c.concat(sl({key:"constants",value:A.constants,style:A,styleSpec:i,validateSpec:FA}))),Ec(c)}function Zo(A){return function(i){return A({...i,validateSpec:FA})}}function Ec(A){return[].concat(A).sort((i,c)=>i.line-c.line)}function co(A){return function(...i){return Ec(A.apply(this,i))}}Gs.source=co(Zo(xA)),Gs.sprite=co(Zo(ll)),Gs.glyphs=co(Zo(Lc)),Gs.light=co(Zo(al)),Gs.sky=co(Zo(Al)),Gs.terrain=co(Zo(SA)),Gs.layer=co(Zo(BA)),Gs.filter=co(Zo(Xn)),Gs.paintProperty=co(Zo(Ha)),Gs.layoutProperty=co(Zo(Nl));let Ma=Gs,Tc=Ma.light,Uc=Ma.sky,kA=Ma.paintProperty,Cu=Ma.layoutProperty;function Qc(A,i){let c=!1;if(i&&i.length)for(let d of i)A.fire(new We(new Error(d.message))),c=!0;return c}class Na{constructor(i,c,d){let C=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;let v=new Int32Array(this.arrayBuffer);i=v[0],this.d=(c=v[1])+2*(d=v[2]);for(let L=0;L<this.d*this.d;L++){let Q=v[3+L],Z=v[3+L+1];C.push(Q===Z?null:v.subarray(Q,Z))}let S=v[3+C.length+1];this.keys=v.subarray(v[3+C.length],S),this.bboxes=v.subarray(S),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let v=0;v<this.d*this.d;v++)C.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=i,this.padding=d,this.scale=c/i,this.uid=0;let b=d/c*i;this.min=-b,this.max=i+b}insert(i,c,d,C,b){this._forEachCell(c,d,C,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(C),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,c,d,C,b,v){this.cells[b].push(v)}query(i,c,d,C,b){let v=this.min,S=this.max;if(i<=v&&c<=v&&S<=d&&S<=C&&!b)return Array.prototype.slice.call(this.keys);{let L=[];return this._forEachCell(i,c,d,C,this._queryCell,L,{},b),L}}_queryCell(i,c,d,C,b,v,S,L){let Q=this.cells[b];if(Q!==null){let Z=this.keys,N=this.bboxes;for(let O=0;O<Q.length;O++){let q=Q[O];if(S[q]===void 0){let nt=4*q;(L?L(N[nt+0],N[nt+1],N[nt+2],N[nt+3]):i<=N[nt+2]&&c<=N[nt+3]&&d>=N[nt+0]&&C>=N[nt+1])?(S[q]=!0,v.push(Z[q])):S[q]=!1}}}}_forEachCell(i,c,d,C,b,v,S,L){let Q=this._convertToCellCoord(i),Z=this._convertToCellCoord(c),N=this._convertToCellCoord(d),O=this._convertToCellCoord(C);for(let q=Q;q<=N;q++)for(let nt=Z;nt<=O;nt++){let lt=this.d*nt+q;if((!L||L(this._convertFromCellCoord(q),this._convertFromCellCoord(nt),this._convertFromCellCoord(q+1),this._convertFromCellCoord(nt+1)))&&b.call(this,i,c,d,C,lt,v,S,L))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let i=this.cells,c=3+this.cells.length+1+1,d=0;for(let v=0;v<this.cells.length;v++)d+=this.cells[v].length;let C=new Int32Array(c+d+this.keys.length+this.bboxes.length);C[0]=this.extent,C[1]=this.n,C[2]=this.padding;let b=c;for(let v=0;v<i.length;v++){let S=i[v];C[3+v]=b,C.set(S,b),b+=S.length}return C[3+i.length]=b,C.set(this.keys,b),b+=this.keys.length,C[3+i.length+1]=b,C.set(this.bboxes,b),b+=this.bboxes.length,C.buffer}static serialize(i,c){let d=i.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(i){return new Na(i.buffer)}}let Zs={};function oi(A,i,c={}){if(Zs[A])throw new Error(`${A} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:A,writeable:!1}),Zs[A]={klass:i,omit:c.omit||[],shallow:c.shallow||[]}}oi("Object",Object),oi("TransferableGridIndex",Na),oi("Color",Fi),oi("Error",Error),oi("AJAXError",Ut),oi("ResolvedImage",pn),oi("StylePropertyFunction",Ts),oi("StyleExpression",rs,{omit:["_evaluator"]}),oi("ZoomDependentExpression",Mn),oi("ZoomConstantExpression",vs),oi("CompoundExpression",Zn,{omit:["_evaluate"]});for(let A in ao)ao[A]._classRegistryKey||oi(`Expression_${A}`,ao[A]);function Dl(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Rc(A){return A.$name||A.constructor._classRegistryKey}function ia(A){return!function(i){if(i===null||typeof i!="object")return!1;let c=Rc(i);return!(!c||c==="Object")}(A)&&(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||A instanceof Error||Dl(A)||te(A)||ArrayBuffer.isView(A)||A instanceof ImageData)}function Nn(A,i){if(ia(A))return(Dl(A)||te(A))&&i&&i.push(A),ArrayBuffer.isView(A)&&i&&i.push(A.buffer),A instanceof ImageData&&i&&i.push(A.data.buffer),A;if(Array.isArray(A)){let b=[];for(let v of A)b.push(Nn(v,i));return b}if(typeof A!="object")throw new Error("can't serialize object of type "+typeof A);let c=Rc(A);if(!c)throw new Error(`can't serialize object of unregistered class ${A.constructor.name}`);if(!Zs[c])throw new Error(`${c} is not registered.`);let{klass:d}=Zs[c],C=d.serialize?d.serialize(A,i):{};if(d.serialize){if(i&&C===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let b in A){if(!A.hasOwnProperty(b)||Zs[c].omit.indexOf(b)>=0)continue;let v=A[b];C[b]=Zs[c].shallow.indexOf(b)>=0?v:Nn(v,i)}A instanceof Error&&(C.message=A.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(C.$name=c),C}function os(A){if(ia(A))return A;if(Array.isArray(A))return A.map(os);if(typeof A!="object")throw new Error("can't deserialize object of type "+typeof A);let i=Rc(A)||"Object";if(!Zs[i])throw new Error(`can't deserialize unregistered class ${i}`);let{klass:c}=Zs[i];if(!c)throw new Error(`can't deserialize unregistered class ${i}`);if(c.deserialize)return c.deserialize(A);let d=Object.create(c.prototype);for(let C of Object.keys(A)){if(C==="$name")continue;let b=A[C];d[C]=Zs[i].shallow.indexOf(C)>=0?b:os(b)}return d}class Gc{constructor(){this.first=!0}update(i,c){let d=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=d,!0))}}let lr={"Latin-1 Supplement":A=>A>=128&&A<=255,"Hangul Jamo":A=>A>=4352&&A<=4607,Khmer:A=>A>=6016&&A<=6143,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Katakana:A=>A>=12448&&A<=12543,Kanbun:A=>A>=12688&&A<=12703,"CJK Strokes":A=>A>=12736&&A<=12783,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"Private Use Area":A=>A>=57344&&A<=63743,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function Po(A){for(let i of A)if(Kl(i.charCodeAt(0)))return!0;return!1}function Ps(A){for(let i of A)if(!Va(i.charCodeAt(0)))return!1;return!0}function Zc(A){let i=A.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(i.join("|"),"u")}let kh=Zc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Va(A){return!kh.test(String.fromCodePoint(A))}let Pc=Zc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Kl(A){return!(A!==746&&A!==747&&(A<4352||!(lr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||lr["CJK Compatibility"](A)||lr["CJK Strokes"](A)||!(!lr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||lr["Enclosed CJK Letters and Months"](A)||lr["Ideographic Description Characters"](A)||lr.Kanbun(A)||lr.Katakana(A)&&A!==12540||!(!lr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!lr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||lr["Vertical Forms"](A)||lr["Yijing Hexagram Symbols"](A)||/\p{sc=Cans}/u.test(String.fromCodePoint(A))||/\p{sc=Hang}/u.test(String.fromCodePoint(A))||Pc.test(String.fromCodePoint(A)))))}function Hc(A){return!(Kl(A)||function(i){return!!(lr["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||lr["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||lr["Letterlike Symbols"](i)||lr["Number Forms"](i)||lr["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||lr["Control Pictures"](i)&&i!==9251||lr["Optical Character Recognition"](i)||lr["Enclosed Alphanumerics"](i)||lr["Geometric Shapes"](i)||lr["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||lr["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||lr["CJK Symbols and Punctuation"](i)||lr.Katakana(i)||lr["Private Use Area"](i)||lr["CJK Compatibility Forms"](i)||lr["Small Form Variants"](i)||lr["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(A))}let Lh=Zc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function LA(A){return Lh.test(String.fromCodePoint(A))}function Ol(A,i){return!(!i&&LA(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||lr.Khmer(A))}function cl(A){for(let i of A)if(LA(i.charCodeAt(0)))return!0;return!1}let jn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(A){this.pluginStatus=A.pluginStatus,this.pluginURL=A.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(A){this.applyArabicShaping=A.applyArabicShaping,this.processBidirectionalText=A.processBidirectionalText,this.processStyledBidirectionalText=A.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Qr{constructor(i,c){this.zoom=i,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gc,this.transition={})}isSupportedScript(i){return function(c,d){for(let C of c)if(!Ol(C.charCodeAt(0),d))return!1;return!0}(i,jn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let i=this.zoom,c=i-Math.floor(i),d=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class EA{constructor(i,c){this.property=i,this.value=c,this.expression=function(d,C){if(bA(d))return new Ts(d,C);if(ea(d)){let b=Ao(d,C);if(b.result==="error")throw new Error(b.value.map(v=>`${v.key}: ${v.message}`).join(", "));return b.value}{let b=d;return C.type==="color"&&typeof d=="string"?b=Fi.parse(d):C.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?C.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(b=dn.parse(d)):b=br.parse(d),{kind:"constant",evaluate:()=>b}}}(c===void 0?i.specification.default:c,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,c,d){return this.property.possiblyEvaluate(this,i,c,d)}}class ul{constructor(i){this.property=i,this.value=new EA(i,void 0)}transitioned(i,c){return new Iu(this.property,this.value,c,kt({},i.transition,this.transition),i.now)}untransitioned(){return new Iu(this.property,this.value,null,{},0)}}class zl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Mt(this._values[i].value.value)}setValue(i,c){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new ul(this._values[i].property)),this._values[i].value=new EA(this._values[i].property,c===null?void 0:Mt(c))}getTransition(i){return Mt(this._values[i].transition)}setTransition(i,c){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new ul(this._values[i].property)),this._values[i].transition=Mt(c)||void 0}serialize(){let i={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(i[c]=d);let C=this.getTransition(c);C!==void 0&&(i[`${c}-transition`]=C)}return i}transitioned(i,c){let d=new hl(this._properties);for(let C of Object.keys(this._values))d._values[C]=this._values[C].transitioned(i,c._values[C]);return d}untransitioned(){let i=new hl(this._properties);for(let c of Object.keys(this._values))i._values[c]=this._values[c].untransitioned();return i}}class Iu{constructor(i,c,d,C,b){this.property=i,this.value=c,this.begin=b+C.delay||0,this.end=this.begin+C.duration||0,i.specification.transition&&(C.delay||C.duration)&&(this.prior=d)}possiblyEvaluate(i,c,d){let C=i.now||0,b=this.value.possiblyEvaluate(i,c,d),v=this.prior;if(v){if(C>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(C<this.begin)return v.possiblyEvaluate(i,c,d);{let S=(C-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(i,c,d),b,function(L){if(L<=0)return 0;if(L>=1)return 1;let Q=L*L,Z=Q*L;return 4*(L<.5?Z:3*(L-Q)+Z-.75)}(S))}}return b}}class hl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,c,d){let C=new dl(this._properties);for(let b of Object.keys(this._values))C._values[b]=this._values[b].possiblyEvaluate(i,c,d);return C}hasTransition(){for(let i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class gl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Mt(this._values[i].value)}setValue(i,c){this._values[i]=new EA(this._values[i].property,c===null?void 0:Mt(c))}serialize(){let i={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(i[c]=d)}return i}possiblyEvaluate(i,c,d){let C=new dl(this._properties);for(let b of Object.keys(this._values))C._values[b]=this._values[b].possiblyEvaluate(i,c,d);return C}}class Ho{constructor(i,c,d){this.property=i,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,c,d,C){return this.property.evaluate(this.value,this.parameters,i,c,d,C)}}class dl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class gi{constructor(i){this.specification=i}possiblyEvaluate(i,c){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(c)}interpolate(i,c,d){let C=ai[this.specification.type];return C?C(i,c,d):i}}class _i{constructor(i,c){this.specification=i,this.overrides=c}possiblyEvaluate(i,c,d,C){return new Ho(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(c,null,{},d,C)}:i.expression,c)}interpolate(i,c,d){if(i.value.kind!=="constant"||c.value.kind!=="constant")return i;if(i.value.value===void 0||c.value.value===void 0)return new Ho(this,{kind:"constant",value:void 0},i.parameters);let C=ai[this.specification.type];if(C){let b=C(i.value.value,c.value.value,d);return new Ho(this,{kind:"constant",value:b},i.parameters)}return i}evaluate(i,c,d,C,b,v){return i.kind==="constant"?i.value:i.evaluate(c,d,C,b,v)}}class Wl extends _i{possiblyEvaluate(i,c,d,C){if(i.value===void 0)return new Ho(this,{kind:"constant",value:void 0},c);if(i.expression.kind==="constant"){let b=i.expression.evaluate(c,null,{},d,C),v=i.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,S=this._calculate(v,v,v,c);return new Ho(this,{kind:"constant",value:S},c)}if(i.expression.kind==="camera"){let b=this._calculate(i.expression.evaluate({zoom:c.zoom-1}),i.expression.evaluate({zoom:c.zoom}),i.expression.evaluate({zoom:c.zoom+1}),c);return new Ho(this,{kind:"constant",value:b},c)}return new Ho(this,i.expression,c)}evaluate(i,c,d,C,b,v){if(i.kind==="source"){let S=i.evaluate(c,d,C,b,v);return this._calculate(S,S,S,c)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(c.zoom)-1},d,C),i.evaluate({zoom:Math.floor(c.zoom)},d,C),i.evaluate({zoom:Math.floor(c.zoom)+1},d,C),c):i.value}_calculate(i,c,d,C){return C.zoom>C.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:d,to:c}}interpolate(i){return i}}class Jl{constructor(i){this.specification=i}possiblyEvaluate(i,c,d,C){if(i.value!==void 0){if(i.expression.kind==="constant"){let b=i.expression.evaluate(c,null,{},d,C);return this._calculate(b,b,b,c)}return this._calculate(i.expression.evaluate(new Qr(Math.floor(c.zoom-1),c)),i.expression.evaluate(new Qr(Math.floor(c.zoom),c)),i.expression.evaluate(new Qr(Math.floor(c.zoom+1),c)),c)}}_calculate(i,c,d,C){return C.zoom>C.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:d,to:c}}interpolate(i){return i}}class Xl{constructor(i){this.specification=i}possiblyEvaluate(i,c,d,C){return!!i.expression.evaluate(c,null,{},d,C)}interpolate(){return!1}}class u{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let c in i){let d=i[c];d.specification.overridable&&this.overridableProperties.push(c);let C=this.defaultPropertyValues[c]=new EA(d,void 0),b=this.defaultTransitionablePropertyValues[c]=new ul(d);this.defaultTransitioningPropertyValues[c]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=C.possiblyEvaluate({})}}}oi("DataDrivenProperty",_i),oi("DataConstantProperty",gi),oi("CrossFadedDataDrivenProperty",Wl),oi("CrossFadedProperty",Jl),oi("ColorRampProperty",Xl);let t="-transition";class a extends Je{constructor(i,c){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),c.layout&&(this._unevaluatedLayout=new gl(c.layout)),c.paint)){this._transitionablePaint=new zl(c.paint);for(let d in i.paint)this.setPaintProperty(d,i.paint[d],{validate:!1});for(let d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dl(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,c,d={}){c!=null&&this._validate(Cu,`layers.${this.id}.layout.${i}`,i,c,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,c):this.visibility=c)}getPaintProperty(i){return i.endsWith(t)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,c,d={}){if(c!=null&&this._validate(kA,`layers.${this.id}.paint.${i}`,i,c,d))return!1;if(i.endsWith(t))return this._transitionablePaint.setTransition(i.slice(0,-11),c||void 0),!1;{let C=this._transitionablePaint._values[i],b=C.property.specification["property-type"]==="cross-faded-data-driven",v=C.value.isDataDriven(),S=C.value;this._transitionablePaint.setValue(i,c),this._handleSpecialPaintPropertyUpdate(i);let L=this._transitionablePaint._values[i].value;return L.isDataDriven()||v||b||this._handleOverridablePaintPropertyUpdate(i,S,L)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,c,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,c){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,c)}serialize(){let i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),ft(i,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(i,c,d,C,b={}){return(!b||b.validate!==!1)&&Qc(this,i.call(Ma,{key:c,layerType:this.type,objectKey:d,value:C,styleSpec:Dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let i in this.paint._values){let c=this.paint.get(i);if(c instanceof Ho&&$o(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let h={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class g{constructor(i,c){this._structArray=i,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class f{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,c){return i._trim(),c&&(i.isTransferred=!0,c.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){let c=Object.create(this.prototype);return c.arrayBuffer=i.arrayBuffer,c.length=i.length,c.capacity=i.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function y(A,i=1){let c=0,d=0;return{members:A.map(C=>{let b=h[C.type].BYTES_PER_ELEMENT,v=c=B(c,Math.max(i,b)),S=C.components||1;return d=Math.max(d,b),c+=b*S,{name:C.name,type:C.type,components:S,offset:v}}),size:B(c,Math.max(d,i)),alignment:i}}function B(A,i){return Math.ceil(A/i)*i}class x extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c){let d=this.length;return this.resize(d+1),this.emplace(d,i,c)}emplace(i,c,d){let C=2*i;return this.int16[C+0]=c,this.int16[C+1]=d,i}}x.prototype.bytesPerElement=4,oi("StructArrayLayout2i4",x);class k extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d){let C=this.length;return this.resize(C+1),this.emplace(C,i,c,d)}emplace(i,c,d,C){let b=3*i;return this.int16[b+0]=c,this.int16[b+1]=d,this.int16[b+2]=C,i}}k.prototype.bytesPerElement=6,oi("StructArrayLayout3i6",k);class R extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d,C){let b=this.length;return this.resize(b+1),this.emplace(b,i,c,d,C)}emplace(i,c,d,C,b){let v=4*i;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=C,this.int16[v+3]=b,i}}R.prototype.bytesPerElement=8,oi("StructArrayLayout4i8",R);class G extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v){let S=this.length;return this.resize(S+1),this.emplace(S,i,c,d,C,b,v)}emplace(i,c,d,C,b,v,S){let L=6*i;return this.int16[L+0]=c,this.int16[L+1]=d,this.int16[L+2]=C,this.int16[L+3]=b,this.int16[L+4]=v,this.int16[L+5]=S,i}}G.prototype.bytesPerElement=12,oi("StructArrayLayout2i4i12",G);class P extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v){let S=this.length;return this.resize(S+1),this.emplace(S,i,c,d,C,b,v)}emplace(i,c,d,C,b,v,S){let L=4*i,Q=8*i;return this.int16[L+0]=c,this.int16[L+1]=d,this.uint8[Q+4]=C,this.uint8[Q+5]=b,this.uint8[Q+6]=v,this.uint8[Q+7]=S,i}}P.prototype.bytesPerElement=8,oi("StructArrayLayout2i4ub8",P);class M extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c){let d=this.length;return this.resize(d+1),this.emplace(d,i,c)}emplace(i,c,d){let C=2*i;return this.float32[C+0]=c,this.float32[C+1]=d,i}}M.prototype.bytesPerElement=8,oi("StructArrayLayout2f8",M);class j extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v,S,L,Q,Z){let N=this.length;return this.resize(N+1),this.emplace(N,i,c,d,C,b,v,S,L,Q,Z)}emplace(i,c,d,C,b,v,S,L,Q,Z,N){let O=10*i;return this.uint16[O+0]=c,this.uint16[O+1]=d,this.uint16[O+2]=C,this.uint16[O+3]=b,this.uint16[O+4]=v,this.uint16[O+5]=S,this.uint16[O+6]=L,this.uint16[O+7]=Q,this.uint16[O+8]=Z,this.uint16[O+9]=N,i}}j.prototype.bytesPerElement=20,oi("StructArrayLayout10ui20",j);class et extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v,S,L,Q,Z,N,O){let q=this.length;return this.resize(q+1),this.emplace(q,i,c,d,C,b,v,S,L,Q,Z,N,O)}emplace(i,c,d,C,b,v,S,L,Q,Z,N,O,q){let nt=12*i;return this.int16[nt+0]=c,this.int16[nt+1]=d,this.int16[nt+2]=C,this.int16[nt+3]=b,this.uint16[nt+4]=v,this.uint16[nt+5]=S,this.uint16[nt+6]=L,this.uint16[nt+7]=Q,this.int16[nt+8]=Z,this.int16[nt+9]=N,this.int16[nt+10]=O,this.int16[nt+11]=q,i}}et.prototype.bytesPerElement=24,oi("StructArrayLayout4i4ui4i24",et);class W extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,d){let C=this.length;return this.resize(C+1),this.emplace(C,i,c,d)}emplace(i,c,d,C){let b=3*i;return this.float32[b+0]=c,this.float32[b+1]=d,this.float32[b+2]=C,i}}W.prototype.bytesPerElement=12,oi("StructArrayLayout3f12",W);class X extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){let c=this.length;return this.resize(c+1),this.emplace(c,i)}emplace(i,c){return this.uint32[1*i+0]=c,i}}X.prototype.bytesPerElement=4,oi("StructArrayLayout1ul4",X);class ct extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v,S,L,Q){let Z=this.length;return this.resize(Z+1),this.emplace(Z,i,c,d,C,b,v,S,L,Q)}emplace(i,c,d,C,b,v,S,L,Q,Z){let N=10*i,O=5*i;return this.int16[N+0]=c,this.int16[N+1]=d,this.int16[N+2]=C,this.int16[N+3]=b,this.int16[N+4]=v,this.int16[N+5]=S,this.uint32[O+3]=L,this.uint16[N+8]=Q,this.uint16[N+9]=Z,i}}ct.prototype.bytesPerElement=20,oi("StructArrayLayout6i1ul2ui20",ct);class rt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v){let S=this.length;return this.resize(S+1),this.emplace(S,i,c,d,C,b,v)}emplace(i,c,d,C,b,v,S){let L=6*i;return this.int16[L+0]=c,this.int16[L+1]=d,this.int16[L+2]=C,this.int16[L+3]=b,this.int16[L+4]=v,this.int16[L+5]=S,i}}rt.prototype.bytesPerElement=12,oi("StructArrayLayout2i2i2i12",rt);class ut extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b){let v=this.length;return this.resize(v+1),this.emplace(v,i,c,d,C,b)}emplace(i,c,d,C,b,v){let S=4*i,L=8*i;return this.float32[S+0]=c,this.float32[S+1]=d,this.float32[S+2]=C,this.int16[L+6]=b,this.int16[L+7]=v,i}}ut.prototype.bytesPerElement=16,oi("StructArrayLayout2f1f2i16",ut);class Ft extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v){let S=this.length;return this.resize(S+1),this.emplace(S,i,c,d,C,b,v)}emplace(i,c,d,C,b,v,S){let L=16*i,Q=4*i,Z=8*i;return this.uint8[L+0]=c,this.uint8[L+1]=d,this.float32[Q+1]=C,this.float32[Q+2]=b,this.int16[Z+6]=v,this.int16[Z+7]=S,i}}Ft.prototype.bytesPerElement=16,oi("StructArrayLayout2ub2f2i16",Ft);class Qt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,d){let C=this.length;return this.resize(C+1),this.emplace(C,i,c,d)}emplace(i,c,d,C){let b=3*i;return this.uint16[b+0]=c,this.uint16[b+1]=d,this.uint16[b+2]=C,i}}Qt.prototype.bytesPerElement=6,oi("StructArrayLayout3ui6",Qt);class se extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt,lt,Bt,Gt){let re=this.length;return this.resize(re+1),this.emplace(re,i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt,lt,Bt,Gt)}emplace(i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt,lt,Bt,Gt,re){let Kt=24*i,Yt=12*i,ge=48*i;return this.int16[Kt+0]=c,this.int16[Kt+1]=d,this.uint16[Kt+2]=C,this.uint16[Kt+3]=b,this.uint32[Yt+2]=v,this.uint32[Yt+3]=S,this.uint32[Yt+4]=L,this.uint16[Kt+10]=Q,this.uint16[Kt+11]=Z,this.uint16[Kt+12]=N,this.float32[Yt+7]=O,this.float32[Yt+8]=q,this.uint8[ge+36]=nt,this.uint8[ge+37]=lt,this.uint8[ge+38]=Bt,this.uint32[Yt+10]=Gt,this.int16[Kt+22]=re,i}}se.prototype.bytesPerElement=48,oi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",se);class oe extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt,lt,Bt,Gt,re,Kt,Yt,ge,Re,ni,Gi,ei,qe,Ii,hi){let li=this.length;return this.resize(li+1),this.emplace(li,i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt,lt,Bt,Gt,re,Kt,Yt,ge,Re,ni,Gi,ei,qe,Ii,hi)}emplace(i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt,lt,Bt,Gt,re,Kt,Yt,ge,Re,ni,Gi,ei,qe,Ii,hi,li){let we=32*i,bi=16*i;return this.int16[we+0]=c,this.int16[we+1]=d,this.int16[we+2]=C,this.int16[we+3]=b,this.int16[we+4]=v,this.int16[we+5]=S,this.int16[we+6]=L,this.int16[we+7]=Q,this.uint16[we+8]=Z,this.uint16[we+9]=N,this.uint16[we+10]=O,this.uint16[we+11]=q,this.uint16[we+12]=nt,this.uint16[we+13]=lt,this.uint16[we+14]=Bt,this.uint16[we+15]=Gt,this.uint16[we+16]=re,this.uint16[we+17]=Kt,this.uint16[we+18]=Yt,this.uint16[we+19]=ge,this.uint16[we+20]=Re,this.uint16[we+21]=ni,this.uint16[we+22]=Gi,this.uint32[bi+12]=ei,this.float32[bi+13]=qe,this.float32[bi+14]=Ii,this.uint16[we+30]=hi,this.uint16[we+31]=li,i}}oe.prototype.bytesPerElement=64,oi("StructArrayLayout8i15ui1ul2f2ui64",oe);class xe extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){let c=this.length;return this.resize(c+1),this.emplace(c,i)}emplace(i,c){return this.float32[1*i+0]=c,i}}xe.prototype.bytesPerElement=4,oi("StructArrayLayout1f4",xe);class Ue extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,d){let C=this.length;return this.resize(C+1),this.emplace(C,i,c,d)}emplace(i,c,d,C){let b=3*i;return this.uint16[6*i+0]=c,this.float32[b+1]=d,this.float32[b+2]=C,i}}Ue.prototype.bytesPerElement=12,oi("StructArrayLayout1ui2f12",Ue);class _e extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,d){let C=this.length;return this.resize(C+1),this.emplace(C,i,c,d)}emplace(i,c,d,C){let b=4*i;return this.uint32[2*i+0]=c,this.uint16[b+2]=d,this.uint16[b+3]=C,i}}_e.prototype.bytesPerElement=8,oi("StructArrayLayout1ul2ui8",_e);class Be extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c){let d=this.length;return this.resize(d+1),this.emplace(d,i,c)}emplace(i,c,d){let C=2*i;return this.uint16[C+0]=c,this.uint16[C+1]=d,i}}Be.prototype.bytesPerElement=4,oi("StructArrayLayout2ui4",Be);class De extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){let c=this.length;return this.resize(c+1),this.emplace(c,i)}emplace(i,c){return this.uint16[1*i+0]=c,i}}De.prototype.bytesPerElement=2,oi("StructArrayLayout1ui2",De);class ri extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,d,C){let b=this.length;return this.resize(b+1),this.emplace(b,i,c,d,C)}emplace(i,c,d,C,b){let v=4*i;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=C,this.float32[v+3]=b,i}}ri.prototype.bytesPerElement=16,oi("StructArrayLayout4f16",ri);class ve extends g{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}ve.prototype.size=20;class Ge extends ct{get(i){return new ve(this,i)}}oi("CollisionBoxArray",Ge);class Ci extends g{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ci.prototype.size=48;class Ji extends se{get(i){return new Ci(this,i)}}oi("PlacedSymbolArray",Ji);class Ui extends g{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ui.prototype.size=64;class fi extends oe{get(i){return new Ui(this,i)}}oi("SymbolInstanceArray",fi);class hr extends xe{getoffsetX(i){return this.float32[1*i+0]}}oi("GlyphOffsetArray",hr);class Lr extends k{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}oi("SymbolLineVertexArray",Lr);class Er extends g{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Er.prototype.size=12;class er extends Ue{get(i){return new Er(this,i)}}oi("TextAnchorOffsetArray",er);class Tr extends g{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Tr.prototype.size=8;class Hr extends _e{get(i){return new Tr(this,i)}}oi("FeatureIndexArray",Hr);class Dr extends x{}class Ir extends x{}class yn extends x{}class Hs extends G{}class ra extends P{}class ws extends M{}class Cr extends j{}class TA extends et{}class Yl extends W{}class Bs extends X{}class qn extends rt{}class Ms extends Ft{}class as extends Qt{}class Rr extends Be{}let An=y([{name:"a_pos",components:2,type:"Int16"}],4),{members:bn}=An;class cr{constructor(i=[]){this.segments=i}prepareSegment(i,c,d,C){let b=this.segments[this.segments.length-1];return i>cr.MAX_VERTEX_ARRAY_LENGTH&&at(`Max vertices per segment is ${cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!b||b.vertexLength+i>cr.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==C)&&(b={vertexOffset:c.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},C!==void 0&&(b.sortKey=C),this.segments.push(b)),b}get(){return this.segments}destroy(){for(let i of this.segments)for(let c in i.vaos)i.vaos[c].destroy()}static simpleSegment(i,c,d,C){return new cr([{vertexOffset:i,primitiveOffset:c,vertexLength:d,primitiveLength:C,vaos:{},sortKey:0}])}}function Mo(A,i){return 256*(A=ot(Math.floor(A),0,255))+ot(Math.floor(i),0,255)}cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,oi("SegmentVector",cr);let Da=y([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var na={exports:{}},jl={exports:{}};jl.exports=function(A,i){var c,d,C,b,v,S,L,Q;for(d=A.length-(c=3&A.length),C=i,v=3432918353,S=461845907,Q=0;Q<d;)L=255&A.charCodeAt(Q)|(255&A.charCodeAt(++Q))<<8|(255&A.charCodeAt(++Q))<<16|(255&A.charCodeAt(++Q))<<24,++Q,C=27492+(65535&(b=5*(65535&(C=(C^=L=(65535&(L=(L=(65535&L)*v+(((L>>>16)*v&65535)<<16)&4294967295)<<15|L>>>17))*S+(((L>>>16)*S&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(L=0,c){case 3:L^=(255&A.charCodeAt(Q+2))<<16;case 2:L^=(255&A.charCodeAt(Q+1))<<8;case 1:C^=L=(65535&(L=(L=(65535&(L^=255&A.charCodeAt(Q)))*v+(((L>>>16)*v&65535)<<16)&4294967295)<<15|L>>>17))*S+(((L>>>16)*S&65535)<<16)&4294967295}return C^=A.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0};var ql=jl.exports,UA={exports:{}};UA.exports=function(A,i){for(var c,d=A.length,C=i^d,b=0;d>=4;)c=1540483477*(65535&(c=255&A.charCodeAt(b)|(255&A.charCodeAt(++b))<<8|(255&A.charCodeAt(++b))<<16|(255&A.charCodeAt(++b))<<24))+((1540483477*(c>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),d-=4,++b;switch(d){case 3:C^=(255&A.charCodeAt(b+2))<<16;case 2:C^=(255&A.charCodeAt(b+1))<<8;case 1:C=1540483477*(65535&(C^=255&A.charCodeAt(b)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0};var ya=ql,yu=UA.exports;na.exports=ya,na.exports.murmur3=ya,na.exports.murmur2=yu;var QA=p(na.exports);class Ns{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,c,d,C){this.ids.push($l(i)),this.positions.push(c,d,C)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let c=$l(i),d=0,C=this.ids.length-1;for(;d<C;){let v=d+C>>1;this.ids[v]>=c?C=v:d=v+1}let b=[];for(;this.ids[d]===c;)b.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return b}static serialize(i,c){let d=new Float64Array(i.ids),C=new Uint32Array(i.positions);return tc(d,C,0,d.length-1),c&&c.push(d.buffer,C.buffer),{ids:d,positions:C}}static deserialize(i){let c=new Ns;return c.ids=i.ids,c.positions=i.positions,c.indexed=!0,c}}function $l(A){let i=+A;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:QA(String(A))}function tc(A,i,c,d){for(;c<d;){let C=A[c+d>>1],b=c-1,v=d+1;for(;;){do b++;while(A[b]<C);do v--;while(A[v]>C);if(b>=v)break;RA(A,b,v),RA(i,3*b,3*v),RA(i,3*b+1,3*v+1),RA(i,3*b+2,3*v+2)}v-c<d-v?(tc(A,i,c,v),c=v+1):(tc(A,i,v+1,d),d=v)}}function RA(A,i,c){let d=A[i];A[i]=A[c],A[c]=d}oi("FeaturePositionMap",Ns);class GA{constructor(i,c){this.gl=i.gl,this.location=c}}class pl extends GA{constructor(i,c){super(i,c),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Eh extends GA{constructor(i,c){super(i,c),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Th extends GA{constructor(i,c){super(i,c),this.current=Fi.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}let bu=new Float32Array(16);function Mc(A){return[Mo(255*A.r,255*A.g),Mo(255*A.b,255*A.a)]}class Ka{constructor(i,c,d){this.value=i,this.uniformNames=c.map(C=>`u_${C}`),this.type=d}setUniform(i,c,d){i.set(d.constantOr(this.value))}getBinding(i,c,d){return this.type==="color"?new Th(i,c):new pl(i,c)}}class fl{constructor(i,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=i.tlbr}setUniform(i,c,d,C){let b=C==="u_pattern_to"?this.patternTo:C==="u_pattern_from"?this.patternFrom:C==="u_pixel_ratio_to"?this.pixelRatioTo:C==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&i.set(b)}getBinding(i,c,d){return d.substr(0,9)==="u_pattern"?new Eh(i,c):new pl(i,c)}}class Oa{constructor(i,c,d,C){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new C}populatePaintArray(i,c,d,C,b){let v=this.paintVertexArray.length,S=this.expression.evaluate(new Qr(0),c,{},C,[],b);this.paintVertexArray.resize(i),this._setPaintValue(v,i,S)}updatePaintArray(i,c,d,C){let b=this.expression.evaluate({zoom:0},d,C);this._setPaintValue(i,c,b)}_setPaintValue(i,c,d){if(this.type==="color"){let C=Mc(d);for(let b=i;b<c;b++)this.paintVertexArray.emplace(b,C[0],C[1])}else{for(let C=i;C<c;C++)this.paintVertexArray.emplace(C,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Vs{constructor(i,c,d,C,b,v){this.expression=i,this.uniformNames=c.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=C,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=c.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,c,d,C,b){let v=this.expression.evaluate(new Qr(this.zoom),c,{},C,[],b),S=this.expression.evaluate(new Qr(this.zoom+1),c,{},C,[],b),L=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(L,i,v,S)}updatePaintArray(i,c,d,C){let b=this.expression.evaluate({zoom:this.zoom},d,C),v=this.expression.evaluate({zoom:this.zoom+1},d,C);this._setPaintValue(i,c,b,v)}_setPaintValue(i,c,d,C){if(this.type==="color"){let b=Mc(d),v=Mc(C);for(let S=i;S<c;S++)this.paintVertexArray.emplace(S,b[0],b[1],v[0],v[1])}else{for(let b=i;b<c;b++)this.paintVertexArray.emplace(b,d,C);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(C))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,c){let d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,C=ot(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);i.set(C)}getBinding(i,c,d){return new pl(i,c)}}class za{constructor(i,c,d,C,b,v){this.expression=i,this.type=c,this.useIntegerZoom=d,this.zoom=C,this.layerId=v,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(i,c,d){let C=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(C,i,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(i,c,d,C,b){this._setPaintValues(i,c,d.patterns&&d.patterns[this.layerId],b)}_setPaintValues(i,c,d,C){if(!C||!d)return;let{min:b,mid:v,max:S}=d,L=C[b],Q=C[v],Z=C[S];if(L&&Q&&Z)for(let N=i;N<c;N++)this.zoomInPaintVertexArray.emplace(N,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],Q.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],Q.pixelRatio,Z.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Da.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Da.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class vu{constructor(i,c,d){this.binders={},this._buffers=[];let C=[];for(let b in i.paint._values){if(!d(b))continue;let v=i.paint.get(b);if(!(v instanceof Ho&&$o(v.property.specification)))continue;let S=sd(b,i.type),L=v.value,Q=v.property.specification.type,Z=v.property.useIntegerZoom,N=v.property.specification["property-type"],O=N==="cross-faded"||N==="cross-faded-data-driven";if(L.kind==="constant")this.binders[b]=O?new fl(L.value,S):new Ka(L.value,S,Q),C.push(`/u_${b}`);else if(L.kind==="source"||O){let q=Uh(b,Q,"source");this.binders[b]=O?new za(L,Q,Z,c,q,i.id):new Oa(L,S,Q,q),C.push(`/a_${b}`)}else{let q=Uh(b,Q,"composite");this.binders[b]=new Vs(L,S,Q,Z,c,q),C.push(`/z_${b}`)}}this.cacheKey=C.sort().join("")}getMaxValue(i){let c=this.binders[i];return c instanceof Oa||c instanceof Vs?c.maxValue:0}populatePaintArrays(i,c,d,C,b){for(let v in this.binders){let S=this.binders[v];(S instanceof Oa||S instanceof Vs||S instanceof za)&&S.populatePaintArray(i,c,d,C,b)}}setConstantPatternPositions(i,c){for(let d in this.binders){let C=this.binders[d];C instanceof fl&&C.setConstantPatternPositions(i,c)}}updatePaintArrays(i,c,d,C,b){let v=!1;for(let S in i){let L=c.getPositions(S);for(let Q of L){let Z=d.feature(Q.index);for(let N in this.binders){let O=this.binders[N];if((O instanceof Oa||O instanceof Vs||O instanceof za)&&O.expression.isStateDependent===!0){let q=C.paint.get(N);O.expression=q.value,O.updatePaintArray(Q.start,Q.end,Z,i[S],b),v=!0}}}}return v}defines(){let i=[];for(let c in this.binders){let d=this.binders[c];(d instanceof Ka||d instanceof fl)&&i.push(...d.uniformNames.map(C=>`#define HAS_UNIFORM_${C}`))}return i}getBinderAttributes(){let i=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof Oa||d instanceof Vs)for(let C=0;C<d.paintVertexAttributes.length;C++)i.push(d.paintVertexAttributes[C].name);else if(d instanceof za)for(let C=0;C<Da.members.length;C++)i.push(Da.members[C].name)}return i}getBinderUniforms(){let i=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof Ka||d instanceof fl||d instanceof Vs)for(let C of d.uniformNames)i.push(C)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,c){let d=[];for(let C in this.binders){let b=this.binders[C];if(b instanceof Ka||b instanceof fl||b instanceof Vs){for(let v of b.uniformNames)if(c[v]){let S=b.getBinding(i,c[v],v);d.push({name:v,property:C,binding:S})}}}return d}setUniforms(i,c,d,C){for(let{name:b,property:v,binding:S}of c)this.binders[v].setUniform(S,C,d.get(v),b)}updatePaintBuffers(i){this._buffers=[];for(let c in this.binders){let d=this.binders[c];if(i&&d instanceof za){let C=i.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;C&&this._buffers.push(C)}else(d instanceof Oa||d instanceof Vs)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(i){for(let c in this.binders){let d=this.binders[c];(d instanceof Oa||d instanceof Vs||d instanceof za)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(let i in this.binders){let c=this.binders[i];(c instanceof Oa||c instanceof Vs||c instanceof za)&&c.destroy()}}}class Ds{constructor(i,c,d=()=>!0){this.programConfigurations={};for(let C of i)this.programConfigurations[C.id]=new vu(C,c,d);this.needsUpload=!1,this._featureMap=new Ns,this._bufferOffset=0}populatePaintArrays(i,c,d,C,b,v){for(let S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(i,c,C,b,v);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,c,d,C){for(let b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(i,this._featureMap,c,b,C)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(let c in this.programConfigurations)this.programConfigurations[c].upload(i);this.needsUpload=!1}}destroy(){for(let i in this.programConfigurations)this.programConfigurations[i].destroy()}}function sd(A,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${i}-`,"").replace(/-/g,"_")]}function Uh(A,i,c){let d={color:{source:M,composite:ri},number:{source:xe,composite:M}},C=function(b){return{"line-pattern":{source:Cr,composite:Cr},"fill-pattern":{source:Cr,composite:Cr},"fill-extrusion-pattern":{source:Cr,composite:Cr}}[b]}(A);return C&&C[c]||d[i][c]}oi("ConstantBinder",Ka),oi("CrossFadedConstantBinder",fl),oi("SourceExpressionBinder",Oa),oi("CrossFadedCompositeBinder",za),oi("CompositeExpressionBinder",Vs),oi("ProgramConfiguration",vu,{omit:["_buffers"]}),oi("ProgramConfigurationSet",Ds);let cn=8192,wu=Math.pow(2,14)-1,ml=-wu-1;function Cl(A){let i=cn/A.extent,c=A.loadGeometry();for(let d=0;d<c.length;d++){let C=c[d];for(let b=0;b<C.length;b++){let v=C[b],S=Math.round(v.x*i),L=Math.round(v.y*i);v.x=ot(S,ml,wu),v.y=ot(L,ml,wu),(S<v.x||S>v.x+1||L<v.y||L>v.y+1)&&at("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function ZA(A,i){return{type:A.type,id:A.id,properties:A.properties,geometry:i?Cl(A):[]}}function Bu(A,i,c,d,C){A.emplaceBack(2*i+(d+1)/2,2*c+(C+1)/2)}class _u{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ir,this.indexArray=new as,this.segments=new cr,this.programConfigurations=new Ds(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,d){let C=this.layers[0],b=[],v=null,S=!1;C.type==="circle"&&(v=C.layout.get("circle-sort-key"),S=!v.isConstant());for(let{feature:L,id:Q,index:Z,sourceLayerIndex:N}of i){let O=this.layers[0]._featureFilter.needGeometry,q=ZA(L,O);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),q,d))continue;let nt=S?v.evaluate(q,{},d):void 0,lt={id:Q,properties:L.properties,type:L.type,sourceLayerIndex:N,index:Z,geometry:O?q.geometry:Cl(L),patterns:{},sortKey:nt};b.push(lt)}S&&b.sort((L,Q)=>L.sortKey-Q.sortKey);for(let L of b){let{geometry:Q,index:Z,sourceLayerIndex:N}=L,O=i[Z].feature;this.addFeature(L,Q,Z,d),c.featureIndex.insert(O,Q,Z,N,this.index)}}update(i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,bn),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,c,d,C){for(let b of c)for(let v of b){let S=v.x,L=v.y;if(S<0||S>=cn||L<0||L>=cn)continue;let Q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),Z=Q.vertexLength;Bu(this.layoutVertexArray,S,L,-1,-1),Bu(this.layoutVertexArray,S,L,1,-1),Bu(this.layoutVertexArray,S,L,1,1),Bu(this.layoutVertexArray,S,L,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),Q.vertexLength+=4,Q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{},C)}}function od(A,i){for(let c=0;c<A.length;c++)if(Il(i,A[c]))return!0;for(let c=0;c<i.length;c++)if(Il(A,i[c]))return!0;return!!sa(A,i)}function Nc(A,i,c){return!!Il(A,i)||!!ba(i,A,c)}function xu(A,i){if(A.length===1)return Fu(i,A[0]);for(let c=0;c<i.length;c++){let d=i[c];for(let C=0;C<d.length;C++)if(Il(A,d[C]))return!0}for(let c=0;c<A.length;c++)if(Fu(i,A[c]))return!0;for(let c=0;c<i.length;c++)if(sa(A,i[c]))return!0;return!1}function Su(A,i,c){if(A.length>1){if(sa(A,i))return!0;for(let d=0;d<i.length;d++)if(ba(i[d],A,c))return!0}for(let d=0;d<A.length;d++)if(ba(A[d],i,c))return!0;return!1}function sa(A,i){if(A.length===0||i.length===0)return!1;for(let c=0;c<A.length-1;c++){let d=A[c],C=A[c+1];for(let b=0;b<i.length-1;b++)if(PA(d,C,i[b],i[b+1]))return!0}return!1}function PA(A,i,c,d){return st(A,c,d)!==st(i,c,d)&&st(A,i,c)!==st(A,i,d)}function ba(A,i,c){let d=c*c;if(i.length===1)return A.distSqr(i[0])<d;for(let C=1;C<i.length;C++)if(Vc(A,i[C-1],i[C])<d)return!0;return!1}function Vc(A,i,c){let d=i.distSqr(c);if(d===0)return A.distSqr(i);let C=((A.x-i.x)*(c.x-i.x)+(A.y-i.y)*(c.y-i.y))/d;return A.distSqr(C<0?i:C>1?c:c.sub(i)._mult(C)._add(i))}function Fu(A,i){let c,d,C,b=!1;for(let v=0;v<A.length;v++){c=A[v];for(let S=0,L=c.length-1;S<c.length;L=S++)d=c[S],C=c[L],d.y>i.y!=C.y>i.y&&i.x<(C.x-d.x)*(i.y-d.y)/(C.y-d.y)+d.x&&(b=!b)}return b}function Il(A,i){let c=!1;for(let d=0,C=A.length-1;d<A.length;C=d++){let b=A[d],v=A[C];b.y>i.y!=v.y>i.y&&i.x<(v.x-b.x)*(i.y-b.y)/(v.y-b.y)+b.x&&(c=!c)}return c}function mm(A,i,c){let d=c[0],C=c[2];if(A.x<d.x&&i.x<d.x||A.x>C.x&&i.x>C.x||A.y<d.y&&i.y<d.y||A.y>C.y&&i.y>C.y)return!1;let b=st(A,i,c[0]);return b!==st(A,i,c[1])||b!==st(A,i,c[2])||b!==st(A,i,c[3])}function yl(A,i,c){let d=i.paint.get(A).value;return d.kind==="constant"?d.value:c.programConfigurations.get(i.id).getMaxValue(A)}function ec(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function ad(A,i,c,d,C){if(!i[0]&&!i[1])return A;let b=w.convert(i)._mult(C);c==="viewport"&&b._rotate(-d);let v=[];for(let S=0;S<A.length;S++)v.push(A[S].sub(b));return v}let e1,i1;oi("CircleBucket",_u,{omit:["layers"]});var uS={get paint(){return i1=i1||new u({"circle-radius":new _i(Dt.paint_circle["circle-radius"]),"circle-color":new _i(Dt.paint_circle["circle-color"]),"circle-blur":new _i(Dt.paint_circle["circle-blur"]),"circle-opacity":new _i(Dt.paint_circle["circle-opacity"]),"circle-translate":new gi(Dt.paint_circle["circle-translate"]),"circle-translate-anchor":new gi(Dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gi(Dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gi(Dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _i(Dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _i(Dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _i(Dt.paint_circle["circle-stroke-opacity"])})},get layout(){return e1=e1||new u({"circle-sort-key":new _i(Dt.layout_circle["circle-sort-key"])})}},Ks=1e-6,ku=typeof Float32Array<"u"?Float32Array:Array;function Cm(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function r1(A,i,c){var d=i[0],C=i[1],b=i[2],v=i[3],S=i[4],L=i[5],Q=i[6],Z=i[7],N=i[8],O=i[9],q=i[10],nt=i[11],lt=i[12],Bt=i[13],Gt=i[14],re=i[15],Kt=c[0],Yt=c[1],ge=c[2],Re=c[3];return A[0]=Kt*d+Yt*S+ge*N+Re*lt,A[1]=Kt*C+Yt*L+ge*O+Re*Bt,A[2]=Kt*b+Yt*Q+ge*q+Re*Gt,A[3]=Kt*v+Yt*Z+ge*nt+Re*re,A[4]=(Kt=c[4])*d+(Yt=c[5])*S+(ge=c[6])*N+(Re=c[7])*lt,A[5]=Kt*C+Yt*L+ge*O+Re*Bt,A[6]=Kt*b+Yt*Q+ge*q+Re*Gt,A[7]=Kt*v+Yt*Z+ge*nt+Re*re,A[8]=(Kt=c[8])*d+(Yt=c[9])*S+(ge=c[10])*N+(Re=c[11])*lt,A[9]=Kt*C+Yt*L+ge*O+Re*Bt,A[10]=Kt*b+Yt*Q+ge*q+Re*Gt,A[11]=Kt*v+Yt*Z+ge*nt+Re*re,A[12]=(Kt=c[12])*d+(Yt=c[13])*S+(ge=c[14])*N+(Re=c[15])*lt,A[13]=Kt*C+Yt*L+ge*O+Re*Bt,A[14]=Kt*b+Yt*Q+ge*q+Re*Gt,A[15]=Kt*v+Yt*Z+ge*nt+Re*re,A}Math.hypot||(Math.hypot=function(){for(var A=0,i=arguments.length;i--;)A+=arguments[i]*arguments[i];return Math.sqrt(A)});var Qh,hS=r1;function Ad(A,i,c){var d=i[0],C=i[1],b=i[2],v=i[3];return A[0]=c[0]*d+c[4]*C+c[8]*b+c[12]*v,A[1]=c[1]*d+c[5]*C+c[9]*b+c[13]*v,A[2]=c[2]*d+c[6]*C+c[10]*b+c[14]*v,A[3]=c[3]*d+c[7]*C+c[11]*b+c[15]*v,A}Qh=new ku(4),ku!=Float32Array&&(Qh[0]=0,Qh[1]=0,Qh[2]=0,Qh[3]=0);class gS extends a{constructor(i){super(i,uS)}createBucket(i){return new _u(i)}queryRadius(i){let c=i;return yl("circle-radius",this,c)+yl("circle-stroke-width",this,c)+ec(this.paint.get("circle-translate"))}queryIntersectsFeature(i,c,d,C,b,v,S,L){let Q=ad(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,S),Z=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),N=this.paint.get("circle-pitch-alignment")==="map",O=N?Q:function(nt,lt){return nt.map(Bt=>n1(Bt,lt))}(Q,L),q=N?Z*S:Z;for(let nt of C)for(let lt of nt){let Bt=N?lt:n1(lt,L),Gt=q,re=Ad([],[lt.x,lt.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Gt*=re[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Gt*=v.cameraToCenterDistance/re[3]),Nc(O,Bt,Gt))return!0}return!1}}function n1(A,i){let c=Ad([],[A.x,A.y,0,1],i);return new w(c[0]/c[3],c[1]/c[3])}class s1 extends _u{}let o1;oi("HeatmapBucket",s1,{omit:["layers"]});var dS={get paint(){return o1=o1||new u({"heatmap-radius":new _i(Dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _i(Dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gi(Dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xl(Dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gi(Dt.paint_heatmap["heatmap-opacity"])})}};function Im(A,{width:i,height:c},d,C){if(C){if(C instanceof Uint8ClampedArray)C=new Uint8Array(C.buffer);else if(C.length!==i*c*d)throw new RangeError(`mismatched image size. expected: ${C.length} but got: ${i*c*d}`)}else C=new Uint8Array(i*c*d);return A.width=i,A.height=c,A.data=C,A}function a1(A,{width:i,height:c},d){if(i===A.width&&c===A.height)return;let C=Im({},{width:i,height:c},d);ym(A,C,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,i),height:Math.min(A.height,c)},d),A.width=i,A.height=c,A.data=C.data}function ym(A,i,c,d,C,b){if(C.width===0||C.height===0)return i;if(C.width>A.width||C.height>A.height||c.x>A.width-C.width||c.y>A.height-C.height)throw new RangeError("out of range source coordinates for image copy");if(C.width>i.width||C.height>i.height||d.x>i.width-C.width||d.y>i.height-C.height)throw new RangeError("out of range destination coordinates for image copy");let v=A.data,S=i.data;if(v===S)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<C.height;L++){let Q=((c.y+L)*A.width+c.x)*b,Z=((d.y+L)*i.width+d.x)*b;for(let N=0;N<C.width*b;N++)S[Z+N]=v[Q+N]}return i}class Rh{constructor(i,c){Im(this,i,1,c)}resize(i){a1(this,i,1)}clone(){return new Rh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,c,d,C,b){ym(i,c,d,C,b,1)}}class oa{constructor(i,c){Im(this,i,4,c)}resize(i){a1(this,i,4)}replace(i,c){c?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new oa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,c,d,C,b){ym(i,c,d,C,b,4)}}function A1(A){let i={},c=A.resolution||256,d=A.clips?A.clips.length:1,C=A.image||new oa({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);let b=(v,S,L)=>{i[A.evaluationKey]=L;let Q=A.expression.evaluate(i);C.data[v+S+0]=Math.floor(255*Q.r/Q.a),C.data[v+S+1]=Math.floor(255*Q.g/Q.a),C.data[v+S+2]=Math.floor(255*Q.b/Q.a),C.data[v+S+3]=Math.floor(255*Q.a)};if(A.clips)for(let v=0,S=0;v<d;++v,S+=4*c)for(let L=0,Q=0;L<c;L++,Q+=4){let Z=L/(c-1),{start:N,end:O}=A.clips[v];b(S,Q,N*(1-Z)+O*Z)}else for(let v=0,S=0;v<c;v++,S+=4)b(0,S,v/(c-1));return C}oi("AlphaImage",Rh),oi("RGBAImage",oa);let bm="big-fb";class pS extends a{createBucket(i){return new s1(i)}constructor(i){super(i,dS),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=A1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(bm)&&this.heatmapFbos.delete(bm)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let l1;var fS={get paint(){return l1=l1||new u({"hillshade-illumination-direction":new gi(Dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gi(Dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gi(Dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gi(Dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gi(Dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gi(Dt.paint_hillshade["hillshade-accent-color"])})}};class mS extends a{constructor(i){super(i,fS)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let CS=y([{name:"a_pos",components:2,type:"Int16"}],4),{members:IS}=CS;function c1(A,i,c=2){let d=i&&i.length,C=d?i[0]*c:A.length,b=u1(A,0,C,c,!0),v=[];if(!b||b.next===b.prev)return v;let S,L,Q;if(d&&(b=function(Z,N,O,q){let nt=[];for(let lt=0,Bt=N.length;lt<Bt;lt++){let Gt=u1(Z,N[lt]*q,lt<Bt-1?N[lt+1]*q:Z.length,q,!1);Gt===Gt.next&&(Gt.steiner=!0),nt.push(SS(Gt))}nt.sort(BS);for(let lt=0;lt<nt.length;lt++)O=_S(nt[lt],O);return O}(A,i,b,c)),A.length>80*c){S=1/0,L=1/0;let Z=-1/0,N=-1/0;for(let O=c;O<C;O+=c){let q=A[O],nt=A[O+1];q<S&&(S=q),nt<L&&(L=nt),q>Z&&(Z=q),nt>N&&(N=nt)}Q=Math.max(Z-S,N-L),Q=Q!==0?32767/Q:0}return Gh(b,v,c,S,L,Q,0),v}function u1(A,i,c,d,C){let b;if(C===function(v,S,L,Q){let Z=0;for(let N=S,O=L-Q;N<L;N+=Q)Z+=(v[O]-v[N])*(v[N+1]+v[O+1]),O=N;return Z}(A,i,c,d)>0)for(let v=i;v<c;v+=d)b=d1(v/d|0,A[v],A[v+1],b);else for(let v=c-d;v>=i;v-=d)b=d1(v/d|0,A[v],A[v+1],b);return b&&ld(b,b.next)&&(Ph(b),b=b.next),b}function Dc(A,i){if(!A)return A;i||(i=A);let c,d=A;do if(c=!1,d.steiner||!ld(d,d.next)&&mn(d.prev,d,d.next)!==0)d=d.next;else{if(Ph(d),d=i=d.prev,d===d.next)break;c=!0}while(c||d!==i);return i}function Gh(A,i,c,d,C,b,v){if(!A)return;!v&&b&&function(L,Q,Z,N){let O=L;do O.z===0&&(O.z=vm(O.x,O.y,Q,Z,N)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==L);O.prevZ.nextZ=null,O.prevZ=null,function(q){let nt,lt=1;do{let Bt,Gt=q;q=null;let re=null;for(nt=0;Gt;){nt++;let Kt=Gt,Yt=0;for(let Re=0;Re<lt&&(Yt++,Kt=Kt.nextZ,Kt);Re++);let ge=lt;for(;Yt>0||ge>0&&Kt;)Yt!==0&&(ge===0||!Kt||Gt.z<=Kt.z)?(Bt=Gt,Gt=Gt.nextZ,Yt--):(Bt=Kt,Kt=Kt.nextZ,ge--),re?re.nextZ=Bt:q=Bt,Bt.prevZ=re,re=Bt;Gt=Kt}re.nextZ=null,lt*=2}while(nt>1)}(O)}(A,d,C,b);let S=A;for(;A.prev!==A.next;){let L=A.prev,Q=A.next;if(b?bS(A,d,C,b):yS(A))i.push(L.i,A.i,Q.i),Ph(A),A=Q.next,S=Q.next;else if((A=Q)===S){v?v===1?Gh(A=vS(Dc(A),i),i,c,d,C,b,2):v===2&&wS(A,i,c,d,C,b):Gh(Dc(A),i,c,d,C,b,1);break}}}function yS(A){let i=A.prev,c=A,d=A.next;if(mn(i,c,d)>=0)return!1;let C=i.x,b=c.x,v=d.x,S=i.y,L=c.y,Q=d.y,Z=C<b?C<v?C:v:b<v?b:v,N=S<L?S<Q?S:Q:L<Q?L:Q,O=C>b?C>v?C:v:b>v?b:v,q=S>L?S>Q?S:Q:L>Q?L:Q,nt=d.next;for(;nt!==i;){if(nt.x>=Z&&nt.x<=O&&nt.y>=N&&nt.y<=q&&Lu(C,S,b,L,v,Q,nt.x,nt.y)&&mn(nt.prev,nt,nt.next)>=0)return!1;nt=nt.next}return!0}function bS(A,i,c,d){let C=A.prev,b=A,v=A.next;if(mn(C,b,v)>=0)return!1;let S=C.x,L=b.x,Q=v.x,Z=C.y,N=b.y,O=v.y,q=S<L?S<Q?S:Q:L<Q?L:Q,nt=Z<N?Z<O?Z:O:N<O?N:O,lt=S>L?S>Q?S:Q:L>Q?L:Q,Bt=Z>N?Z>O?Z:O:N>O?N:O,Gt=vm(q,nt,i,c,d),re=vm(lt,Bt,i,c,d),Kt=A.prevZ,Yt=A.nextZ;for(;Kt&&Kt.z>=Gt&&Yt&&Yt.z<=re;){if(Kt.x>=q&&Kt.x<=lt&&Kt.y>=nt&&Kt.y<=Bt&&Kt!==C&&Kt!==v&&Lu(S,Z,L,N,Q,O,Kt.x,Kt.y)&&mn(Kt.prev,Kt,Kt.next)>=0||(Kt=Kt.prevZ,Yt.x>=q&&Yt.x<=lt&&Yt.y>=nt&&Yt.y<=Bt&&Yt!==C&&Yt!==v&&Lu(S,Z,L,N,Q,O,Yt.x,Yt.y)&&mn(Yt.prev,Yt,Yt.next)>=0))return!1;Yt=Yt.nextZ}for(;Kt&&Kt.z>=Gt;){if(Kt.x>=q&&Kt.x<=lt&&Kt.y>=nt&&Kt.y<=Bt&&Kt!==C&&Kt!==v&&Lu(S,Z,L,N,Q,O,Kt.x,Kt.y)&&mn(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.prevZ}for(;Yt&&Yt.z<=re;){if(Yt.x>=q&&Yt.x<=lt&&Yt.y>=nt&&Yt.y<=Bt&&Yt!==C&&Yt!==v&&Lu(S,Z,L,N,Q,O,Yt.x,Yt.y)&&mn(Yt.prev,Yt,Yt.next)>=0)return!1;Yt=Yt.nextZ}return!0}function vS(A,i){let c=A;do{let d=c.prev,C=c.next.next;!ld(d,C)&&h1(d,c,c.next,C)&&Zh(d,C)&&Zh(C,d)&&(i.push(d.i,c.i,C.i),Ph(c),Ph(c.next),c=A=C),c=c.next}while(c!==A);return Dc(c)}function wS(A,i,c,d,C,b){let v=A;do{let S=v.next.next;for(;S!==v.prev;){if(v.i!==S.i&&FS(v,S)){let L=g1(v,S);return v=Dc(v,v.next),L=Dc(L,L.next),Gh(v,i,c,d,C,b,0),void Gh(L,i,c,d,C,b,0)}S=S.next}v=v.next}while(v!==A)}function BS(A,i){return A.x-i.x}function _S(A,i){let c=function(C,b){let v=b,S=C.x,L=C.y,Q,Z=-1/0;do{if(L<=v.y&&L>=v.next.y&&v.next.y!==v.y){let lt=v.x+(L-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(lt<=S&&lt>Z&&(Z=lt,Q=v.x<v.next.x?v:v.next,lt===S))return Q}v=v.next}while(v!==b);if(!Q)return null;let N=Q,O=Q.x,q=Q.y,nt=1/0;v=Q;do{if(S>=v.x&&v.x>=O&&S!==v.x&&Lu(L<q?S:Z,L,O,q,L<q?Z:S,L,v.x,v.y)){let lt=Math.abs(L-v.y)/(S-v.x);Zh(v,C)&&(lt<nt||lt===nt&&(v.x>Q.x||v.x===Q.x&&xS(Q,v)))&&(Q=v,nt=lt)}v=v.next}while(v!==N);return Q}(A,i);if(!c)return i;let d=g1(c,A);return Dc(d,d.next),Dc(c,c.next)}function xS(A,i){return mn(A.prev,A,i.prev)<0&&mn(i.next,A,A.next)<0}function vm(A,i,c,d,C){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-c)*C|0)|A<<8))|A<<4))|A<<2))|A<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*C|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function SS(A){let i=A,c=A;do(i.x<c.x||i.x===c.x&&i.y<c.y)&&(c=i),i=i.next;while(i!==A);return c}function Lu(A,i,c,d,C,b,v,S){return(C-v)*(i-S)>=(A-v)*(b-S)&&(A-v)*(d-S)>=(c-v)*(i-S)&&(c-v)*(b-S)>=(C-v)*(d-S)}function FS(A,i){return A.next.i!==i.i&&A.prev.i!==i.i&&!function(c,d){let C=c;do{if(C.i!==c.i&&C.next.i!==c.i&&C.i!==d.i&&C.next.i!==d.i&&h1(C,C.next,c,d))return!0;C=C.next}while(C!==c);return!1}(A,i)&&(Zh(A,i)&&Zh(i,A)&&function(c,d){let C=c,b=!1,v=(c.x+d.x)/2,S=(c.y+d.y)/2;do C.y>S!=C.next.y>S&&C.next.y!==C.y&&v<(C.next.x-C.x)*(S-C.y)/(C.next.y-C.y)+C.x&&(b=!b),C=C.next;while(C!==c);return b}(A,i)&&(mn(A.prev,A,i.prev)||mn(A,i.prev,i))||ld(A,i)&&mn(A.prev,A,A.next)>0&&mn(i.prev,i,i.next)>0)}function mn(A,i,c){return(i.y-A.y)*(c.x-i.x)-(i.x-A.x)*(c.y-i.y)}function ld(A,i){return A.x===i.x&&A.y===i.y}function h1(A,i,c,d){let C=ud(mn(A,i,c)),b=ud(mn(A,i,d)),v=ud(mn(c,d,A)),S=ud(mn(c,d,i));return C!==b&&v!==S||!(C!==0||!cd(A,c,i))||!(b!==0||!cd(A,d,i))||!(v!==0||!cd(c,A,d))||!(S!==0||!cd(c,i,d))}function cd(A,i,c){return i.x<=Math.max(A.x,c.x)&&i.x>=Math.min(A.x,c.x)&&i.y<=Math.max(A.y,c.y)&&i.y>=Math.min(A.y,c.y)}function ud(A){return A>0?1:A<0?-1:0}function Zh(A,i){return mn(A.prev,A,A.next)<0?mn(A,i,A.next)>=0&&mn(A,A.prev,i)>=0:mn(A,i,A.prev)<0||mn(A,A.next,i)<0}function g1(A,i){let c=wm(A.i,A.x,A.y),d=wm(i.i,i.x,i.y),C=A.next,b=i.prev;return A.next=i,i.prev=A,c.next=C,C.prev=c,d.next=c,c.prev=d,b.next=d,d.prev=b,d}function d1(A,i,c,d){let C=wm(A,i,c);return d?(C.next=d.next,C.prev=d,d.next.prev=C,d.next=C):(C.prev=C,C.next=C),C}function Ph(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function wm(A,i,c){return{i:A,x:i,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Bm(A,i,c){let d=c.patternDependencies,C=!1;for(let b of i){let v=b.paint.get(`${A}-pattern`);v.isConstant()||(C=!0);let S=v.constantOr(null);S&&(C=!0,d[S.to]=!0,d[S.from]=!0)}return C}function _m(A,i,c,d,C){let b=C.patternDependencies;for(let v of i){let S=v.paint.get(`${A}-pattern`).value;if(S.kind!=="constant"){let L=S.evaluate({zoom:d-1},c,{},C.availableImages),Q=S.evaluate({zoom:d},c,{},C.availableImages),Z=S.evaluate({zoom:d+1},c,{},C.availableImages);L=L&&L.name?L.name:L,Q=Q&&Q.name?Q.name:Q,Z=Z&&Z.name?Z.name:Z,b[L]=!0,b[Q]=!0,b[Z]=!0,c.patterns[v.id]={min:L,mid:Q,max:Z}}}return c}class xm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new yn,this.indexArray=new as,this.indexArray2=new Rr,this.programConfigurations=new Ds(i.layers,i.zoom),this.segments=new cr,this.segments2=new cr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,d){this.hasPattern=Bm("fill",this.layers,c);let C=this.layers[0].layout.get("fill-sort-key"),b=!C.isConstant(),v=[];for(let{feature:S,id:L,index:Q,sourceLayerIndex:Z}of i){let N=this.layers[0]._featureFilter.needGeometry,O=ZA(S,N);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),O,d))continue;let q=b?C.evaluate(O,{},d,c.availableImages):void 0,nt={id:L,properties:S.properties,type:S.type,sourceLayerIndex:Z,index:Q,geometry:N?O.geometry:Cl(S),patterns:{},sortKey:q};v.push(nt)}b&&v.sort((S,L)=>S.sortKey-L.sortKey);for(let S of v){let{geometry:L,index:Q,sourceLayerIndex:Z}=S;if(this.hasPattern){let N=_m("fill",this.layers,S,this.zoom,c);this.patternFeatures.push(N)}else this.addFeature(S,L,Q,d,{});c.featureIndex.insert(i[Q].feature,L,Q,Z,this.index)}}update(i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,d)}addFeatures(i,c,d){for(let C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,IS),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,c,d,C,b){for(let v of fA(c,500)){let S=0;for(let q of v)S+=q.length;let L=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),Q=L.vertexLength,Z=[],N=[];for(let q of v){if(q.length===0)continue;q!==v[0]&&N.push(Z.length/2);let nt=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),lt=nt.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack(lt+q.length-1,lt),Z.push(q[0].x),Z.push(q[0].y);for(let Bt=1;Bt<q.length;Bt++)this.layoutVertexArray.emplaceBack(q[Bt].x,q[Bt].y),this.indexArray2.emplaceBack(lt+Bt-1,lt+Bt),Z.push(q[Bt].x),Z.push(q[Bt].y);nt.vertexLength+=q.length,nt.primitiveLength+=q.length}let O=c1(Z,N);for(let q=0;q<O.length;q+=3)this.indexArray.emplaceBack(Q+O[q],Q+O[q+1],Q+O[q+2]);L.vertexLength+=S,L.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,b,C)}}let p1,f1;oi("FillBucket",xm,{omit:["layers","patternFeatures"]});var kS={get paint(){return f1=f1||new u({"fill-antialias":new gi(Dt.paint_fill["fill-antialias"]),"fill-opacity":new _i(Dt.paint_fill["fill-opacity"]),"fill-color":new _i(Dt.paint_fill["fill-color"]),"fill-outline-color":new _i(Dt.paint_fill["fill-outline-color"]),"fill-translate":new gi(Dt.paint_fill["fill-translate"]),"fill-translate-anchor":new gi(Dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wl(Dt.paint_fill["fill-pattern"])})},get layout(){return p1=p1||new u({"fill-sort-key":new _i(Dt.layout_fill["fill-sort-key"])})}};class LS extends a{constructor(i){super(i,kS)}recalculate(i,c){super.recalculate(i,c);let d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new xm(i)}queryRadius(){return ec(this.paint.get("fill-translate"))}queryIntersectsFeature(i,c,d,C,b,v,S){return xu(ad(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,S),C)}isTileClipped(){return!0}}let ES=y([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),TS=y([{name:"a_centroid",components:2,type:"Int16"}],4),{members:US}=ES;var ic={},QS=m,m1=Eu;function Eu(A,i,c,d,C){this.properties={},this.extent=c,this.type=0,this._pbf=A,this._geometry=-1,this._keys=d,this._values=C,A.readFields(RS,this,i)}function RS(A,i,c){A==1?i.id=c.readVarint():A==2?function(d,C){for(var b=d.readVarint()+d.pos;d.pos<b;){var v=C._keys[d.readVarint()],S=C._values[d.readVarint()];C.properties[v]=S}}(c,i):A==3?i.type=c.readVarint():A==4&&(i._geometry=c.pos)}function GS(A){for(var i,c,d=0,C=0,b=A.length,v=b-1;C<b;v=C++)d+=((c=A[v]).x-(i=A[C]).x)*(i.y+c.y);return d}Eu.types=["Unknown","Point","LineString","Polygon"],Eu.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var i,c=A.readVarint()+A.pos,d=1,C=0,b=0,v=0,S=[];A.pos<c;){if(C<=0){var L=A.readVarint();d=7&L,C=L>>3}if(C--,d===1||d===2)b+=A.readSVarint(),v+=A.readSVarint(),d===1&&(i&&S.push(i),i=[]),i.push(new QS(b,v));else{if(d!==7)throw new Error("unknown command "+d);i&&i.push(i[0].clone())}}return i&&S.push(i),S},Eu.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var i=A.readVarint()+A.pos,c=1,d=0,C=0,b=0,v=1/0,S=-1/0,L=1/0,Q=-1/0;A.pos<i;){if(d<=0){var Z=A.readVarint();c=7&Z,d=Z>>3}if(d--,c===1||c===2)(C+=A.readSVarint())<v&&(v=C),C>S&&(S=C),(b+=A.readSVarint())<L&&(L=b),b>Q&&(Q=b);else if(c!==7)throw new Error("unknown command "+c)}return[v,L,S,Q]},Eu.prototype.toGeoJSON=function(A,i,c){var d,C,b=this.extent*Math.pow(2,c),v=this.extent*A,S=this.extent*i,L=this.loadGeometry(),Q=Eu.types[this.type];function Z(q){for(var nt=0;nt<q.length;nt++){var lt=q[nt];q[nt]=[360*(lt.x+v)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(lt.y+S)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(d=0;d<L.length;d++)N[d]=L[d][0];Z(L=N);break;case 2:for(d=0;d<L.length;d++)Z(L[d]);break;case 3:for(L=function(q){var nt=q.length;if(nt<=1)return[q];for(var lt,Bt,Gt=[],re=0;re<nt;re++){var Kt=GS(q[re]);Kt!==0&&(Bt===void 0&&(Bt=Kt<0),Bt===Kt<0?(lt&&Gt.push(lt),lt=[q[re]]):lt.push(q[re]))}return lt&&Gt.push(lt),Gt}(L),d=0;d<L.length;d++)for(C=0;C<L[d].length;C++)Z(L[d][C])}L.length===1?L=L[0]:Q="Multi"+Q;var O={type:"Feature",geometry:{type:Q,coordinates:L},properties:this.properties};return"id"in this&&(O.id=this.id),O};var ZS=m1,C1=I1;function I1(A,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(PS,this,i),this.length=this._features.length}function PS(A,i,c){A===15?i.version=c.readVarint():A===1?i.name=c.readString():A===5?i.extent=c.readVarint():A===2?i._features.push(c.pos):A===3?i._keys.push(c.readString()):A===4&&i._values.push(function(d){for(var C=null,b=d.readVarint()+d.pos;d.pos<b;){var v=d.readVarint()>>3;C=v===1?d.readString():v===2?d.readFloat():v===3?d.readDouble():v===4?d.readVarint64():v===5?d.readVarint():v===6?d.readSVarint():v===7?d.readBoolean():null}return C}(c))}I1.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var i=this._pbf.readVarint()+this._pbf.pos;return new ZS(this._pbf,i,this.extent,this._keys,this._values)};var HS=C1;function MS(A,i,c){if(A===3){var d=new HS(c,c.readVarint()+c.pos);d.length&&(i[d.name]=d)}}ic.VectorTile=function(A,i){this.layers=A.readFields(MS,{},i)},ic.VectorTileFeature=m1,ic.VectorTileLayer=C1;let NS=ic.VectorTileFeature.types,Sm=Math.pow(2,13);function Hh(A,i,c,d,C,b,v,S){A.emplaceBack(i,c,2*Math.floor(d*Sm)+v,C*Sm*2,b*Sm*2,Math.round(S))}class Fm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Hs,this.centroidVertexArray=new Dr,this.indexArray=new as,this.programConfigurations=new Ds(i.layers,i.zoom),this.segments=new cr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,d){this.features=[],this.hasPattern=Bm("fill-extrusion",this.layers,c);for(let{feature:C,id:b,index:v,sourceLayerIndex:S}of i){let L=this.layers[0]._featureFilter.needGeometry,Q=ZA(C,L);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),Q,d))continue;let Z={id:b,sourceLayerIndex:S,index:v,geometry:L?Q.geometry:Cl(C),properties:C.properties,type:C.type,patterns:{}};this.hasPattern?this.features.push(_m("fill-extrusion",this.layers,Z,this.zoom,c)):this.addFeature(Z,Z.geometry,v,d,{}),c.featureIndex.insert(C,Z.geometry,v,S,this.index,!0)}}addFeatures(i,c,d){for(let C of this.features){let{geometry:b}=C;this.addFeature(C,b,C.index,c,d)}}update(i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,US),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,TS.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,c,d,C,b){for(let v of fA(c,500)){let S={x:0,y:0,vertexCount:0},L=0;for(let nt of v)L+=nt.length;let Q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let nt of v){if(nt.length===0||DS(nt))continue;let lt=0;for(let Bt=0;Bt<nt.length;Bt++){let Gt=nt[Bt];if(Bt>=1){let re=nt[Bt-1];if(!VS(Gt,re)){Q.vertexLength+4>cr.MAX_VERTEX_ARRAY_LENGTH&&(Q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let Kt=Gt.sub(re)._perp()._unit(),Yt=re.dist(Gt);lt+Yt>32768&&(lt=0),Hh(this.layoutVertexArray,Gt.x,Gt.y,Kt.x,Kt.y,0,0,lt),Hh(this.layoutVertexArray,Gt.x,Gt.y,Kt.x,Kt.y,0,1,lt),S.x+=2*Gt.x,S.y+=2*Gt.y,S.vertexCount+=2,lt+=Yt,Hh(this.layoutVertexArray,re.x,re.y,Kt.x,Kt.y,0,0,lt),Hh(this.layoutVertexArray,re.x,re.y,Kt.x,Kt.y,0,1,lt),S.x+=2*re.x,S.y+=2*re.y,S.vertexCount+=2;let ge=Q.vertexLength;this.indexArray.emplaceBack(ge,ge+2,ge+1),this.indexArray.emplaceBack(ge+1,ge+2,ge+3),Q.vertexLength+=4,Q.primitiveLength+=2}}}}if(Q.vertexLength+L>cr.MAX_VERTEX_ARRAY_LENGTH&&(Q=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),NS[i.type]!=="Polygon")continue;let Z=[],N=[],O=Q.vertexLength;for(let nt of v)if(nt.length!==0){nt!==v[0]&&N.push(Z.length/2);for(let lt=0;lt<nt.length;lt++){let Bt=nt[lt];Hh(this.layoutVertexArray,Bt.x,Bt.y,0,0,1,1,0),S.x+=Bt.x,S.y+=Bt.y,S.vertexCount+=1,Z.push(Bt.x),Z.push(Bt.y)}}let q=c1(Z,N);for(let nt=0;nt<q.length;nt+=3)this.indexArray.emplaceBack(O+q[nt],O+q[nt+2],O+q[nt+1]);Q.primitiveLength+=q.length/3,Q.vertexLength+=L;for(let nt=0;nt<S.vertexCount;nt++){let lt=Math.floor(S.x/S.vertexCount),Bt=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(lt,Bt)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,b,C)}}function VS(A,i){return A.x===i.x&&(A.x<0||A.x>cn)||A.y===i.y&&(A.y<0||A.y>cn)}function DS(A){return A.every(i=>i.x<0)||A.every(i=>i.x>cn)||A.every(i=>i.y<0)||A.every(i=>i.y>cn)}let y1;oi("FillExtrusionBucket",Fm,{omit:["layers","features"]});var KS={get paint(){return y1=y1||new u({"fill-extrusion-opacity":new gi(Dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _i(Dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gi(Dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gi(Dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wl(Dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _i(Dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _i(Dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gi(Dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class OS extends a{constructor(i){super(i,KS)}createBucket(i){return new Fm(i)}queryRadius(){return ec(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,c,d,C,b,v,S,L){let Q=ad(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,S),Z=this.paint.get("fill-extrusion-height").evaluate(c,d),N=this.paint.get("fill-extrusion-base").evaluate(c,d),O=function(nt,lt,Bt,Gt){let re=[];for(let Kt of nt){let Yt=[Kt.x,Kt.y,0,1];Ad(Yt,Yt,lt),re.push(new w(Yt[0]/Yt[3],Yt[1]/Yt[3]))}return re}(Q,L),q=function(nt,lt,Bt,Gt){let re=[],Kt=[],Yt=Gt[8]*lt,ge=Gt[9]*lt,Re=Gt[10]*lt,ni=Gt[11]*lt,Gi=Gt[8]*Bt,ei=Gt[9]*Bt,qe=Gt[10]*Bt,Ii=Gt[11]*Bt;for(let hi of nt){let li=[],we=[];for(let bi of hi){let mi=bi.x,Di=bi.y,Mr=Gt[0]*mi+Gt[4]*Di+Gt[12],Zr=Gt[1]*mi+Gt[5]*Di+Gt[13],Vn=Gt[2]*mi+Gt[6]*Di+Gt[14],va=Gt[3]*mi+Gt[7]*Di+Gt[15],ls=Vn+Re,Dn=va+ni,Os=Mr+Gi,zs=Zr+ei,Ws=Vn+qe,un=va+Ii,Kn=new w((Mr+Yt)/Dn,(Zr+ge)/Dn);Kn.z=ls/Dn,li.push(Kn);let _s=new w(Os/un,zs/un);_s.z=Ws/un,we.push(_s)}re.push(li),Kt.push(we)}return[re,Kt]}(C,N,Z,L);return function(nt,lt,Bt){let Gt=1/0;xu(Bt,lt)&&(Gt=b1(Bt,lt[0]));for(let re=0;re<lt.length;re++){let Kt=lt[re],Yt=nt[re];for(let ge=0;ge<Kt.length-1;ge++){let Re=Kt[ge],ni=[Re,Kt[ge+1],Yt[ge+1],Yt[ge],Re];od(Bt,ni)&&(Gt=Math.min(Gt,b1(Bt,ni)))}}return Gt!==1/0&&Gt}(q[0],q[1],O)}}function Mh(A,i){return A.x*i.x+A.y*i.y}function b1(A,i){if(A.length===1){let c=0,d=i[c++],C;for(;!C||d.equals(C);)if(C=i[c++],!C)return 1/0;for(;c<i.length;c++){let b=i[c],v=A[0],S=C.sub(d),L=b.sub(d),Q=v.sub(d),Z=Mh(S,S),N=Mh(S,L),O=Mh(L,L),q=Mh(Q,S),nt=Mh(Q,L),lt=Z*O-N*N,Bt=(O*q-N*nt)/lt,Gt=(Z*nt-N*q)/lt,re=d.z*(1-Bt-Gt)+C.z*Bt+b.z*Gt;if(isFinite(re))return re}return 1/0}{let c=1/0;for(let d of i)c=Math.min(c,d.z);return c}}let zS=y([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:WS}=zS,JS=y([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:XS}=JS,YS=ic.VectorTileFeature.types,jS=Math.cos(Math.PI/180*37.5),v1=Math.pow(2,14)/.5;class km{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new ra,this.layoutVertexArray2=new ws,this.indexArray=new as,this.programConfigurations=new Ds(i.layers,i.zoom),this.segments=new cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,d){this.hasPattern=Bm("line",this.layers,c);let C=this.layers[0].layout.get("line-sort-key"),b=!C.isConstant(),v=[];for(let{feature:S,id:L,index:Q,sourceLayerIndex:Z}of i){let N=this.layers[0]._featureFilter.needGeometry,O=ZA(S,N);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),O,d))continue;let q=b?C.evaluate(O,{},d):void 0,nt={id:L,properties:S.properties,type:S.type,sourceLayerIndex:Z,index:Q,geometry:N?O.geometry:Cl(S),patterns:{},sortKey:q};v.push(nt)}b&&v.sort((S,L)=>S.sortKey-L.sortKey);for(let S of v){let{geometry:L,index:Q,sourceLayerIndex:Z}=S;if(this.hasPattern){let N=_m("line",this.layers,S,this.zoom,c);this.patternFeatures.push(N)}else this.addFeature(S,L,Q,d,{});c.featureIndex.insert(i[Q].feature,L,Q,Z,this.index)}}update(i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,d)}addFeatures(i,c,d){for(let C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,XS)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,WS),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,c,d,C,b){let v=this.layers[0].layout,S=v.get("line-join").evaluate(i,{}),L=v.get("line-cap"),Q=v.get("line-miter-limit"),Z=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(let N of c)this.addLine(N,i,S,L,Q,Z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,b,C)}addLine(i,c,d,C,b,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Gt=0;Gt<i.length-1;Gt++)this.totalDistance+=i[Gt].dist(i[Gt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let S=YS[c.type]==="Polygon",L=i.length;for(;L>=2&&i[L-1].equals(i[L-2]);)L--;let Q=0;for(;Q<L-1&&i[Q].equals(i[Q+1]);)Q++;if(L<(S?3:2))return;d==="bevel"&&(b=1.05);let Z=this.overscaling<=16?15*cn/(512*this.overscaling):0,N=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray),O,q,nt,lt,Bt;this.e1=this.e2=-1,S&&(O=i[L-2],Bt=i[Q].sub(O)._unit()._perp());for(let Gt=Q;Gt<L;Gt++){if(nt=Gt===L-1?S?i[Q+1]:void 0:i[Gt+1],nt&&i[Gt].equals(nt))continue;Bt&&(lt=Bt),O&&(q=O),O=i[Gt],Bt=nt?nt.sub(O)._unit()._perp():lt,lt=lt||Bt;let re=lt.add(Bt);re.x===0&&re.y===0||re._unit();let Kt=lt.x*Bt.x+lt.y*Bt.y,Yt=re.x*Bt.x+re.y*Bt.y,ge=Yt!==0?1/Yt:1/0,Re=2*Math.sqrt(2-2*Yt),ni=Yt<jS&&q&&nt,Gi=lt.x*Bt.y-lt.y*Bt.x>0;if(ni&&Gt>Q){let Ii=O.dist(q);if(Ii>2*Z){let hi=O.sub(O.sub(q)._mult(Z/Ii)._round());this.updateDistance(q,hi),this.addCurrentVertex(hi,lt,0,0,N),q=hi}}let ei=q&&nt,qe=ei?d:S?"butt":C;if(ei&&qe==="round"&&(ge<v?qe="miter":ge<=2&&(qe="fakeround")),qe==="miter"&&ge>b&&(qe="bevel"),qe==="bevel"&&(ge>2&&(qe="flipbevel"),ge<b&&(qe="miter")),q&&this.updateDistance(q,O),qe==="miter")re._mult(ge),this.addCurrentVertex(O,re,0,0,N);else if(qe==="flipbevel"){if(ge>100)re=Bt.mult(-1);else{let Ii=ge*lt.add(Bt).mag()/lt.sub(Bt).mag();re._perp()._mult(Ii*(Gi?-1:1))}this.addCurrentVertex(O,re,0,0,N),this.addCurrentVertex(O,re.mult(-1),0,0,N)}else if(qe==="bevel"||qe==="fakeround"){let Ii=-Math.sqrt(ge*ge-1),hi=Gi?Ii:0,li=Gi?0:Ii;if(q&&this.addCurrentVertex(O,lt,hi,li,N),qe==="fakeround"){let we=Math.round(180*Re/Math.PI/20);for(let bi=1;bi<we;bi++){let mi=bi/we;if(mi!==.5){let Mr=mi-.5;mi+=mi*Mr*(mi-1)*((1.0904+Kt*(Kt*(3.55645-1.43519*Kt)-3.2452))*Mr*Mr+(.848013+Kt*(.215638*Kt-1.06021)))}let Di=Bt.sub(lt)._mult(mi)._add(lt)._unit()._mult(Gi?-1:1);this.addHalfVertex(O,Di.x,Di.y,!1,Gi,0,N)}}nt&&this.addCurrentVertex(O,Bt,-hi,-li,N)}else if(qe==="butt")this.addCurrentVertex(O,re,0,0,N);else if(qe==="square"){let Ii=q?1:-1;this.addCurrentVertex(O,re,Ii,Ii,N)}else qe==="round"&&(q&&(this.addCurrentVertex(O,lt,0,0,N),this.addCurrentVertex(O,lt,1,1,N,!0)),nt&&(this.addCurrentVertex(O,Bt,-1,-1,N,!0),this.addCurrentVertex(O,Bt,0,0,N)));if(ni&&Gt<L-1){let Ii=O.dist(nt);if(Ii>2*Z){let hi=O.add(nt.sub(O)._mult(Z/Ii)._round());this.updateDistance(O,hi),this.addCurrentVertex(hi,Bt,0,0,N),O=hi}}}}addCurrentVertex(i,c,d,C,b,v=!1){let S=c.y*C-c.x,L=-c.y-c.x*C;this.addHalfVertex(i,c.x+c.y*d,c.y-c.x*d,v,!1,d,b),this.addHalfVertex(i,S,L,v,!0,-C,b),this.distance>v1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,c,d,C,b,v))}addHalfVertex({x:i,y:c},d,C,b,v,S,L){let Q=.5*(this.lineClips?this.scaledDistance*(v1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(b?1:0),(c<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*C)+128,1+(S===0?0:S<0?-1:1)|(63&Q)<<2,Q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let Z=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Z),L.primitiveLength++),v?this.e2=Z:this.e1=Z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,c){this.distance+=i.dist(c),this.updateScaledDistance()}}let w1,B1;oi("LineBucket",km,{omit:["layers","patternFeatures"]});var _1={get paint(){return B1=B1||new u({"line-opacity":new _i(Dt.paint_line["line-opacity"]),"line-color":new _i(Dt.paint_line["line-color"]),"line-translate":new gi(Dt.paint_line["line-translate"]),"line-translate-anchor":new gi(Dt.paint_line["line-translate-anchor"]),"line-width":new _i(Dt.paint_line["line-width"]),"line-gap-width":new _i(Dt.paint_line["line-gap-width"]),"line-offset":new _i(Dt.paint_line["line-offset"]),"line-blur":new _i(Dt.paint_line["line-blur"]),"line-dasharray":new Jl(Dt.paint_line["line-dasharray"]),"line-pattern":new Wl(Dt.paint_line["line-pattern"]),"line-gradient":new Xl(Dt.paint_line["line-gradient"])})},get layout(){return w1=w1||new u({"line-cap":new gi(Dt.layout_line["line-cap"]),"line-join":new _i(Dt.layout_line["line-join"]),"line-miter-limit":new gi(Dt.layout_line["line-miter-limit"]),"line-round-limit":new gi(Dt.layout_line["line-round-limit"]),"line-sort-key":new _i(Dt.layout_line["line-sort-key"])})}};class qS extends _i{possiblyEvaluate(i,c){return c=new Qr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(i,c)}evaluate(i,c,d,C){return c=kt({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(i,c,d,C)}}let hd;class $S extends a{constructor(i){super(i,_1),this.gradientVersion=0,hd||(hd=new qS(_1.paint.properties["line-width"].specification),hd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){let c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Ce,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,c){super.recalculate(i,c),this.paint._values["line-floorwidth"]=hd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new km(i)}queryRadius(i){let c=i,d=x1(yl("line-width",this,c),yl("line-gap-width",this,c)),C=yl("line-offset",this,c);return d/2+Math.abs(C)+ec(this.paint.get("line-translate"))}queryIntersectsFeature(i,c,d,C,b,v,S){let L=ad(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,S),Q=S/2*x1(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),Z=this.paint.get("line-offset").evaluate(c,d);return Z&&(C=function(N,O){let q=[];for(let nt=0;nt<N.length;nt++){let lt=N[nt],Bt=[];for(let Gt=0;Gt<lt.length;Gt++){let re=lt[Gt-1],Kt=lt[Gt],Yt=lt[Gt+1],ge=Gt===0?new w(0,0):Kt.sub(re)._unit()._perp(),Re=Gt===lt.length-1?new w(0,0):Yt.sub(Kt)._unit()._perp(),ni=ge._add(Re)._unit(),Gi=ni.x*Re.x+ni.y*Re.y;Gi!==0&&ni._mult(1/Gi),Bt.push(ni._mult(O)._add(Kt))}q.push(Bt)}return q}(C,Z*S)),function(N,O,q){for(let nt=0;nt<O.length;nt++){let lt=O[nt];if(N.length>=3){for(let Bt=0;Bt<lt.length;Bt++)if(Il(N,lt[Bt]))return!0}if(Su(N,lt,q))return!0}return!1}(L,C,Q)}isTileClipped(){return!0}}function x1(A,i){return i>0?i+2*A:A}let tF=y([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),eF=y([{name:"a_projected_pos",components:3,type:"Float32"}],4);y([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let iF=y([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);y([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let S1=y([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rF=y([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function nF(A,i,c){return A.sections.forEach(d=>{d.text=function(C,b,v){let S=b.layout.get("text-transform").evaluate(v,{});return S==="uppercase"?C=C.toLocaleUpperCase():S==="lowercase"&&(C=C.toLocaleLowerCase()),jn.applyArabicShaping&&(C=jn.applyArabicShaping(C)),C}(d.text,i,c)}),A}y([{name:"triangle",components:3,type:"Uint16"}]),y([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),y([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),y([{type:"Float32",name:"offsetX"}]),y([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),y([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Nh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var _n=24,F1=Gr,k1=function(A,i,c,d,C){var b,v,S=8*C-d-1,L=(1<<S)-1,Q=L>>1,Z=-7,N=c?C-1:0,O=c?-1:1,q=A[i+N];for(N+=O,b=q&(1<<-Z)-1,q>>=-Z,Z+=S;Z>0;b=256*b+A[i+N],N+=O,Z-=8);for(v=b&(1<<-Z)-1,b>>=-Z,Z+=d;Z>0;v=256*v+A[i+N],N+=O,Z-=8);if(b===0)b=1-Q;else{if(b===L)return v?NaN:1/0*(q?-1:1);v+=Math.pow(2,d),b-=Q}return(q?-1:1)*v*Math.pow(2,b-d)},L1=function(A,i,c,d,C,b){var v,S,L,Q=8*b-C-1,Z=(1<<Q)-1,N=Z>>1,O=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=d?0:b-1,nt=d?1:-1,lt=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,v=Z):(v=Math.floor(Math.log(i)/Math.LN2),i*(L=Math.pow(2,-v))<1&&(v--,L*=2),(i+=v+N>=1?O/L:O*Math.pow(2,1-N))*L>=2&&(v++,L/=2),v+N>=Z?(S=0,v=Z):v+N>=1?(S=(i*L-1)*Math.pow(2,C),v+=N):(S=i*Math.pow(2,N-1)*Math.pow(2,C),v=0));C>=8;A[c+q]=255&S,q+=nt,S/=256,C-=8);for(v=v<<C|S,Q+=C;Q>0;A[c+q]=255&v,q+=nt,v/=256,Q-=8);A[c+q-nt]|=128*lt};function Gr(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}Gr.Varint=0,Gr.Fixed64=1,Gr.Bytes=2,Gr.Fixed32=5;var Lm=4294967296,E1=1/Lm,T1=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function bl(A){return A.type===Gr.Bytes?A.readVarint()+A.pos:A.pos+1}function Tu(A,i,c){return c?4294967296*i+(A>>>0):4294967296*(i>>>0)+(A>>>0)}function U1(A,i,c){var d=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));c.realloc(d);for(var C=c.pos-1;C>=A;C--)c.buf[C+d]=c.buf[C]}function sF(A,i){for(var c=0;c<A.length;c++)i.writeVarint(A[c])}function oF(A,i){for(var c=0;c<A.length;c++)i.writeSVarint(A[c])}function aF(A,i){for(var c=0;c<A.length;c++)i.writeFloat(A[c])}function AF(A,i){for(var c=0;c<A.length;c++)i.writeDouble(A[c])}function lF(A,i){for(var c=0;c<A.length;c++)i.writeBoolean(A[c])}function cF(A,i){for(var c=0;c<A.length;c++)i.writeFixed32(A[c])}function uF(A,i){for(var c=0;c<A.length;c++)i.writeSFixed32(A[c])}function hF(A,i){for(var c=0;c<A.length;c++)i.writeFixed64(A[c])}function gF(A,i){for(var c=0;c<A.length;c++)i.writeSFixed64(A[c])}function gd(A,i){return(A[i]|A[i+1]<<8|A[i+2]<<16)+16777216*A[i+3]}function Uu(A,i,c){A[c]=i,A[c+1]=i>>>8,A[c+2]=i>>>16,A[c+3]=i>>>24}function Q1(A,i){return(A[i]|A[i+1]<<8|A[i+2]<<16)+(A[i+3]<<24)}Gr.prototype={destroy:function(){this.buf=null},readFields:function(A,i,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),C=d>>3,b=this.pos;this.type=7&d,A(C,i,this),this.pos===b&&this.skip(d)}return i},readMessage:function(A,i){return this.readFields(A,i,this.readVarint()+this.pos)},readFixed32:function(){var A=gd(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Q1(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=gd(this.buf,this.pos)+gd(this.buf,this.pos+4)*Lm;return this.pos+=8,A},readSFixed64:function(){var A=gd(this.buf,this.pos)+Q1(this.buf,this.pos+4)*Lm;return this.pos+=8,A},readFloat:function(){var A=k1(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=k1(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var i,c,d=this.buf;return i=127&(c=d[this.pos++]),c<128?i:(i|=(127&(c=d[this.pos++]))<<7,c<128?i:(i|=(127&(c=d[this.pos++]))<<14,c<128?i:(i|=(127&(c=d[this.pos++]))<<21,c<128?i:function(C,b,v){var S,L,Q=v.buf;if(S=(112&(L=Q[v.pos++]))>>4,L<128||(S|=(127&(L=Q[v.pos++]))<<3,L<128)||(S|=(127&(L=Q[v.pos++]))<<10,L<128)||(S|=(127&(L=Q[v.pos++]))<<17,L<128)||(S|=(127&(L=Q[v.pos++]))<<24,L<128)||(S|=(1&(L=Q[v.pos++]))<<31,L<128))return Tu(C,S,b);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(c=d[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,i=this.pos;return this.pos=A,A-i>=12&&T1?function(c,d,C){return T1.decode(c.subarray(d,C))}(this.buf,i,A):function(c,d,C){for(var b="",v=d;v<C;){var S,L,Q,Z=c[v],N=null,O=Z>239?4:Z>223?3:Z>191?2:1;if(v+O>C)break;O===1?Z<128&&(N=Z):O===2?(192&(S=c[v+1]))==128&&(N=(31&Z)<<6|63&S)<=127&&(N=null):O===3?(L=c[v+2],(192&(S=c[v+1]))==128&&(192&L)==128&&((N=(15&Z)<<12|(63&S)<<6|63&L)<=2047||N>=55296&&N<=57343)&&(N=null)):O===4&&(L=c[v+2],Q=c[v+3],(192&(S=c[v+1]))==128&&(192&L)==128&&(192&Q)==128&&((N=(15&Z)<<18|(63&S)<<12|(63&L)<<6|63&Q)<=65535||N>=1114112)&&(N=null)),N===null?(N=65533,O=1):N>65535&&(N-=65536,b+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),b+=String.fromCharCode(N),v+=O}return b}(this.buf,i,A)},readBytes:function(){var A=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,A);return this.pos=A,i},readPackedVarint:function(A,i){if(this.type!==Gr.Bytes)return A.push(this.readVarint(i));var c=bl(this);for(A=A||[];this.pos<c;)A.push(this.readVarint(i));return A},readPackedSVarint:function(A){if(this.type!==Gr.Bytes)return A.push(this.readSVarint());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==Gr.Bytes)return A.push(this.readBoolean());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==Gr.Bytes)return A.push(this.readFloat());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==Gr.Bytes)return A.push(this.readDouble());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==Gr.Bytes)return A.push(this.readFixed32());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==Gr.Bytes)return A.push(this.readSFixed32());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==Gr.Bytes)return A.push(this.readFixed64());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==Gr.Bytes)return A.push(this.readSFixed64());var i=bl(this);for(A=A||[];this.pos<i;)A.push(this.readSFixed64());return A},skip:function(A){var i=7&A;if(i===Gr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Gr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Gr.Fixed32)this.pos+=4;else{if(i!==Gr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(A,i){this.writeVarint(A<<3|i)},realloc:function(A){for(var i=this.length||16;i<this.pos+A;)i*=2;if(i!==this.length){var c=new Uint8Array(i);c.set(this.buf),this.buf=c,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Uu(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Uu(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Uu(this.buf,-1&A,this.pos),Uu(this.buf,Math.floor(A*E1),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Uu(this.buf,-1&A,this.pos),Uu(this.buf,Math.floor(A*E1),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(i,c){var d,C;if(i>=0?(d=i%4294967296|0,C=i/4294967296|0):(C=~(-i/4294967296),4294967295^(d=~(-i%4294967296))?d=d+1|0:(d=0,C=C+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(b,v,S){S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,S.buf[S.pos]=127&(b>>>=7)}(d,0,c),function(b,v){var S=(7&b)<<4;v.buf[v.pos++]|=S|((b>>>=3)?128:0),b&&(v.buf[v.pos++]=127&b|((b>>>=7)?128:0),b&&(v.buf[v.pos++]=127&b|((b>>>=7)?128:0),b&&(v.buf[v.pos++]=127&b|((b>>>=7)?128:0),b&&(v.buf[v.pos++]=127&b|((b>>>=7)?128:0),b&&(v.buf[v.pos++]=127&b)))))}(C,c)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var i=this.pos;this.pos=function(d,C,b){for(var v,S,L=0;L<C.length;L++){if((v=C.charCodeAt(L))>55295&&v<57344){if(!S){v>56319||L+1===C.length?(d[b++]=239,d[b++]=191,d[b++]=189):S=v;continue}if(v<56320){d[b++]=239,d[b++]=191,d[b++]=189,S=v;continue}v=S-55296<<10|v-56320|65536,S=null}else S&&(d[b++]=239,d[b++]=191,d[b++]=189,S=null);v<128?d[b++]=v:(v<2048?d[b++]=v>>6|192:(v<65536?d[b++]=v>>12|224:(d[b++]=v>>18|240,d[b++]=v>>12&63|128),d[b++]=v>>6&63|128),d[b++]=63&v|128)}return b}(this.buf,A,this.pos);var c=this.pos-i;c>=128&&U1(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeFloat:function(A){this.realloc(4),L1(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),L1(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var i=A.length;this.writeVarint(i),this.realloc(i);for(var c=0;c<i;c++)this.buf[this.pos++]=A[c]},writeRawMessage:function(A,i){this.pos++;var c=this.pos;A(i,this);var d=this.pos-c;d>=128&&U1(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(A,i,c){this.writeTag(A,Gr.Bytes),this.writeRawMessage(i,c)},writePackedVarint:function(A,i){i.length&&this.writeMessage(A,sF,i)},writePackedSVarint:function(A,i){i.length&&this.writeMessage(A,oF,i)},writePackedBoolean:function(A,i){i.length&&this.writeMessage(A,lF,i)},writePackedFloat:function(A,i){i.length&&this.writeMessage(A,aF,i)},writePackedDouble:function(A,i){i.length&&this.writeMessage(A,AF,i)},writePackedFixed32:function(A,i){i.length&&this.writeMessage(A,cF,i)},writePackedSFixed32:function(A,i){i.length&&this.writeMessage(A,uF,i)},writePackedFixed64:function(A,i){i.length&&this.writeMessage(A,hF,i)},writePackedSFixed64:function(A,i){i.length&&this.writeMessage(A,gF,i)},writeBytesField:function(A,i){this.writeTag(A,Gr.Bytes),this.writeBytes(i)},writeFixed32Field:function(A,i){this.writeTag(A,Gr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(A,i){this.writeTag(A,Gr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(A,i){this.writeTag(A,Gr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(A,i){this.writeTag(A,Gr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(A,i){this.writeTag(A,Gr.Varint),this.writeVarint(i)},writeSVarintField:function(A,i){this.writeTag(A,Gr.Varint),this.writeSVarint(i)},writeStringField:function(A,i){this.writeTag(A,Gr.Bytes),this.writeString(i)},writeFloatField:function(A,i){this.writeTag(A,Gr.Fixed32),this.writeFloat(i)},writeDoubleField:function(A,i){this.writeTag(A,Gr.Fixed64),this.writeDouble(i)},writeBooleanField:function(A,i){this.writeVarintField(A,Boolean(i))}};var Em=p(F1);let Tm=3;function dF(A,i,c){A===1&&c.readMessage(pF,i)}function pF(A,i,c){if(A===3){let{id:d,bitmap:C,width:b,height:v,left:S,top:L,advance:Q}=c.readMessage(fF,{});i.push({id:d,bitmap:new Rh({width:b+2*Tm,height:v+2*Tm},C),metrics:{width:b,height:v,left:S,top:L,advance:Q}})}}function fF(A,i,c){A===1?i.id=c.readVarint():A===2?i.bitmap=c.readBytes():A===3?i.width=c.readVarint():A===4?i.height=c.readVarint():A===5?i.left=c.readSVarint():A===6?i.top=c.readSVarint():A===7&&(i.advance=c.readVarint())}let R1=Tm;function G1(A){let i=0,c=0;for(let v of A)i+=v.w*v.h,c=Math.max(c,v.w);A.sort((v,S)=>S.h-v.h);let d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),c),h:1/0}],C=0,b=0;for(let v of A)for(let S=d.length-1;S>=0;S--){let L=d[S];if(!(v.w>L.w||v.h>L.h)){if(v.x=L.x,v.y=L.y,b=Math.max(b,v.y+v.h),C=Math.max(C,v.x+v.w),v.w===L.w&&v.h===L.h){let Q=d.pop();S<d.length&&(d[S]=Q)}else v.h===L.h?(L.x+=v.w,L.w-=v.w):v.w===L.w?(L.y+=v.h,L.h-=v.h):(d.push({x:L.x+v.w,y:L.y,w:L.w-v.w,h:v.h}),L.y+=v.h,L.h-=v.h);break}}return{w:C,h:b,fill:i/(C*b)||0}}let uo=1;class Um{constructor(i,{pixelRatio:c,version:d,stretchX:C,stretchY:b,content:v,textFitWidth:S,textFitHeight:L}){this.paddedRect=i,this.pixelRatio=c,this.stretchX=C,this.stretchY=b,this.content=v,this.version=d,this.textFitWidth=S,this.textFitHeight=L}get tl(){return[this.paddedRect.x+uo,this.paddedRect.y+uo]}get br(){return[this.paddedRect.x+this.paddedRect.w-uo,this.paddedRect.y+this.paddedRect.h-uo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*uo)/this.pixelRatio,(this.paddedRect.h-2*uo)/this.pixelRatio]}}class Z1{constructor(i,c){let d={},C={};this.haveRenderCallbacks=[];let b=[];this.addImages(i,d,b),this.addImages(c,C,b);let{w:v,h:S}=G1(b),L=new oa({width:v||1,height:S||1});for(let Q in i){let Z=i[Q],N=d[Q].paddedRect;oa.copy(Z.data,L,{x:0,y:0},{x:N.x+uo,y:N.y+uo},Z.data)}for(let Q in c){let Z=c[Q],N=C[Q].paddedRect,O=N.x+uo,q=N.y+uo,nt=Z.data.width,lt=Z.data.height;oa.copy(Z.data,L,{x:0,y:0},{x:O,y:q},Z.data),oa.copy(Z.data,L,{x:0,y:lt-1},{x:O,y:q-1},{width:nt,height:1}),oa.copy(Z.data,L,{x:0,y:0},{x:O,y:q+lt},{width:nt,height:1}),oa.copy(Z.data,L,{x:nt-1,y:0},{x:O-1,y:q},{width:1,height:lt}),oa.copy(Z.data,L,{x:0,y:0},{x:O+nt,y:q},{width:1,height:lt})}this.image=L,this.iconPositions=d,this.patternPositions=C}addImages(i,c,d){for(let C in i){let b=i[C],v={x:0,y:0,w:b.data.width+2*uo,h:b.data.height+2*uo};d.push(v),c[C]=new Um(v,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(C)}}patchUpdatedImages(i,c){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),c)}patchUpdatedImage(i,c,d){if(!i||!c||i.version===c.version)return;i.version=c.version;let[C,b]=i.tl;d.update(c.data,void 0,{x:C,y:b})}}var rc;oi("ImagePosition",Um),oi("ImageAtlas",Z1),l.ah=void 0,(rc=l.ah||(l.ah={}))[rc.none=0]="none",rc[rc.horizontal=1]="horizontal",rc[rc.vertical=2]="vertical",rc[rc.horizontalOnly=3]="horizontalOnly";let Vh=-17;class Dh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,c){let d=new Dh;return d.scale=i||1,d.fontStack=c,d}static forImage(i){let c=new Dh;return c.imageName=i,c}}class Qu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,c){let d=new Qu;for(let C=0;C<i.sections.length;C++){let b=i.sections[C];b.image?d.addImageSection(b):d.addTextSection(b,c)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let c="";for(let d=0;d<i.length;d++){let C=i.charCodeAt(d+1)||null,b=i.charCodeAt(d-1)||null;c+=C&&Hc(C)&&!Nh[i[d+1]]||b&&Hc(b)&&!Nh[i[d-1]]||!Nh[i[d]]?i[d]:Nh[i[d]]}return c}(this.text)}trim(){let i=0;for(let d=0;d<this.text.length&&pd[this.text.charCodeAt(d)];d++)i++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&pd[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(i,c),this.sectionIndex=this.sectionIndex.slice(i,c)}substring(i,c){let d=new Qu;return d.text=this.text.substring(i,c),d.sectionIndex=this.sectionIndex.slice(i,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,c)=>Math.max(i,this.sections[c].scale),0)}addTextSection(i,c){this.text+=i.text,this.sections.push(Dh.forText(i.scale,i.fontStack||c));let d=this.sections.length-1;for(let C=0;C<i.text.length;++C)this.sectionIndex.push(d)}addImageSection(i){let c=i.image?i.image.name:"";if(c.length===0)return void at("Can't add FormattedSection with an empty image.");let d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Dh.forImage(c)),this.sectionIndex.push(this.sections.length-1)):at("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function dd(A,i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt){let lt=Qu.fromFeature(A,C),Bt;N===l.ah.vertical&&lt.verticalizePunctuation();let{processBidirectionalText:Gt,processStyledBidirectionalText:re}=jn;if(Gt&&lt.sections.length===1){Bt=[];let ge=Gt(lt.toString(),Qm(lt,Q,b,i,d,q));for(let Re of ge){let ni=new Qu;ni.text=Re,ni.sections=lt.sections;for(let Gi=0;Gi<Re.length;Gi++)ni.sectionIndex.push(0);Bt.push(ni)}}else if(re){Bt=[];let ge=re(lt.text,lt.sectionIndex,Qm(lt,Q,b,i,d,q));for(let Re of ge){let ni=new Qu;ni.text=Re[0],ni.sectionIndex=Re[1],ni.sections=lt.sections,Bt.push(ni)}}else Bt=function(ge,Re){let ni=[],Gi=ge.text,ei=0;for(let qe of Re)ni.push(ge.substring(ei,qe)),ei=qe;return ei<Gi.length&&ni.push(ge.substring(ei,Gi.length)),ni}(lt,Qm(lt,Q,b,i,d,q));let Kt=[],Yt={positionedLines:Kt,text:lt.toString(),top:Z[1],bottom:Z[1],left:Z[0],right:Z[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(ge,Re,ni,Gi,ei,qe,Ii,hi,li,we,bi,mi){let Di=0,Mr=Vh,Zr=0,Vn=0,va=hi==="right"?1:hi==="left"?0:.5,ls=0;for(let un of ei){un.trim();let Kn=un.getMaxScale(),_s=(Kn-1)*_n,cs={positionedGlyphs:[],lineOffset:0};ge.positionedLines[ls]=cs;let Js=cs.positionedGlyphs,us=0;if(!un.length()){Mr+=qe,++ls;continue}for(let ho=0;ho<un.length();ho++){let yr=un.getSection(ho),Kr=un.getSectionIndex(ho),Wr=un.getCharCode(ho),No=0,ln=null,Pu=null,MA=null,NA=_n,wa=!(li===l.ah.horizontal||!bi&&!Kl(Wr)||bi&&(pd[Wr]||(Dn=Wr,/\p{sc=Arab}/u.test(String.fromCodePoint(Dn)))));if(yr.imageName){let la=Gi[yr.imageName];if(!la)continue;MA=yr.imageName,ge.iconsInText=ge.iconsInText||!0,Pu=la.paddedRect;let $n=la.displaySize;yr.scale=yr.scale*_n/mi,ln={width:$n[0],height:$n[1],left:uo,top:-R1,advance:wa?$n[1]:$n[0]},No=_s+(_n-$n[1]*yr.scale),NA=ln.advance;let vl=wa?$n[0]*yr.scale-_n*Kn:$n[1]*yr.scale-_n*Kn;vl>0&&vl>us&&(us=vl)}else{let la=ni[yr.fontStack],$n=la&&la[Wr];if($n&&$n.rect)Pu=$n.rect,ln=$n.metrics;else{let vl=Re[yr.fontStack],Xh=vl&&vl[Wr];if(!Xh)continue;ln=Xh.metrics}No=(Kn-yr.scale)*_n}wa?(ge.verticalizable=!0,Js.push({glyph:Wr,imageName:MA,x:Di,y:Mr+No,vertical:wa,scale:yr.scale,fontStack:yr.fontStack,sectionIndex:Kr,metrics:ln,rect:Pu}),Di+=NA*yr.scale+we):(Js.push({glyph:Wr,imageName:MA,x:Di,y:Mr+No,vertical:wa,scale:yr.scale,fontStack:yr.fontStack,sectionIndex:Kr,metrics:ln,rect:Pu}),Di+=ln.advance*yr.scale+we)}Js.length!==0&&(Zr=Math.max(Di-we,Zr),yF(Js,0,Js.length-1,va,us)),Di=0;let Aa=qe*Kn+us;cs.lineOffset=Math.max(us,_s),Mr+=Aa,Vn=Math.max(Aa,Vn),++ls}var Dn;let Os=Mr-Vh,{horizontalAlign:zs,verticalAlign:Ws}=Rm(Ii);(function(un,Kn,_s,cs,Js,us,Aa,ho,yr){let Kr=(Kn-_s)*Js,Wr=0;Wr=us!==Aa?-ho*cs-Vh:(-cs*yr+.5)*Aa;for(let No of un)for(let ln of No.positionedGlyphs)ln.x+=Kr,ln.y+=Wr})(ge.positionedLines,va,zs,Ws,Zr,Vn,qe,Os,ei.length),ge.top+=-Ws*Os,ge.bottom=ge.top+Os,ge.left+=-zs*Zr,ge.right=ge.left+Zr}(Yt,i,c,d,Bt,v,S,L,N,Q,O,nt),!function(ge){for(let Re of ge)if(Re.positionedGlyphs.length!==0)return!1;return!0}(Kt)&&Yt}let pd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mF={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},CF={40:!0};function P1(A,i,c,d,C,b){if(i.imageName){let v=d[i.imageName];return v?v.displaySize[0]*i.scale*_n/b+C:0}{let v=c[i.fontStack],S=v&&v[A];return S?S.metrics.advance*i.scale+C:0}}function H1(A,i,c,d){let C=Math.pow(A-i,2);return d?A<i?C/2:2*C:C+Math.abs(c)*c}function IF(A,i,c){let d=0;return A===10&&(d-=1e4),c&&(d+=150),A!==40&&A!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function M1(A,i,c,d,C,b){let v=null,S=H1(i,c,C,b);for(let L of d){let Q=H1(i-L.x,c,C,b)+L.badness;Q<=S&&(v=L,S=Q)}return{index:A,x:i,priorBreak:v,badness:S}}function N1(A){return A?N1(A.priorBreak).concat(A.index):[]}function Qm(A,i,c,d,C,b){if(!A)return[];let v=[],S=function(N,O,q,nt,lt,Bt){let Gt=0;for(let re=0;re<N.length();re++){let Kt=N.getSection(re);Gt+=P1(N.getCharCode(re),Kt,nt,lt,O,Bt)}return Gt/Math.max(1,Math.ceil(Gt/q))}(A,i,c,d,C,b),L=A.text.indexOf("\u200B")>=0,Q=0;for(let N=0;N<A.length();N++){let O=A.getSection(N),q=A.getCharCode(N);if(pd[q]||(Q+=P1(q,O,d,C,i,b)),N<A.length()-1){let nt=!((Z=q)<11904)&&(!!lr["CJK Compatibility Forms"](Z)||!!lr["CJK Compatibility"](Z)||!!lr["CJK Strokes"](Z)||!!lr["CJK Symbols and Punctuation"](Z)||!!lr["Enclosed CJK Letters and Months"](Z)||!!lr["Halfwidth and Fullwidth Forms"](Z)||!!lr["Ideographic Description Characters"](Z)||!!lr["Vertical Forms"](Z)||Pc.test(String.fromCodePoint(Z)));(mF[q]||nt||O.imageName||N!==A.length()-2&&CF[A.getCharCode(N+1)])&&v.push(M1(N+1,Q,S,v,IF(q,A.getCharCode(N+1),nt&&L),!1))}}var Z;return N1(M1(A.length(),Q,S,v,0,!0))}function Rm(A){let i=.5,c=.5;switch(A){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:i,verticalAlign:c}}function yF(A,i,c,d,C){if(!d&&!C)return;let b=A[c],v=(A[c].x+b.metrics.advance*b.scale)*d;for(let S=i;S<=c;S++)A[S].x-=v,A[S].y+=C}function bF(A,i,c){let{horizontalAlign:d,verticalAlign:C}=Rm(c),b=i[0]-A.displaySize[0]*d,v=i[1]-A.displaySize[1]*C;return{image:A,top:v,bottom:v+A.displaySize[1],left:b,right:b+A.displaySize[0]}}function V1(A){var i,c;let d=A.left,C=A.top,b=A.right-d,v=A.bottom-C,S=(i=A.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",L=(c=A.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",Q=(A.image.content[2]-A.image.content[0])/(A.image.content[3]-A.image.content[1]);if(L==="proportional"){if(S==="stretchOnly"&&b/v<Q||S==="proportional"){let Z=Math.ceil(v*Q);d*=Z/b,b=Z}}else if(S==="proportional"&&L==="stretchOnly"&&Q!==0&&b/v>Q){let Z=Math.ceil(b/Q);C*=Z/v,v=Z}return{x1:d,y1:C,x2:d+b,y2:C+v}}function D1(A,i,c,d,C,b){let v=A.image,S;if(v.content){let Bt=v.content,Gt=v.pixelRatio||1;S=[Bt[0]/Gt,Bt[1]/Gt,v.displaySize[0]-Bt[2]/Gt,v.displaySize[1]-Bt[3]/Gt]}let L=i.left*b,Q=i.right*b,Z,N,O,q;c==="width"||c==="both"?(q=C[0]+L-d[3],N=C[0]+Q+d[1]):(q=C[0]+(L+Q-v.displaySize[0])/2,N=q+v.displaySize[0]);let nt=i.top*b,lt=i.bottom*b;return c==="height"||c==="both"?(Z=C[1]+nt-d[0],O=C[1]+lt+d[2]):(Z=C[1]+(nt+lt-v.displaySize[1])/2,O=Z+v.displaySize[1]),{image:v,top:Z,right:N,bottom:O,left:q,collisionPadding:S}}let Kh=255,HA=128,nc=Kh*HA;function K1(A,i){let{expression:c}=i;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Qr(A+1))};if(c.kind==="source")return{kind:"source"};{let{zoomStops:d,interpolationType:C}=c,b=0;for(;b<d.length&&d[b]<=A;)b++;b=Math.max(0,b-1);let v=b;for(;v<d.length&&d[v]<A+1;)v++;v=Math.min(d.length-1,v);let S=d[b],L=d[v];return c.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:L,interpolationType:C}:{kind:"camera",minZoom:S,maxZoom:L,minSize:c.evaluate(new Qr(S)),maxSize:c.evaluate(new Qr(L)),interpolationType:C}}}function Gm(A,i,c){let d="never",C=A.get(i);return C?d=C:A.get(c)&&(d="always"),d}let vF=ic.VectorTileFeature.types,wF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fd(A,i,c,d,C,b,v,S,L,Q,Z,N,O){let q=S?Math.min(nc,Math.round(S[0])):0,nt=S?Math.min(nc,Math.round(S[1])):0;A.emplaceBack(i,c,Math.round(32*d),Math.round(32*C),b,v,(q<<1)+(L?1:0),nt,16*Q,16*Z,256*N,256*O)}function Zm(A,i,c){A.emplaceBack(i.x,i.y,c),A.emplaceBack(i.x,i.y,c),A.emplaceBack(i.x,i.y,c),A.emplaceBack(i.x,i.y,c)}function BF(A){for(let i of A.sections)if(cl(i.text))return!0;return!1}class Pm{constructor(i){this.layoutVertexArray=new TA,this.indexArray=new as,this.programConfigurations=i,this.segments=new cr,this.dynamicLayoutVertexArray=new Yl,this.opacityVertexArray=new Bs,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ji}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,c,d,C){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,tF.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,eF.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,wF,!0),this.opacityVertexBuffer.itemSize=1),(d||C)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}oi("SymbolBuffers",Pm);class Hm{constructor(i,c,d){this.layoutVertexArray=new i,this.layoutAttributes=c,this.indexArray=new d,this.segments=new cr,this.collisionVertexArray=new Ms}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,iF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}oi("CollisionBuffers",Hm);class Ru{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(v=>v.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cm([]),this.placementViewportMatrix=Cm([]);let c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=K1(this.zoom,c["text-size"]),this.iconSizeData=K1(this.zoom,c["icon-size"]);let d=this.layers[0].layout,C=d.get("symbol-sort-key"),b=d.get("symbol-z-order");this.canOverlap=Gm(d,"text-overlap","text-allow-overlap")!=="never"||Gm(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!C.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(v=>l.ah[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=i.sourceID}createArrays(){this.text=new Pm(new Ds(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Pm(new Ds(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new hr,this.lineVertexArray=new Lr,this.symbolInstances=new fi,this.textAnchorOffsets=new er}calculateGlyphDependencies(i,c,d,C,b){for(let v=0;v<i.length;v++)if(c[i.charCodeAt(v)]=!0,(d||C)&&b){let S=Nh[i.charAt(v)];S&&(c[S.charCodeAt(0)]=!0)}}populate(i,c,d){let C=this.layers[0],b=C.layout,v=b.get("text-font"),S=b.get("text-field"),L=b.get("icon-image"),Q=(S.value.kind!=="constant"||S.value.value instanceof jr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),Z=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,N=b.get("symbol-sort-key");if(this.features=[],!Q&&!Z)return;let O=c.iconDependencies,q=c.glyphDependencies,nt=c.availableImages,lt=new Qr(this.zoom);for(let{feature:Bt,id:Gt,index:re,sourceLayerIndex:Kt}of i){let Yt=C._featureFilter.needGeometry,ge=ZA(Bt,Yt);if(!C._featureFilter.filter(lt,ge,d))continue;let Re,ni;if(Yt||(ge.geometry=Cl(Bt)),Q){let ei=C.getValueAndResolveTokens("text-field",ge,d,nt),qe=jr.factory(ei),Ii=this.hasRTLText=this.hasRTLText||BF(qe);(!Ii||jn.getRTLTextPluginStatus()==="unavailable"||Ii&&jn.isParsed())&&(Re=nF(qe,C,ge))}if(Z){let ei=C.getValueAndResolveTokens("icon-image",ge,d,nt);ni=ei instanceof pn?ei:pn.fromString(ei)}if(!Re&&!ni)continue;let Gi=this.sortFeaturesByKey?N.evaluate(ge,{},d):void 0;if(this.features.push({id:Gt,text:Re,icon:ni,index:re,sourceLayerIndex:Kt,geometry:ge.geometry,properties:Bt.properties,type:vF[Bt.type],sortKey:Gi}),ni&&(O[ni.name]=!0),Re){let ei=v.evaluate(ge,{},d).join(","),qe=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ah.vertical)>=0;for(let Ii of Re.sections)if(Ii.image)O[Ii.image.name]=!0;else{let hi=Po(Re.toString()),li=Ii.fontStack||ei,we=q[li]=q[li]||{};this.calculateGlyphDependencies(Ii.text,we,qe,this.allowVerticalPlacement,hi)}}}b.get("symbol-placement")==="line"&&(this.features=function(Bt){let Gt={},re={},Kt=[],Yt=0;function ge(ei){Kt.push(Bt[ei]),Yt++}function Re(ei,qe,Ii){let hi=re[ei];return delete re[ei],re[qe]=hi,Kt[hi].geometry[0].pop(),Kt[hi].geometry[0]=Kt[hi].geometry[0].concat(Ii[0]),hi}function ni(ei,qe,Ii){let hi=Gt[qe];return delete Gt[qe],Gt[ei]=hi,Kt[hi].geometry[0].shift(),Kt[hi].geometry[0]=Ii[0].concat(Kt[hi].geometry[0]),hi}function Gi(ei,qe,Ii){let hi=Ii?qe[0][qe[0].length-1]:qe[0][0];return`${ei}:${hi.x}:${hi.y}`}for(let ei=0;ei<Bt.length;ei++){let qe=Bt[ei],Ii=qe.geometry,hi=qe.text?qe.text.toString():null;if(!hi){ge(ei);continue}let li=Gi(hi,Ii),we=Gi(hi,Ii,!0);if(li in re&&we in Gt&&re[li]!==Gt[we]){let bi=ni(li,we,Ii),mi=Re(li,we,Kt[bi].geometry);delete Gt[li],delete re[we],re[Gi(hi,Kt[mi].geometry,!0)]=mi,Kt[bi].geometry=null}else li in re?Re(li,we,Ii):we in Gt?ni(li,we,Ii):(ge(ei),Gt[li]=Yt-1,re[we]=Yt-1)}return Kt.filter(ei=>ei.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Bt,Gt)=>Bt.sortKey-Gt.sortKey)}update(i,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(i,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,c){let d=this.lineVertexArray.length;if(i.segment!==void 0){let C=i.dist(c[i.segment+1]),b=i.dist(c[i.segment]),v={};for(let S=i.segment+1;S<c.length;S++)v[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:C},S<c.length-1&&(C+=c[S+1].dist(c[S]));for(let S=i.segment||0;S>=0;S--)v[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:b},S>0&&(b+=c[S-1].dist(c[S]));for(let S=0;S<c.length;S++){let L=v[S];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,c,d,C,b,v,S,L,Q,Z,N,O){let q=i.indexArray,nt=i.layoutVertexArray,lt=i.segments.prepareSegment(4*c.length,nt,q,this.canOverlap?v.sortKey:void 0),Bt=this.glyphOffsetArray.length,Gt=lt.vertexLength,re=this.allowVerticalPlacement&&S===l.ah.vertical?Math.PI/2:0,Kt=v.text&&v.text.sections;for(let Yt=0;Yt<c.length;Yt++){let{tl:ge,tr:Re,bl:ni,br:Gi,tex:ei,pixelOffsetTL:qe,pixelOffsetBR:Ii,minFontScaleX:hi,minFontScaleY:li,glyphOffset:we,isSDF:bi,sectionIndex:mi}=c[Yt],Di=lt.vertexLength,Mr=we[1];fd(nt,L.x,L.y,ge.x,Mr+ge.y,ei.x,ei.y,d,bi,qe.x,qe.y,hi,li),fd(nt,L.x,L.y,Re.x,Mr+Re.y,ei.x+ei.w,ei.y,d,bi,Ii.x,qe.y,hi,li),fd(nt,L.x,L.y,ni.x,Mr+ni.y,ei.x,ei.y+ei.h,d,bi,qe.x,Ii.y,hi,li),fd(nt,L.x,L.y,Gi.x,Mr+Gi.y,ei.x+ei.w,ei.y+ei.h,d,bi,Ii.x,Ii.y,hi,li),Zm(i.dynamicLayoutVertexArray,L,re),q.emplaceBack(Di,Di+1,Di+2),q.emplaceBack(Di+1,Di+2,Di+3),lt.vertexLength+=4,lt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(we[0]),Yt!==c.length-1&&mi===c[Yt+1].sectionIndex||i.programConfigurations.populatePaintArrays(nt.length,v,v.index,{},O,Kt&&Kt[mi])}i.placedSymbolArray.emplaceBack(L.x,L.y,Bt,this.glyphOffsetArray.length-Bt,Gt,Q,Z,L.segment,d?d[0]:0,d?d[1]:0,C[0],C[1],S,0,!1,0,N)}_addCollisionDebugVertex(i,c,d,C,b,v){return c.emplaceBack(0,0),i.emplaceBack(d.x,d.y,C,b,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(i,c,d,C,b,v,S){let L=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),Q=L.vertexLength,Z=b.layoutVertexArray,N=b.collisionVertexArray,O=S.anchorX,q=S.anchorY;this._addCollisionDebugVertex(Z,N,v,O,q,new w(i,c)),this._addCollisionDebugVertex(Z,N,v,O,q,new w(d,c)),this._addCollisionDebugVertex(Z,N,v,O,q,new w(d,C)),this._addCollisionDebugVertex(Z,N,v,O,q,new w(i,C)),L.vertexLength+=4;let nt=b.indexArray;nt.emplaceBack(Q,Q+1),nt.emplaceBack(Q+1,Q+2),nt.emplaceBack(Q+2,Q+3),nt.emplaceBack(Q+3,Q),L.primitiveLength+=4}addDebugCollisionBoxes(i,c,d,C){for(let b=i;b<c;b++){let v=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,C?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hm(qn,S1.members,Rr),this.iconCollisionBox=new Hm(qn,S1.members,Rr);for(let i=0;i<this.symbolInstances.length;i++){let c=this.symbolInstances.get(i);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(i,c,d,C,b,v,S,L,Q){let Z={};for(let N=c;N<d;N++){let O=i.get(N);Z.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},Z.textFeatureIndex=O.featureIndex;break}for(let N=C;N<b;N++){let O=i.get(N);Z.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},Z.verticalTextFeatureIndex=O.featureIndex;break}for(let N=v;N<S;N++){let O=i.get(N);Z.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},Z.iconFeatureIndex=O.featureIndex;break}for(let N=L;N<Q;N++){let O=i.get(N);Z.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},Z.verticalIconFeatureIndex=O.featureIndex;break}return Z}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){let d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,c){let d=i.placedSymbolArray.get(c),C=d.vertexStartIndex+4*d.numGlyphs;for(let b=d.vertexStartIndex;b<C;b+=4)i.indexArray.emplaceBack(b,b+1,b+2),i.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let c=Math.sin(i),d=Math.cos(i),C=[],b=[],v=[];for(let S=0;S<this.symbolInstances.length;++S){v.push(S);let L=this.symbolInstances.get(S);C.push(0|Math.round(c*L.anchorX+d*L.anchorY)),b.push(L.featureIndex)}return v.sort((S,L)=>C[S]-C[L]||b[L]-b[S]),v}addToSortKeyRanges(i,c){let d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let c of this.symbolInstanceIndexes){let d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((C,b,v)=>{C>=0&&v.indexOf(C)===b&&this.addIndicesForPlacedSymbol(this.text,C)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let O1,z1;oi("SymbolBucket",Ru,{omit:["layers","collisionBoxArray","features","compareText"]}),Ru.MAX_GLYPHS=65535,Ru.addDynamicAttributes=Zm;var Mm={get paint(){return z1=z1||new u({"icon-opacity":new _i(Dt.paint_symbol["icon-opacity"]),"icon-color":new _i(Dt.paint_symbol["icon-color"]),"icon-halo-color":new _i(Dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new _i(Dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _i(Dt.paint_symbol["icon-halo-blur"]),"icon-translate":new gi(Dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new gi(Dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new _i(Dt.paint_symbol["text-opacity"]),"text-color":new _i(Dt.paint_symbol["text-color"],{runtimeType:rr,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new _i(Dt.paint_symbol["text-halo-color"]),"text-halo-width":new _i(Dt.paint_symbol["text-halo-width"]),"text-halo-blur":new _i(Dt.paint_symbol["text-halo-blur"]),"text-translate":new gi(Dt.paint_symbol["text-translate"]),"text-translate-anchor":new gi(Dt.paint_symbol["text-translate-anchor"])})},get layout(){return O1=O1||new u({"symbol-placement":new gi(Dt.layout_symbol["symbol-placement"]),"symbol-spacing":new gi(Dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gi(Dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _i(Dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gi(Dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gi(Dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gi(Dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gi(Dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new gi(Dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gi(Dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new _i(Dt.layout_symbol["icon-size"]),"icon-text-fit":new gi(Dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gi(Dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new _i(Dt.layout_symbol["icon-image"]),"icon-rotate":new _i(Dt.layout_symbol["icon-rotate"]),"icon-padding":new _i(Dt.layout_symbol["icon-padding"]),"icon-keep-upright":new gi(Dt.layout_symbol["icon-keep-upright"]),"icon-offset":new _i(Dt.layout_symbol["icon-offset"]),"icon-anchor":new _i(Dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gi(Dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gi(Dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gi(Dt.layout_symbol["text-rotation-alignment"]),"text-field":new _i(Dt.layout_symbol["text-field"]),"text-font":new _i(Dt.layout_symbol["text-font"]),"text-size":new _i(Dt.layout_symbol["text-size"]),"text-max-width":new _i(Dt.layout_symbol["text-max-width"]),"text-line-height":new gi(Dt.layout_symbol["text-line-height"]),"text-letter-spacing":new _i(Dt.layout_symbol["text-letter-spacing"]),"text-justify":new _i(Dt.layout_symbol["text-justify"]),"text-radial-offset":new _i(Dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gi(Dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _i(Dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _i(Dt.layout_symbol["text-anchor"]),"text-max-angle":new gi(Dt.layout_symbol["text-max-angle"]),"text-writing-mode":new gi(Dt.layout_symbol["text-writing-mode"]),"text-rotate":new _i(Dt.layout_symbol["text-rotate"]),"text-padding":new gi(Dt.layout_symbol["text-padding"]),"text-keep-upright":new gi(Dt.layout_symbol["text-keep-upright"]),"text-transform":new _i(Dt.layout_symbol["text-transform"]),"text-offset":new _i(Dt.layout_symbol["text-offset"]),"text-allow-overlap":new gi(Dt.layout_symbol["text-allow-overlap"]),"text-overlap":new gi(Dt.layout_symbol["text-overlap"]),"text-ignore-placement":new gi(Dt.layout_symbol["text-ignore-placement"]),"text-optional":new gi(Dt.layout_symbol["text-optional"])})}};class W1{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ei,this.defaultValue=i}evaluate(i){if(i.formattedSection){let c=this.defaultValue.property.overrides;if(c&&c.hasOverride(i.formattedSection))return c.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}oi("FormatSectionOverride",W1,{omit:["defaultValue"]});class md extends a{constructor(i){super(i,Mm)}recalculate(i,c){if(super.recalculate(i,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let d=this.layout.get("text-writing-mode");if(d){let C=[];for(let b of d)C.indexOf(b)<0&&C.push(b);this.layout._values["text-writing-mode"]=C}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,c,d,C){let b=this.layout.get(i).evaluate(c,{},d,C),v=this._unevaluatedLayout._values[i];return v.isDataDriven()||ea(v.value)||!b?b:function(S,L){return L.replace(/{([^{}]+)}/g,(Q,Z)=>S&&Z in S?String(S[Z]):"")}(c.properties,b)}createBucket(i){return new Ru(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let i of Mm.paint.overridableProperties){if(!md.hasPaintOverride(this.layout,i))continue;let c=this.paint.get(i),d=new W1(c),C=new rs(d,c.property.specification),b=null;b=c.value.kind==="constant"||c.value.kind==="source"?new vs("source",C):new Mn("composite",C,c.value.zoomStops),this.paint._values[i]=new Ho(c.property,b,c.parameters)}}_handleOverridablePaintPropertyUpdate(i,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&md.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,c){let d=i.get("text-field"),C=Mm.paint.properties[c],b=!1,v=S=>{for(let L of S)if(C.overrides&&C.overrides.hasOverride(L))return void(b=!0)};if(d.value.kind==="constant"&&d.value.value instanceof jr)v(d.value.value.sections);else if(d.value.kind==="source"){let S=Q=>{b||(Q instanceof Jn&&Or(Q.value)===zi?v(Q.value.sections):Q instanceof Bo?v(Q.sections):Q.eachChild(S))},L=d.value;L._styleExpression&&S(L._styleExpression.expression)}return b}}let J1;var _F={get paint(){return J1=J1||new u({"background-color":new gi(Dt.paint_background["background-color"]),"background-pattern":new Jl(Dt.paint_background["background-pattern"]),"background-opacity":new gi(Dt.paint_background["background-opacity"])})}};class xF extends a{constructor(i){super(i,_F)}}let X1;var SF={get paint(){return X1=X1||new u({"raster-opacity":new gi(Dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new gi(Dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gi(Dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gi(Dt.paint_raster["raster-brightness-max"]),"raster-saturation":new gi(Dt.paint_raster["raster-saturation"]),"raster-contrast":new gi(Dt.paint_raster["raster-contrast"]),"raster-resampling":new gi(Dt.paint_raster["raster-resampling"]),"raster-fade-duration":new gi(Dt.paint_raster["raster-fade-duration"])})}};class FF extends a{constructor(i){super(i,SF)}}class kF extends a{constructor(i){super(i,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class LF{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Nm=63710088e-1;class sc{constructor(i,c){if(isNaN(i)||isNaN(c))throw new Error(`Invalid LngLat object: (${i}, ${c})`);if(this.lng=+i,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sc(bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){let c=Math.PI/180,d=this.lat*c,C=i.lat*c,b=Math.sin(d)*Math.sin(C)+Math.cos(d)*Math.cos(C)*Math.cos((i.lng-this.lng)*c);return Nm*Math.acos(Math.min(b,1))}static convert(i){if(i instanceof sc)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new sc(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new sc(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let Y1=2*Math.PI*Nm;function j1(A){return Y1*Math.cos(A*Math.PI/180)}function q1(A){return(180+A)/360}function $1(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function tb(A,i){return A/j1(i)}function Vm(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}class Oh{constructor(i,c,d=0){this.x=+i,this.y=+c,this.z=+d}static fromLngLat(i,c=0){let d=sc.convert(i);return new Oh(q1(d.lng),$1(d.lat),tb(c,d.lat))}toLngLat(){return new sc(360*this.x-180,Vm(this.y))}toAltitude(){return this.z*j1(Vm(this.y))}meterInMercatorCoordinateUnits(){return 1/Y1*(i=Vm(this.y),1/Math.cos(i*Math.PI/180));var i}}function eb(A,i,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[A*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class Dm{constructor(i,c,d){if(!function(C,b,v){return!(C<0||C>25||v<0||v>=Math.pow(2,C)||b<0||b>=Math.pow(2,C))}(i,c,d))throw new Error(`x=${c}, y=${d}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=c,this.y=d,this.key=zh(0,i,i,c,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,c,d){let C=(v=this.y,S=this.z,L=eb(256*(b=this.x),256*(v=Math.pow(2,S)-v-1),S),Q=eb(256*(b+1),256*(v+1),S),L[0]+","+L[1]+","+Q[0]+","+Q[1]);var b,v,S,L,Q;let Z=function(N,O,q){let nt,lt="";for(let Bt=N;Bt>0;Bt--)nt=1<<Bt-1,lt+=(O&nt?1:0)+(q&nt?2:0);return lt}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,Z).replace(/{bbox-epsg-3857}/g,C)}isChildOf(i){let c=this.z-i.z;return c>0&&i.x===this.x>>c&&i.y===this.y>>c}getTilePoint(i){let c=Math.pow(2,this.z);return new w((i.x*c-this.x)*cn,(i.y*c-this.y)*cn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ib{constructor(i,c){this.wrap=i,this.canonical=c,this.key=zh(i,c.z,c.z,c.x,c.y)}}class aa{constructor(i,c,d,C,b){if(i<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${d}`);this.overscaledZ=i,this.wrap=c,this.canonical=new Dm(d,+C,+b),this.key=zh(c,i,d,C,b)}clone(){return new aa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let c=this.canonical.z-i;return i>this.canonical.z?new aa(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new aa(i,this.wrap,i,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(i,c){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let d=this.canonical.z-i;return i>this.canonical.z?zh(this.wrap*+c,i,this.canonical.z,this.canonical.x,this.canonical.y):zh(this.wrap*+c,i,i,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(i){if(i.wrap!==this.wrap)return!1;let c=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>c&&i.canonical.y===this.canonical.y>>c}children(i){if(this.overscaledZ>=i)return[new aa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let c=this.canonical.z+1,d=2*this.canonical.x,C=2*this.canonical.y;return[new aa(c,this.wrap,c,d,C),new aa(c,this.wrap,c,d+1,C),new aa(c,this.wrap,c,d,C+1),new aa(c,this.wrap,c,d+1,C+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new aa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new aa(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ib(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Oh(i.x-this.wrap,i.y))}}function zh(A,i,c,d,C){(A*=2)<0&&(A=-1*A-1);let b=1<<c;return(b*b*A+b*C+d).toString(36)+c.toString(36)+i.toString(36)}oi("CanonicalTileID",Dm),oi("OverscaledTileID",aa,{omit:["posMatrix"]});class rb{constructor(i,c,d,C=1,b=1,v=1,S=0){if(this.uid=i,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void at(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;let L=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=C,this.greenFactor=b,this.blueFactor=v,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Q=0;Q<L;Q++)this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q)],this.data[this._idx(L,Q)]=this.data[this._idx(L-1,Q)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q,0)],this.data[this._idx(Q,L)]=this.data[this._idx(Q,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<L;Q++)for(let Z=0;Z<L;Z++){let N=this.get(Q,Z);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(i,c){let d=new Uint8Array(this.data.buffer),C=4*this._idx(i,c);return this.unpack(d[C],d[C+1],d[C+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,c){if(i<-1||i>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(i+1)}unpack(i,c,d){return i*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new oa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,c,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let C=c*this.dim,b=c*this.dim+this.dim,v=d*this.dim,S=d*this.dim+this.dim;switch(c){case-1:C=b-1;break;case 1:b=C+1}switch(d){case-1:v=S-1;break;case 1:S=v+1}let L=-c*this.dim,Q=-d*this.dim;for(let Z=v;Z<S;Z++)for(let N=C;N<b;N++)this.data[this._idx(N,Z)]=i.data[this._idx(N+L,Z+Q)]}}oi("DEMData",rb);class nb{constructor(i){this._stringToNumber={},this._numberToString=[];for(let c=0;c<i.length;c++){let d=i[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class sb{constructor(i,c,d,C,b){this.type="Feature",this._vectorTileFeature=i,i._z=c,i._x=d,i._y=C,this.properties=i.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){let i={geometry:this.geometry};for(let c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(i[c]=this[c]);return i}}class ob{constructor(i,c){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Na(cn,16,0),this.grid3D=new Na(cn,16,0),this.featureIndexArray=new Hr,this.promoteId=c}insert(i,c,d,C,b,v){let S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,C,b);let L=v?this.grid3D:this.grid;for(let Q=0;Q<c.length;Q++){let Z=c[Q],N=[1/0,1/0,-1/0,-1/0];for(let O=0;O<Z.length;O++){let q=Z[O];N[0]=Math.min(N[0],q.x),N[1]=Math.min(N[1],q.y),N[2]=Math.max(N[2],q.x),N[3]=Math.max(N[3],q.y)}N[0]<cn&&N[1]<cn&&N[2]>=0&&N[3]>=0&&L.insert(S,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ic.VectorTile(new Em(this.rawTileData)).layers,this.sourceLayerCoder=new nb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,c,d,C){this.loadVTLayers();let b=i.params||{},v=cn/i.tileSize/i.scale,S=Za(b.filter),L=i.queryGeometry,Q=i.queryPadding*v,Z=Ab(L),N=this.grid.query(Z.minX-Q,Z.minY-Q,Z.maxX+Q,Z.maxY+Q),O=Ab(i.cameraQueryGeometry),q=this.grid3D.query(O.minX-Q,O.minY-Q,O.maxX+Q,O.maxY+Q,(Bt,Gt,re,Kt)=>function(Yt,ge,Re,ni,Gi){for(let qe of Yt)if(ge<=qe.x&&Re<=qe.y&&ni>=qe.x&&Gi>=qe.y)return!0;let ei=[new w(ge,Re),new w(ge,Gi),new w(ni,Gi),new w(ni,Re)];if(Yt.length>2){for(let qe of ei)if(Il(Yt,qe))return!0}for(let qe=0;qe<Yt.length-1;qe++)if(mm(Yt[qe],Yt[qe+1],ei))return!0;return!1}(i.cameraQueryGeometry,Bt-Q,Gt-Q,re+Q,Kt+Q));for(let Bt of q)N.push(Bt);N.sort(EF);let nt={},lt;for(let Bt=0;Bt<N.length;Bt++){let Gt=N[Bt];if(Gt===lt)continue;lt=Gt;let re=this.featureIndexArray.get(Gt),Kt=null;this.loadMatchingFeature(nt,re.bucketIndex,re.sourceLayerIndex,re.featureIndex,S,b.layers,b.availableImages,c,d,C,(Yt,ge,Re)=>(Kt||(Kt=Cl(Yt)),ge.queryIntersectsFeature(L,Yt,Re,Kt,this.z,i.transform,v,i.pixelPosMatrix)))}return nt}loadMatchingFeature(i,c,d,C,b,v,S,L,Q,Z,N){let O=this.bucketLayerIDs[c];if(v&&!function(Bt,Gt){for(let re=0;re<Bt.length;re++)if(Gt.indexOf(Bt[re])>=0)return!0;return!1}(v,O))return;let q=this.sourceLayerCoder.decode(d),nt=this.vtLayers[q].feature(C);if(b.needGeometry){let Bt=ZA(nt,!0);if(!b.filter(new Qr(this.tileID.overscaledZ),Bt,this.tileID.canonical))return}else if(!b.filter(new Qr(this.tileID.overscaledZ),nt))return;let lt=this.getId(nt,q);for(let Bt=0;Bt<O.length;Bt++){let Gt=O[Bt];if(v&&v.indexOf(Gt)<0)continue;let re=L[Gt];if(!re)continue;let Kt={};lt&&Z&&(Kt=Z.getState(re.sourceLayer||"_geojsonTileLayer",lt));let Yt=kt({},Q[Gt]);Yt.paint=ab(Yt.paint,re.paint,nt,Kt,S),Yt.layout=ab(Yt.layout,re.layout,nt,Kt,S);let ge=!N||N(nt,re,Kt);if(!ge)continue;let Re=new sb(nt,this.z,this.x,this.y,lt);Re.layer=Yt;let ni=i[Gt];ni===void 0&&(ni=i[Gt]=[]),ni.push({featureIndex:C,feature:Re,intersectionZ:ge})}}lookupSymbolFeatures(i,c,d,C,b,v,S,L){let Q={};this.loadVTLayers();let Z=Za(b);for(let N of i)this.loadMatchingFeature(Q,d,C,N,Z,v,S,L,c);return Q}hasLayer(i){for(let c of this.bucketLayerIDs)for(let d of c)if(i===d)return!0;return!1}getId(i,c){let d=i.id;return this.promoteId&&(d=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof d=="boolean"&&(d=Number(d))),d}}function ab(A,i,c,d,C){return vt(A,(b,v)=>{let S=i instanceof dl?i.get(v):null;return S&&S.evaluate?S.evaluate(c,d,C):S})}function Ab(A){let i=1/0,c=1/0,d=-1/0,C=-1/0;for(let b of A)i=Math.min(i,b.x),c=Math.min(c,b.y),d=Math.max(d,b.x),C=Math.max(C,b.y);return{minX:i,minY:c,maxX:d,maxY:C}}function EF(A,i){return i-A}function lb(A,i,c,d,C){let b=[];for(let v=0;v<A.length;v++){let S=A[v],L;for(let Q=0;Q<S.length-1;Q++){let Z=S[Q],N=S[Q+1];Z.x<i&&N.x<i||(Z.x<i?Z=new w(i,Z.y+(i-Z.x)/(N.x-Z.x)*(N.y-Z.y))._round():N.x<i&&(N=new w(i,Z.y+(i-Z.x)/(N.x-Z.x)*(N.y-Z.y))._round()),Z.y<c&&N.y<c||(Z.y<c?Z=new w(Z.x+(c-Z.y)/(N.y-Z.y)*(N.x-Z.x),c)._round():N.y<c&&(N=new w(Z.x+(c-Z.y)/(N.y-Z.y)*(N.x-Z.x),c)._round()),Z.x>=d&&N.x>=d||(Z.x>=d?Z=new w(d,Z.y+(d-Z.x)/(N.x-Z.x)*(N.y-Z.y))._round():N.x>=d&&(N=new w(d,Z.y+(d-Z.x)/(N.x-Z.x)*(N.y-Z.y))._round()),Z.y>=C&&N.y>=C||(Z.y>=C?Z=new w(Z.x+(C-Z.y)/(N.y-Z.y)*(N.x-Z.x),C)._round():N.y>=C&&(N=new w(Z.x+(C-Z.y)/(N.y-Z.y)*(N.x-Z.x),C)._round()),L&&Z.equals(L[L.length-1])||(L=[Z],b.push(L)),L.push(N)))))}}return b}oi("FeatureIndex",ob,{omit:["rawTileData","sourceLayerCoder"]});class oc extends w{constructor(i,c,d,C){super(i,c),this.angle=d,C!==void 0&&(this.segment=C)}clone(){return new oc(this.x,this.y,this.angle,this.segment)}}function cb(A,i,c,d,C){if(i.segment===void 0||c===0)return!0;let b=i,v=i.segment+1,S=0;for(;S>-c/2;){if(v--,v<0)return!1;S-=A[v].dist(b),b=A[v]}S+=A[v].dist(A[v+1]),v++;let L=[],Q=0;for(;S<c/2;){let Z=A[v],N=A[v+1];if(!N)return!1;let O=A[v-1].angleTo(Z)-Z.angleTo(N);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:S,angleDelta:O}),Q+=O;S-L[0].distance>d;)Q-=L.shift().angleDelta;if(Q>C)return!1;v++,S+=Z.dist(N)}return!0}function ub(A){let i=0;for(let c=0;c<A.length-1;c++)i+=A[c].dist(A[c+1]);return i}function hb(A,i,c){return A?.6*i*c:0}function gb(A,i){return Math.max(A?A.right-A.left:0,i?i.right-i.left:0)}function TF(A,i,c,d,C,b){let v=hb(c,C,b),S=gb(c,d)*b,L=0,Q=ub(A)/2;for(let Z=0;Z<A.length-1;Z++){let N=A[Z],O=A[Z+1],q=N.dist(O);if(L+q>Q){let nt=(Q-L)/q,lt=ai.number(N.x,O.x,nt),Bt=ai.number(N.y,O.y,nt),Gt=new oc(lt,Bt,O.angleTo(N),Z);return Gt._round(),!v||cb(A,Gt,S,v,i)?Gt:void 0}L+=q}}function UF(A,i,c,d,C,b,v,S,L){let Q=hb(d,b,v),Z=gb(d,C),N=Z*v,O=A[0].x===0||A[0].x===L||A[0].y===0||A[0].y===L;return i-N<i/4&&(i=N+i/4),db(A,O?i/2*S%i:(Z/2+2*b)*v*S%i,i,Q,c,N,O,!1,L)}function db(A,i,c,d,C,b,v,S,L){let Q=b/2,Z=ub(A),N=0,O=i-c,q=[];for(let nt=0;nt<A.length-1;nt++){let lt=A[nt],Bt=A[nt+1],Gt=lt.dist(Bt),re=Bt.angleTo(lt);for(;O+c<N+Gt;){O+=c;let Kt=(O-N)/Gt,Yt=ai.number(lt.x,Bt.x,Kt),ge=ai.number(lt.y,Bt.y,Kt);if(Yt>=0&&Yt<L&&ge>=0&&ge<L&&O-Q>=0&&O+Q<=Z){let Re=new oc(Yt,ge,re,nt);Re._round(),d&&!cb(A,Re,b,d,C)||q.push(Re)}}N+=Gt}return S||q.length||v||(q=db(A,N/2,c,d,C,b,v,!0,L)),q}oi("Anchor",oc);let Gu=uo;function pb(A,i,c,d){let C=[],b=A.image,v=b.pixelRatio,S=b.paddedRect.w-2*Gu,L=b.paddedRect.h-2*Gu,Q={x1:A.left,y1:A.top,x2:A.right,y2:A.bottom},Z=b.stretchX||[[0,S]],N=b.stretchY||[[0,L]],O=(we,bi)=>we+bi[1]-bi[0],q=Z.reduce(O,0),nt=N.reduce(O,0),lt=S-q,Bt=L-nt,Gt=0,re=q,Kt=0,Yt=nt,ge=0,Re=lt,ni=0,Gi=Bt;if(b.content&&d){let we=b.content,bi=we[2]-we[0],mi=we[3]-we[1];(b.textFitWidth||b.textFitHeight)&&(Q=V1(A)),Gt=Cd(Z,0,we[0]),Kt=Cd(N,0,we[1]),re=Cd(Z,we[0],we[2]),Yt=Cd(N,we[1],we[3]),ge=we[0]-Gt,ni=we[1]-Kt,Re=bi-re,Gi=mi-Yt}let ei=Q.x1,qe=Q.y1,Ii=Q.x2-ei,hi=Q.y2-qe,li=(we,bi,mi,Di)=>{let Mr=Id(we.stretch-Gt,re,Ii,ei),Zr=yd(we.fixed-ge,Re,we.stretch,q),Vn=Id(bi.stretch-Kt,Yt,hi,qe),va=yd(bi.fixed-ni,Gi,bi.stretch,nt),ls=Id(mi.stretch-Gt,re,Ii,ei),Dn=yd(mi.fixed-ge,Re,mi.stretch,q),Os=Id(Di.stretch-Kt,Yt,hi,qe),zs=yd(Di.fixed-ni,Gi,Di.stretch,nt),Ws=new w(Mr,Vn),un=new w(ls,Vn),Kn=new w(ls,Os),_s=new w(Mr,Os),cs=new w(Zr/v,va/v),Js=new w(Dn/v,zs/v),us=i*Math.PI/180;if(us){let yr=Math.sin(us),Kr=Math.cos(us),Wr=[Kr,-yr,yr,Kr];Ws._matMult(Wr),un._matMult(Wr),_s._matMult(Wr),Kn._matMult(Wr)}let Aa=we.stretch+we.fixed,ho=bi.stretch+bi.fixed;return{tl:Ws,tr:un,bl:_s,br:Kn,tex:{x:b.paddedRect.x+Gu+Aa,y:b.paddedRect.y+Gu+ho,w:mi.stretch+mi.fixed-Aa,h:Di.stretch+Di.fixed-ho},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:cs,pixelOffsetBR:Js,minFontScaleX:Re/v/Ii,minFontScaleY:Gi/v/hi,isSDF:c}};if(d&&(b.stretchX||b.stretchY)){let we=fb(Z,lt,q),bi=fb(N,Bt,nt);for(let mi=0;mi<we.length-1;mi++){let Di=we[mi],Mr=we[mi+1];for(let Zr=0;Zr<bi.length-1;Zr++)C.push(li(Di,bi[Zr],Mr,bi[Zr+1]))}}else C.push(li({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:L+1}));return C}function Cd(A,i,c){let d=0;for(let C of A)d+=Math.max(i,Math.min(c,C[1]))-Math.max(i,Math.min(c,C[0]));return d}function fb(A,i,c){let d=[{fixed:-Gu,stretch:0}];for(let[C,b]of A){let v=d[d.length-1];d.push({fixed:C-v.stretch,stretch:v.stretch}),d.push({fixed:C-v.stretch,stretch:v.stretch+(b-C)})}return d.push({fixed:i+Gu,stretch:c}),d}function Id(A,i,c,d){return A/i*c+d}function yd(A,i,c,d){return A-i*c/d}class bd{constructor(i,c,d,C,b,v,S,L,Q,Z){var N;if(this.boxStartIndex=i.length,Q){let O=v.top,q=v.bottom,nt=v.collisionPadding;nt&&(O-=nt[1],q+=nt[3]);let lt=q-O;lt>0&&(lt=Math.max(10,lt),this.circleDiameter=lt)}else{let O=((N=v.image)===null||N===void 0?void 0:N.content)&&(v.image.textFitWidth||v.image.textFitHeight)?V1(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};O.y1=O.y1*S-L[0],O.y2=O.y2*S+L[2],O.x1=O.x1*S-L[3],O.x2=O.x2*S+L[1];let q=v.collisionPadding;if(q&&(O.x1-=q[0]*S,O.y1-=q[1]*S,O.x2+=q[2]*S,O.y2+=q[3]*S),Z){let nt=new w(O.x1,O.y1),lt=new w(O.x2,O.y1),Bt=new w(O.x1,O.y2),Gt=new w(O.x2,O.y2),re=Z*Math.PI/180;nt._rotate(re),lt._rotate(re),Bt._rotate(re),Gt._rotate(re),O.x1=Math.min(nt.x,lt.x,Bt.x,Gt.x),O.x2=Math.max(nt.x,lt.x,Bt.x,Gt.x),O.y1=Math.min(nt.y,lt.y,Bt.y,Gt.y),O.y2=Math.max(nt.y,lt.y,Bt.y,Gt.y)}i.emplaceBack(c.x,c.y,O.x1,O.y1,O.x2,O.y2,d,C,b)}this.boxEndIndex=i.length}}class QF{constructor(i=[],c=(d,C)=>d<C?-1:d>C?1:0){if(this.data=i,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;let i=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),i}peek(){return this.data[0]}_up(i){let{data:c,compare:d}=this,C=c[i];for(;i>0;){let b=i-1>>1,v=c[b];if(d(C,v)>=0)break;c[i]=v,i=b}c[i]=C}_down(i){let{data:c,compare:d}=this,C=this.length>>1,b=c[i];for(;i<C;){let v=1+(i<<1),S=v+1;if(S<this.length&&d(c[S],c[v])<0&&(v=S),d(c[v],b)>=0)break;c[i]=c[v],i=v}c[i]=b}}function RF(A,i=1,c=!1){let d=1/0,C=1/0,b=-1/0,v=-1/0,S=A[0];for(let q=0;q<S.length;q++){let nt=S[q];(!q||nt.x<d)&&(d=nt.x),(!q||nt.y<C)&&(C=nt.y),(!q||nt.x>b)&&(b=nt.x),(!q||nt.y>v)&&(v=nt.y)}let L=Math.min(b-d,v-C),Q=L/2,Z=new QF([],GF);if(L===0)return new w(d,C);for(let q=d;q<b;q+=L)for(let nt=C;nt<v;nt+=L)Z.push(new Zu(q+Q,nt+Q,Q,A));let N=function(q){let nt=0,lt=0,Bt=0,Gt=q[0];for(let re=0,Kt=Gt.length,Yt=Kt-1;re<Kt;Yt=re++){let ge=Gt[re],Re=Gt[Yt],ni=ge.x*Re.y-Re.x*ge.y;lt+=(ge.x+Re.x)*ni,Bt+=(ge.y+Re.y)*ni,nt+=3*ni}return new Zu(lt/nt,Bt/nt,0,q)}(A),O=Z.length;for(;Z.length;){let q=Z.pop();(q.d>N.d||!N.d)&&(N=q,c&&console.log("found best %d after %d probes",Math.round(1e4*q.d)/1e4,O)),q.max-N.d<=i||(Q=q.h/2,Z.push(new Zu(q.p.x-Q,q.p.y-Q,Q,A)),Z.push(new Zu(q.p.x+Q,q.p.y-Q,Q,A)),Z.push(new Zu(q.p.x-Q,q.p.y+Q,Q,A)),Z.push(new Zu(q.p.x+Q,q.p.y+Q,Q,A)),O+=4)}return c&&(console.log(`num probes: ${O}`),console.log(`best distance: ${N.d}`)),N.p}function GF(A,i){return i.max-A.max}function Zu(A,i,c,d){this.p=new w(A,i),this.h=c,this.d=function(C,b){let v=!1,S=1/0;for(let L=0;L<b.length;L++){let Q=b[L];for(let Z=0,N=Q.length,O=N-1;Z<N;O=Z++){let q=Q[Z],nt=Q[O];q.y>C.y!=nt.y>C.y&&C.x<(nt.x-q.x)*(C.y-q.y)/(nt.y-q.y)+q.x&&(v=!v),S=Math.min(S,Vc(C,q,nt))}}return(v?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var As;l.aq=void 0,(As=l.aq||(l.aq={}))[As.center=1]="center",As[As.left=2]="left",As[As.right=3]="right",As[As.top=4]="top",As[As.bottom=5]="bottom",As[As["top-left"]=6]="top-left",As[As["top-right"]=7]="top-right",As[As["bottom-left"]=8]="bottom-left",As[As["bottom-right"]=9]="bottom-right";let ac=7,Km=Number.POSITIVE_INFINITY;function mb(A,i){return i[1]!==Km?function(c,d,C){let b=0,v=0;switch(d=Math.abs(d),C=Math.abs(C),c){case"top-right":case"top-left":case"top":v=C-ac;break;case"bottom-right":case"bottom-left":case"bottom":v=-C+ac}switch(c){case"top-right":case"bottom-right":case"right":b=-d;break;case"top-left":case"bottom-left":case"left":b=d}return[b,v]}(A,i[0],i[1]):function(c,d){let C=0,b=0;d<0&&(d=0);let v=d/Math.SQRT2;switch(c){case"top-right":case"top-left":b=v-ac;break;case"bottom-right":case"bottom-left":b=-v+ac;break;case"bottom":b=-d+ac;break;case"top":b=d-ac}switch(c){case"top-right":case"bottom-right":C=-v;break;case"top-left":case"bottom-left":C=v;break;case"left":C=d;break;case"right":C=-d}return[C,b]}(A,i[0])}function Cb(A,i,c){var d;let C=A.layout,b=(d=C.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(i,{},c);if(b){let S=b.values,L=[];for(let Q=0;Q<S.length;Q+=2){let Z=L[Q]=S[Q],N=S[Q+1].map(O=>O*_n);Z.startsWith("top")?N[1]-=ac:Z.startsWith("bottom")&&(N[1]+=ac),L[Q+1]=N}return new dn(L)}let v=C.get("text-variable-anchor");if(v){let S;S=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[C.get("text-radial-offset").evaluate(i,{},c)*_n,Km]:C.get("text-offset").evaluate(i,{},c).map(Q=>Q*_n);let L=[];for(let Q of v)L.push(Q,mb(Q,S));return new dn(L)}return null}function Om(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ZF(A,i,c,d,C,b,v,S,L,Q,Z){let N=b.textMaxSize.evaluate(i,{});N===void 0&&(N=v);let O=A.layers[0].layout,q=O.get("icon-offset").evaluate(i,{},Z),nt=yb(c.horizontal),lt=v/24,Bt=A.tilePixelRatio*lt,Gt=A.tilePixelRatio*N/24,re=A.tilePixelRatio*S,Kt=A.tilePixelRatio*O.get("symbol-spacing"),Yt=O.get("text-padding")*A.tilePixelRatio,ge=function(we,bi,mi,Di=1){let Mr=we.get("icon-padding").evaluate(bi,{},mi),Zr=Mr&&Mr.values;return[Zr[0]*Di,Zr[1]*Di,Zr[2]*Di,Zr[3]*Di]}(O,i,Z,A.tilePixelRatio),Re=O.get("text-max-angle")/180*Math.PI,ni=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",Gi=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",ei=O.get("symbol-placement"),qe=Kt/2,Ii=O.get("icon-text-fit"),hi;d&&Ii!=="none"&&(A.allowVerticalPlacement&&c.vertical&&(hi=D1(d,c.vertical,Ii,O.get("icon-text-fit-padding"),q,lt)),nt&&(d=D1(d,nt,Ii,O.get("icon-text-fit-padding"),q,lt)));let li=(we,bi)=>{bi.x<0||bi.x>=cn||bi.y<0||bi.y>=cn||function(mi,Di,Mr,Zr,Vn,va,ls,Dn,Os,zs,Ws,un,Kn,_s,cs,Js,us,Aa,ho,yr,Kr,Wr,No,ln,Pu){let MA=mi.addToLineVertexArray(Di,Mr),NA,wa,la,$n,vl=0,Xh=0,Bb=0,_b=0,$m=-1,tC=-1,wl={},xb=QA("");if(mi.allowVerticalPlacement&&Zr.vertical){let xs=Dn.layout.get("text-rotate").evaluate(Kr,{},ln)+90;la=new bd(Os,Di,zs,Ws,un,Zr.vertical,Kn,_s,cs,xs),ls&&($n=new bd(Os,Di,zs,Ws,un,ls,us,Aa,cs,xs))}if(Vn){let xs=Dn.layout.get("icon-rotate").evaluate(Kr,{}),ca=Dn.layout.get("icon-text-fit")!=="none",Kc=pb(Vn,xs,No,ca),Ja=ls?pb(ls,xs,No,ca):void 0;wa=new bd(Os,Di,zs,Ws,un,Vn,us,Aa,!1,xs),vl=4*Kc.length;let Oc=mi.iconSizeData,VA=null;Oc.kind==="source"?(VA=[HA*Dn.layout.get("icon-size").evaluate(Kr,{})],VA[0]>nc&&at(`${mi.layerIds[0]}: Value for "icon-size" is >= ${Kh}. Reduce your "icon-size".`)):Oc.kind==="composite"&&(VA=[HA*Wr.compositeIconSizes[0].evaluate(Kr,{},ln),HA*Wr.compositeIconSizes[1].evaluate(Kr,{},ln)],(VA[0]>nc||VA[1]>nc)&&at(`${mi.layerIds[0]}: Value for "icon-size" is >= ${Kh}. Reduce your "icon-size".`)),mi.addSymbols(mi.icon,Kc,VA,yr,ho,Kr,l.ah.none,Di,MA.lineStartIndex,MA.lineLength,-1,ln),$m=mi.icon.placedSymbolArray.length-1,Ja&&(Xh=4*Ja.length,mi.addSymbols(mi.icon,Ja,VA,yr,ho,Kr,l.ah.vertical,Di,MA.lineStartIndex,MA.lineLength,-1,ln),tC=mi.icon.placedSymbolArray.length-1)}let Sb=Object.keys(Zr.horizontal);for(let xs of Sb){let ca=Zr.horizontal[xs];if(!NA){xb=QA(ca.text);let Ja=Dn.layout.get("text-rotate").evaluate(Kr,{},ln);NA=new bd(Os,Di,zs,Ws,un,ca,Kn,_s,cs,Ja)}let Kc=ca.positionedLines.length===1;if(Bb+=Ib(mi,Di,ca,va,Dn,cs,Kr,Js,MA,Zr.vertical?l.ah.horizontal:l.ah.horizontalOnly,Kc?Sb:[xs],wl,$m,Wr,ln),Kc)break}Zr.vertical&&(_b+=Ib(mi,Di,Zr.vertical,va,Dn,cs,Kr,Js,MA,l.ah.vertical,["vertical"],wl,tC,Wr,ln));let MF=NA?NA.boxStartIndex:mi.collisionBoxArray.length,NF=NA?NA.boxEndIndex:mi.collisionBoxArray.length,VF=la?la.boxStartIndex:mi.collisionBoxArray.length,DF=la?la.boxEndIndex:mi.collisionBoxArray.length,KF=wa?wa.boxStartIndex:mi.collisionBoxArray.length,OF=wa?wa.boxEndIndex:mi.collisionBoxArray.length,zF=$n?$n.boxStartIndex:mi.collisionBoxArray.length,WF=$n?$n.boxEndIndex:mi.collisionBoxArray.length,Wa=-1,wd=(xs,ca)=>xs&&xs.circleDiameter?Math.max(xs.circleDiameter,ca):ca;Wa=wd(NA,Wa),Wa=wd(la,Wa),Wa=wd(wa,Wa),Wa=wd($n,Wa);let Fb=Wa>-1?1:0;Fb&&(Wa*=Pu/_n),mi.glyphOffsetArray.length>=Ru.MAX_GLYPHS&&at("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kr.sortKey!==void 0&&mi.addToSortKeyRanges(mi.symbolInstances.length,Kr.sortKey);let JF=Cb(Dn,Kr,ln),[XF,YF]=function(xs,ca){let Kc=xs.length,Ja=ca?.values;if(Ja?.length>0)for(let Oc=0;Oc<Ja.length;Oc+=2){let VA=Ja[Oc+1];xs.emplaceBack(l.aq[Ja[Oc]],VA[0],VA[1])}return[Kc,xs.length]}(mi.textAnchorOffsets,JF);mi.symbolInstances.emplaceBack(Di.x,Di.y,wl.right>=0?wl.right:-1,wl.center>=0?wl.center:-1,wl.left>=0?wl.left:-1,wl.vertical||-1,$m,tC,xb,MF,NF,VF,DF,KF,OF,zF,WF,zs,Bb,_b,vl,Xh,Fb,0,Kn,Wa,XF,YF)}(A,bi,we,c,d,C,hi,A.layers[0],A.collisionBoxArray,i.index,i.sourceLayerIndex,A.index,Bt,[Yt,Yt,Yt,Yt],ni,L,re,ge,Gi,q,i,b,Q,Z,v)};if(ei==="line")for(let we of lb(i.geometry,0,0,cn,cn)){let bi=UF(we,Kt,Re,c.vertical||nt,d,24,Gt,A.overscaling,cn);for(let mi of bi)nt&&PF(A,nt.text,qe,mi)||li(we,mi)}else if(ei==="line-center"){for(let we of i.geometry)if(we.length>1){let bi=TF(we,Re,c.vertical||nt,d,24,Gt);bi&&li(we,bi)}}else if(i.type==="Polygon")for(let we of fA(i.geometry,0)){let bi=RF(we,16);li(we[0],new oc(bi.x,bi.y,0))}else if(i.type==="LineString")for(let we of i.geometry)li(we,new oc(we[0].x,we[0].y,0));else if(i.type==="Point")for(let we of i.geometry)for(let bi of we)li([bi],new oc(bi.x,bi.y,0))}function Ib(A,i,c,d,C,b,v,S,L,Q,Z,N,O,q,nt){let lt=function(re,Kt,Yt,ge,Re,ni,Gi,ei){let qe=ge.layout.get("text-rotate").evaluate(ni,{})*Math.PI/180,Ii=[];for(let hi of Kt.positionedLines)for(let li of hi.positionedGlyphs){if(!li.rect)continue;let we=li.rect||{},bi=R1+1,mi=!0,Di=1,Mr=0,Zr=(Re||ei)&&li.vertical,Vn=li.metrics.advance*li.scale/2;if(ei&&Kt.verticalizable&&(Mr=hi.lineOffset/2-(li.imageName?-(_n-li.metrics.width*li.scale)/2:(li.scale-1)*_n)),li.imageName){let yr=Gi[li.imageName];mi=yr.sdf,Di=yr.pixelRatio,bi=uo/Di}let va=Re?[li.x+Vn,li.y]:[0,0],ls=Re?[0,0]:[li.x+Vn+Yt[0],li.y+Yt[1]-Mr],Dn=[0,0];Zr&&(Dn=ls,ls=[0,0]);let Os=li.metrics.isDoubleResolution?2:1,zs=(li.metrics.left-bi)*li.scale-Vn+ls[0],Ws=(-li.metrics.top-bi)*li.scale+ls[1],un=zs+we.w/Os*li.scale/Di,Kn=Ws+we.h/Os*li.scale/Di,_s=new w(zs,Ws),cs=new w(un,Ws),Js=new w(zs,Kn),us=new w(un,Kn);if(Zr){let yr=new w(-Vn,Vn-Vh),Kr=-Math.PI/2,Wr=_n/2-Vn,No=new w(5-Vh-Wr,-(li.imageName?Wr:0)),ln=new w(...Dn);_s._rotateAround(Kr,yr)._add(No)._add(ln),cs._rotateAround(Kr,yr)._add(No)._add(ln),Js._rotateAround(Kr,yr)._add(No)._add(ln),us._rotateAround(Kr,yr)._add(No)._add(ln)}if(qe){let yr=Math.sin(qe),Kr=Math.cos(qe),Wr=[Kr,-yr,yr,Kr];_s._matMult(Wr),cs._matMult(Wr),Js._matMult(Wr),us._matMult(Wr)}let Aa=new w(0,0),ho=new w(0,0);Ii.push({tl:_s,tr:cs,bl:Js,br:us,tex:we,writingMode:Kt.writingMode,glyphOffset:va,sectionIndex:li.sectionIndex,isSDF:mi,pixelOffsetTL:Aa,pixelOffsetBR:ho,minFontScaleX:0,minFontScaleY:0})}return Ii}(0,c,S,C,b,v,d,A.allowVerticalPlacement),Bt=A.textSizeData,Gt=null;Bt.kind==="source"?(Gt=[HA*C.layout.get("text-size").evaluate(v,{})],Gt[0]>nc&&at(`${A.layerIds[0]}: Value for "text-size" is >= ${Kh}. Reduce your "text-size".`)):Bt.kind==="composite"&&(Gt=[HA*q.compositeTextSizes[0].evaluate(v,{},nt),HA*q.compositeTextSizes[1].evaluate(v,{},nt)],(Gt[0]>nc||Gt[1]>nc)&&at(`${A.layerIds[0]}: Value for "text-size" is >= ${Kh}. Reduce your "text-size".`)),A.addSymbols(A.text,lt,Gt,S,b,v,Q,i,L.lineStartIndex,L.lineLength,O,nt);for(let re of Z)N[re]=A.text.placedSymbolArray.length-1;return 4*lt.length}function yb(A){for(let i in A)return A[i];return null}function PF(A,i,c,d){let C=A.compareText;if(i in C){let b=C[i];for(let v=b.length-1;v>=0;v--)if(d.dist(b[v])<c)return!0}else C[i]=[];return C[i].push(d),!1}let bb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zm{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[c,d]=new Uint8Array(i,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");let C=d>>4;if(C!==1)throw new Error(`Got v${C} data when expected v1.`);let b=bb[15&d];if(!b)throw new Error("Unrecognized array type.");let[v]=new Uint16Array(i,2,1),[S]=new Uint32Array(i,4,1);return new zm(S,v,b,i)}constructor(i,c=64,d=Float64Array,C){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;let b=bb.indexOf(this.ArrayType),v=2*i*this.ArrayType.BYTES_PER_ELEMENT,S=i*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-S%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${d}.`);C&&C instanceof ArrayBuffer?(this.data=C,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+L,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+v+S+L),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+L,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=i)}add(i,c){let d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=i,this.coords[this._pos++]=c,d}finish(){let i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Wm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,c,d,C){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:b,coords:v,nodeSize:S}=this,L=[0,b.length-1,0],Q=[];for(;L.length;){let Z=L.pop()||0,N=L.pop()||0,O=L.pop()||0;if(N-O<=S){for(let Bt=O;Bt<=N;Bt++){let Gt=v[2*Bt],re=v[2*Bt+1];Gt>=i&&Gt<=d&&re>=c&&re<=C&&Q.push(b[Bt])}continue}let q=O+N>>1,nt=v[2*q],lt=v[2*q+1];nt>=i&&nt<=d&&lt>=c&&lt<=C&&Q.push(b[q]),(Z===0?i<=nt:c<=lt)&&(L.push(O),L.push(q-1),L.push(1-Z)),(Z===0?d>=nt:C>=lt)&&(L.push(q+1),L.push(N),L.push(1-Z))}return Q}within(i,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:C,coords:b,nodeSize:v}=this,S=[0,C.length-1,0],L=[],Q=d*d;for(;S.length;){let Z=S.pop()||0,N=S.pop()||0,O=S.pop()||0;if(N-O<=v){for(let Bt=O;Bt<=N;Bt++)wb(b[2*Bt],b[2*Bt+1],i,c)<=Q&&L.push(C[Bt]);continue}let q=O+N>>1,nt=b[2*q],lt=b[2*q+1];wb(nt,lt,i,c)<=Q&&L.push(C[q]),(Z===0?i-d<=nt:c-d<=lt)&&(S.push(O),S.push(q-1),S.push(1-Z)),(Z===0?i+d>=nt:c+d>=lt)&&(S.push(q+1),S.push(N),S.push(1-Z))}return L}}function Wm(A,i,c,d,C,b){if(C-d<=c)return;let v=d+C>>1;vb(A,i,v,d,C,b),Wm(A,i,c,d,v-1,1-b),Wm(A,i,c,v+1,C,1-b)}function vb(A,i,c,d,C,b){for(;C>d;){if(C-d>600){let Q=C-d+1,Z=c-d+1,N=Math.log(Q),O=.5*Math.exp(2*N/3),q=.5*Math.sqrt(N*O*(Q-O)/Q)*(Z-Q/2<0?-1:1);vb(A,i,c,Math.max(d,Math.floor(c-Z*O/Q+q)),Math.min(C,Math.floor(c+(Q-Z)*O/Q+q)),b)}let v=i[2*c+b],S=d,L=C;for(Wh(A,i,d,c),i[2*C+b]>v&&Wh(A,i,d,C);S<L;){for(Wh(A,i,S,L),S++,L--;i[2*S+b]<v;)S++;for(;i[2*L+b]>v;)L--}i[2*d+b]===v?Wh(A,i,d,L):(L++,Wh(A,i,L,C)),L<=c&&(d=L+1),c<=L&&(C=L-1)}}function Wh(A,i,c,d){Jm(A,c,d),Jm(i,2*c,2*d),Jm(i,2*c+1,2*d+1)}function Jm(A,i,c){let d=A[i];A[i]=A[c],A[c]=d}function wb(A,i,c,d){let C=A-c,b=i-d;return C*C+b*b}var Xm;l.bg=void 0,(Xm=l.bg||(l.bg={})).create="create",Xm.load="load",Xm.fullLoad="fullLoad";let vd=null,Jh=[],Ym=1e3/60,jm="loadTime",qm="fullLoadTime",HF={mark(A){performance.mark(A)},frame(A){let i=A;vd!=null&&Jh.push(i-vd),vd=i},clearMetrics(){vd=null,Jh=[],performance.clearMeasures(jm),performance.clearMeasures(qm);for(let A in l.bg)performance.clearMarks(l.bg[A])},getPerformanceMetrics(){performance.measure(jm,l.bg.create,l.bg.load),performance.measure(qm,l.bg.create,l.bg.fullLoad);let A=performance.getEntriesByName(jm)[0].duration,i=performance.getEntriesByName(qm)[0].duration,c=Jh.length,d=1/(Jh.reduce((b,v)=>b+v,0)/c/1e3),C=Jh.filter(b=>b>Ym).reduce((b,v)=>b+(v-Ym)/Ym,0);return{loadTime:A,fullLoadTime:i,fps:d,percentDroppedFrames:C/(c+C)*100,totalFrames:c}}};l.$=class extends R{},l.A=ku,l.B=Uc,l.C=function(A){if(yt==null){let i=A.navigator?A.navigator.userAgent:null;yt=!!A.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return yt},l.D=gi,l.E=Je,l.F=class{constructor(A,i){this.target=A,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new LF(()=>this.process()),this.subscription=function(c,d,C,b){return c.addEventListener(d,C,!1),{unsubscribe:()=>{c.removeEventListener(d,C,!1)}}}(this.target,"message",c=>this.receive(c)),this.globalScope=wt(self)?A:window}registerMessageHandler(A,i){this.messageHandlers[A]=i}sendAsync(A,i){return new Promise((c,d)=>{let C=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[C]={resolve:c,reject:d},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[C];let S={id:C,type:"<cancel>",origin:location.origin,targetMapId:A.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});let b=[],v=Object.assign(Object.assign({},A),{id:C,sourceMapId:this.mapId,origin:location.origin,data:Nn(A.data,b)});this.target.postMessage(v,{transfer:b})})}receive(A){let i=A.data,c=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[c];let d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(wt(self)||i.mustQueue)return this.tasks[c]=i,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,i)}}process(){if(this.taskQueue.length===0)return;let A=this.taskQueue.shift(),i=this.tasks[A];delete this.tasks[A],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(A,i)}processTask(A,i){return s(this,void 0,void 0,function*(){if(i.type==="<response>"){let C=this.resolveRejects[A];return delete this.resolveRejects[A],C?void(i.error?C.reject(os(i.error)):C.resolve(os(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(A,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let c=os(i.data),d=new AbortController;this.abortControllers[A]=d;try{let C=yield this.messageHandlers[i.type](i.sourceMapId,c,d);this.completeTask(A,null,C)}catch(C){this.completeTask(A,C)}})}completeTask(A,i,c){let d=[];delete this.abortControllers[A];let C={id:A,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Nn(i):null,data:Nn(c,d)};this.target.postMessage(C,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.G=mt,l.H=function(){var A=new ku(16);return ku!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},l.I=Um,l.J=function(A,i,c){var d,C,b,v,S,L,Q,Z,N,O,q,nt,lt=c[0],Bt=c[1],Gt=c[2];return i===A?(A[12]=i[0]*lt+i[4]*Bt+i[8]*Gt+i[12],A[13]=i[1]*lt+i[5]*Bt+i[9]*Gt+i[13],A[14]=i[2]*lt+i[6]*Bt+i[10]*Gt+i[14],A[15]=i[3]*lt+i[7]*Bt+i[11]*Gt+i[15]):(C=i[1],b=i[2],v=i[3],S=i[4],L=i[5],Q=i[6],Z=i[7],N=i[8],O=i[9],q=i[10],nt=i[11],A[0]=d=i[0],A[1]=C,A[2]=b,A[3]=v,A[4]=S,A[5]=L,A[6]=Q,A[7]=Z,A[8]=N,A[9]=O,A[10]=q,A[11]=nt,A[12]=d*lt+S*Bt+N*Gt+i[12],A[13]=C*lt+L*Bt+O*Gt+i[13],A[14]=b*lt+Q*Bt+q*Gt+i[14],A[15]=v*lt+Z*Bt+nt*Gt+i[15]),A},l.K=function(A,i,c){var d=c[0],C=c[1],b=c[2];return A[0]=i[0]*d,A[1]=i[1]*d,A[2]=i[2]*d,A[3]=i[3]*d,A[4]=i[4]*C,A[5]=i[5]*C,A[6]=i[6]*C,A[7]=i[7]*C,A[8]=i[8]*b,A[9]=i[9]*b,A[10]=i[10]*b,A[11]=i[11]*b,A[12]=i[12],A[13]=i[13],A[14]=i[14],A[15]=i[15],A},l.L=r1,l.M=function(A,i){let c={};for(let d=0;d<i.length;d++){let C=i[d];C in A&&(c[C]=A[C])}return c},l.N=sc,l.O=q1,l.P=w,l.Q=$1,l.R=oa,l.S=aa,l.T=zl,l.U=H,l.V=Y,l.W=Xt,l.X=cn,l.Y=y,l.Z=Oh,l._=s,l.a=J,l.a$=function(A,i){var c=A[0],d=A[1],C=A[2],b=A[3],v=A[4],S=A[5],L=A[6],Q=A[7],Z=A[8],N=A[9],O=A[10],q=A[11],nt=A[12],lt=A[13],Bt=A[14],Gt=A[15],re=i[0],Kt=i[1],Yt=i[2],ge=i[3],Re=i[4],ni=i[5],Gi=i[6],ei=i[7],qe=i[8],Ii=i[9],hi=i[10],li=i[11],we=i[12],bi=i[13],mi=i[14],Di=i[15];return Math.abs(c-re)<=Ks*Math.max(1,Math.abs(c),Math.abs(re))&&Math.abs(d-Kt)<=Ks*Math.max(1,Math.abs(d),Math.abs(Kt))&&Math.abs(C-Yt)<=Ks*Math.max(1,Math.abs(C),Math.abs(Yt))&&Math.abs(b-ge)<=Ks*Math.max(1,Math.abs(b),Math.abs(ge))&&Math.abs(v-Re)<=Ks*Math.max(1,Math.abs(v),Math.abs(Re))&&Math.abs(S-ni)<=Ks*Math.max(1,Math.abs(S),Math.abs(ni))&&Math.abs(L-Gi)<=Ks*Math.max(1,Math.abs(L),Math.abs(Gi))&&Math.abs(Q-ei)<=Ks*Math.max(1,Math.abs(Q),Math.abs(ei))&&Math.abs(Z-qe)<=Ks*Math.max(1,Math.abs(Z),Math.abs(qe))&&Math.abs(N-Ii)<=Ks*Math.max(1,Math.abs(N),Math.abs(Ii))&&Math.abs(O-hi)<=Ks*Math.max(1,Math.abs(O),Math.abs(hi))&&Math.abs(q-li)<=Ks*Math.max(1,Math.abs(q),Math.abs(li))&&Math.abs(nt-we)<=Ks*Math.max(1,Math.abs(nt),Math.abs(we))&&Math.abs(lt-bi)<=Ks*Math.max(1,Math.abs(lt),Math.abs(bi))&&Math.abs(Bt-mi)<=Ks*Math.max(1,Math.abs(Bt),Math.abs(mi))&&Math.abs(Gt-Di)<=Ks*Math.max(1,Math.abs(Gt),Math.abs(Di))},l.a0=cr,l.a1=Dm,l.a2=he,l.a3=A=>{let i=window.document.createElement("video");return i.muted=!0,new Promise(c=>{i.onloadstart=()=>{c(i)};for(let d of A){let C=window.document.createElement("source");le(d)||(i.crossOrigin="Anonymous"),C.src=d,i.appendChild(C)}})},l.a4=function(){return Lt++},l.a5=Ge,l.a6=Ru,l.a7=Za,l.a8=ZA,l.a9=sb,l.aA=function(A){if(A.type==="custom")return new kF(A);switch(A.type){case"background":return new xF(A);case"circle":return new gS(A);case"fill":return new LS(A);case"fill-extrusion":return new OS(A);case"heatmap":return new pS(A);case"hillshade":return new mS(A);case"line":return new $S(A);case"raster":return new FF(A);case"symbol":return new md(A)}},l.aB=Mt,l.aC=function(A,i){if(!A)return[{command:"setStyle",args:[i]}];let c=[];try{if(!Xe(A.version,i.version))return[{command:"setStyle",args:[i]}];Xe(A.center,i.center)||c.push({command:"setCenter",args:[i.center]}),Xe(A.zoom,i.zoom)||c.push({command:"setZoom",args:[i.zoom]}),Xe(A.bearing,i.bearing)||c.push({command:"setBearing",args:[i.bearing]}),Xe(A.pitch,i.pitch)||c.push({command:"setPitch",args:[i.pitch]}),Xe(A.sprite,i.sprite)||c.push({command:"setSprite",args:[i.sprite]}),Xe(A.glyphs,i.glyphs)||c.push({command:"setGlyphs",args:[i.glyphs]}),Xe(A.transition,i.transition)||c.push({command:"setTransition",args:[i.transition]}),Xe(A.light,i.light)||c.push({command:"setLight",args:[i.light]}),Xe(A.terrain,i.terrain)||c.push({command:"setTerrain",args:[i.terrain]}),Xe(A.sky,i.sky)||c.push({command:"setSky",args:[i.sky]}),Xe(A.projection,i.projection)||c.push({command:"setProjection",args:[i.projection]});let d={},C=[];(function(v,S,L,Q){let Z;for(Z in S=S||{},v=v||{})Object.prototype.hasOwnProperty.call(v,Z)&&(Object.prototype.hasOwnProperty.call(S,Z)||He(Z,L,Q));for(Z in S)Object.prototype.hasOwnProperty.call(S,Z)&&(Object.prototype.hasOwnProperty.call(v,Z)?Xe(v[Z],S[Z])||(v[Z].type==="geojson"&&S[Z].type==="geojson"&&ze(v,S,Z)?Oe(L,{command:"setGeoJSONSourceData",args:[Z,S[Z].data]}):Ke(Z,S,L,Q)):Le(Z,S,L))})(A.sources,i.sources,C,d);let b=[];A.layers&&A.layers.forEach(v=>{"source"in v&&d[v.source]?c.push({command:"removeLayer",args:[v.id]}):b.push(v)}),c=c.concat(C),function(v,S,L){S=S||[];let Q=(v=v||[]).map(ci),Z=S.map(ci),N=v.reduce(Si,{}),O=S.reduce(Si,{}),q=Q.slice(),nt=Object.create(null),lt,Bt,Gt,re,Kt;for(let Yt=0,ge=0;Yt<Q.length;Yt++)lt=Q[Yt],Object.prototype.hasOwnProperty.call(O,lt)?ge++:(Oe(L,{command:"removeLayer",args:[lt]}),q.splice(q.indexOf(lt,ge),1));for(let Yt=0,ge=0;Yt<Z.length;Yt++)lt=Z[Z.length-1-Yt],q[q.length-1-Yt]!==lt&&(Object.prototype.hasOwnProperty.call(N,lt)?(Oe(L,{command:"removeLayer",args:[lt]}),q.splice(q.lastIndexOf(lt,q.length-ge),1)):ge++,re=q[q.length-Yt],Oe(L,{command:"addLayer",args:[O[lt],re]}),q.splice(q.length-Yt,0,lt),nt[lt]=!0);for(let Yt=0;Yt<Z.length;Yt++)if(lt=Z[Yt],Bt=N[lt],Gt=O[lt],!nt[lt]&&!Xe(Bt,Gt))if(Xe(Bt.source,Gt.source)&&Xe(Bt["source-layer"],Gt["source-layer"])&&Xe(Bt.type,Gt.type)){for(Kt in ti(Bt.layout,Gt.layout,L,lt,null,"setLayoutProperty"),ti(Bt.paint,Gt.paint,L,lt,null,"setPaintProperty"),Xe(Bt.filter,Gt.filter)||Oe(L,{command:"setFilter",args:[lt,Gt.filter]}),Xe(Bt.minzoom,Gt.minzoom)&&Xe(Bt.maxzoom,Gt.maxzoom)||Oe(L,{command:"setLayerZoomRange",args:[lt,Gt.minzoom,Gt.maxzoom]}),Bt)Object.prototype.hasOwnProperty.call(Bt,Kt)&&Kt!=="layout"&&Kt!=="paint"&&Kt!=="filter"&&Kt!=="metadata"&&Kt!=="minzoom"&&Kt!=="maxzoom"&&(Kt.indexOf("paint.")===0?ti(Bt[Kt],Gt[Kt],L,lt,Kt.slice(6),"setPaintProperty"):Xe(Bt[Kt],Gt[Kt])||Oe(L,{command:"setLayerProperty",args:[lt,Kt,Gt[Kt]]}));for(Kt in Gt)Object.prototype.hasOwnProperty.call(Gt,Kt)&&!Object.prototype.hasOwnProperty.call(Bt,Kt)&&Kt!=="layout"&&Kt!=="paint"&&Kt!=="filter"&&Kt!=="metadata"&&Kt!=="minzoom"&&Kt!=="maxzoom"&&(Kt.indexOf("paint.")===0?ti(Bt[Kt],Gt[Kt],L,lt,Kt.slice(6),"setPaintProperty"):Xe(Bt[Kt],Gt[Kt])||Oe(L,{command:"setLayerProperty",args:[lt,Kt,Gt[Kt]]}))}else Oe(L,{command:"removeLayer",args:[lt]}),re=q[q.lastIndexOf(lt)+1],Oe(L,{command:"addLayer",args:[Gt,re]})}(b,i.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[i]}]}return c},l.aD=function(A){let i=[],c=A.id;return c===void 0&&i.push({message:`layers.${c}: missing required property "id"`}),A.render===void 0&&i.push({message:`layers.${c}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&i.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),i},l.aE=function A(i,c){if(Array.isArray(i)){if(!Array.isArray(c)||i.length!==c.length)return!1;for(let d=0;d<i.length;d++)if(!A(i[d],c[d]))return!1;return!0}if(typeof i=="object"&&i!==null&&c!==null){if(typeof c!="object"||Object.keys(i).length!==Object.keys(c).length)return!1;for(let d in i)if(!A(i[d],c[d]))return!1;return!0}return i===c},l.aF=vt,l.aG=ft,l.aH=class extends GA{constructor(A,i){super(A,i),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},l.aI=pl,l.aJ=class extends GA{constructor(A,i){super(A,i),this.current=bu}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let i=1;i<16;i++)if(A[i]!==this.current[i]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},l.aK=Eh,l.aL=Th,l.aM=Fi,l.aN=class extends GA{constructor(A,i){super(A,i),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},l.aO=class extends GA{constructor(A,i){super(A,i),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},l.aP=function(A,i,c,d,C,b,v){var S=1/(i-c),L=1/(d-C),Q=1/(b-v);return A[0]=-2*S,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*L,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*Q,A[11]=0,A[12]=(i+c)*S,A[13]=(C+d)*L,A[14]=(v+b)*Q,A[15]=1,A},l.aQ=hS,l.aR=class extends ut{},l.aS=rF,l.aT=class extends Qt{},l.aU=bm,l.aV=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},l.aW=A1,l.aX=Dr,l.aY=as,l.aZ=class extends De{},l.a_=function(A,i){return A[0]===i[0]&&A[1]===i[1]&&A[2]===i[2]&&A[3]===i[3]&&A[4]===i[4]&&A[5]===i[5]&&A[6]===i[6]&&A[7]===i[7]&&A[8]===i[8]&&A[9]===i[9]&&A[10]===i[10]&&A[11]===i[11]&&A[12]===i[12]&&A[13]===i[13]&&A[14]===i[14]&&A[15]===i[15]},l.aa=function(A){let i={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,C,b)=>{let v=C||b;return i[d]=!v||v.toLowerCase(),""}),i["max-age"]){let c=parseInt(i["max-age"],10);isNaN(c)?delete i["max-age"]:i["max-age"]=c}return i},l.ab=function(A,i){let c=[];for(let d in A)d in i||c.push(d);return c},l.ac=ot,l.ad=function(A,i,c){var d=Math.sin(c),C=Math.cos(c),b=i[0],v=i[1],S=i[2],L=i[3],Q=i[4],Z=i[5],N=i[6],O=i[7];return i!==A&&(A[8]=i[8],A[9]=i[9],A[10]=i[10],A[11]=i[11],A[12]=i[12],A[13]=i[13],A[14]=i[14],A[15]=i[15]),A[0]=b*C+Q*d,A[1]=v*C+Z*d,A[2]=S*C+N*d,A[3]=L*C+O*d,A[4]=Q*C-b*d,A[5]=Z*C-v*d,A[6]=N*C-S*d,A[7]=O*C-L*d,A},l.ae=function(A){var i=new ku(16);return i[0]=A[0],i[1]=A[1],i[2]=A[2],i[3]=A[3],i[4]=A[4],i[5]=A[5],i[6]=A[6],i[7]=A[7],i[8]=A[8],i[9]=A[9],i[10]=A[10],i[11]=A[11],i[12]=A[12],i[13]=A[13],i[14]=A[14],i[15]=A[15],i},l.af=Ad,l.ag=function(A,i){let c=0,d=0;if(A.kind==="constant")d=A.layoutSize;else if(A.kind!=="source"){let{interpolationType:C,minZoom:b,maxZoom:v}=A,S=C?ot(wi.interpolationFactor(C,i,b,v),0,1):0;A.kind==="camera"?d=ai.number(A.minSize,A.maxSize,S):c=S}return{uSizeT:c,uSize:d}},l.ai=function(A,{uSize:i,uSizeT:c},{lowerSize:d,upperSize:C}){return A.kind==="source"?d/HA:A.kind==="composite"?ai.number(d/HA,C/HA,c):i},l.aj=Zm,l.ak=function(A,i,c,d){let C=i.y-A.y,b=i.x-A.x,v=d.y-c.y,S=d.x-c.x,L=v*b-S*C;if(L===0)return null;let Q=(S*(A.y-c.y)-v*(A.x-c.x))/L;return new w(A.x+Q*b,A.y+Q*C)},l.al=lb,l.am=od,l.an=Cm,l.ao=function(A){let i=1/0,c=1/0,d=-1/0,C=-1/0;for(let b of A)i=Math.min(i,b.x),c=Math.min(c,b.y),d=Math.max(d,b.x),C=Math.max(C,b.y);return[i,c,d,C]},l.ap=_n,l.ar=Gm,l.as=function(A,i){var c=i[0],d=i[1],C=i[2],b=i[3],v=i[4],S=i[5],L=i[6],Q=i[7],Z=i[8],N=i[9],O=i[10],q=i[11],nt=i[12],lt=i[13],Bt=i[14],Gt=i[15],re=c*S-d*v,Kt=c*L-C*v,Yt=c*Q-b*v,ge=d*L-C*S,Re=d*Q-b*S,ni=C*Q-b*L,Gi=Z*lt-N*nt,ei=Z*Bt-O*nt,qe=Z*Gt-q*nt,Ii=N*Bt-O*lt,hi=N*Gt-q*lt,li=O*Gt-q*Bt,we=re*li-Kt*hi+Yt*Ii+ge*qe-Re*ei+ni*Gi;return we?(A[0]=(S*li-L*hi+Q*Ii)*(we=1/we),A[1]=(C*hi-d*li-b*Ii)*we,A[2]=(lt*ni-Bt*Re+Gt*ge)*we,A[3]=(O*Re-N*ni-q*ge)*we,A[4]=(L*qe-v*li-Q*ei)*we,A[5]=(c*li-C*qe+b*ei)*we,A[6]=(Bt*Yt-nt*ni-Gt*Kt)*we,A[7]=(Z*ni-O*Yt+q*Kt)*we,A[8]=(v*hi-S*qe+Q*Gi)*we,A[9]=(d*qe-c*hi-b*Gi)*we,A[10]=(nt*Re-lt*Yt+Gt*re)*we,A[11]=(N*Yt-Z*Re-q*re)*we,A[12]=(S*ei-v*Ii-L*Gi)*we,A[13]=(c*Ii-d*ei+C*Gi)*we,A[14]=(lt*Kt-nt*ge-Bt*re)*we,A[15]=(Z*ge-N*Kt+O*re)*we,A):null},l.at=Om,l.au=Rm,l.av=zm,l.aw=function(){let A={},i=Dt.$version;for(let c in Dt.$root){let d=Dt.$root[c];if(d.required){let C=null;C=c==="version"?i:d.type==="array"?[]:{},C!=null&&(A[c]=C)}}return A},l.ax=Gc,l.ay=Pt,l.az=function(A){A=A.slice();let i=Object.create(null);for(let c=0;c<A.length;c++)i[A[c].id]=A[c];for(let c=0;c<A.length;c++)"ref"in A[c]&&(A[c]=Tt(A[c],i[A[c].ref]));return A},l.b=te,l.b0=function(A,i){return A[0]=i[0],A[1]=i[1],A[2]=i[2],A[3]=i[3],A[4]=i[4],A[5]=i[5],A[6]=i[6],A[7]=i[7],A[8]=i[8],A[9]=i[9],A[10]=i[10],A[11]=i[11],A[12]=i[12],A[13]=i[13],A[14]=i[14],A[15]=i[15],A},l.b1=function(A,i,c){return A[0]=i[0]*c[0],A[1]=i[1]*c[1],A[2]=i[2]*c[2],A[3]=i[3]*c[3],A},l.b2=function(A,i){return A[0]*i[0]+A[1]*i[1]+A[2]*i[2]+A[3]*i[3]},l.b3=bt,l.b4=ib,l.b5=tb,l.b6=function(A,i,c,d,C){var b,v=1/Math.tan(i/2);return A[0]=v/c,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=v,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,C!=null&&C!==1/0?(A[10]=(C+d)*(b=1/(d-C)),A[14]=2*C*d*b):(A[10]=-1,A[14]=-2*d),A},l.b7=function(A,i,c){var d=Math.sin(c),C=Math.cos(c),b=i[4],v=i[5],S=i[6],L=i[7],Q=i[8],Z=i[9],N=i[10],O=i[11];return i!==A&&(A[0]=i[0],A[1]=i[1],A[2]=i[2],A[3]=i[3],A[12]=i[12],A[13]=i[13],A[14]=i[14],A[15]=i[15]),A[4]=b*C+Q*d,A[5]=v*C+Z*d,A[6]=S*C+N*d,A[7]=L*C+O*d,A[8]=Q*C-b*d,A[9]=Z*C-v*d,A[10]=N*C-S*d,A[11]=O*C-L*d,A},l.b8=D,l.b9=tt,l.bA=F1,l.bB=function(A){return A.message===Et},l.bC=To,l.bD=jn,l.ba=function(A){return A*Math.PI/180},l.bb=function(A,i){let{x:c,y:d}=Oh.fromLngLat(i);return!(A<0||A>25||d<0||d>=1||c<0||c>=1)},l.bc=function(A,i){return A[0]=i[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=i[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=i[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},l.bd=class extends k{},l.be=Nm,l.bf=HF,l.bh=Ut,l.bi=function(A,i){J.REGISTERED_PROTOCOLS[A]=i},l.bj=function(A){delete J.REGISTERED_PROTOCOLS[A]},l.bk=function(A,i){let c={};for(let C=0;C<A.length;C++){let b=i&&i[A[C].id]||Pa(A[C]);i&&(i[A[C].id]=b);let v=c[b];v||(v=c[b]=[]),v.push(A[C])}let d=[];for(let C in c)d.push(c[C]);return d},l.bl=oi,l.bm=nb,l.bn=ob,l.bo=Z1,l.bp=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=cn/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;let i=A.bucket.layers[0],c=i.layout,d=i._unevaluatedLayout._values,C={layoutIconSize:d["icon-size"].possiblyEvaluate(new Qr(A.bucket.zoom+1),A.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Qr(A.bucket.zoom+1),A.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Qr(18))};if(A.bucket.textSizeData.kind==="composite"){let{minZoom:Q,maxZoom:Z}=A.bucket.textSizeData;C.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Qr(Q),A.canonical),d["text-size"].possiblyEvaluate(new Qr(Z),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){let{minZoom:Q,maxZoom:Z}=A.bucket.iconSizeData;C.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Qr(Q),A.canonical),d["icon-size"].possiblyEvaluate(new Qr(Z),A.canonical)]}let b=c.get("text-line-height")*_n,v=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",S=c.get("text-keep-upright"),L=c.get("text-size");for(let Q of A.bucket.features){let Z=c.get("text-font").evaluate(Q,{},A.canonical).join(","),N=L.evaluate(Q,{},A.canonical),O=C.layoutTextSize.evaluate(Q,{},A.canonical),q=C.layoutIconSize.evaluate(Q,{},A.canonical),nt={horizontal:{},vertical:void 0},lt=Q.text,Bt,Gt=[0,0];if(lt){let Yt=lt.toString(),ge=c.get("text-letter-spacing").evaluate(Q,{},A.canonical)*_n,Re=Ps(Yt)?ge:0,ni=c.get("text-anchor").evaluate(Q,{},A.canonical),Gi=Cb(i,Q,A.canonical);if(!Gi){let hi=c.get("text-radial-offset").evaluate(Q,{},A.canonical);Gt=hi?mb(ni,[hi*_n,Km]):c.get("text-offset").evaluate(Q,{},A.canonical).map(li=>li*_n)}let ei=v?"center":c.get("text-justify").evaluate(Q,{},A.canonical),qe=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(Q,{},A.canonical)*_n:1/0,Ii=()=>{A.bucket.allowVerticalPlacement&&Po(Yt)&&(nt.vertical=dd(lt,A.glyphMap,A.glyphPositions,A.imagePositions,Z,qe,b,ni,"left",Re,Gt,l.ah.vertical,!0,O,N))};if(!v&&Gi){let hi=new Set;if(ei==="auto")for(let we=0;we<Gi.values.length;we+=2)hi.add(Om(Gi.values[we]));else hi.add(ei);let li=!1;for(let we of hi)if(!nt.horizontal[we])if(li)nt.horizontal[we]=nt.horizontal[0];else{let bi=dd(lt,A.glyphMap,A.glyphPositions,A.imagePositions,Z,qe,b,"center",we,Re,Gt,l.ah.horizontal,!1,O,N);bi&&(nt.horizontal[we]=bi,li=bi.positionedLines.length===1)}Ii()}else{ei==="auto"&&(ei=Om(ni));let hi=dd(lt,A.glyphMap,A.glyphPositions,A.imagePositions,Z,qe,b,ni,ei,Re,Gt,l.ah.horizontal,!1,O,N);hi&&(nt.horizontal[ei]=hi),Ii(),Po(Yt)&&v&&S&&(nt.vertical=dd(lt,A.glyphMap,A.glyphPositions,A.imagePositions,Z,qe,b,ni,ei,Re,Gt,l.ah.vertical,!1,O,N))}}let re=!1;if(Q.icon&&Q.icon.name){let Yt=A.imageMap[Q.icon.name];Yt&&(Bt=bF(A.imagePositions[Q.icon.name],c.get("icon-offset").evaluate(Q,{},A.canonical),c.get("icon-anchor").evaluate(Q,{},A.canonical)),re=!!Yt.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=re:A.bucket.sdfIcons!==re&&at("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Yt.pixelRatio!==A.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}let Kt=yb(nt.horizontal)||nt.vertical;A.bucket.iconsInText=!!Kt&&Kt.iconsInText,(Kt||Bt)&&ZF(A.bucket,Q,nt,Bt,A.imageMap,C,O,q,Gt,re,A.canonical)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},l.bq=km,l.br=xm,l.bs=Fm,l.bt=ic,l.bu=Em,l.bv=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},l.bw=function(A,i,c,d,C){return s(this,void 0,void 0,function*(){if(Y())try{return yield Xt(A,i,c,d,C)}catch{}return function(b,v,S,L,Q){let Z=b.width,N=b.height;Wt&&Ct||(Wt=new OffscreenCanvas(Z,N),Ct=Wt.getContext("2d",{willReadFrequently:!0})),Wt.width=Z,Wt.height=N,Ct.drawImage(b,0,0,Z,N);let O=Ct.getImageData(v,S,L,Q);return Ct.clearRect(0,0,Z,N),O.data}(A,i,c,d,C)})},l.bx=rb,l.by=p,l.bz=m,l.c=ue,l.d=A=>s(void 0,void 0,void 0,function*(){if(A.byteLength===0)return createImageBitmap(new ImageData(1,1));let i=new Blob([new Uint8Array(A)],{type:"image/png"});try{return createImageBitmap(i)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.e=kt,l.f=A=>new Promise((i,c)=>{let d=new Image;d.onload=()=>{i(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=jt})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let C=new Blob([new Uint8Array(A)],{type:"image/png"});d.src=A.byteLength?URL.createObjectURL(C):jt}),l.g=dt,l.h=(A,i)=>ie(kt(A,{type:"json"}),i),l.i=wt,l.j=We,l.k=Ee,l.l=(A,i)=>ie(kt(A,{type:"arrayBuffer"}),i),l.m=ie,l.n=function(A){return new Em(A).readFields(dF,[])},l.o=Rh,l.p=G1,l.q=u,l.r=Tc,l.s=le,l.t=Qc,l.u=Ma,l.v=Dt,l.w=at,l.x=function([A,i,c]){return i+=90,i*=Math.PI/180,c*=Math.PI/180,{x:A*Math.cos(i)*Math.sin(c),y:A*Math.sin(i)*Math.sin(c),z:A*Math.cos(c)}},l.y=ai,l.z=Qr}),r("worker",["./shared"],function(l){"use strict";class s{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,z){for(let gt of K){this._layerConfigs[gt.id]=gt;let Ht=this._layers[gt.id]=l.aA(gt);Ht._featureFilter=l.a7(Ht.filter),this.keyCache[gt.id]&&delete this.keyCache[gt.id]}for(let gt of z)delete this.keyCache[gt],delete this._layerConfigs[gt],delete this._layers[gt];this.familiesBySource={};let it=l.bk(Object.values(this._layerConfigs),this.keyCache);for(let gt of it){let Ht=gt.map(Ae=>this._layers[Ae.id]),Nt=Ht[0];if(Nt.visibility==="none")continue;let Jt=Nt.source||"",Rt=this.familiesBySource[Jt];Rt||(Rt=this.familiesBySource[Jt]={});let Ot=Nt.sourceLayer||"_geojsonTileLayer",me=Rt[Ot];me||(me=Rt[Ot]=[]),me.push(Ht)}}}class p{constructor(K){let z={},it=[];for(let Jt in K){let Rt=K[Jt],Ot=z[Jt]={};for(let me in Rt){let Ae=Rt[+me];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;let Se={x:0,y:0,w:Ae.bitmap.width+2,h:Ae.bitmap.height+2};it.push(Se),Ot[me]={rect:Se,metrics:Ae.metrics}}}let{w:gt,h:Ht}=l.p(it),Nt=new l.o({width:gt||1,height:Ht||1});for(let Jt in K){let Rt=K[Jt];for(let Ot in Rt){let me=Rt[+Ot];if(!me||me.bitmap.width===0||me.bitmap.height===0)continue;let Ae=z[Jt][Ot].rect;l.o.copy(me.bitmap,Nt,{x:0,y:0},{x:Ae.x+1,y:Ae.y+1},me.bitmap)}}this.image=Nt,this.positions=z}}l.bl("GlyphAtlas",p);class m{constructor(K){this.tileID=new l.S(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,z,it,gt){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new l.a5;let Ht=new l.bm(Object.keys(K.layers).sort()),Nt=new l.bn(this.tileID,this.promoteId);Nt.bucketLayerIDs=[];let Jt={},Rt={featureIndex:Nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:it},Ot=z.familiesBySource[this.source];for(let Qi in Ot){let Oi=K.layers[Qi];if(!Oi)continue;Oi.version===1&&l.w(`Vector tile source "${this.source}" layer "${Qi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let sr=Ht.encode(Qi),Zt=[];for(let Ne=0;Ne<Oi.length;Ne++){let ke=Oi.feature(Ne),Wi=Nt.getId(ke,Qi);Zt.push({feature:ke,id:Wi,index:Ne,sourceLayerIndex:sr})}for(let Ne of Ot[Qi]){let ke=Ne[0];ke.source!==this.source&&l.w(`layer.source = ${ke.source} does not equal this.source = ${this.source}`),ke.minzoom&&this.zoom<Math.floor(ke.minzoom)||ke.maxzoom&&this.zoom>=ke.maxzoom||ke.visibility!=="none"&&(I(Ne,this.zoom,it),(Jt[ke.id]=ke.createBucket({index:Nt.bucketLayerIDs.length,layers:Ne,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sr,sourceID:this.source})).populate(Zt,Rt,this.tileID.canonical),Nt.bucketLayerIDs.push(Ne.map(Wi=>Wi.id)))}}let me=l.aF(Rt.glyphDependencies,Qi=>Object.keys(Qi).map(Number));this.inFlightDependencies.forEach(Qi=>Qi?.abort()),this.inFlightDependencies=[];let Ae=Promise.resolve({});if(Object.keys(me).length){let Qi=new AbortController;this.inFlightDependencies.push(Qi),Ae=gt.sendAsync({type:"GG",data:{stacks:me,source:this.source,tileID:this.tileID,type:"glyphs"}},Qi)}let Se=Object.keys(Rt.iconDependencies),Ye=Promise.resolve({});if(Se.length){let Qi=new AbortController;this.inFlightDependencies.push(Qi),Ye=gt.sendAsync({type:"GI",data:{icons:Se,source:this.source,tileID:this.tileID,type:"icons"}},Qi)}let je=Object.keys(Rt.patternDependencies),Mi=Promise.resolve({});if(je.length){let Qi=new AbortController;this.inFlightDependencies.push(Qi),Mi=gt.sendAsync({type:"GI",data:{icons:je,source:this.source,tileID:this.tileID,type:"patterns"}},Qi)}let[Ti,Vi,vi]=yield Promise.all([Ae,Ye,Mi]),pr=new p(Ti),ur=new l.bo(Vi,vi);for(let Qi in Jt){let Oi=Jt[Qi];Oi instanceof l.a6?(I(Oi.layers,this.zoom,it),l.bp({bucket:Oi,glyphMap:Ti,glyphPositions:pr.positions,imageMap:Vi,imagePositions:ur.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Oi.hasPattern&&(Oi instanceof l.bq||Oi instanceof l.br||Oi instanceof l.bs)&&(I(Oi.layers,this.zoom,it),Oi.addFeatures(Rt,this.tileID.canonical,ur.patternPositions))}return this.status="done",{buckets:Object.values(Jt).filter(Qi=>!Qi.isEmpty()),featureIndex:Nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pr.image,imageAtlas:ur,glyphMap:this.returnDependencies?Ti:null,iconMap:this.returnDependencies?Vi:null,glyphPositions:this.returnDependencies?pr.positions:null}})}}function I(It,K,z){let it=new l.z(K);for(let gt of It)gt.recalculate(it,z)}class w{constructor(K,z,it){this.actor=K,this.layerIndex=z,this.availableImages=it,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(K,z){return l._(this,void 0,void 0,function*(){let it=yield l.l(K.request,z);try{return{vectorTile:new l.bt.VectorTile(new l.bu(it.data)),rawData:it.data,cacheControl:it.cacheControl,expires:it.expires}}catch(gt){let Ht=new Uint8Array(it.data),Nt=`Unable to parse the tile at ${K.request.url}, `;throw Nt+=Ht[0]===31&&Ht[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${gt.message}`,new Error(Nt)}})}loadTile(K){return l._(this,void 0,void 0,function*(){let z=K.uid,it=!!(K&&K.request&&K.request.collectResourceTiming)&&new l.bv(K.request),gt=new m(K);this.loading[z]=gt;let Ht=new AbortController;gt.abort=Ht;try{let Nt=yield this.loadVectorTile(K,Ht);if(delete this.loading[z],!Nt)return null;let Jt=Nt.rawData,Rt={};Nt.expires&&(Rt.expires=Nt.expires),Nt.cacheControl&&(Rt.cacheControl=Nt.cacheControl);let Ot={};if(it){let Ae=it.finish();Ae&&(Ot.resourceTiming=JSON.parse(JSON.stringify(Ae)))}gt.vectorTile=Nt.vectorTile;let me=gt.parse(Nt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[z]=gt,this.fetching[z]={rawTileData:Jt,cacheControl:Rt,resourceTiming:Ot};try{let Ae=yield me;return l.e({rawTileData:Jt.slice(0)},Ae,Rt,Ot)}finally{delete this.fetching[z]}}catch(Nt){throw delete this.loading[z],gt.status="done",this.loaded[z]=gt,Nt}})}reloadTile(K){return l._(this,void 0,void 0,function*(){let z=K.uid;if(!this.loaded||!this.loaded[z])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let it=this.loaded[z];if(it.showCollisionBoxes=K.showCollisionBoxes,it.status==="parsing"){let gt=yield it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor),Ht;if(this.fetching[z]){let{rawTileData:Nt,cacheControl:Jt,resourceTiming:Rt}=this.fetching[z];delete this.fetching[z],Ht=l.e({rawTileData:Nt.slice(0)},gt,Jt,Rt)}else Ht=gt;return Ht}if(it.status==="done"&&it.vectorTile)return it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(K){return l._(this,void 0,void 0,function*(){let z=this.loading,it=K.uid;z&&z[it]&&z[it].abort&&(z[it].abort.abort(),delete z[it])})}removeTile(K){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class _{constructor(){this.loaded={}}loadTile(K){return l._(this,void 0,void 0,function*(){let{uid:z,encoding:it,rawImageData:gt,redFactor:Ht,greenFactor:Nt,blueFactor:Jt,baseShift:Rt}=K,Ot=gt.width+2,me=gt.height+2,Ae=l.b(gt)?new l.R({width:Ot,height:me},yield l.bw(gt,-1,-1,Ot,me)):gt,Se=new l.bx(z,Ae,it,Ht,Nt,Jt,Rt);return this.loaded=this.loaded||{},this.loaded[z]=Se,Se})}removeTile(K){let z=this.loaded,it=K.uid;z&&z[it]&&delete z[it]}}function E(It,K){if(It.length!==0){U(It[0],K);for(var z=1;z<It.length;z++)U(It[z],!K)}}function U(It,K){for(var z=0,it=0,gt=0,Ht=It.length,Nt=Ht-1;gt<Ht;Nt=gt++){var Jt=(It[gt][0]-It[Nt][0])*(It[Nt][1]+It[gt][1]),Rt=z+Jt;it+=Math.abs(z)>=Math.abs(Jt)?z-Rt+Jt:Jt-Rt+z,z=Rt}z+it>=0!=!!K&&It.reverse()}var F=l.by(function It(K,z){var it,gt=K&&K.type;if(gt==="FeatureCollection")for(it=0;it<K.features.length;it++)It(K.features[it],z);else if(gt==="GeometryCollection")for(it=0;it<K.geometries.length;it++)It(K.geometries[it],z);else if(gt==="Feature")It(K.geometry,z);else if(gt==="Polygon")E(K.coordinates,z);else if(gt==="MultiPolygon")for(it=0;it<K.coordinates.length;it++)E(K.coordinates[it],z);return K});let V=l.bt.VectorTileFeature.prototype.toGeoJSON;var H={exports:{}},Y=l.bz,D=l.bt.VectorTileFeature,tt=ot;function ot(It,K){this.options=K||{},this.features=It,this.length=It.length}function bt(It,K){this.id=typeof It.id=="number"?It.id:void 0,this.type=It.type,this.rawGeometry=It.type===1?[It.geometry]:It.geometry,this.properties=It.tags,this.extent=K||4096}ot.prototype.feature=function(It){return new bt(this.features[It],this.options.extent)},bt.prototype.loadGeometry=function(){var It=this.rawGeometry;this.geometry=[];for(var K=0;K<It.length;K++){for(var z=It[K],it=[],gt=0;gt<z.length;gt++)it.push(new Y(z[gt][0],z[gt][1]));this.geometry.push(it)}return this.geometry},bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var It=this.geometry,K=1/0,z=-1/0,it=1/0,gt=-1/0,Ht=0;Ht<It.length;Ht++)for(var Nt=It[Ht],Jt=0;Jt<Nt.length;Jt++){var Rt=Nt[Jt];K=Math.min(K,Rt.x),z=Math.max(z,Rt.x),it=Math.min(it,Rt.y),gt=Math.max(gt,Rt.y)}return[K,it,z,gt]},bt.prototype.toGeoJSON=D.prototype.toGeoJSON;var kt=l.bA,Lt=tt;function vt(It){var K=new kt;return function(z,it){for(var gt in z.layers)it.writeMessage(3,ft,z.layers[gt])}(It,K),K.finish()}function ft(It,K){var z;K.writeVarintField(15,It.version||1),K.writeStringField(1,It.name||""),K.writeVarintField(5,It.extent||4096);var it={keys:[],values:[],keycache:{},valuecache:{}};for(z=0;z<It.length;z++)it.feature=It.feature(z),K.writeMessage(2,Mt,it);var gt=it.keys;for(z=0;z<gt.length;z++)K.writeStringField(3,gt[z]);var Ht=it.values;for(z=0;z<Ht.length;z++)K.writeMessage(4,yt,Ht[z])}function Mt(It,K){var z=It.feature;z.id!==void 0&&K.writeVarintField(1,z.id),K.writeMessage(2,qt,It),K.writeVarintField(3,z.type),K.writeMessage(4,wt,z)}function qt(It,K){var z=It.feature,it=It.keys,gt=It.values,Ht=It.keycache,Nt=It.valuecache;for(var Jt in z.properties){var Rt=z.properties[Jt],Ot=Ht[Jt];if(Rt!==null){Ot===void 0&&(it.push(Jt),Ht[Jt]=Ot=it.length-1),K.writeVarint(Ot);var me=typeof Rt;me!=="string"&&me!=="boolean"&&me!=="number"&&(Rt=JSON.stringify(Rt));var Ae=me+":"+Rt,Se=Nt[Ae];Se===void 0&&(gt.push(Rt),Nt[Ae]=Se=gt.length-1),K.writeVarint(Se)}}}function at(It,K){return(K<<3)+(7&It)}function st(It){return It<<1^It>>31}function wt(It,K){for(var z=It.loadGeometry(),it=It.type,gt=0,Ht=0,Nt=z.length,Jt=0;Jt<Nt;Jt++){var Rt=z[Jt],Ot=1;it===1&&(Ot=Rt.length),K.writeVarint(at(1,Ot));for(var me=it===3?Rt.length-1:Rt.length,Ae=0;Ae<me;Ae++){Ae===1&&it!==1&&K.writeVarint(at(2,me-1));var Se=Rt[Ae].x-gt,Ye=Rt[Ae].y-Ht;K.writeVarint(st(Se)),K.writeVarint(st(Ye)),gt+=Se,Ht+=Ye}it===3&&K.writeVarint(at(7,1))}}function yt(It,K){var z=typeof It;z==="string"?K.writeStringField(1,It):z==="boolean"?K.writeBooleanField(7,It):z==="number"&&(It%1!=0?K.writeDoubleField(3,It):It<0?K.writeSVarintField(6,It):K.writeVarintField(5,It))}H.exports=vt,H.exports.fromVectorTileJs=vt,H.exports.fromGeojsonVt=function(It,K){K=K||{};var z={};for(var it in It)z[it]=new Lt(It[it].features,K),z[it].name=it,z[it].version=K.version,z[it].extent=K.extent;return vt({layers:z})},H.exports.GeoJSONWrapper=Lt;var te=l.by(H.exports);let jt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:It=>It},Xt=Math.fround||(Wt=new Float32Array(1),It=>(Wt[0]=+It,Wt[0]));var Wt;let Ct=3,Et=5,ue=6;class J{constructor(K){this.options=Object.assign(Object.create(jt),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){let{log:z,minZoom:it,maxZoom:gt}=this.options;z&&console.time("total time");let Ht=`prepare ${K.length} points`;z&&console.time(Ht),this.points=K;let Nt=[];for(let Rt=0;Rt<K.length;Rt++){let Ot=K[Rt];if(!Ot.geometry)continue;let[me,Ae]=Ot.geometry.coordinates,Se=Xt(Ut(me)),Ye=Xt(Pt(Ae));Nt.push(Se,Ye,1/0,Rt,-1,1),this.options.reduce&&Nt.push(0)}let Jt=this.trees[gt+1]=this._createTree(Nt);z&&console.timeEnd(Ht);for(let Rt=gt;Rt>=it;Rt--){let Ot=+Date.now();Jt=this.trees[Rt]=this._createTree(this._cluster(Jt,Rt)),z&&console.log("z%d: %d clusters in %dms",Rt,Jt.numItems,+Date.now()-Ot)}return z&&console.timeEnd("total time"),this}getClusters(K,z){let it=((K[0]+180)%360+360)%360-180,gt=Math.max(-90,Math.min(90,K[1])),Ht=K[2]===180?180:((K[2]+180)%360+360)%360-180,Nt=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)it=-180,Ht=180;else if(it>Ht){let Ae=this.getClusters([it,gt,180,Nt],z),Se=this.getClusters([-180,gt,Ht,Nt],z);return Ae.concat(Se)}let Jt=this.trees[this._limitZoom(z)],Rt=Jt.range(Ut(it),Pt(Nt),Ut(Ht),Pt(gt)),Ot=Jt.data,me=[];for(let Ae of Rt){let Se=this.stride*Ae;me.push(Ot[Se+Et]>1?dt(Ot,Se,this.clusterProps):this.points[Ot[Se+Ct]])}return me}getChildren(K){let z=this._getOriginId(K),it=this._getOriginZoom(K),gt="No cluster with the specified id.",Ht=this.trees[it];if(!Ht)throw new Error(gt);let Nt=Ht.data;if(z*this.stride>=Nt.length)throw new Error(gt);let Jt=this.options.radius/(this.options.extent*Math.pow(2,it-1)),Rt=Ht.within(Nt[z*this.stride],Nt[z*this.stride+1],Jt),Ot=[];for(let me of Rt){let Ae=me*this.stride;Nt[Ae+4]===K&&Ot.push(Nt[Ae+Et]>1?dt(Nt,Ae,this.clusterProps):this.points[Nt[Ae+Ct]])}if(Ot.length===0)throw new Error(gt);return Ot}getLeaves(K,z,it){let gt=[];return this._appendLeaves(gt,K,z=z||10,it=it||0,0),gt}getTile(K,z,it){let gt=this.trees[this._limitZoom(K)],Ht=Math.pow(2,K),{extent:Nt,radius:Jt}=this.options,Rt=Jt/Nt,Ot=(it-Rt)/Ht,me=(it+1+Rt)/Ht,Ae={features:[]};return this._addTileFeatures(gt.range((z-Rt)/Ht,Ot,(z+1+Rt)/Ht,me),gt.data,z,it,Ht,Ae),z===0&&this._addTileFeatures(gt.range(1-Rt/Ht,Ot,1,me),gt.data,Ht,it,Ht,Ae),z===Ht-1&&this._addTileFeatures(gt.range(0,Ot,Rt/Ht,me),gt.data,-1,it,Ht,Ae),Ae.features.length?Ae:null}getClusterExpansionZoom(K){let z=this._getOriginZoom(K)-1;for(;z<=this.options.maxZoom;){let it=this.getChildren(K);if(z++,it.length!==1)break;K=it[0].properties.cluster_id}return z}_appendLeaves(K,z,it,gt,Ht){let Nt=this.getChildren(z);for(let Jt of Nt){let Rt=Jt.properties;if(Rt&&Rt.cluster?Ht+Rt.point_count<=gt?Ht+=Rt.point_count:Ht=this._appendLeaves(K,Rt.cluster_id,it,gt,Ht):Ht<gt?Ht++:K.push(Jt),K.length===it)break}return Ht}_createTree(K){let z=new l.av(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let it=0;it<K.length;it+=this.stride)z.add(K[it],K[it+1]);return z.finish(),z.data=K,z}_addTileFeatures(K,z,it,gt,Ht,Nt){for(let Jt of K){let Rt=Jt*this.stride,Ot=z[Rt+Et]>1,me,Ae,Se;if(Ot)me=mt(z,Rt,this.clusterProps),Ae=z[Rt],Se=z[Rt+1];else{let Mi=this.points[z[Rt+Ct]];me=Mi.properties;let[Ti,Vi]=Mi.geometry.coordinates;Ae=Ut(Ti),Se=Pt(Vi)}let Ye={type:1,geometry:[[Math.round(this.options.extent*(Ae*Ht-it)),Math.round(this.options.extent*(Se*Ht-gt))]],tags:me},je;je=Ot||this.options.generateId?z[Rt+Ct]:this.points[z[Rt+Ct]].id,je!==void 0&&(Ye.id=je),Nt.features.push(Ye)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,z){let{radius:it,extent:gt,reduce:Ht,minPoints:Nt}=this.options,Jt=it/(gt*Math.pow(2,z)),Rt=K.data,Ot=[],me=this.stride;for(let Ae=0;Ae<Rt.length;Ae+=me){if(Rt[Ae+2]<=z)continue;Rt[Ae+2]=z;let Se=Rt[Ae],Ye=Rt[Ae+1],je=K.within(Rt[Ae],Rt[Ae+1],Jt),Mi=Rt[Ae+Et],Ti=Mi;for(let Vi of je){let vi=Vi*me;Rt[vi+2]>z&&(Ti+=Rt[vi+Et])}if(Ti>Mi&&Ti>=Nt){let Vi,vi=Se*Mi,pr=Ye*Mi,ur=-1,Qi=((Ae/me|0)<<5)+(z+1)+this.points.length;for(let Oi of je){let sr=Oi*me;if(Rt[sr+2]<=z)continue;Rt[sr+2]=z;let Zt=Rt[sr+Et];vi+=Rt[sr]*Zt,pr+=Rt[sr+1]*Zt,Rt[sr+4]=Qi,Ht&&(Vi||(Vi=this._map(Rt,Ae,!0),ur=this.clusterProps.length,this.clusterProps.push(Vi)),Ht(Vi,this._map(Rt,sr)))}Rt[Ae+4]=Qi,Ot.push(vi/Ti,pr/Ti,1/0,Qi,-1,Ti),Ht&&Ot.push(ur)}else{for(let Vi=0;Vi<me;Vi++)Ot.push(Rt[Ae+Vi]);if(Ti>1)for(let Vi of je){let vi=Vi*me;if(!(Rt[vi+2]<=z)){Rt[vi+2]=z;for(let pr=0;pr<me;pr++)Ot.push(Rt[vi+pr])}}}}return Ot}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,z,it){if(K[z+Et]>1){let Nt=this.clusterProps[K[z+ue]];return it?Object.assign({},Nt):Nt}let gt=this.points[K[z+Ct]].properties,Ht=this.options.map(gt);return it&&Ht===gt?Object.assign({},Ht):Ht}}function dt(It,K,z){return{type:"Feature",id:It[K+Ct],properties:mt(It,K,z),geometry:{type:"Point",coordinates:[(it=It[K],360*(it-.5)),ie(It[K+1])]}};var it}function mt(It,K,z){let it=It[K+Et],gt=it>=1e4?`${Math.round(it/1e3)}k`:it>=1e3?Math.round(it/100)/10+"k":it,Ht=It[K+ue],Nt=Ht===-1?{}:Object.assign({},z[Ht]);return Object.assign(Nt,{cluster:!0,cluster_id:It[K+Ct],point_count:it,point_count_abbreviated:gt})}function Ut(It){return It/360+.5}function Pt(It){let K=Math.sin(It*Math.PI/180),z=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return z<0?0:z>1?1:z}function ie(It){let K=(180-360*It)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function le(It,K,z,it){let gt=it,Ht=K+(z-K>>1),Nt,Jt=z-K,Rt=It[K],Ot=It[K+1],me=It[z],Ae=It[z+1];for(let Se=K+3;Se<z;Se+=3){let Ye=ce(It[Se],It[Se+1],Rt,Ot,me,Ae);if(Ye>gt)Nt=Se,gt=Ye;else if(Ye===gt){let je=Math.abs(Se-Ht);je<Jt&&(Nt=Se,Jt=je)}}gt>it&&(Nt-K>3&&le(It,K,Nt,it),It[Nt+2]=gt,z-Nt>3&&le(It,Nt,z,it))}function ce(It,K,z,it,gt,Ht){let Nt=gt-z,Jt=Ht-it;if(Nt!==0||Jt!==0){let Rt=((It-z)*Nt+(K-it)*Jt)/(Nt*Nt+Jt*Jt);Rt>1?(z=gt,it=Ht):Rt>0&&(z+=Nt*Rt,it+=Jt*Rt)}return Nt=It-z,Jt=K-it,Nt*Nt+Jt*Jt}function Qe(It,K,z,it){let gt={id:It??null,type:K,geometry:z,tags:it,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(K==="Point"||K==="MultiPoint"||K==="LineString")Ee(gt,z);else if(K==="Polygon")Ee(gt,z[0]);else if(K==="MultiLineString")for(let Ht of z)Ee(gt,Ht);else if(K==="MultiPolygon")for(let Ht of z)Ee(gt,Ht[0]);return gt}function Ee(It,K){for(let z=0;z<K.length;z+=3)It.minX=Math.min(It.minX,K[z]),It.minY=Math.min(It.minY,K[z+1]),It.maxX=Math.max(It.maxX,K[z]),It.maxY=Math.max(It.maxY,K[z+1])}function We(It,K,z,it){if(!K.geometry)return;let gt=K.geometry.coordinates;if(gt&&gt.length===0)return;let Ht=K.geometry.type,Nt=Math.pow(z.tolerance/((1<<z.maxZoom)*z.extent),2),Jt=[],Rt=K.id;if(z.promoteId?Rt=K.properties[z.promoteId]:z.generateId&&(Rt=it||0),Ht==="Point")Je(gt,Jt);else if(Ht==="MultiPoint")for(let Ot of gt)Je(Ot,Jt);else if(Ht==="LineString")Dt(gt,Jt,Nt,!1);else if(Ht==="MultiLineString"){if(z.lineMetrics){for(let Ot of gt)Jt=[],Dt(Ot,Jt,Nt,!1),It.push(Qe(Rt,"LineString",Jt,K.properties));return}de(gt,Jt,Nt,!1)}else if(Ht==="Polygon")de(gt,Jt,Nt,!0);else{if(Ht!=="MultiPolygon"){if(Ht==="GeometryCollection"){for(let Ot of K.geometry.geometries)We(It,{id:Rt,geometry:Ot,properties:K.properties},z,it);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ot of gt){let me=[];de(Ot,me,Nt,!0),Jt.push(me)}}It.push(Qe(Rt,Ht,Jt,K.properties))}function Je(It,K){K.push(Tt(It[0]),Xe(It[1]),0)}function Dt(It,K,z,it){let gt,Ht,Nt=0;for(let Rt=0;Rt<It.length;Rt++){let Ot=Tt(It[Rt][0]),me=Xe(It[Rt][1]);K.push(Ot,me,0),Rt>0&&(Nt+=it?(gt*me-Ot*Ht)/2:Math.sqrt(Math.pow(Ot-gt,2)+Math.pow(me-Ht,2))),gt=Ot,Ht=me}let Jt=K.length-3;K[2]=1,le(K,0,Jt,z),K[Jt+2]=1,K.size=Math.abs(Nt),K.start=0,K.end=K.size}function de(It,K,z,it){for(let gt=0;gt<It.length;gt++){let Ht=[];Dt(It[gt],Ht,z,it),K.push(Ht)}}function Tt(It){return It/360+.5}function Xe(It){let K=Math.sin(It*Math.PI/180),z=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return z<0?0:z>1?1:z}function Oe(It,K,z,it,gt,Ht,Nt,Jt){if(it/=K,Ht>=(z/=K)&&Nt<it)return It;if(Nt<z||Ht>=it)return null;let Rt=[];for(let Ot of It){let me=Ot.geometry,Ae=Ot.type,Se=gt===0?Ot.minX:Ot.minY,Ye=gt===0?Ot.maxX:Ot.maxY;if(Se>=z&&Ye<it){Rt.push(Ot);continue}if(Ye<z||Se>=it)continue;let je=[];if(Ae==="Point"||Ae==="MultiPoint")Le(me,je,z,it,gt);else if(Ae==="LineString")He(me,je,z,it,gt,!1,Jt.lineMetrics);else if(Ae==="MultiLineString")ze(me,je,z,it,gt,!1);else if(Ae==="Polygon")ze(me,je,z,it,gt,!0);else if(Ae==="MultiPolygon")for(let Mi of me){let Ti=[];ze(Mi,Ti,z,it,gt,!0),Ti.length&&je.push(Ti)}if(je.length){if(Jt.lineMetrics&&Ae==="LineString"){for(let Mi of je)Rt.push(Qe(Ot.id,Ae,Mi,Ot.tags));continue}Ae!=="LineString"&&Ae!=="MultiLineString"||(je.length===1?(Ae="LineString",je=je[0]):Ae="MultiLineString"),Ae!=="Point"&&Ae!=="MultiPoint"||(Ae=je.length===3?"Point":"MultiPoint"),Rt.push(Qe(Ot.id,Ae,je,Ot.tags))}}return Rt.length?Rt:null}function Le(It,K,z,it,gt){for(let Ht=0;Ht<It.length;Ht+=3){let Nt=It[Ht+gt];Nt>=z&&Nt<=it&&ti(K,It[Ht],It[Ht+1],It[Ht+2])}}function He(It,K,z,it,gt,Ht,Nt){let Jt=Ke(It),Rt=gt===0?ci:Si,Ot,me,Ae=It.start;for(let Ti=0;Ti<It.length-3;Ti+=3){let Vi=It[Ti],vi=It[Ti+1],pr=It[Ti+2],ur=It[Ti+3],Qi=It[Ti+4],Oi=gt===0?Vi:vi,sr=gt===0?ur:Qi,Zt=!1;Nt&&(Ot=Math.sqrt(Math.pow(Vi-ur,2)+Math.pow(vi-Qi,2))),Oi<z?sr>z&&(me=Rt(Jt,Vi,vi,ur,Qi,z),Nt&&(Jt.start=Ae+Ot*me)):Oi>it?sr<it&&(me=Rt(Jt,Vi,vi,ur,Qi,it),Nt&&(Jt.start=Ae+Ot*me)):ti(Jt,Vi,vi,pr),sr<z&&Oi>=z&&(me=Rt(Jt,Vi,vi,ur,Qi,z),Zt=!0),sr>it&&Oi<=it&&(me=Rt(Jt,Vi,vi,ur,Qi,it),Zt=!0),!Ht&&Zt&&(Nt&&(Jt.end=Ae+Ot*me),K.push(Jt),Jt=Ke(It)),Nt&&(Ae+=Ot)}let Se=It.length-3,Ye=It[Se],je=It[Se+1],Mi=gt===0?Ye:je;Mi>=z&&Mi<=it&&ti(Jt,Ye,je,It[Se+2]),Se=Jt.length-3,Ht&&Se>=3&&(Jt[Se]!==Jt[0]||Jt[Se+1]!==Jt[1])&&ti(Jt,Jt[0],Jt[1],Jt[2]),Jt.length&&K.push(Jt)}function Ke(It){let K=[];return K.size=It.size,K.start=It.start,K.end=It.end,K}function ze(It,K,z,it,gt,Ht){for(let Nt of It)He(Nt,K,z,it,gt,Ht,!1)}function ti(It,K,z,it){It.push(K,z,it)}function ci(It,K,z,it,gt,Ht){let Nt=(Ht-K)/(it-K);return ti(It,Ht,z+(gt-z)*Nt,1),Nt}function Si(It,K,z,it,gt,Ht){let Nt=(Ht-z)/(gt-z);return ti(It,K+(it-K)*Nt,Ht,1),Nt}function he(It,K){let z=[];for(let it=0;it<It.length;it++){let gt=It[it],Ht=gt.type,Nt;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")Nt=Zi(gt.geometry,K);else if(Ht==="MultiLineString"||Ht==="Polygon"){Nt=[];for(let Jt of gt.geometry)Nt.push(Zi(Jt,K))}else if(Ht==="MultiPolygon"){Nt=[];for(let Jt of gt.geometry){let Rt=[];for(let Ot of Jt)Rt.push(Zi(Ot,K));Nt.push(Rt)}}z.push(Qe(gt.id,Ht,Nt,gt.tags))}return z}function Zi(It,K){let z=[];z.size=It.size,It.start!==void 0&&(z.start=It.start,z.end=It.end);for(let it=0;it<It.length;it+=3)z.push(It[it]+K,It[it+1],It[it+2]);return z}function Hi(It,K){if(It.transformed)return It;let z=1<<It.z,it=It.x,gt=It.y;for(let Ht of It.features){let Nt=Ht.geometry,Jt=Ht.type;if(Ht.geometry=[],Jt===1)for(let Rt=0;Rt<Nt.length;Rt+=2)Ht.geometry.push(pi(Nt[Rt],Nt[Rt+1],K,z,it,gt));else for(let Rt=0;Rt<Nt.length;Rt++){let Ot=[];for(let me=0;me<Nt[Rt].length;me+=2)Ot.push(pi(Nt[Rt][me],Nt[Rt][me+1],K,z,it,gt));Ht.geometry.push(Ot)}}return It.transformed=!0,It}function pi(It,K,z,it,gt,Ht){return[Math.round(z*(It*it-gt)),Math.round(z*(K*it-Ht))]}function Ei(It,K,z,it,gt){let Ht=K===gt.maxZoom?0:gt.tolerance/((1<<K)*gt.extent),Nt={features:[],numPoints:0,numSimplified:0,numFeatures:It.length,source:null,x:z,y:it,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Jt of It)ne(Nt,Jt,Ht,gt);return Nt}function ne(It,K,z,it){let gt=K.geometry,Ht=K.type,Nt=[];if(It.minX=Math.min(It.minX,K.minX),It.minY=Math.min(It.minY,K.minY),It.maxX=Math.max(It.maxX,K.maxX),It.maxY=Math.max(It.maxY,K.maxY),Ht==="Point"||Ht==="MultiPoint")for(let Jt=0;Jt<gt.length;Jt+=3)Nt.push(gt[Jt],gt[Jt+1]),It.numPoints++,It.numSimplified++;else if(Ht==="LineString")ui(Nt,gt,It,z,!1,!1);else if(Ht==="MultiLineString"||Ht==="Polygon")for(let Jt=0;Jt<gt.length;Jt++)ui(Nt,gt[Jt],It,z,Ht==="Polygon",Jt===0);else if(Ht==="MultiPolygon")for(let Jt=0;Jt<gt.length;Jt++){let Rt=gt[Jt];for(let Ot=0;Ot<Rt.length;Ot++)ui(Nt,Rt[Ot],It,z,!0,Ot===0)}if(Nt.length){let Jt=K.tags||null;if(Ht==="LineString"&&it.lineMetrics){Jt={};for(let Ot in K.tags)Jt[Ot]=K.tags[Ot];Jt.mapbox_clip_start=gt.start/gt.size,Jt.mapbox_clip_end=gt.end/gt.size}let Rt={geometry:Nt,type:Ht==="Polygon"||Ht==="MultiPolygon"?3:Ht==="LineString"||Ht==="MultiLineString"?2:1,tags:Jt};K.id!==null&&(Rt.id=K.id),It.features.push(Rt)}}function ui(It,K,z,it,gt,Ht){let Nt=it*it;if(it>0&&K.size<(gt?Nt:it))return void(z.numPoints+=K.length/3);let Jt=[];for(let Rt=0;Rt<K.length;Rt+=3)(it===0||K[Rt+2]>Nt)&&(z.numSimplified++,Jt.push(K[Rt],K[Rt+1])),z.numPoints++;gt&&function(Rt,Ot){let me=0;for(let Ae=0,Se=Rt.length,Ye=Se-2;Ae<Se;Ye=Ae,Ae+=2)me+=(Rt[Ae]-Rt[Ye])*(Rt[Ae+1]+Rt[Ye+1]);if(me>0===Ot)for(let Ae=0,Se=Rt.length;Ae<Se/2;Ae+=2){let Ye=Rt[Ae],je=Rt[Ae+1];Rt[Ae]=Rt[Se-2-Ae],Rt[Ae+1]=Rt[Se-1-Ae],Rt[Se-2-Ae]=Ye,Rt[Se-1-Ae]=je}}(Jt,Ht),It.push(Jt)}let Ve={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class rr{constructor(K,z){let it=(z=this.options=function(Ht,Nt){for(let Jt in Nt)Ht[Jt]=Nt[Jt];return Ht}(Object.create(Ve),z)).debug;if(it&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");let gt=function(Ht,Nt){let Jt=[];if(Ht.type==="FeatureCollection")for(let Rt=0;Rt<Ht.features.length;Rt++)We(Jt,Ht.features[Rt],Nt,Rt);else We(Jt,Ht.type==="Feature"?Ht:{geometry:Ht},Nt);return Jt}(K,z);this.tiles={},this.tileCoords=[],it&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),gt=function(Ht,Nt){let Jt=Nt.buffer/Nt.extent,Rt=Ht,Ot=Oe(Ht,1,-1-Jt,Jt,0,-1,2,Nt),me=Oe(Ht,1,1-Jt,2+Jt,0,-1,2,Nt);return(Ot||me)&&(Rt=Oe(Ht,1,-Jt,1+Jt,0,-1,2,Nt)||[],Ot&&(Rt=he(Ot,1).concat(Rt)),me&&(Rt=Rt.concat(he(me,-1)))),Rt}(gt,z),gt.length&&this.splitTile(gt,0,0,0),it&&(gt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(K,z,it,gt,Ht,Nt,Jt){let Rt=[K,z,it,gt],Ot=this.options,me=Ot.debug;for(;Rt.length;){gt=Rt.pop(),it=Rt.pop(),z=Rt.pop(),K=Rt.pop();let Ae=1<<z,Se=Ni(z,it,gt),Ye=this.tiles[Se];if(!Ye&&(me>1&&console.time("creation"),Ye=this.tiles[Se]=Ei(K,z,it,gt,Ot),this.tileCoords.push({z,x:it,y:gt}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,it,gt,Ye.numFeatures,Ye.numPoints,Ye.numSimplified),console.timeEnd("creation"));let Zt=`z${z}`;this.stats[Zt]=(this.stats[Zt]||0)+1,this.total++}if(Ye.source=K,Ht==null){if(z===Ot.indexMaxZoom||Ye.numPoints<=Ot.indexMaxPoints)continue}else{if(z===Ot.maxZoom||z===Ht)continue;if(Ht!=null){let Zt=Ht-z;if(it!==Nt>>Zt||gt!==Jt>>Zt)continue}}if(Ye.source=null,K.length===0)continue;me>1&&console.time("clipping");let je=.5*Ot.buffer/Ot.extent,Mi=.5-je,Ti=.5+je,Vi=1+je,vi=null,pr=null,ur=null,Qi=null,Oi=Oe(K,Ae,it-je,it+Ti,0,Ye.minX,Ye.maxX,Ot),sr=Oe(K,Ae,it+Mi,it+Vi,0,Ye.minX,Ye.maxX,Ot);K=null,Oi&&(vi=Oe(Oi,Ae,gt-je,gt+Ti,1,Ye.minY,Ye.maxY,Ot),pr=Oe(Oi,Ae,gt+Mi,gt+Vi,1,Ye.minY,Ye.maxY,Ot),Oi=null),sr&&(ur=Oe(sr,Ae,gt-je,gt+Ti,1,Ye.minY,Ye.maxY,Ot),Qi=Oe(sr,Ae,gt+Mi,gt+Vi,1,Ye.minY,Ye.maxY,Ot),sr=null),me>1&&console.timeEnd("clipping"),Rt.push(vi||[],z+1,2*it,2*gt),Rt.push(pr||[],z+1,2*it,2*gt+1),Rt.push(ur||[],z+1,2*it+1,2*gt),Rt.push(Qi||[],z+1,2*it+1,2*gt+1)}}getTile(K,z,it){K=+K,z=+z,it=+it;let gt=this.options,{extent:Ht,debug:Nt}=gt;if(K<0||K>24)return null;let Jt=1<<K,Rt=Ni(K,z=z+Jt&Jt-1,it);if(this.tiles[Rt])return Hi(this.tiles[Rt],Ht);Nt>1&&console.log("drilling down to z%d-%d-%d",K,z,it);let Ot,me=K,Ae=z,Se=it;for(;!Ot&&me>0;)me--,Ae>>=1,Se>>=1,Ot=this.tiles[Ni(me,Ae,Se)];return Ot&&Ot.source?(Nt>1&&(console.log("found parent tile z%d-%d-%d",me,Ae,Se),console.time("drilling down")),this.splitTile(Ot.source,me,Ae,Se,K,z,it),Nt>1&&console.timeEnd("drilling down"),this.tiles[Rt]?Hi(this.tiles[Rt],Ht):null):null}}function Ni(It,K,z){return 32*((1<<It)*z+K)+It}function $e(It,K){return K?It.properties[K]:It.id}function wr(It,K){if(It==null)return!0;if(It.type==="Feature")return $e(It,K)!=null;if(It.type==="FeatureCollection"){let z=new Set;for(let it of It.features){let gt=$e(it,K);if(gt==null||z.has(gt))return!1;z.add(gt)}return!0}return!1}function zi(It,K){let z=new Map;if(It!=null)if(It.type==="Feature")z.set($e(It,K),It);else for(let it of It.features)z.set($e(it,K),it);return z}class _r extends w{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(K,z){return l._(this,void 0,void 0,function*(){let it=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let gt=this._geoJSONIndex.getTile(it.z,it.x,it.y);if(!gt)return null;let Ht=new class{constructor(Jt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.X,this.length=Jt.length,this._features=Jt}feature(Jt){return new class{constructor(Rt){this._feature=Rt,this.extent=l.X,this.type=Rt.type,this.properties=Rt.tags,"id"in Rt&&!isNaN(Rt.id)&&(this.id=parseInt(Rt.id,10))}loadGeometry(){if(this._feature.type===1){let Rt=[];for(let Ot of this._feature.geometry)Rt.push([new l.P(Ot[0],Ot[1])]);return Rt}{let Rt=[];for(let Ot of this._feature.geometry){let me=[];for(let Ae of Ot)me.push(new l.P(Ae[0],Ae[1]));Rt.push(me)}return Rt}}toGeoJSON(Rt,Ot,me){return V.call(this,Rt,Ot,me)}}(this._features[Jt])}}(gt.features),Nt=te(Ht);return Nt.byteOffset===0&&Nt.byteLength===Nt.buffer.byteLength||(Nt=new Uint8Array(Nt)),{vectorTile:Ht,rawData:Nt.buffer}})}loadData(K){return l._(this,void 0,void 0,function*(){var z;(z=this._pendingRequest)===null||z===void 0||z.abort();let it=!!(K&&K.request&&K.request.collectResourceTiming)&&new l.bv(K.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(K,this._pendingRequest),this._geoJSONIndex=K.cluster?new J(function({superclusterOptions:Nt,clusterProperties:Jt}){if(!Jt||!Nt)return Nt;let Rt={},Ot={},me={accumulated:null,zoom:0},Ae={properties:null},Se=Object.keys(Jt);for(let Ye of Se){let[je,Mi]=Jt[Ye],Ti=l.bC(Mi),Vi=l.bC(typeof je=="string"?[je,["accumulated"],["get",Ye]]:je);Rt[Ye]=Ti.value,Ot[Ye]=Vi.value}return Nt.map=Ye=>{Ae.properties=Ye;let je={};for(let Mi of Se)je[Mi]=Rt[Mi].evaluate(me,Ae);return je},Nt.reduce=(Ye,je)=>{Ae.properties=je;for(let Mi of Se)me.accumulated=Ye[Mi],Ye[Mi]=Ot[Mi].evaluate(me,Ae)},Nt}(K)).load((yield this._pendingData).features):(gt=yield this._pendingData,new rr(gt,K.geojsonVtOptions)),this.loaded={};let Ht={};if(it){let Nt=it.finish();Nt&&(Ht.resourceTiming={},Ht.resourceTiming[K.source]=JSON.parse(JSON.stringify(Nt)))}return Ht}catch(Ht){if(delete this._pendingRequest,l.bB(Ht))return{abandoned:!0};throw Ht}var gt})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(K){let z=this.loaded;return z&&z[K.uid]?super.reloadTile(K):this.loadTile(K)}loadAndProcessGeoJSON(K,z){return l._(this,void 0,void 0,function*(){let it=yield this.loadGeoJSON(K,z);if(delete this._pendingRequest,typeof it!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(F(it,!0),K.filter){let gt=l.bC(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(gt.result==="error")throw new Error(gt.value.map(Nt=>`${Nt.key}: ${Nt.message}`).join(", "));it={type:"FeatureCollection",features:it.features.filter(Nt=>gt.value.evaluate({zoom:0},Nt))}}return it})}loadGeoJSON(K,z){return l._(this,void 0,void 0,function*(){let{promoteId:it}=K;if(K.request){let gt=yield l.h(K.request,z);return this._dataUpdateable=wr(gt.data,it)?zi(gt.data,it):void 0,gt.data}if(typeof K.data=="string")try{let gt=JSON.parse(K.data);return this._dataUpdateable=wr(gt,it)?zi(gt,it):void 0,gt}catch{throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`)}if(!K.dataDiff)throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${K.source}`);return function(gt,Ht,Nt){var Jt,Rt,Ot,me;if(Ht.removeAll&&gt.clear(),Ht.remove)for(let Ae of Ht.remove)gt.delete(Ae);if(Ht.add)for(let Ae of Ht.add){let Se=$e(Ae,Nt);Se!=null&&gt.set(Se,Ae)}if(Ht.update)for(let Ae of Ht.update){let Se=gt.get(Ae.id);if(Se==null)continue;let Ye=!Ae.removeAllProperties&&(((Jt=Ae.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0||((Rt=Ae.addOrUpdateProperties)===null||Rt===void 0?void 0:Rt.length)>0);if((Ae.newGeometry||Ae.removeAllProperties||Ye)&&(Se=Object.assign({},Se),gt.set(Ae.id,Se),Ye&&(Se.properties=Object.assign({},Se.properties))),Ae.newGeometry&&(Se.geometry=Ae.newGeometry),Ae.removeAllProperties)Se.properties={};else if(((Ot=Ae.removeProperties)===null||Ot===void 0?void 0:Ot.length)>0)for(let je of Ae.removeProperties)Object.prototype.hasOwnProperty.call(Se.properties,je)&&delete Se.properties[je];if(((me=Ae.addOrUpdateProperties)===null||me===void 0?void 0:me.length)>0)for(let{key:je,value:Mi}of Ae.addOrUpdateProperties)Se.properties[je]=Mi}}(this._dataUpdateable,K.dataDiff,it),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(K){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}class nr{constructor(K){this.self=K,this.actor=new l.F(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(z,it)=>{if(this.externalWorkerSourceTypes[z])throw new Error(`Worker source with name "${z}" already registered.`);this.externalWorkerSourceTypes[z]=it},this.self.addProtocol=l.bi,this.self.removeProtocol=l.bj,this.self.registerRTLTextPlugin=z=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.setMethods(z)},this.actor.registerMessageHandler("LDT",(z,it)=>this._getDEMWorkerSource(z,it.source).loadTile(it)),this.actor.registerMessageHandler("RDT",(z,it)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(z,it.source).removeTile(it)})),this.actor.registerMessageHandler("GCEZ",(z,it)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(z,it.type,it.source).getClusterExpansionZoom(it)})),this.actor.registerMessageHandler("GCC",(z,it)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(z,it.type,it.source).getClusterChildren(it)})),this.actor.registerMessageHandler("GCL",(z,it)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(z,it.type,it.source).getClusterLeaves(it)})),this.actor.registerMessageHandler("LD",(z,it)=>this._getWorkerSource(z,it.type,it.source).loadData(it)),this.actor.registerMessageHandler("GD",(z,it)=>this._getWorkerSource(z,it.type,it.source).getData()),this.actor.registerMessageHandler("LT",(z,it)=>this._getWorkerSource(z,it.type,it.source).loadTile(it)),this.actor.registerMessageHandler("RT",(z,it)=>this._getWorkerSource(z,it.type,it.source).reloadTile(it)),this.actor.registerMessageHandler("AT",(z,it)=>this._getWorkerSource(z,it.type,it.source).abortTile(it)),this.actor.registerMessageHandler("RMT",(z,it)=>this._getWorkerSource(z,it.type,it.source).removeTile(it)),this.actor.registerMessageHandler("RS",(z,it)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[z]||!this.workerSources[z][it.type]||!this.workerSources[z][it.type][it.source])return;let gt=this.workerSources[z][it.type][it.source];delete this.workerSources[z][it.type][it.source],gt.removeSource!==void 0&&gt.removeSource(it)})),this.actor.registerMessageHandler("RM",z=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[z],delete this.availableImages[z],delete this.workerSources[z],delete this.demWorkerSources[z]})),this.actor.registerMessageHandler("SR",(z,it)=>l._(this,void 0,void 0,function*(){this.referrer=it})),this.actor.registerMessageHandler("SRPS",(z,it)=>this._syncRTLPluginState(z,it)),this.actor.registerMessageHandler("IS",(z,it)=>l._(this,void 0,void 0,function*(){this.self.importScripts(it)})),this.actor.registerMessageHandler("SI",(z,it)=>this._setImages(z,it)),this.actor.registerMessageHandler("UL",(z,it)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(z).update(it.layers,it.removedIds)})),this.actor.registerMessageHandler("SL",(z,it)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(z).replace(it)}))}_setImages(K,z){return l._(this,void 0,void 0,function*(){this.availableImages[K]=z;for(let it in this.workerSources[K]){let gt=this.workerSources[K][it];for(let Ht in gt)gt[Ht].availableImages=z}})}_syncRTLPluginState(K,z){return l._(this,void 0,void 0,function*(){if(l.bD.isParsed())return l.bD.getState();if(z.pluginStatus!=="loading")return l.bD.setState(z),z;let it=z.pluginURL;if(this.self.importScripts(it),l.bD.isParsed()){let gt={pluginStatus:"loaded",pluginURL:it};return l.bD.setState(gt),gt}throw l.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${it}`)})}_getAvailableImages(K){let z=this.availableImages[K];return z||(z=[]),z}_getLayerIndex(K){let z=this.layerIndexes[K];return z||(z=this.layerIndexes[K]=new s),z}_getWorkerSource(K,z,it){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][z]||(this.workerSources[K][z]={}),!this.workerSources[K][z][it]){let gt={sendAsync:(Ht,Nt)=>(Ht.targetMapId=K,this.actor.sendAsync(Ht,Nt))};switch(z){case"vector":this.workerSources[K][z][it]=new w(gt,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][z][it]=new _r(gt,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][z][it]=new this.externalWorkerSourceTypes[z](gt,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][z][it]}_getDEMWorkerSource(K,z){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][z]||(this.demWorkerSources[K][z]=new _),this.demWorkerSources[K][z]}}return l.i(self)&&(self.worker=new nr(self)),nr}),r("index",["exports","./shared"],function(l,s){"use strict";var p="4.7.0";let m,I,w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:u=>new Promise((t,a)=>{let h=requestAnimationFrame(t);u.signal.addEventListener("abort",()=>{cancelAnimationFrame(h),a(s.c())})}),getImageData(u,t=0){return this.getImageCanvasContext(u).getImageData(-t,-t,u.width+2*t,u.height+2*t)},getImageCanvasContext(u){let t=window.document.createElement("canvas"),a=t.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return t.width=u.width,t.height=u.height,a.drawImage(u,0,0,u.width,u.height),a},resolveURL:u=>(m||(m=document.createElement("a")),m.href=u,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class _{static testProp(t){if(!_.docStyle)return t[0];for(let a=0;a<t.length;a++)if(t[a]in _.docStyle)return t[a];return t[0]}static create(t,a,h){let g=window.document.createElement(t);return a!==void 0&&(g.className=a),h&&h.appendChild(g),g}static createNS(t,a){return window.document.createElementNS(t,a)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(t,a){t.style[_.transformProp]=a}static addEventListener(t,a,h,g={}){t.addEventListener(a,h,"passive"in g?g:g.capture)}static removeEventListener(t,a,h,g={}){t.removeEventListener(a,h,"passive"in g?g:g.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static getScale(t){let a=t.getBoundingClientRect();return{x:a.width/t.offsetWidth||1,y:a.height/t.offsetHeight||1,boundingClientRect:a}}static getPoint(t,a,h){let g=a.boundingClientRect;return new s.P((h.clientX-g.left)/a.x-t.clientLeft,(h.clientY-g.top)/a.y-t.clientTop)}static mousePos(t,a){let h=_.getScale(t);return _.getPoint(t,h,a)}static touchPos(t,a){let h=[],g=_.getScale(t);for(let f=0;f<a.length;f++)h.push(_.getPoint(t,g,a[f]));return h}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);let E={supported:!1,testSupport:function(u){!V&&F&&(H?Y(u):U=u)}},U,F,V=!1,H=!1;function Y(u){let t=u.createTexture();u.bindTexture(u.TEXTURE_2D,t);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,F),u.isContextLost())return;E.supported=!0}catch{}u.deleteTexture(t),V=!0}var D;typeof document<"u"&&(F=document.createElement("img"),F.onload=()=>{U&&Y(U),U=null,H=!0},F.onerror=()=>{V=!0,U=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(u){let t,a,h,g;u.resetRequestQueue=()=>{t=[],a=0,h=0,g={}},u.addThrottleControl=x=>{let k=h++;return g[k]=x,k},u.removeThrottleControl=x=>{delete g[x],y()},u.getImage=(x,k,R=!0)=>new Promise((G,P)=>{E.supported&&(x.headers||(x.headers={}),x.headers.accept="image/webp,*/*"),s.e(x,{type:"image"}),t.push({abortController:k,requestParameters:x,supportImageRefresh:R,state:"queued",onError:M=>{P(M)},onSuccess:M=>{G(M)}}),y()});let f=x=>s._(this,void 0,void 0,function*(){x.state="running";let{requestParameters:k,supportImageRefresh:R,onError:G,onSuccess:P,abortController:M}=x,j=R===!1&&!s.i(self)&&!s.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((X,ct)=>X&&ct==="accept",!0));a++;let et=j?B(k,M):s.m(k,M);try{let X=yield et;delete x.abortController,x.state="completed",X.data instanceof HTMLImageElement||s.b(X.data)?P(X):X.data&&P({data:yield(W=X.data,typeof createImageBitmap=="function"?s.d(W):s.f(W)),cacheControl:X.cacheControl,expires:X.expires})}catch(X){delete x.abortController,G(X)}finally{a--,y()}var W}),y=()=>{let x=(()=>{for(let k of Object.keys(g))if(g[k]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=a;k<x&&t.length>0;k++){let R=t.shift();R.abortController.signal.aborted?k--:f(R)}},B=(x,k)=>new Promise((R,G)=>{let P=new Image,M=x.url,j=x.credentials;j&&j==="include"?P.crossOrigin="use-credentials":(j&&j==="same-origin"||!s.s(M))&&(P.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{P.src="",G(s.c())}),P.fetchPriority="high",P.onload=()=>{P.onerror=P.onload=null,R({data:P})},P.onerror=()=>{P.onerror=P.onload=null,k.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},P.src=M})}(D||(D={})),D.resetRequestQueue();class tt{constructor(t){this._transformRequestFn=t}transformRequest(t,a){return this._transformRequestFn&&this._transformRequestFn(t,a)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function ot(u){var t=new s.A(3);return t[0]=u[0],t[1]=u[1],t[2]=u[2],t}var bt,kt=function(u,t,a){return u[0]=t[0]-a[0],u[1]=t[1]-a[1],u[2]=t[2]-a[2],u};bt=new s.A(3),s.A!=Float32Array&&(bt[0]=0,bt[1]=0,bt[2]=0);var Lt=function(u){var t=u[0],a=u[1];return t*t+a*a};function vt(u){let t=[];if(typeof u=="string")t.push({id:"default",url:u});else if(u&&u.length>0){let a=[];for(let{id:h,url:g}of u){let f=`${h}${g}`;a.indexOf(f)===-1&&(a.push(f),t.push({id:h,url:g}))}}return t}function ft(u,t,a){let h=u.split("?");return h[0]+=`${t}${a}`,h.join("?")}(function(){var u=new s.A(2);s.A!=Float32Array&&(u[0]=0,u[1]=0)})();class Mt{constructor(t,a,h,g){this.context=t,this.format=h,this.texture=t.gl.createTexture(),this.update(a,g)}update(t,a,h){let{width:g,height:f}=t,y=!(this.size&&this.size[0]===g&&this.size[1]===f||h),{context:B}=this,{gl:x}=B;if(this.useMipmap=Boolean(a&&a.useMipmap),x.bindTexture(x.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!a||a.premultiply!==!1)),y)this.size=[g,f],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||s.b(t)?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,t):x.texImage2D(x.TEXTURE_2D,0,this.format,g,f,0,this.format,x.UNSIGNED_BYTE,t.data);else{let{x:k,y:R}=h||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||s.b(t)?x.texSubImage2D(x.TEXTURE_2D,0,k,R,x.RGBA,x.UNSIGNED_BYTE,t):x.texSubImage2D(x.TEXTURE_2D,0,k,R,g,f,x.RGBA,x.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&x.generateMipmap(x.TEXTURE_2D)}bind(t,a,h){let{context:g}=this,{gl:f}=g;f.bindTexture(f.TEXTURE_2D,this.texture),h!==f.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=f.LINEAR),t!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,t),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,h||t),this.filter=t),a!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function qt(u){let{userImage:t}=u;return!!(t&&t.render&&t.render())&&(u.data.replace(new Uint8Array(t.data.buffer)),!0)}class at extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(let{ids:a,promiseResolve:h}of this.requestors)h(this._getImagesForIds(a));this.requestors=[]}}getImage(t){let a=this.images[t];if(a&&!a.data&&a.spriteData){let h=a.spriteData;a.data=new s.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),a.spriteData=null}return a}addImage(t,a){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,a)&&(this.images[t]=a)}_validate(t,a){let h=!0,g=a.data||a.spriteData;return this._validateStretch(a.stretchX,g&&g.width)||(this.fire(new s.j(new Error(`Image "${t}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,g&&g.height)||(this.fire(new s.j(new Error(`Image "${t}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new s.j(new Error(`Image "${t}" has invalid "content" value`))),h=!1),h}_validateStretch(t,a){if(!t)return!0;let h=0;for(let g of t){if(g[0]<h||g[1]<g[0]||a<g[1])return!1;h=g[1]}return!0}_validateContent(t,a){if(!t)return!0;if(t.length!==4)return!1;let h=a.spriteData,g=h&&h.width||a.data.width,f=h&&h.height||a.data.height;return!(t[0]<0||g<t[0]||t[1]<0||f<t[1]||t[2]<0||g<t[2]||t[3]<0||f<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,a,h=!0){let g=this.getImage(t);if(h&&(g.data.width!==a.data.width||g.data.height!==a.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=g.version+1,this.images[t]=a,this.updatedImages[t]=!0}removeImage(t){let a=this.images[t];delete this.images[t],delete this.patterns[t],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((a,h)=>{let g=!0;if(!this.isLoaded())for(let f of t)this.images[f]||(g=!1);this.isLoaded()||g?a(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:a})})}_getImagesForIds(t){let a={};for(let h of t){let g=this.getImage(h);g||(this.fire(new s.k("styleimagemissing",{id:h})),g=this.getImage(h)),g?a[h]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:Boolean(g.userImage&&g.userImage.render)}:s.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){let{width:t,height:a}=this.atlasImage;return{width:t,height:a}}getPattern(t){let a=this.patterns[t],h=this.getImage(t);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{let g={w:h.data.width+2,h:h.data.height+2,x:0,y:0},f=new s.I(g,h);this.patterns[t]={bin:g,position:f}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){let a=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Mt(t,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){let t=[];for(let f in this.patterns)t.push(this.patterns[f].bin);let{w:a,h}=s.p(t),g=this.atlasImage;g.resize({width:a||1,height:h||1});for(let f in this.patterns){let{bin:y}=this.patterns[f],B=y.x+1,x=y.y+1,k=this.getImage(f).data,R=k.width,G=k.height;s.R.copy(k,g,{x:0,y:0},{x:B,y:x},{width:R,height:G}),s.R.copy(k,g,{x:0,y:G-1},{x:B,y:x-1},{width:R,height:1}),s.R.copy(k,g,{x:0,y:0},{x:B,y:x+G},{width:R,height:1}),s.R.copy(k,g,{x:R-1,y:0},{x:B-1,y:x},{width:1,height:G}),s.R.copy(k,g,{x:0,y:0},{x:B+R,y:x},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(let a of t){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;let h=this.getImage(a);h||s.w(`Image with ID: "${a}" was not found`),qt(h)&&this.updateImage(a,h)}}}let st=1e20;function wt(u,t,a,h,g,f,y,B,x){for(let k=t;k<t+h;k++)yt(u,a*f+k,f,g,y,B,x);for(let k=a;k<a+g;k++)yt(u,k*f+t,1,h,y,B,x)}function yt(u,t,a,h,g,f,y){f[0]=0,y[0]=-st,y[1]=st,g[0]=u[t];for(let B=1,x=0,k=0;B<h;B++){g[B]=u[t+B*a];let R=B*B;do{let G=f[x];k=(g[B]-g[G]+R-G*G)/(B-G)/2}while(k<=y[x]&&--x>-1);x++,f[x]=B,y[x]=k,y[x+1]=st}for(let B=0,x=0;B<h;B++){for(;y[x+1]<B;)x++;let k=f[x],R=B-k;u[t+B*a]=g[k]+R*R}}class te{constructor(t,a){this.requestManager=t,this.localIdeographFontFamily=a,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return s._(this,void 0,void 0,function*(){let a=[];for(let f in t)for(let y of t[f])a.push(this._getAndCacheGlyphsPromise(f,y));let h=yield Promise.all(a),g={};for(let{stack:f,id:y,glyph:B}of h)g[f]||(g[f]={}),g[f][y]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};return g})}_getAndCacheGlyphsPromise(t,a){return s._(this,void 0,void 0,function*(){let h=this.entries[t];h||(h=this.entries[t]={glyphs:{},requests:{},ranges:{}});let g=h.glyphs[a];if(g!==void 0)return{stack:t,id:a,glyph:g};if(g=this._tinySDF(h,t,a),g)return h.glyphs[a]=g,{stack:t,id:a,glyph:g};let f=Math.floor(a/256);if(256*f>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[f])return{stack:t,id:a,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[f]){let B=te.loadGlyphRange(t,f,this.url,this.requestManager);h.requests[f]=B}let y=yield h.requests[f];for(let B in y)this._doesCharSupportLocalGlyph(+B)||(h.glyphs[+B]=y[+B]);return h.ranges[f]=!0,{stack:t,id:a,glyph:y[a]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(t))}_tinySDF(t,a,h){let g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(h))return;let f=t.tinySDF;if(!f){let B="400";/bold/i.test(a)?B="900":/medium/i.test(a)?B="500":/light/i.test(a)&&(B="200"),f=t.tinySDF=new te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:B})}let y=f.draw(String.fromCharCode(h));return{id:h,bitmap:new s.o({width:y.width||60,height:y.height||60},y.data),metrics:{width:y.glyphWidth/2||24,height:y.glyphHeight/2||24,left:y.glyphLeft/2+.5||0,top:y.glyphTop/2-27.5||-8,advance:y.glyphAdvance/2||24,isDoubleResolution:!0}}}}te.loadGlyphRange=function(u,t,a,h){return s._(this,void 0,void 0,function*(){let g=256*t,f=g+255,y=h.transformRequest(a.replace("{fontstack}",u).replace("{range}",`${g}-${f}`),"Glyphs"),B=yield s.l(y,new AbortController);if(!B||!B.data)throw new Error(`Could not load glyph range. range: ${t}, ${g}-${f}`);let x={};for(let k of s.n(B.data))x[k.id]=k;return x})},te.TinySDF=class{constructor({fontSize:u=24,buffer:t=3,radius:a=8,cutoff:h=.25,fontFamily:g="sans-serif",fontWeight:f="normal",fontStyle:y="normal"}={}){this.buffer=t,this.cutoff=h,this.radius=a;let B=this.size=u+4*t,x=this._createCanvas(B),k=this.ctx=x.getContext("2d",{willReadFrequently:!0});k.font=`${y} ${f} ${u}px ${g}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(u){let t=document.createElement("canvas");return t.width=t.height=u,t}draw(u){let{width:t,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:g,actualBoundingBoxRight:f}=this.ctx.measureText(u),y=Math.ceil(a),B=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-g))),x=Math.min(this.size-this.buffer,y+Math.ceil(h)),k=B+2*this.buffer,R=x+2*this.buffer,G=Math.max(k*R,0),P=new Uint8ClampedArray(G),M={data:P,width:k,height:R,glyphWidth:B,glyphHeight:x,glyphTop:y,glyphLeft:0,glyphAdvance:t};if(B===0||x===0)return M;let{ctx:j,buffer:et,gridInner:W,gridOuter:X}=this;j.clearRect(et,et,B,x),j.fillText(u,et,et+y);let ct=j.getImageData(et,et,B,x);X.fill(st,0,G),W.fill(0,0,G);for(let rt=0;rt<x;rt++)for(let ut=0;ut<B;ut++){let Ft=ct.data[4*(rt*B+ut)+3]/255;if(Ft===0)continue;let Qt=(rt+et)*k+ut+et;if(Ft===1)X[Qt]=0,W[Qt]=st;else{let se=.5-Ft;X[Qt]=se>0?se*se:0,W[Qt]=se<0?se*se:0}}wt(X,0,0,k,R,k,this.f,this.v,this.z),wt(W,et,et,B,x,k,this.f,this.v,this.z);for(let rt=0;rt<G;rt++){let ut=Math.sqrt(X[rt])-Math.sqrt(W[rt]);P[rt]=Math.round(255-255*(ut/this.radius+this.cutoff))}return M}};class jt{constructor(){this.specification=s.v.light.position}possiblyEvaluate(t,a){return s.x(t.expression.evaluate(a))}interpolate(t,a,h){return{x:s.y.number(t.x,a.x,h),y:s.y.number(t.y,a.y,h),z:s.y.number(t.z,a.z,h)}}}let Xt;class Wt extends s.E{constructor(t){super(),Xt=Xt||new s.q({anchor:new s.D(s.v.light.anchor),position:new jt,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Xt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,a={}){if(!this._validate(s.r,t,a))for(let h in t){let g=t[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),g):this._transitionable.setValue(h,g)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,a,h){return(!h||h.validate!==!1)&&s.t(this,t.call(s.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}let Ct=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Et extends s.E{constructor(t){super(),this._transitionable=new s.T(Ct),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(t,a={}){if(!this._validate(s.B,t,a)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let h in t){let g=t[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),g):this._transitionable.setValue(h,g)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,a,h={}){return h?.validate!==!1&&s.t(this,t.call(s.u,s.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class ue{constructor(t,a){this.width=t,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,a){let h=t.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(t,a)),this.dashEntry[h]}getDashRanges(t,a,h){let g=[],f=t.length%2==1?-t[t.length-1]*h:0,y=t[0]*h,B=!0;g.push({left:f,right:y,isDash:B,zeroLength:t[0]===0});let x=t[0];for(let k=1;k<t.length;k++){B=!B;let R=t[k];f=x*h,x+=R,y=x*h,g.push({left:f,right:y,isDash:B,zeroLength:R===0})}return g}addRoundDash(t,a,h){let g=a/2;for(let f=-h;f<=h;f++){let y=this.width*(this.nextRow+h+f),B=0,x=t[B];for(let k=0;k<this.width;k++){k/x.right>1&&(x=t[++B]);let R=Math.abs(k-x.left),G=Math.abs(k-x.right),P=Math.min(R,G),M,j=f/h*(g+1);if(x.isDash){let et=g-Math.abs(j);M=Math.sqrt(P*P+et*et)}else M=g-Math.sqrt(P*P+j*j);this.data[y+k]=Math.max(0,Math.min(255,M+128))}}}addRegularDash(t){for(let B=t.length-1;B>=0;--B){let x=t[B],k=t[B+1];x.zeroLength?t.splice(B,1):k&&k.isDash===x.isDash&&(k.left=x.left,t.splice(B,1))}let a=t[0],h=t[t.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);let g=this.width*this.nextRow,f=0,y=t[f];for(let B=0;B<this.width;B++){B/y.right>1&&(y=t[++f]);let x=Math.abs(B-y.left),k=Math.abs(B-y.right),R=Math.min(x,k);this.data[g+B]=Math.max(0,Math.min(255,(y.isDash?R:-R)+128))}}addDash(t,a){let h=a?7:0,g=2*h+1;if(this.nextRow+g>this.height)return s.w("LineAtlas out of space"),null;let f=0;for(let B=0;B<t.length;B++)f+=t[B];if(f!==0){let B=this.width/f,x=this.getDashRanges(t,this.width,B);a?this.addRoundDash(x,B,h):this.addRegularDash(x)}let y={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:f};return this.nextRow+=g,this.dirty=!0,y}bind(t){let a=t.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}let J="maplibre_preloaded_worker_pool";class dt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<dt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[J]}numActive(){return Object.keys(this.active).length}}let mt=Math.floor(w.hardwareConcurrency/2),Ut,Pt;function ie(){return Ut||(Ut=new dt),Ut}dt.workerCount=s.C(globalThis)?Math.max(Math.min(mt,3),1):1;class le{constructor(t,a){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=a;let h=this.workerPool.acquire(a);for(let g=0;g<h.length;g++){let f=new s.F(h[g],a);f.name=`Worker ${g}`,this.actors.push(f)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,a){let h=[];for(let g of this.actors)h.push(g.sendAsync({type:t,data:a}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,a){for(let h of this.actors)h.registerMessageHandler(t,a)}}function ce(){return Pt||(Pt=new le(ie(),s.G),Pt.registerMessageHandler("GR",(u,t,a)=>s.m(t,a))),Pt}function Qe(u,t){let a=s.H();return s.J(a,a,[1,1,0]),s.K(a,a,[.5*u.width,.5*u.height,1]),s.L(a,a,u.calculatePosMatrix(t.toUnwrapped()))}function Ee(u,t,a,h,g,f){let y=function(G,P,M){if(G)for(let j of G){let et=P[j];if(et&&et.source===M&&et.type==="fill-extrusion")return!0}else for(let j in P){let et=P[j];if(et.source===M&&et.type==="fill-extrusion")return!0}return!1}(g&&g.layers,t,u.id),B=f.maxPitchScaleFactor(),x=u.tilesIn(h,B,y);x.sort(We);let k=[];for(let G of x)k.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(t,a,u._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,g,f,B,Qe(u.transform,G.tileID))});let R=function(G){let P={},M={};for(let j of G){let et=j.queryResults,W=j.wrappedTileID,X=M[W]=M[W]||{};for(let ct in et){let rt=et[ct],ut=X[ct]=X[ct]||{},Ft=P[ct]=P[ct]||[];for(let Qt of rt)ut[Qt.featureIndex]||(ut[Qt.featureIndex]=!0,Ft.push(Qt))}}return P}(k);for(let G in R)R[G].forEach(P=>{let M=P.feature,j=u.getFeatureState(M.layer["source-layer"],M.id);M.source=M.layer.source,M.layer["source-layer"]&&(M.sourceLayer=M.layer["source-layer"]),M.state=j});return R}function We(u,t){let a=u.tileID,h=t.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}function Je(u,t,a){return s._(this,void 0,void 0,function*(){let h=u;if(u.url?h=(yield s.h(t.transformRequest(u.url,"Source"),a)).data:yield w.frameAsync(a),!h)return null;let g=s.M(s.e(h,u),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(g.vectorLayerIds=h.vector_layers.map(f=>f.id)),g})}class Dt{constructor(t,a){t&&(a?this.setSouthWest(t).setNorthEast(a):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof s.N?new s.N(t.lng,t.lat):s.N.convert(t),this}setSouthWest(t){return this._sw=t instanceof s.N?new s.N(t.lng,t.lat):s.N.convert(t),this}extend(t){let a=this._sw,h=this._ne,g,f;if(t instanceof s.N)g=t,f=t;else{if(!(t instanceof Dt))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Dt.convert(t)):this.extend(s.N.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(s.N.convert(t)):this;if(g=t._sw,f=t._ne,!g||!f)return this}return a||h?(a.lng=Math.min(g.lng,a.lng),a.lat=Math.min(g.lat,a.lat),h.lng=Math.max(f.lng,h.lng),h.lat=Math.max(f.lat,h.lat)):(this._sw=new s.N(g.lng,g.lat),this._ne=new s.N(f.lng,f.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){let{lng:a,lat:h}=s.N.convert(t),g=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(t){return t instanceof Dt?t:t&&new Dt(t)}static fromLngLat(t,a=0){let h=360*a/40075017,g=h/Math.cos(Math.PI/180*t.lat);return new Dt(new s.N(t.lng-g,t.lat-h),new s.N(t.lng+g,t.lat+h))}adjustAntiMeridian(){let t=new s.N(this._sw.lng,this._sw.lat),a=new s.N(this._ne.lng,this._ne.lat);return new Dt(t,t.lng>a.lng?new s.N(a.lng+360,a.lat):a)}}class de{constructor(t,a,h){this.bounds=Dt.convert(this.validateBounds(t)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){let a=Math.pow(2,t.z),h=Math.floor(s.O(this.bounds.getWest())*a),g=Math.floor(s.Q(this.bounds.getNorth())*a),f=Math.ceil(s.O(this.bounds.getEast())*a),y=Math.ceil(s.Q(this.bounds.getSouth())*a);return t.x>=h&&t.x<f&&t.y>=g&&t.y<y}}class Tt extends s.E{constructor(t,a,h,g){if(super(),this.id=t,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(a,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=yield Je(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(s.e(this,t),t.bounds&&(this.tileBounds=new de(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new s.j(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(t){return s._(this,void 0,void 0,function*(){let a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(a,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};h.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((f,y)=>{t.reloadPromise={resolve:f,reject:y}})}else t.actor=this.dispatcher.getActor(),g="LT";t.abortController=new AbortController;try{let f=yield t.actor.sendAsync({type:g,data:h},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,f)}catch(f){if(delete t.abortController,t.aborted)return;if(f&&f.status!==404)throw f;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,a){if(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),t.reloadPromise){let h=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(h.resolve).catch(h.reject)}}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Xe extends s.E{constructor(t,a,h,g){super(),this.id=t,this.dispatcher=h,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},a),s.e(this,s.M(a,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=yield Je(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(s.e(this,t),t.bounds&&(this.tileBounds=new de(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new s.j(t))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return s.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return s._(this,void 0,void 0,function*(){let a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{let h=yield D.getImage(this.map._requestManager.transformRequest(a,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&t.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});let g=this.map.painter.context,f=g.gl,y=h.data;t.texture=this.map.painter.getTileTexture(y.width),t.texture?t.texture.update(y,{useMipmap:!0}):(t.texture=new Mt(g,y,f.RGBA,{useMipmap:!0}),t.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(h){if(delete t.abortController,t.aborted)t.state="unloaded";else if(h)throw t.state="errored",h}})}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class Oe extends Xe{constructor(t,a,h,g){super(t,a,h,g),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(t){return s._(this,void 0,void 0,function*(){let a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(a,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{let g=yield D.getImage(h,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(g&&g.data){let f=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&t.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let y=s.b(f)&&s.U()?f:yield this.readImageNow(f),B={type:this.type,uid:t.uid,source:this.id,rawImageData:y,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();let x=yield t.actor.sendAsync({type:"LDT",data:B});t.dem=x,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(g){if(delete t.abortController,t.aborted)t.state="unloaded";else if(g)throw t.state="errored",g}})}readImageNow(t){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.V()){let a=t.width+2,h=t.height+2;try{return new s.R({width:a,height:h},yield s.W(t,-1,-1,a,h))}catch{}}return w.getImageData(t,1)})}_getNeighboringTiles(t){let a=t.canonical,h=Math.pow(2,a.z),g=(a.x-1+h)%h,f=a.x===0?t.wrap-1:t.wrap,y=(a.x+1+h)%h,B=a.x+1===h?t.wrap+1:t.wrap,x={};return x[new s.S(t.overscaledZ,f,a.z,g,a.y).key]={backfilled:!1},x[new s.S(t.overscaledZ,B,a.z,y,a.y).key]={backfilled:!1},a.y>0&&(x[new s.S(t.overscaledZ,f,a.z,g,a.y-1).key]={backfilled:!1},x[new s.S(t.overscaledZ,t.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},x[new s.S(t.overscaledZ,B,a.z,y,a.y-1).key]={backfilled:!1}),a.y+1<h&&(x[new s.S(t.overscaledZ,f,a.z,g,a.y+1).key]={backfilled:!1},x[new s.S(t.overscaledZ,t.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},x[new s.S(t.overscaledZ,B,a.z,y,a.y+1).key]={backfilled:!1}),x}unloadTile(t){return s._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class Le extends s.E{constructor(t,a,h,g){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(g),this._data=a.data,this._options=s.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;let f=s.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*f,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*f,extent:s.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:s.X,radius:(a.clusterRadius||50)*f,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return s._(this,void 0,void 0,function*(){let t=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,a,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:a,offset:h}})}_updateWorkerData(t){return s._(this,void 0,void 0,function*(){let a=s.e({type:this.type},this.workerOptions);t?a.dataDiff=t:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{let h=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let g=null;h.resourceTiming&&h.resourceTiming[this.id]&&(g=h.resourceTiming[this.id].slice(0));let f={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&s.e(f,{resourceTiming:g}),this.fire(new s.k("data",Object.assign(Object.assign({},f),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},f),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(h))}})}loaded(){return this._pendingLoads===0}loadTile(t){return s._(this,void 0,void 0,function*(){let a=t.actor?"RT":"LT";t.actor=this.actor;let h={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;let g=yield this.actor.sendAsync({type:a,data:h},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(g,this.map.painter,a==="RT")})}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var He=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ke extends s.E{constructor(t,a,h,g){super(),this.id=t,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=a}load(t){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let a=yield D.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,t&&(this.coordinates=t),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new s.j(a))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;let a=t.map(s.Z.fromLngLat);this.tileID=function(g){let f=1/0,y=1/0,B=-1/0,x=-1/0;for(let P of g)f=Math.min(f,P.x),y=Math.min(y,P.y),B=Math.max(B,P.x),x=Math.max(x,P.y);let k=Math.max(B-f,x-y),R=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),G=Math.pow(2,R);return new s.a1(R,Math.floor((f+B)/2*G),Math.floor((y+x)/2*G))}(a),this.minzoom=this.maxzoom=this.tileID.z;let h=a.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new s.$,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,s.X,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,s.X),this._boundsArray.emplaceBack(h[2].x,h[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let t=this.map.painter.context,a=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,He.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Mt(t,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(let g in this.tiles){let f=this.tiles[g];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,h=!0)}h&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ze extends Ke{constructor(t,a,h,g){super(t,a,h,g),this.roundZoom=!0,this.type="video",this.options=a}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let t=this.options;this.urls=[];for(let a of t.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{let a=yield s.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new s.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){let a=this.video.seekable;t<a.start(0)||t>a.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let t=this.map.painter.context,a=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,He.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new Mt(t,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(let g in this.tiles){let f=this.tiles[g];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,h=!0)}h&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ti extends Ke{constructor(t,a,h,g){super(t,a,h,g),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(f=>!Array.isArray(f)||f.length!==2||f.some(y=>typeof y!="number"))||this.fire(new s.j(new s.a2(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a2(`sources.${t}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a2(`sources.${t}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let a=this.map.painter.context,h=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,He.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Mt(a,this.canvas,h.RGBA,{premultiply:!0});let g=!1;for(let f in this.tiles){let y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,g=!0)}g&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}let ci={},Si=u=>{switch(u){case"geojson":return Le;case"image":return Ke;case"raster":return Xe;case"raster-dem":return Oe;case"vector":return Tt;case"video":return ze;case"canvas":return ti}return ci[u]},he="RTLPluginLoaded";class Zi extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ce()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return s._(this,arguments,void 0,function*(a,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(he))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Hi=null;function pi(){return Hi||(Hi=new Zi),Hi}class Ei{constructor(t,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=s.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){let a=t+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(g,f){let y={};if(!f)return y;for(let B of g){let x=B.layerIds.map(k=>f.getLayer(k)).filter(Boolean);if(x.length!==0){B.layers=x,B.stateDependentLayerIds&&(B.stateDependentLayers=B.stateDependentLayerIds.map(k=>x.filter(R=>R.id===k)[0]));for(let k of x)y[k.id]=B}}return y}(t.buckets,a.style),this.hasSymbolBuckets=!1;for(let g in this.buckets){let f=this.buckets[g];if(f instanceof s.a6){if(this.hasSymbolBuckets=!0,!h)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let g in this.buckets){let f=this.buckets[g];if(f instanceof s.a6&&f.hasRTLText){this.hasRTLText=!0,pi().lazyLoad();break}}this.queryPadding=0;for(let g in this.buckets){let f=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(g).queryRadius(f))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(let t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(let h in this.buckets){let g=this.buckets[h];g.uploadPending()&&g.upload(t)}let a=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mt(t,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mt(t,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,a,h,g,f,y,B,x,k,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:f,scale:y,tileSize:this.tileSize,pixelPosMatrix:R,transform:x,params:B,queryPadding:this.queryPadding*k},t,a,h):{}}querySourceFeatures(t,a){let h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;let g=h.loadVTLayers(),f=a&&a.sourceLayer?a.sourceLayer:"",y=g._geojsonTileLayer||g[f];if(!y)return;let B=s.a7(a&&a.filter),{z:x,x:k,y:R}=this.tileID.canonical,G={z:x,x:k,y:R};for(let P=0;P<y.length;P++){let M=y.feature(P);if(B.needGeometry){let W=s.a8(M,!0);if(!B.filter(new s.z(this.tileID.overscaledZ),W,this.tileID.canonical))continue}else if(!B.filter(new s.z(this.tileID.overscaledZ),M))continue;let j=h.getId(M,f),et=new s.a9(M,x,k,R,j);et.tile=G,t.push(et)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){let a=this.expirationTime;if(t.cacheControl){let h=s.aa(t.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){let h=Date.now(),g=!1;if(this.expirationTime>h)g=!1;else if(a)if(this.expirationTime<a)g=!0;else{let f=this.expirationTime-a;f?this.expirationTime=h+Math.max(f,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;let h=this.latestFeatureIndex.loadVTLayers();for(let g in this.buckets){if(!a.style.hasLayer(g))continue;let f=this.buckets[g],y=f.layers[0].sourceLayer||"_geojsonTileLayer",B=h[y],x=t[y];if(!B||!x||Object.keys(x).length===0)continue;f.update(x,B,this.imageAtlas&&this.imageAtlas.patternPositions||{});let k=a&&a.style&&a.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(f)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=w.now()+t}setDependencies(t,a){let h={};for(let g of a)h[g]=!0;this.dependencies[t]=h}hasDependency(t,a){for(let h of t){let g=this.dependencies[h];if(g){for(let f of a)if(g[f])return!0}}return!1}}class ne{constructor(t,a){this.max=t,this.onRemove=a,this.reset()}reset(){for(let t in this.data)for(let a of this.data[t])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(t,a,h){let g=t.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);let f={value:a,timeout:void 0};if(h!==void 0&&(f.timeout=setTimeout(()=>{this.remove(t,f)},h)),this.data[g].push(f),this.order.push(g),this.order.length>this.max){let y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){let a=this.data[t].shift();return a.timeout&&clearTimeout(a.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),a.value}getByKey(t){let a=this.data[t];return a?a[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,a){if(!this.has(t))return this;let h=t.wrapped().key,g=a===void 0?0:this.data[h].indexOf(a),f=this.data[h][g];return this.data[h].splice(g,1),f.timeout&&clearTimeout(f.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(f.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){let a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(t){let a=[];for(let h in this.data)for(let g of this.data[h])t(g.value)||a.push(g);for(let h of a)this.remove(h.value.tileID,h)}}class ui{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,a,h){let g=String(a);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][g]=this.stateChanges[t][g]||{},s.e(this.stateChanges[t][g],h),this.deletedStates[t]===null){this.deletedStates[t]={};for(let f in this.state[t])f!==g&&(this.deletedStates[t][f]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][g]===null){this.deletedStates[t][g]={};for(let f in this.state[t][g])h[f]||(this.deletedStates[t][g][f]=null)}else for(let f in h)this.deletedStates[t]&&this.deletedStates[t][g]&&this.deletedStates[t][g][f]===null&&delete this.deletedStates[t][g][f]}removeFeatureState(t,a,h){if(this.deletedStates[t]===null)return;let g=String(a);if(this.deletedStates[t]=this.deletedStates[t]||{},h&&a!==void 0)this.deletedStates[t][g]!==null&&(this.deletedStates[t][g]=this.deletedStates[t][g]||{},this.deletedStates[t][g][h]=null);else if(a!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][g])for(h in this.deletedStates[t][g]={},this.stateChanges[t][g])this.deletedStates[t][g][h]=null;else this.deletedStates[t][g]=null;else this.deletedStates[t]=null}getState(t,a){let h=String(a),g=s.e({},(this.state[t]||{})[h],(this.stateChanges[t]||{})[h]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){let f=this.deletedStates[t][a];if(f===null)return{};for(let y in f)delete g[y]}return g}initializeTileState(t,a){t.setFeatureState(this.state,a)}coalesceChanges(t,a){let h={};for(let g in this.stateChanges){this.state[g]=this.state[g]||{};let f={};for(let y in this.stateChanges[g])this.state[g][y]||(this.state[g][y]={}),s.e(this.state[g][y],this.stateChanges[g][y]),f[y]=this.state[g][y];h[g]=f}for(let g in this.deletedStates){this.state[g]=this.state[g]||{};let f={};if(this.deletedStates[g]===null)for(let y in this.state[g])f[y]={},this.state[g][y]={};else for(let y in this.deletedStates[g]){if(this.deletedStates[g][y]===null)this.state[g][y]={};else for(let B of Object.keys(this.deletedStates[g][y]))delete this.state[g][y][B];f[y]=this.state[g][y]}h[g]=h[g]||{},s.e(h[g],f)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(let g in t)t[g].setFeatureState(h,a)}}class Ve extends s.E{constructor(t,a,h){super(),this.id=t,this.dispatcher=h,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,f,y,B)=>{let x=new(Si(f.type))(g,f,y,B);if(x.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${x.id}`);return x})(t,a,h,this),this._tiles={},this._cache=new ne(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ui,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let t in this._tiles){let a=this._tiles[t];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,a,h){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,a,h)}catch(g){t.state="errored",g.status!==404?this._source.fire(new s.j(g,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new s.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let a in this._tiles){let h=this._tiles[a];h.upload(t),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(rr).map(t=>t.key)}getRenderableIds(t){let a=[];for(let h in this._tiles)this._isIdRenderable(h,t)&&a.push(this._tiles[h]);return t?a.sort((h,g)=>{let f=h.tileID,y=g.tileID,B=new s.P(f.canonical.x,f.canonical.y)._rotate(this.transform.angle),x=new s.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return f.overscaledZ-y.overscaledZ||x.y-B.y||x.x-B.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(rr).map(h=>h.key)}hasRenderableParent(t){let a=this.findLoadedParent(t,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(t,a){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(a||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,a){return s._(this,void 0,void 0,function*(){let h=this._tiles[t];h&&(h.state!=="loading"&&(h.state=a),yield this._loadTile(h,t,a))})}_tileLoaded(t,a,h){t.timeAdded=w.now(),h==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(a,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){let a=this.getRenderableIds();for(let g=0;g<a.length;g++){let f=a[g];if(t.neighboringTiles&&t.neighboringTiles[f]){let y=this.getTileByID(f);h(t,y),h(y,t)}}function h(g,f){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let y=f.tileID.canonical.x-g.tileID.canonical.x,B=f.tileID.canonical.y-g.tileID.canonical.y,x=Math.pow(2,g.tileID.canonical.z),k=f.tileID.key;y===0&&B===0||Math.abs(B)>1||(Math.abs(y)>1&&(Math.abs(y+x)===1?y+=x:Math.abs(y-x)===1&&(y-=x)),f.dem&&g.dem&&(g.dem.backfillBorder(f.dem,y,B),g.neighboringTiles&&g.neighboringTiles[k]&&(g.neighboringTiles[k].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,a,h,g){for(let f in this._tiles){let y=this._tiles[f];if(g[f]||!y.hasData()||y.tileID.overscaledZ<=a||y.tileID.overscaledZ>h)continue;let B=y.tileID;for(;y&&y.tileID.overscaledZ>a+1;){let k=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[k.key],y&&y.hasData()&&(B=k)}let x=B;for(;x.overscaledZ>a;)if(x=x.scaledTo(x.overscaledZ-1),t[x.key]){g[B.key]=B;break}}}findLoadedParent(t,a){if(t.key in this._loadedParentTiles){let h=this._loadedParentTiles[t.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=t.overscaledZ-1;h>=a;h--){let g=t.scaledTo(h),f=this._getLoadedTile(g);if(f)return f}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){let a=this._tiles[t.key];return a&&a.hasData()?a:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){let a=Math.ceil(t.width/this._source.tileSize)+1,h=Math.ceil(t.height/this._source.tileSize)+1,g=Math.floor(a*h*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),f=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(f)}handleWrapJump(t){let a=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,a){let h={};for(let g in this._tiles){let f=this._tiles[g];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+a),h[f.tileID.key]=f}this._tiles=h;for(let g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(let g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(t,a,h,g,f,y){let B={},x={},k=Object.keys(t),R=w.now();for(let G of k){let P=t[G],M=this._tiles[G];if(!M||M.fadeEndTime!==0&&M.fadeEndTime<=R)continue;let j=this.findLoadedParent(P,a),et=this.findLoadedSibling(P),W=j||et||null;W&&(this._addTile(W.tileID),B[W.tileID.key]=W.tileID),x[G]=P}this._retainLoadedChildren(x,g,h,t);for(let G in B)t[G]||(this._coveredTiles[G]=!0,t[G]=B[G]);if(y){let G={},P={};for(let M of f)this._tiles[M.key].hasData()?G[M.key]=M:P[M.key]=M;for(let M in P){let j=P[M].children(this._source.maxzoom);this._tiles[j[0].key]&&this._tiles[j[1].key]&&this._tiles[j[2].key]&&this._tiles[j[3].key]&&(G[j[0].key]=t[j[0].key]=j[0],G[j[1].key]=t[j[1].key]=j[1],G[j[2].key]=t[j[2].key]=j[2],G[j[3].key]=t[j[3].key]=j[3],delete P[M])}for(let M in P){let j=P[M],et=this.findLoadedParent(j,this._source.minzoom),W=this.findLoadedSibling(j),X=et||W||null;if(X){G[X.tileID.key]=t[X.tileID.key]=X.tileID;for(let ct in G)G[ct].isChildOf(X.tileID)&&delete G[ct]}}for(let M in this._tiles)G[M]||(this._coveredTiles[M]=!0)}}update(t,a){if(!this._sourceLoaded||this._paused)return;let h;this.transform=t,this.terrain=a,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new s.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(h=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(h=h.filter(R=>this._source.hasTile(R)))):h=[];let g=t.coveringZoomLevel(this._source),f=Math.max(g-Ve.maxOverzooming,this._source.minzoom),y=Math.max(g+Ve.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let R={};for(let G of h)if(G.canonical.z>this._source.minzoom){let P=G.scaledTo(G.canonical.z-1);R[P.key]=P;let M=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));R[M.key]=M}h=h.concat(Object.values(R))}let B=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,B&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let x=this._updateRetainedTiles(h,g);Ni(this._source.type)&&this._updateCoveredAndRetainedTiles(x,f,y,g,h,a);for(let R in x)this._tiles[R].clearFadeHold();let k=s.ab(this._tiles,x);for(let R of k){let G=this._tiles[R];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,a){var h;let g={},f={},y=Math.max(a-Ve.maxOverzooming,this._source.minzoom),B=Math.max(a+Ve.maxUnderzooming,this._source.minzoom),x={};for(let k of t){let R=this._addTile(k);g[k.key]=k,R.hasData()||a<this._source.maxzoom&&(x[k.key]=k)}this._retainLoadedChildren(x,a,B,g);for(let k of t){let R=this._tiles[k.key];if(R.hasData())continue;if(a+1>this._source.maxzoom){let P=k.children(this._source.maxzoom)[0],M=this.getTile(P);if(M&&M.hasData()){g[P.key]=P;continue}}else{let P=k.children(this._source.maxzoom);if(g[P[0].key]&&g[P[1].key]&&g[P[2].key]&&g[P[3].key])continue}let G=R.wasRequested();for(let P=k.overscaledZ-1;P>=y;--P){let M=k.scaledTo(P);if(f[M.key])break;if(f[M.key]=!0,R=this.getTile(M),!R&&G&&(R=this._addTile(M)),R){let j=R.hasData();if((j||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||G)&&(g[M.key]=M),G=R.wasRequested(),j)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let t in this._tiles){let a=[],h,g=this._tiles[t].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){h=this._loadedParentTiles[g.key];break}a.push(g.key);let f=g.scaledTo(g.overscaledZ-1);if(h=this._getLoadedTile(f),h)break;g=f}for(let f of a)this._loadedParentTiles[f]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let t in this._tiles){let a=this._tiles[t].tileID,h=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=h}}_addTile(t){let a=this._tiles[t.key];if(a)return a;a=this._cache.getAndRemove(t),a&&(this._setTileReloadTimer(t.key,a),a.tileID=t,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,a)));let h=a;return a||(a=new Ei(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(a,t.key,a.state)),a.uses++,this._tiles[t.key]=a,h||this._source.fire(new s.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(t,a){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);let h=a.getExpiryTimeout();h&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},h))}_removeTile(t){let a=this._tiles[t];a&&(a.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(t){let a=t.sourceDataType;t.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,a,h){let g=[],f=this.transform;if(!f)return g;let y=h?f.getCameraQueryGeometry(t):t,B=t.map(j=>f.pointCoordinate(j,this.terrain)),x=y.map(j=>f.pointCoordinate(j,this.terrain)),k=this.getIds(),R=1/0,G=1/0,P=-1/0,M=-1/0;for(let j of x)R=Math.min(R,j.x),G=Math.min(G,j.y),P=Math.max(P,j.x),M=Math.max(M,j.y);for(let j=0;j<k.length;j++){let et=this._tiles[k[j]];if(et.holdingForFade())continue;let W=et.tileID,X=Math.pow(2,f.zoom-et.tileID.overscaledZ),ct=a*et.queryPadding*s.X/et.tileSize/X,rt=[W.getTilePoint(new s.Z(R,G)),W.getTilePoint(new s.Z(P,M))];if(rt[0].x-ct<s.X&&rt[0].y-ct<s.X&&rt[1].x+ct>=0&&rt[1].y+ct>=0){let ut=B.map(Qt=>W.getTilePoint(Qt)),Ft=x.map(Qt=>W.getTilePoint(Qt));g.push({tile:et,tileID:W,queryGeometry:ut,cameraQueryGeometry:Ft,scale:X})}}return g}getVisibleCoordinates(t){let a=this.getRenderableIds(t).map(h=>this._tiles[h].tileID);for(let h of a)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(Ni(this._source.type)){let t=w.now();for(let a in this._tiles)if(this._tiles[a].fadeEndTime>=t)return!0}return!1}setFeatureState(t,a,h){this._state.updateState(t=t||"_geojsonTileLayer",a,h)}removeFeatureState(t,a,h){this._state.removeFeatureState(t=t||"_geojsonTileLayer",a,h)}getFeatureState(t,a){return this._state.getState(t=t||"_geojsonTileLayer",a)}setDependencies(t,a,h){let g=this._tiles[t];g&&g.setDependencies(a,h)}reloadTilesForDependencies(t,a){for(let h in this._tiles)this._tiles[h].hasDependency(t,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(t,a))}}function rr(u,t){let a=Math.abs(2*u.wrap)-+(u.wrap<0),h=Math.abs(2*t.wrap)-+(t.wrap<0);return u.overscaledZ-t.overscaledZ||h-a||t.canonical.y-u.canonical.y||t.canonical.x-u.canonical.x}function Ni(u){return u==="raster"||u==="image"||u==="video"}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;class $e{constructor(t,a){this.reset(t,a)}reset(t,a){this.points=t||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=s.ac(t,0,1);let a=1,h=this._distances[a],g=t*this.paddedLength+this.padding;for(;h<g&&a<this._distances.length;)h=this._distances[++a];let f=a-1,y=this._distances[f],B=h-y,x=B>0?(g-y)/B:0;return this.points[f].mult(1-x).add(this.points[a].mult(x))}}function wr(u,t){let a=!0;return u==="always"||u!=="never"&&t!=="never"||(a=!1),a}class zi{constructor(t,a,h){let g=this.boxCells=[],f=this.circleCells=[];this.xCellCount=Math.ceil(t/h),this.yCellCount=Math.ceil(a/h);for(let y=0;y<this.xCellCount*this.yCellCount;y++)g.push([]),f.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=a,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,a,h,g,f){this._forEachCell(a,h,g,f,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(f)}insertCircle(t,a,h,g){this._forEachCell(a-g,h-g,a+g,h+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(a),this.circles.push(h),this.circles.push(g)}_insertBoxCell(t,a,h,g,f,y){this.boxCells[f].push(y)}_insertCircleCell(t,a,h,g,f,y){this.circleCells[f].push(y)}_query(t,a,h,g,f,y,B){if(h<0||t>this.width||g<0||a>this.height)return[];let x=[];if(t<=0&&a<=0&&this.width<=h&&this.height<=g){if(f)return[{key:null,x1:t,y1:a,x2:h,y2:g}];for(let k=0;k<this.boxKeys.length;k++)x.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){let R=this.circles[3*k],G=this.circles[3*k+1],P=this.circles[3*k+2];x.push({key:this.circleKeys[k],x1:R-P,y1:G-P,x2:R+P,y2:G+P})}}else this._forEachCell(t,a,h,g,this._queryCell,x,{hitTest:f,overlapMode:y,seenUids:{box:{},circle:{}}},B);return x}query(t,a,h,g){return this._query(t,a,h,g,!1,null)}hitTest(t,a,h,g,f,y){return this._query(t,a,h,g,!0,f,y).length>0}hitTestCircle(t,a,h,g,f){let y=t-h,B=t+h,x=a-h,k=a+h;if(B<0||y>this.width||k<0||x>this.height)return!1;let R=[];return this._forEachCell(y,x,B,k,this._queryCellCircle,R,{hitTest:!0,overlapMode:g,circle:{x:t,y:a,radius:h},seenUids:{box:{},circle:{}}},f),R.length>0}_queryCell(t,a,h,g,f,y,B,x){let{seenUids:k,hitTest:R,overlapMode:G}=B,P=this.boxCells[f];if(P!==null){let j=this.bboxes;for(let et of P)if(!k.box[et]){k.box[et]=!0;let W=4*et,X=this.boxKeys[et];if(t<=j[W+2]&&a<=j[W+3]&&h>=j[W+0]&&g>=j[W+1]&&(!x||x(X))&&(!R||!wr(G,X.overlapMode))&&(y.push({key:X,x1:j[W],y1:j[W+1],x2:j[W+2],y2:j[W+3]}),R))return!0}}let M=this.circleCells[f];if(M!==null){let j=this.circles;for(let et of M)if(!k.circle[et]){k.circle[et]=!0;let W=3*et,X=this.circleKeys[et];if(this._circleAndRectCollide(j[W],j[W+1],j[W+2],t,a,h,g)&&(!x||x(X))&&(!R||!wr(G,X.overlapMode))){let ct=j[W],rt=j[W+1],ut=j[W+2];if(y.push({key:X,x1:ct-ut,y1:rt-ut,x2:ct+ut,y2:rt+ut}),R)return!0}}}return!1}_queryCellCircle(t,a,h,g,f,y,B,x){let{circle:k,seenUids:R,overlapMode:G}=B,P=this.boxCells[f];if(P!==null){let j=this.bboxes;for(let et of P)if(!R.box[et]){R.box[et]=!0;let W=4*et,X=this.boxKeys[et];if(this._circleAndRectCollide(k.x,k.y,k.radius,j[W+0],j[W+1],j[W+2],j[W+3])&&(!x||x(X))&&!wr(G,X.overlapMode))return y.push(!0),!0}}let M=this.circleCells[f];if(M!==null){let j=this.circles;for(let et of M)if(!R.circle[et]){R.circle[et]=!0;let W=3*et,X=this.circleKeys[et];if(this._circlesCollide(j[W],j[W+1],j[W+2],k.x,k.y,k.radius)&&(!x||x(X))&&!wr(G,X.overlapMode))return y.push(!0),!0}}}_forEachCell(t,a,h,g,f,y,B,x){let k=this._convertToXCellCoord(t),R=this._convertToYCellCoord(a),G=this._convertToXCellCoord(h),P=this._convertToYCellCoord(g);for(let M=k;M<=G;M++)for(let j=R;j<=P;j++)if(f.call(this,t,a,h,g,this.xCellCount*j+M,y,B,x))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,a,h,g,f,y){let B=g-t,x=f-a,k=h+y;return k*k>B*B+x*x}_circleAndRectCollide(t,a,h,g,f,y,B){let x=(y-g)/2,k=Math.abs(t-(g+x));if(k>x+h)return!1;let R=(B-f)/2,G=Math.abs(a-(f+R));if(G>R+h)return!1;if(k<=x||G<=R)return!0;let P=k-x,M=G-R;return P*P+M*M<=h*h}}function _r(u,t,a,h,g){let f=s.H();return t?(s.K(f,f,[1/g,1/g,1]),a||s.ad(f,f,h.angle)):s.L(f,h.labelPlaneMatrix,u),f}function nr(u,t,a,h,g){if(t){let f=s.ae(u);return s.K(f,f,[g,g,1]),a||s.ad(f,f,-h.angle),f}return h.glCoordMatrix}function It(u,t,a,h){let g;h?(g=[u,t,h(u,t),1],s.af(g,g,a)):(g=[u,t,0,1],Mi(g,g,a));let f=g[3];return{point:new s.P(g[0]/f,g[1]/f),signedDistanceFromCamera:f,isOccluded:!1}}function K(u,t){return .5+u/t*.5}function z(u,t){return u.x>=-t[0]&&u.x<=t[0]&&u.y>=-t[1]&&u.y<=t[1]}function it(u,t,a,h,g,f,y,B,x,k,R,G,P,M,j){let et=h?u.textSizeData:u.iconSizeData,W=s.ag(et,a.transform.zoom),X=[256/a.width*2+1,256/a.height*2+1],ct=h?u.text.dynamicLayoutVertexArray:u.icon.dynamicLayoutVertexArray;ct.clear();let rt=u.lineVertexArray,ut=h?u.text.placedSymbolArray:u.icon.placedSymbolArray,Ft=a.transform.width/a.transform.height,Qt=!1;for(let se=0;se<ut.length;se++){let oe=ut.get(se);if(oe.hidden||oe.writingMode===s.ah.vertical&&!Qt){je(oe.numGlyphs,ct);continue}Qt=!1;let xe=It(oe.anchorX,oe.anchorY,t,j);if(!z(xe.point,X)){je(oe.numGlyphs,ct);continue}let Ue=K(a.transform.cameraToCenterDistance,xe.signedDistanceFromCamera),_e=s.ai(et,W,oe),Be=y?_e/Ue:_e*Ue,De={getElevation:j,labelPlaneMatrix:g,lineVertexArray:rt,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:k,tileAnchorPoint:new s.P(oe.anchorX,oe.anchorY),unwrappedTileID:R,width:G,height:P,translation:M},ri=Nt(De,oe,Be,!1,B,t,f,u.glyphOffsetArray,ct,Ft,x);Qt=ri.useVertical,(ri.notEnoughRoom||Qt||ri.needsFlipping&&Nt(De,oe,Be,!0,B,t,f,u.glyphOffsetArray,ct,Ft,x).notEnoughRoom)&&je(oe.numGlyphs,ct)}h?u.text.dynamicLayoutVertexBuffer.updateData(ct):u.icon.dynamicLayoutVertexBuffer.updateData(ct)}function gt(u,t,a,h,g,f,y,B){let x=f.glyphStartIndex+f.numGlyphs,k=f.lineStartIndex,R=f.lineStartIndex+f.lineLength,G=t.getoffsetX(f.glyphStartIndex),P=t.getoffsetX(x-1),M=Se(u*G,a,h,g,f.segment,k,R,B,y);if(!M)return null;let j=Se(u*P,a,h,g,f.segment,k,R,B,y);return j?B.projectionCache.anyProjectionOccluded?null:{first:M,last:j}:null}function Ht(u,t,a,h){return u===s.ah.horizontal&&Math.abs(a.y-t.y)>Math.abs(a.x-t.x)*h?{useVertical:!0}:(u===s.ah.vertical?t.y<a.y:t.x>a.x)?{needsFlipping:!0}:null}function Nt(u,t,a,h,g,f,y,B,x,k,R){let G=a/24,P=t.lineOffsetX*G,M=t.lineOffsetY*G,j;if(t.numGlyphs>1){let et=t.glyphStartIndex+t.numGlyphs,W=t.lineStartIndex,X=t.lineStartIndex+t.lineLength,ct=gt(G,B,P,M,h,t,R,u);if(!ct)return{notEnoughRoom:!0};let rt=It(ct.first.point.x,ct.first.point.y,y,u.getElevation).point,ut=It(ct.last.point.x,ct.last.point.y,y,u.getElevation).point;if(g&&!h){let Ft=Ht(t.writingMode,rt,ut,k);if(Ft)return Ft}j=[ct.first];for(let Ft=t.glyphStartIndex+1;Ft<et-1;Ft++)j.push(Se(G*B.getoffsetX(Ft),P,M,h,t.segment,W,X,u,R));j.push(ct.last)}else{if(g&&!h){let W=It(u.tileAnchorPoint.x,u.tileAnchorPoint.y,f,u.getElevation).point,X=t.lineStartIndex+t.segment+1,ct=new s.P(u.lineVertexArray.getx(X),u.lineVertexArray.gety(X)),rt=It(ct.x,ct.y,f,u.getElevation),ut=rt.signedDistanceFromCamera>0?rt.point:function(Qt,se,oe,xe,Ue,_e){return Jt(Qt,se,oe,1,Ue,_e)}(u.tileAnchorPoint,ct,W,0,f,u),Ft=Ht(t.writingMode,W,ut,k);if(Ft)return Ft}let et=Se(G*B.getoffsetX(t.glyphStartIndex),P,M,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,R);if(!et||u.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};j=[et]}for(let et of j)s.aj(x,et.point,et.angle);return{}}function Jt(u,t,a,h,g,f){let y=u.add(u.sub(t)._unit()),B=g!==void 0?It(y.x,y.y,g,f.getElevation).point:Ot(y.x,y.y,f).point,x=a.sub(B);return a.add(x._mult(h/x.mag()))}function Rt(u,t,a){let h=t.projectionCache;if(h.projections[u])return h.projections[u];let g=new s.P(t.lineVertexArray.getx(u),t.lineVertexArray.gety(u)),f=Ot(g.x,g.y,t);if(f.signedDistanceFromCamera>0)return h.projections[u]=f.point,h.anyProjectionOccluded=h.anyProjectionOccluded||f.isOccluded,f.point;let y=u-a.direction;return function(B,x,k,R,G){return Jt(B,x,k,R,void 0,G)}(a.distanceFromAnchor===0?t.tileAnchorPoint:new s.P(t.lineVertexArray.getx(y),t.lineVertexArray.gety(y)),g,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,t)}function Ot(u,t,a){let h=u+a.translation[0],g=t+a.translation[1],f;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(f=a.projection.projectTileCoordinates(h,g,a.unwrappedTileID,a.getElevation),f.point.x=(.5*f.point.x+.5)*a.width,f.point.y=(.5*-f.point.y+.5)*a.height):(f=It(h,g,a.labelPlaneMatrix,a.getElevation),f.isOccluded=!1),f}function me(u,t,a){return u._unit()._perp()._mult(t*a)}function Ae(u,t,a,h,g,f,y,B,x){if(B.projectionCache.offsets[u])return B.projectionCache.offsets[u];let k=a.add(t);if(u+x.direction<h||u+x.direction>=g)return B.projectionCache.offsets[u]=k,k;let R=Rt(u+x.direction,B,x),G=me(R.sub(a),y,x.direction),P=a.add(G),M=R.add(G);return B.projectionCache.offsets[u]=s.ak(f,k,P,M)||k,B.projectionCache.offsets[u]}function Se(u,t,a,h,g,f,y,B,x){let k=h?u-t:u+t,R=k>0?1:-1,G=0;h&&(R*=-1,G=Math.PI),R<0&&(G+=Math.PI);let P,M=R>0?f+g:f+g+1;B.projectionCache.cachedAnchorPoint?P=B.projectionCache.cachedAnchorPoint:(P=Ot(B.tileAnchorPoint.x,B.tileAnchorPoint.y,B).point,B.projectionCache.cachedAnchorPoint=P);let j,et,W=P,X=P,ct=0,rt=0,ut=Math.abs(k),Ft=[],Qt;for(;ct+rt<=ut;){if(M+=R,M<f||M>=y)return null;ct+=rt,X=W,et=j;let xe={absOffsetX:ut,direction:R,distanceFromAnchor:ct,previousVertex:X};if(W=Rt(M,B,xe),a===0)Ft.push(X),Qt=W.sub(X);else{let Ue,_e=W.sub(X);Ue=_e.mag()===0?me(Rt(M+R,B,xe).sub(W),a,R):me(_e,a,R),et||(et=X.add(Ue)),j=Ae(M,Ue,W,f,y,et,a,B,xe),Ft.push(et),Qt=j.sub(et)}rt=Qt.mag()}let se=Qt._mult((ut-ct)/rt)._add(et||X),oe=G+Math.atan2(W.y-X.y,W.x-X.x);return Ft.push(se),{point:se,angle:x?oe:0,path:Ft}}let Ye=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function je(u,t){for(let a=0;a<u;a++){let h=t.length;t.resize(h+4),t.float32.set(Ye,3*h)}}function Mi(u,t,a){let h=t[0],g=t[1];return u[0]=a[0]*h+a[4]*g+a[12],u[1]=a[1]*h+a[5]*g+a[13],u[3]=a[3]*h+a[7]*g+a[15],u}let Ti=100;class Vi{constructor(t,a,h=new zi(t.width+200,t.height+200,25),g=new zi(t.width+200,t.height+200,25)){this.transform=t,this.mapProjection=a,this.grid=h,this.ignoredGrid=g,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Ti,this.screenBottomBoundary=t.height+Ti,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,a,h,g,f,y,B,x,k,R,G){let P=t.anchorPointX+x[0],M=t.anchorPointY+x[1],j=this.projectAndGetPerspectiveRatio(g,P,M,f,R),et=h*j.perspectiveRatio,W;if(y||B)W=this._projectCollisionBox(t,et,g,f,y,B,x,j,R,G);else{let Ft=j.point.x+(G?G.x*et:0),Qt=j.point.y+(G?G.y*et:0);W={allPointsOccluded:!1,box:[Ft+t.x1*et,Qt+t.y1*et,Ft+t.x2*et,Qt+t.y2*et]}}let[X,ct,rt,ut]=W.box;return this.mapProjection.useSpecialProjectionForSymbols&&(y?W.allPointsOccluded:this.mapProjection.isOccluded(P,M,f))||j.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(X,ct,rt,ut)||a!=="always"&&this.grid.hitTest(X,ct,rt,ut,a,k)?{box:[X,ct,rt,ut],placeable:!1,offscreen:!1}:{box:[X,ct,rt,ut],placeable:!0,offscreen:this.isOffscreen(X,ct,rt,ut)}}placeCollisionCircles(t,a,h,g,f,y,B,x,k,R,G,P,M,j,et,W){let X=[],ct=new s.P(a.anchorX,a.anchorY),rt=this.getPerspectiveRatio(y,ct.x,ct.y,B,W),ut=(G?f/rt:f*rt)/s.ap,Ft={getElevation:W,labelPlaneMatrix:x,lineVertexArray:h,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ct,unwrappedTileID:B,width:this.transform.width,height:this.transform.height,translation:et},Qt=gt(ut,g,a.lineOffsetX*ut,a.lineOffsetY*ut,!1,a,!1,Ft),se=!1,oe=!1,xe=!0;if(Qt){let Ue=.5*M*rt+j,_e=new s.P(-100,-100),Be=new s.P(this.screenRightBoundary,this.screenBottomBoundary),De=new $e,ri=Qt.first,ve=Qt.last,Ge=[];for(let Ui=ri.path.length-1;Ui>=1;Ui--)Ge.push(ri.path[Ui]);for(let Ui=1;Ui<ve.path.length;Ui++)Ge.push(ve.path[Ui]);let Ci=2.5*Ue;if(k){let Ui=this.projectPathToScreenSpace(Ge,Ft,k);Ge=Ui.some(fi=>fi.signedDistanceFromCamera<=0)?[]:Ui.map(fi=>fi.point)}let Ji=[];if(Ge.length>0){let Ui=Ge[0].clone(),fi=Ge[0].clone();for(let hr=1;hr<Ge.length;hr++)Ui.x=Math.min(Ui.x,Ge[hr].x),Ui.y=Math.min(Ui.y,Ge[hr].y),fi.x=Math.max(fi.x,Ge[hr].x),fi.y=Math.max(fi.y,Ge[hr].y);Ji=Ui.x>=_e.x&&fi.x<=Be.x&&Ui.y>=_e.y&&fi.y<=Be.y?[Ge]:fi.x<_e.x||Ui.x>Be.x||fi.y<_e.y||Ui.y>Be.y?[]:s.al([Ge],_e.x,_e.y,Be.x,Be.y)}for(let Ui of Ji){De.reset(Ui,.25*Ue);let fi=0;fi=De.length<=.5*Ue?1:Math.ceil(De.paddedLength/Ci)+1;for(let hr=0;hr<fi;hr++){let Lr=hr/Math.max(fi-1,1),Er=De.lerp(Lr),er=Er.x+Ti,Tr=Er.y+Ti;X.push(er,Tr,Ue,0);let Hr=er-Ue,Dr=Tr-Ue,Ir=er+Ue,yn=Tr+Ue;if(xe=xe&&this.isOffscreen(Hr,Dr,Ir,yn),oe=oe||this.isInsideGrid(Hr,Dr,Ir,yn),t!=="always"&&this.grid.hitTestCircle(er,Tr,Ue,t,P)&&(se=!0,!R))return{circles:[],offscreen:!1,collisionDetected:se}}}}return{circles:!R&&se||!oe||rt<this.perspectiveRatioCutoff?[]:X,offscreen:xe,collisionDetected:se}}projectPathToScreenSpace(t,a,h){return t.map(g=>It(g.x,g.y,h,a.getElevation))}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let a=[],h=1/0,g=1/0,f=-1/0,y=-1/0;for(let R of t){let G=new s.P(R.x+Ti,R.y+Ti);h=Math.min(h,G.x),g=Math.min(g,G.y),f=Math.max(f,G.x),y=Math.max(y,G.y),a.push(G)}let B=this.grid.query(h,g,f,y).concat(this.ignoredGrid.query(h,g,f,y)),x={},k={};for(let R of B){let G=R.key;if(x[G.bucketInstanceId]===void 0&&(x[G.bucketInstanceId]={}),x[G.bucketInstanceId][G.featureIndex])continue;let P=[new s.P(R.x1,R.y1),new s.P(R.x2,R.y1),new s.P(R.x2,R.y2),new s.P(R.x1,R.y2)];s.am(a,P)&&(x[G.bucketInstanceId][G.featureIndex]=!0,k[G.bucketInstanceId]===void 0&&(k[G.bucketInstanceId]=[]),k[G.bucketInstanceId].push(G.featureIndex))}return k}insertCollisionBox(t,a,h,g,f,y){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:f,collisionGroupID:y,overlapMode:a},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,a,h,g,f,y){let B=h?this.ignoredGrid:this.grid,x={bucketInstanceId:g,featureIndex:f,collisionGroupID:y,overlapMode:a};for(let k=0;k<t.length;k+=4)B.insertCircle(x,t[k],t[k+1],t[k+2])}projectAndGetPerspectiveRatio(t,a,h,g,f){let y;f?(y=[a,h,f(a,h),1],s.af(y,y,t)):(y=[a,h,0,1],Mi(y,y,t));let B=y[3];return{point:new s.P((y[0]/B+1)/2*this.transform.width+Ti,(-y[1]/B+1)/2*this.transform.height+Ti),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B*.5,isOccluded:!1,signedDistanceFromCamera:B}}getPerspectiveRatio(t,a,h,g,f){let y=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,h,g,f):It(a,h,t,f);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(t,a,h,g){return h<Ti||t>=this.screenRightBoundary||g<Ti||a>this.screenBottomBoundary}isInsideGrid(t,a,h,g){return h>=0&&t<this.gridRightBoundary&&g>=0&&a<this.gridBottomBoundary}getViewportMatrix(){let t=s.an([]);return s.J(t,t,[-100,-100,0]),t}_projectCollisionBox(t,a,h,g,f,y,B,x,k,R){let G=new s.P(1,0),P=new s.P(0,1),M=new s.P(t.anchorPointX+B[0],t.anchorPointY+B[1]);if(y&&!f){let xe=this.projectAndGetPerspectiveRatio(h,M.x+1,M.y,g,k).point.sub(x.point).unit(),Ue=Math.atan(xe.y/xe.x)+(xe.x<0?Math.PI:0),_e=Math.sin(Ue),Be=Math.cos(Ue);G=new s.P(Be,_e),P=new s.P(-_e,Be)}else if(!y&&f){let xe=-this.transform.angle,Ue=Math.sin(xe),_e=Math.cos(xe);G=new s.P(_e,Ue),P=new s.P(-Ue,_e)}let j=x.point,et=a;if(f){j=M;let xe=this.transform.zoom-Math.floor(this.transform.zoom);et=Math.pow(2,-xe),et*=this.mapProjection.getPitchedTextCorrection(this.transform,M,g),R||(et*=s.ac(.5+x.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(j=j.add(G.mult(R.x*et)).add(P.mult(R.y*et)));let W=t.x1*et,X=t.x2*et,ct=(W+X)/2,rt=t.y1*et,ut=t.y2*et,Ft=(rt+ut)/2,Qt=[{offsetX:W,offsetY:rt},{offsetX:ct,offsetY:rt},{offsetX:X,offsetY:rt},{offsetX:X,offsetY:Ft},{offsetX:X,offsetY:ut},{offsetX:ct,offsetY:ut},{offsetX:W,offsetY:ut},{offsetX:W,offsetY:Ft}],se=[];for(let{offsetX:xe,offsetY:Ue}of Qt)se.push(new s.P(j.x+G.x*xe+P.x*Ue,j.y+G.y*xe+P.y*Ue));let oe=!1;if(f){let xe=se.map(Ue=>this.projectAndGetPerspectiveRatio(h,Ue.x,Ue.y,g,k));oe=xe.some(Ue=>!Ue.isOccluded),se=xe.map(Ue=>Ue.point)}else oe=!0;return{box:s.ao(se),allPointsOccluded:!oe}}}function vi(u,t,a){return t*(s.X/(u.tileSize*Math.pow(2,a-u.tileID.overscaledZ)))}class pr{constructor(t,a,h,g){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?a:-a))):g&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class ur{constructor(t,a,h,g,f){this.text=new pr(t?t.text:null,a,h,f),this.icon=new pr(t?t.icon:null,a,g,f)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qi{constructor(t,a,h){this.text=t,this.icon=a,this.skipFade=h}}class Oi{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class sr{constructor(t,a,h,g,f){this.bucketInstanceId=t,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=g,this.tileID=f}}class Zt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){let a=++this.maxGroupID;this.collisionGroups[t]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[t]}}function Ne(u,t,a,h,g){let{horizontalAlign:f,verticalAlign:y}=s.au(u);return new s.P(-(f-.5)*t+h[0]*g,-(y-.5)*a+h[1]*g)}class ke{constructor(t,a,h,g,f,y){this.transform=t.clone(),this.terrain=h,this.collisionIndex=new Vi(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Zt(f),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){let a=this.terrain;return a?(h,g)=>a.getElevation(t,h,g):null}getBucketParts(t,a,h,g){let f=h.getBucket(a),y=h.latestFeatureIndex;if(!f||!y||a.id!==f.layerIds[0])return;let B=h.collisionBoxArray,x=f.layers[0].layout,k=f.layers[0].paint,R=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),G=h.tileSize/s.X,P=h.tileID.toUnwrapped(),M=this.transform.calculatePosMatrix(P),j=x.get("text-pitch-alignment")==="map",et=x.get("text-rotation-alignment")==="map",W=vi(h,1,this.transform.zoom),X=this.collisionIndex.mapProjection.translatePosition(this.transform,h,k.get("text-translate"),k.get("text-translate-anchor")),ct=this.collisionIndex.mapProjection.translatePosition(this.transform,h,k.get("icon-translate"),k.get("icon-translate-anchor")),rt=_r(M,j,et,this.transform,W),ut=null;if(j){let Qt=nr(M,j,et,this.transform,W);ut=s.L([],this.transform.labelPlaneMatrix,Qt)}this.retainedQueryData[f.bucketInstanceId]=new sr(f.bucketInstanceId,y,f.sourceLayerIndex,f.index,h.tileID);let Ft={bucket:f,layout:x,translationText:X,translationIcon:ct,posMatrix:M,unwrappedTileID:P,textLabelPlaneMatrix:rt,labelToScreenMatrix:ut,scale:R,textPixelRatio:G,holdingForFade:h.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:s.ag(f.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(f.sourceID)};if(g)for(let Qt of f.sortKeyRanges){let{sortKey:se,symbolInstanceStart:oe,symbolInstanceEnd:xe}=Qt;t.push({sortKey:se,symbolInstanceStart:oe,symbolInstanceEnd:xe,parameters:Ft})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:f.symbolInstances.length,parameters:Ft})}attemptAnchorPlacement(t,a,h,g,f,y,B,x,k,R,G,P,M,j,et,W,X,ct,rt){let ut=s.aq[t.textAnchor],Ft=[t.textOffset0,t.textOffset1],Qt=Ne(ut,h,g,Ft,f),se=this.collisionIndex.placeCollisionBox(a,P,x,k,R,B,y,W,G.predicate,rt,Qt);if((!ct||this.collisionIndex.placeCollisionBox(ct,P,x,k,R,B,y,X,G.predicate,rt,Qt).placeable)&&se.placeable){let oe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[M.crossTileID]&&this.prevPlacement.placements[M.crossTileID]&&this.prevPlacement.placements[M.crossTileID].text&&(oe=this.prevPlacement.variableOffsets[M.crossTileID].anchor),M.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[M.crossTileID]={textOffset:Ft,width:h,height:g,anchor:ut,textBoxScale:f,prevAnchor:oe},this.markUsedJustification(j,ut,M,et),j.allowVerticalPlacement&&(this.markUsedOrientation(j,et,M),this.placedOrientations[M.crossTileID]=et),{shift:Qt,placedGlyphBoxes:se}}}placeLayerBucketPart(t,a,h){let{bucket:g,layout:f,translationText:y,translationIcon:B,posMatrix:x,unwrappedTileID:k,textLabelPlaneMatrix:R,labelToScreenMatrix:G,textPixelRatio:P,holdingForFade:M,collisionBoxArray:j,partiallyEvaluatedTextSize:et,collisionGroup:W}=t.parameters,X=f.get("text-optional"),ct=f.get("icon-optional"),rt=s.ar(f,"text-overlap","text-allow-overlap"),ut=rt==="always",Ft=s.ar(f,"icon-overlap","icon-allow-overlap"),Qt=Ft==="always",se=f.get("text-rotation-alignment")==="map",oe=f.get("text-pitch-alignment")==="map",xe=f.get("icon-text-fit")!=="none",Ue=f.get("symbol-z-order")==="viewport-y",_e=ut&&(Qt||!g.hasIconData()||ct),Be=Qt&&(ut||!g.hasTextData()||X);!g.collisionArrays&&j&&g.deserializeCollisionBoxes(j);let De=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),ri=(ve,Ge,Ci)=>{var Ji,Ui;if(a[ve.crossTileID])return;if(M)return void(this.placements[ve.crossTileID]=new Qi(!1,!1,!1));let fi=!1,hr=!1,Lr=!0,Er=null,er={box:null,placeable:!1,offscreen:null},Tr={box:null,placeable:!1,offscreen:null},Hr=null,Dr=null,Ir=null,yn=0,Hs=0,ra=0;Ge.textFeatureIndex?yn=Ge.textFeatureIndex:ve.useRuntimeCollisionCircles&&(yn=ve.featureIndex),Ge.verticalTextFeatureIndex&&(Hs=Ge.verticalTextFeatureIndex);let ws=Ge.textBox;if(ws){let Bs=Rr=>{let An=s.ah.horizontal;if(g.allowVerticalPlacement&&!Rr&&this.prevPlacement){let bn=this.prevPlacement.placedOrientations[ve.crossTileID];bn&&(this.placedOrientations[ve.crossTileID]=bn,An=bn,this.markUsedOrientation(g,An,ve))}return An},qn=(Rr,An)=>{if(g.allowVerticalPlacement&&ve.numVerticalGlyphVertices>0&&Ge.verticalTextBox){for(let bn of g.writingModes)if(bn===s.ah.vertical?(er=An(),Tr=er):er=Rr(),er&&er.placeable)break}else er=Rr()},Ms=ve.textAnchorOffsetStartIndex,as=ve.textAnchorOffsetEndIndex;if(as===Ms){let Rr=(An,bn)=>{let cr=this.collisionIndex.placeCollisionBox(An,rt,P,x,k,oe,se,y,W.predicate,De);return cr&&cr.placeable&&(this.markUsedOrientation(g,bn,ve),this.placedOrientations[ve.crossTileID]=bn),cr};qn(()=>Rr(ws,s.ah.horizontal),()=>{let An=Ge.verticalTextBox;return g.allowVerticalPlacement&&ve.numVerticalGlyphVertices>0&&An?Rr(An,s.ah.vertical):{box:null,offscreen:null}}),Bs(er&&er.placeable)}else{let Rr=s.aq[(Ui=(Ji=this.prevPlacement)===null||Ji===void 0?void 0:Ji.variableOffsets[ve.crossTileID])===null||Ui===void 0?void 0:Ui.anchor],An=(cr,Mo,Da)=>{let na=cr.x2-cr.x1,jl=cr.y2-cr.y1,ql=ve.textBoxScale,UA=xe&&Ft==="never"?Mo:null,ya=null,yu=rt==="never"?1:2,QA="never";Rr&&yu++;for(let Ns=0;Ns<yu;Ns++){for(let $l=Ms;$l<as;$l++){let tc=g.textAnchorOffsets.get($l);if(Rr&&tc.textAnchor!==Rr)continue;let RA=this.attemptAnchorPlacement(tc,cr,na,jl,ql,se,oe,P,x,k,W,QA,ve,g,Da,y,B,UA,De);if(RA&&(ya=RA.placedGlyphBoxes,ya&&ya.placeable))return fi=!0,Er=RA.shift,ya}Rr?Rr=null:QA=rt}return h&&!ya&&(ya={box:this.collisionIndex.placeCollisionBox(ws,"always",P,x,k,oe,se,y,W.predicate,De,new s.P(0,0)).box,offscreen:!1,placeable:!1}),ya};qn(()=>An(ws,Ge.iconBox,s.ah.horizontal),()=>{let cr=Ge.verticalTextBox;return g.allowVerticalPlacement&&(!er||!er.placeable)&&ve.numVerticalGlyphVertices>0&&cr?An(cr,Ge.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}}),er&&(fi=er.placeable,Lr=er.offscreen);let bn=Bs(er&&er.placeable);if(!fi&&this.prevPlacement){let cr=this.prevPlacement.variableOffsets[ve.crossTileID];cr&&(this.variableOffsets[ve.crossTileID]=cr,this.markUsedJustification(g,cr.anchor,ve,bn))}}}if(Hr=er,fi=Hr&&Hr.placeable,Lr=Hr&&Hr.offscreen,ve.useRuntimeCollisionCircles){let Bs=g.text.placedSymbolArray.get(ve.centerJustifiedTextSymbolIndex),qn=s.ai(g.textSizeData,et,Bs),Ms=f.get("text-padding");Dr=this.collisionIndex.placeCollisionCircles(rt,Bs,g.lineVertexArray,g.glyphOffsetArray,qn,x,k,R,G,h,oe,W.predicate,ve.collisionCircleDiameter,Ms,y,De),Dr.circles.length&&Dr.collisionDetected&&!h&&s.w("Collisions detected, but collision boxes are not shown"),fi=ut||Dr.circles.length>0&&!Dr.collisionDetected,Lr=Lr&&Dr.offscreen}if(Ge.iconFeatureIndex&&(ra=Ge.iconFeatureIndex),Ge.iconBox){let Bs=qn=>this.collisionIndex.placeCollisionBox(qn,Ft,P,x,k,oe,se,B,W.predicate,De,xe&&Er?Er:void 0);Tr&&Tr.placeable&&Ge.verticalIconBox?(Ir=Bs(Ge.verticalIconBox),hr=Ir.placeable):(Ir=Bs(Ge.iconBox),hr=Ir.placeable),Lr=Lr&&Ir.offscreen}let Cr=X||ve.numHorizontalGlyphVertices===0&&ve.numVerticalGlyphVertices===0,TA=ct||ve.numIconVertices===0;Cr||TA?TA?Cr||(hr=hr&&fi):fi=hr&&fi:hr=fi=hr&&fi;let Yl=hr&&Ir.placeable;if(fi&&Hr.placeable&&this.collisionIndex.insertCollisionBox(Hr.box,rt,f.get("text-ignore-placement"),g.bucketInstanceId,Tr&&Tr.placeable&&Hs?Hs:yn,W.ID),Yl&&this.collisionIndex.insertCollisionBox(Ir.box,Ft,f.get("icon-ignore-placement"),g.bucketInstanceId,ra,W.ID),Dr&&fi&&this.collisionIndex.insertCollisionCircles(Dr.circles,rt,f.get("text-ignore-placement"),g.bucketInstanceId,yn,W.ID),h&&this.storeCollisionData(g.bucketInstanceId,Ci,Ge,Hr,Ir,Dr),ve.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ve.crossTileID]=new Qi(fi||_e,hr||Be,Lr||g.justReloaded),a[ve.crossTileID]=!0};if(Ue){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let ve=g.getSortedSymbolIndexes(this.transform.angle);for(let Ge=ve.length-1;Ge>=0;--Ge){let Ci=ve[Ge];ri(g.symbolInstances.get(Ci),g.collisionArrays[Ci],Ci)}}else for(let ve=t.symbolInstanceStart;ve<t.symbolInstanceEnd;ve++)ri(g.symbolInstances.get(ve),g.collisionArrays[ve],ve);if(h&&g.bucketInstanceId in this.collisionCircleArrays){let ve=this.collisionCircleArrays[g.bucketInstanceId];s.as(ve.invProjMatrix,x),ve.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(t,a,h,g,f,y){if(h.textBox||h.iconBox){let B,x;this.collisionBoxArrays.has(t)?B=this.collisionBoxArrays.get(t):(B=new Map,this.collisionBoxArrays.set(t,B)),B.has(a)?x=B.get(a):(x={text:null,icon:null},B.set(a,x)),h.textBox&&(x.text=g.box),h.iconBox&&(x.icon=f.box)}if(y){let B=this.collisionCircleArrays[t];B===void 0&&(B=this.collisionCircleArrays[t]=new Oi);for(let x=0;x<y.circles.length;x+=4)B.circles.push(y.circles[x+0]),B.circles.push(y.circles[x+1]),B.circles.push(y.circles[x+2]),B.circles.push(y.collisionDetected?1:0)}}markUsedJustification(t,a,h,g){let f;f=g===s.ah.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[s.at(a)];let y=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(let B of y)B>=0&&(t.text.placedSymbolArray.get(B).crossTileID=f>=0&&B!==f?0:h.crossTileID)}markUsedOrientation(t,a,h){let g=a===s.ah.horizontal||a===s.ah.horizontalOnly?a:0,f=a===s.ah.vertical?a:0,y=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(let B of y)t.text.placedSymbolArray.get(B).placedOrientation=g;h.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=f)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;let a=this.prevPlacement,h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;let g=a?a.symbolFadeChange(t):1,f=a?a.opacities:{},y=a?a.variableOffsets:{},B=a?a.placedOrientations:{};for(let x in this.placements){let k=this.placements[x],R=f[x];R?(this.opacities[x]=new ur(R,g,k.text,k.icon),h=h||k.text!==R.text.placed||k.icon!==R.icon.placed):(this.opacities[x]=new ur(null,g,k.text,k.icon,k.skipFade),h=h||k.text||k.icon)}for(let x in f){let k=f[x];if(!this.opacities[x]){let R=new ur(k,g,!1,!1);R.isHidden()||(this.opacities[x]=R,h=h||k.text.placed||k.icon.placed)}}for(let x in y)this.variableOffsets[x]||!this.opacities[x]||this.opacities[x].isHidden()||(this.variableOffsets[x]=y[x]);for(let x in B)this.placedOrientations[x]||!this.opacities[x]||this.opacities[x].isHidden()||(this.placedOrientations[x]=B[x]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:t)}updateLayerOpacities(t,a){let h={};for(let g of a){let f=g.getBucket(t);f&&g.latestFeatureIndex&&t.id===f.layerIds[0]&&this.updateBucketOpacities(f,g.tileID,h,g.collisionBoxArray)}}updateBucketOpacities(t,a,h,g){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();let f=t.layers[0],y=f.layout,B=new ur(null,0,!1,!1,!0),x=y.get("text-allow-overlap"),k=y.get("icon-allow-overlap"),R=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=y.get("text-rotation-alignment")==="map",P=y.get("text-pitch-alignment")==="map",M=y.get("icon-text-fit")!=="none",j=new ur(null,0,x&&(k||!t.hasIconData()||y.get("icon-optional")),k&&(x||!t.hasTextData()||y.get("text-optional")),!0);!t.collisionArrays&&g&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(g);let et=(X,ct,rt)=>{for(let ut=0;ut<ct/4;ut++)X.opacityVertexArray.emplaceBack(rt);X.hasVisibleVertices=X.hasVisibleVertices||rt!==vo},W=this.collisionBoxArrays.get(t.bucketInstanceId);for(let X=0;X<t.symbolInstances.length;X++){let ct=t.symbolInstances.get(X),{numHorizontalGlyphVertices:rt,numVerticalGlyphVertices:ut,crossTileID:Ft}=ct,Qt=this.opacities[Ft];h[Ft]?Qt=B:Qt||(Qt=j,this.opacities[Ft]=Qt),h[Ft]=!0;let se=ct.numIconVertices>0,oe=this.placedOrientations[ct.crossTileID],xe=oe===s.ah.vertical,Ue=oe===s.ah.horizontal||oe===s.ah.horizontalOnly;if(rt>0||ut>0){let Be=pn(Qt.text);et(t.text,rt,xe?vo:Be),et(t.text,ut,Ue?vo:Be);let De=Qt.text.isHidden();[ct.rightJustifiedTextSymbolIndex,ct.centerJustifiedTextSymbolIndex,ct.leftJustifiedTextSymbolIndex].forEach(Ge=>{Ge>=0&&(t.text.placedSymbolArray.get(Ge).hidden=De||xe?1:0)}),ct.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(ct.verticalPlacedTextSymbolIndex).hidden=De||Ue?1:0);let ri=this.variableOffsets[ct.crossTileID];ri&&this.markUsedJustification(t,ri.anchor,ct,oe);let ve=this.placedOrientations[ct.crossTileID];ve&&(this.markUsedJustification(t,"left",ct,ve),this.markUsedOrientation(t,ve,ct))}if(se){let Be=pn(Qt.icon),De=!(M&&ct.verticalPlacedIconSymbolIndex&&xe);ct.placedIconSymbolIndex>=0&&(et(t.icon,ct.numIconVertices,De?Be:vo),t.icon.placedSymbolArray.get(ct.placedIconSymbolIndex).hidden=Qt.icon.isHidden()),ct.verticalPlacedIconSymbolIndex>=0&&(et(t.icon,ct.numVerticalIconVertices,De?vo:Be),t.icon.placedSymbolArray.get(ct.verticalPlacedIconSymbolIndex).hidden=Qt.icon.isHidden())}let _e=W&&W.has(X)?W.get(X):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){let Be=t.collisionArrays[X];if(Be){let De=new s.P(0,0);if(Be.textBox||Be.verticalTextBox){let ri=!0;if(R){let ve=this.variableOffsets[Ft];ve?(De=Ne(ve.anchor,ve.width,ve.height,ve.textOffset,ve.textBoxScale),G&&De._rotate(P?this.transform.angle:-this.transform.angle)):ri=!1}if(Be.textBox||Be.verticalTextBox){let ve;Be.textBox&&(ve=xe),Be.verticalTextBox&&(ve=Ue),Wi(t.textCollisionBox.collisionVertexArray,Qt.text.placed,!ri||ve,_e.text,De.x,De.y)}}if(Be.iconBox||Be.verticalIconBox){let ri=Boolean(!Ue&&Be.verticalIconBox),ve;Be.iconBox&&(ve=ri),Be.verticalIconBox&&(ve=!ri),Wi(t.iconCollisionBox.collisionVertexArray,Qt.icon.placed,ve,_e.icon,M?De.x:0,M?De.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){let X=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=X.invProjMatrix,t.placementViewportMatrix=X.viewportMatrix,t.collisionCircleArray=X.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,a){let h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>t}setStale(){this.stale=!0}}function Wi(u,t,a,h,g,f){h&&h.length!==0||(h=[0,0,0,0]);let y=h[0]-Ti,B=h[1]-Ti,x=h[2]-Ti,k=h[3]-Ti;u.emplaceBack(t?1:0,a?1:0,g||0,f||0,y,B),u.emplaceBack(t?1:0,a?1:0,g||0,f||0,x,B),u.emplaceBack(t?1:0,a?1:0,g||0,f||0,x,k),u.emplaceBack(t?1:0,a?1:0,g||0,f||0,y,k)}let Fi=Math.pow(2,25),rn=Math.pow(2,24),Fr=Math.pow(2,17),jr=Math.pow(2,16),br=Math.pow(2,9),on=Math.pow(2,8),dn=Math.pow(2,1);function pn(u){if(u.opacity===0&&!u.placed)return 0;if(u.opacity===1&&u.placed)return 4294967295;let t=u.placed?1:0,a=Math.floor(127*u.opacity);return a*Fi+t*rn+a*Fr+t*jr+a*br+t*on+a*dn+t}let vo=0;function es(){return{isOccluded:(u,t,a)=>!1,getPitchedTextCorrection:(u,t,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(u,t,a,h){throw new Error("Not implemented.")},translatePosition:(u,t,a,h)=>function(g,f,y,B,x=!1){if(!y[0]&&!y[1])return[0,0];let k=x?B==="map"?g.angle:0:B==="viewport"?-g.angle:0;if(k){let R=Math.sin(k),G=Math.cos(k);y=[y[0]*G-y[1]*R,y[0]*R+y[1]*G]}return[x?y[0]:vi(f,y[0],g.zoom),x?y[1]:vi(f,y[1],g.zoom)]}(u,t,a,h),getCircleRadiusCorrection:u=>1}}class Or{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,a,h,g,f){let y=this._bucketParts;for(;this._currentTileIndex<t.length;)if(a.getBucketParts(y,g,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,f())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,y.sort((B,x)=>B.sortKey-x.sortKey));this._currentPartIndex<y.length;)if(a.placeLayerBucketPart(y[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,f())return!0;return!1}}class is{constructor(t,a,h,g,f,y,B,x){this.placement=new ke(t,es(),a,y,B,x),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(t,a,h){let g=w.now(),f=()=>!this._forceFullPlacement&&w.now()-g>2;for(;this._currentPlacementIndex>=0;){let y=a[t[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if(y.type==="symbol"&&(!y.minzoom||y.minzoom<=B)&&(!y.maxzoom||y.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new Or(y)),this._inProgressLayer.continuePlacement(h[y.source],this.placement,this._showCollisionBoxes,y,f))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}let Jn=512/s.X/2;class $i{constructor(t,a,h){this.tileID=t,this.bucketInstanceId=h,this._symbolsByKey={};let g=new Map;for(let f=0;f<a.length;f++){let y=a.get(f),B=y.key,x=g.get(B);x?x.push(y):g.set(B,[y])}for(let[f,y]of g){let B={positions:y.map(x=>({x:Math.floor(x.anchorX*Jn),y:Math.floor(x.anchorY*Jn)})),crossTileIDs:y.map(x=>x.crossTileID)};if(B.positions.length>128){let x=new s.av(B.positions.length,16,Uint16Array);for(let{x:k,y:R}of B.positions)x.add(k,R);x.finish(),delete B.positions,B.index=x}this._symbolsByKey[f]=B}}getScaledCoordinates(t,a){let{x:h,y:g,z:f}=this.tileID.canonical,{x:y,y:B,z:x}=a.canonical,k=Jn/Math.pow(2,x-f),R=(B*s.X+t.anchorY)*k,G=g*s.X*Jn;return{x:Math.floor((y*s.X+t.anchorX)*k-h*s.X*Jn),y:Math.floor(R-G)}}findMatches(t,a,h){let g=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let f=0;f<t.length;f++){let y=t.get(f);if(y.crossTileID)continue;let B=this._symbolsByKey[y.key];if(!B)continue;let x=this.getScaledCoordinates(y,a);if(B.index){let k=B.index.range(x.x-g,x.y-g,x.x+g,x.y+g).sort();for(let R of k){let G=B.crossTileIDs[R];if(!h[G]){h[G]=!0,y.crossTileID=G;break}}}else if(B.positions)for(let k=0;k<B.positions.length;k++){let R=B.positions[k],G=B.crossTileIDs[k];if(Math.abs(R.x-x.x)<=g&&Math.abs(R.y-x.y)<=g&&!h[G]){h[G]=!0,y.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class io{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class wn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){let a=Math.round((t-this.lng)/360);if(a!==0)for(let h in this.indexes){let g=this.indexes[h],f={};for(let y in g){let B=g[y];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+a),f[B.tileID.key]=B}this.indexes[h]=f}this.lng=t}addBucket(t,a,h){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let f=0;f<a.symbolInstances.length;f++)a.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});let g=this.usedCrossTileIDs[t.overscaledZ];for(let f in this.indexes){let y=this.indexes[f];if(Number(f)>t.overscaledZ)for(let B in y){let x=y[B];x.tileID.isChildOf(t)&&x.findMatches(a.symbolInstances,t,g)}else{let B=y[t.scaledTo(Number(f)).key];B&&B.findMatches(a.symbolInstances,t,g)}}for(let f=0;f<a.symbolInstances.length;f++){let y=a.symbolInstances.get(f);y.crossTileID||(y.crossTileID=h.generate(),g[y.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new $i(t,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(t,a){for(let h of a.getCrossTileIDsLists())for(let g of h)delete this.usedCrossTileIDs[t][g]}removeStaleBuckets(t){let a=!1;for(let h in this.indexes){let g=this.indexes[h];for(let f in g)t[g[f].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,g[f]),delete g[f],a=!0)}return a}}class Wo{constructor(){this.layerIndexes={},this.crossTileIDs=new io,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,a,h){let g=this.layerIndexes[t.id];g===void 0&&(g=this.layerIndexes[t.id]=new wn);let f=!1,y={};g.handleWrapJump(h);for(let B of a){let x=B.getBucket(t);x&&t.id===x.layerIds[0]&&(x.bucketInstanceId||(x.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(B.tileID,x,this.crossTileIDs)&&(f=!0),y[x.bucketInstanceId]=!0)}return g.removeStaleBuckets(y)&&(f=!0),f}pruneUnusedLayers(t){let a={};t.forEach(h=>{a[h]=!0});for(let h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}let Bn=(u,t)=>s.t(u,t&&t.filter(a=>a.identifier!=="source.canvas")),ht=s.aw();class pt extends s.E{constructor(t,a={}){super(),this._rtlPluginLoaded=()=>{for(let h in this.sourceCaches){let g=this.sourceCaches[h].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[h].reload()}},this.map=t,this.dispatcher=new le(ie(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,g)=>this.getGlyphs(h,g)),this.dispatcher.registerMessageHandler("GI",(h,g)=>this.getImages(h,g)),this.imageManager=new at,this.imageManager.setEventedParent(this),this.glyphManager=new te(t._requestManager,a.localIdeographFontFamily),this.lineAtlas=new ue(256,512),this.crossTileSymbolIndex=new Wo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),pi().on(he,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;let g=this.sourceCaches[h.sourceId];if(!g)return;let f=g.getSource();if(f&&f.vectorLayerIds)for(let y in this._layers){let B=this._layers[y];B.source===f.id&&this._validateLayer(B)}})}loadURL(t,a={},h){this.fire(new s.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;let g=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;let f=this._loadStyleRequest;s.h(g,this._loadStyleRequest).then(y=>{this._loadStyleRequest=null,this._load(y.data,a,h)}).catch(y=>{this._loadStyleRequest=null,y&&!f.signal.aborted&&this.fire(new s.j(y))})}loadJSON(t,a={},h){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(t,a,h)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(ht,{validate:!1})}_load(t,a,h){var g;let f=a.transformStyle?a.transformStyle(h,t):t;if(!a.validate||!Bn(this,s.u(f))){this._loaded=!0,this.stylesheet=f;for(let y in f.sources)this.addSource(y,f.sources[y],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs),this._createLayers(),this.light=new Wt(this.stylesheet.light),this.sky=new Et(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){let t=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(a=>a.id),this._layers={},this._serializedLayers=null;for(let a of t){let h=s.aA(a);h.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=h}}_loadSprite(t,a=!1,h=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(f,y,B,x){return s._(this,void 0,void 0,function*(){let k=vt(f),R=B>1?"@2x":"",G={},P={};for(let{id:M,url:j}of k){let et=y.transformRequest(ft(j,R,".json"),"SpriteJSON");G[M]=s.h(et,x);let W=y.transformRequest(ft(j,R,".png"),"SpriteImage");P[M]=D.getImage(W,x)}return yield Promise.all([...Object.values(G),...Object.values(P)]),function(M,j){return s._(this,void 0,void 0,function*(){let et={};for(let W in M){et[W]={};let X=w.getImageCanvasContext((yield j[W]).data),ct=(yield M[W]).data;for(let rt in ct){let{width:ut,height:Ft,x:Qt,y:se,sdf:oe,pixelRatio:xe,stretchX:Ue,stretchY:_e,content:Be,textFitWidth:De,textFitHeight:ri}=ct[rt];et[W][rt]={data:null,pixelRatio:xe,sdf:oe,stretchX:Ue,stretchY:_e,content:Be,textFitWidth:De,textFitHeight:ri,spriteData:{width:ut,height:Ft,x:Qt,y:se,context:X}}}}return et})}(G,P)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(f=>{if(this._spriteRequest=null,f)for(let y in f){this._spritesImagesIds[y]=[];let B=this._spritesImagesIds[y]?this._spritesImagesIds[y].filter(x=>!(x in f)):[];for(let x of B)this.imageManager.removeImage(x),this._changedImages[x]=!0;for(let x in f[y]){let k=y==="default"?x:`${y}:${x}`;this._spritesImagesIds[y].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,f[y][x],!1):this.imageManager.addImage(k,f[y][x]),a&&(this._changedImages[k]=!0)}}}).catch(f=>{this._spriteRequest=null,g=f,this.fire(new s.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),h&&h(g)})}_unloadSprite(){for(let t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(t){let a=this.sourceCaches[t.source];if(!a)return;let h=t.sourceLayer;if(!h)return;let g=a.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(h)===-1)&&this.fire(new s.j(new Error(`Source layer "${h}" does not exist on source "${g.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,a=!1){let h=this._serializedAllLayers();if(!t||t.length===0)return Object.values(a?s.aB(h):h);let g=[];for(let f of t)if(h[f]){let y=a?s.aB(h[f]):h[f];g.push(y)}return g}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};let a=Object.keys(this._layers);for(let h of a){let g=this._layers[h];g.type!=="custom"&&(t[h]=g.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(let t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;let a=this._changed;if(a){let g=Object.keys(this._updatedLayers),f=Object.keys(this._removedLayers);(g.length||f.length)&&this._updateWorkerLayers(g,f);for(let y in this._updatedSources){let B=this._updatedSources[y];if(B==="reload")this._reloadSource(y);else{if(B!=="clear")throw new Error(`Invalid action ${B}`);this._clearSource(y)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let y in this._updatedPaintProps)this._layers[y].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}let h={};for(let g in this.sourceCaches){let f=this.sourceCaches[g];h[g]=f.used,f.used=!1}for(let g of this._order){let f=this._layers[g];f.recalculate(t,this._availableImages),!f.isHidden(t.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}for(let g in h){let f=this.sourceCaches[g];!!h[g]!=!!f.used&&f.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(t),this.sky.recalculate(t),this.z=t.zoom,a&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let t=Object.keys(this._changedImages);if(t.length){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,a={}){var h;this._checkLoaded();let g=this.serialize();if(t=a.transformStyle?a.transformStyle(g,t):t,((h=a.validate)===null||h===void 0||h)&&Bn(this,s.u(t)))return!1;(t=s.aB(t)).layers=s.az(t.layers);let f=s.aC(g,t),y=this._getOperationsToPerform(f);if(y.unimplemented.length>0)throw new Error(`Unimplemented: ${y.unimplemented.join(", ")}.`);if(y.operations.length===0)return!1;for(let B of y.operations)B();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){let a=[],h=[];for(let g of t)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":a.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":a.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,g.args));break;case"setSky":a.push(()=>this.setSky.apply(this,g.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":a.push(()=>{});break;default:h.push(g.command)}return{operations:a,unimplemented:h}}addImage(t,a){if(this.getImage(t))return this.fire(new s.j(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,a),this._afterImageUpdated(t)}updateImage(t,a){this.imageManager.updateImage(t,a)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new s.j(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,a,h={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(s.u.source,`sources.${t}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);let g=this.sourceCaches[t]=new Ve(t,a,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:t})),g.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(let h in this._layers)if(this._layers[h].source===t)return this.fire(new s.j(new Error(`Source "${t}" cannot be removed while layer "${h}" is using it.`)));let a=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],a.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,a){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);let h=this.sourceCaches[t].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(a),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,a,h={}){this._checkLoaded();let g=t.id;if(this.getLayer(g))return void this.fire(new s.j(new Error(`Layer "${g}" already exists on this map.`)));let f;if(t.type==="custom"){if(Bn(this,s.aD(t)))return;f=s.aA(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(g,t.source),t=s.aB(t),t=s.e(t,{source:g})),this._validate(s.u.layer,`layers.${g}`,t,{arrayIndex:-1},h))return;f=s.aA(t),this._validateLayer(f),f.setEventedParent(this,{layer:{id:g}})}let y=a?this._order.indexOf(a):this._order.length;if(a&&y===-1)this.fire(new s.j(new Error(`Cannot add layer "${g}" before non-existing layer "${a}".`)));else{if(this._order.splice(y,0,g),this._layerOrderChanged=!0,this._layers[g]=f,this._removedLayers[g]&&f.source&&f.type!=="custom"){let B=this._removedLayers[g];delete this._removedLayers[g],B.type!==f.type?this._updatedSources[f.source]="clear":(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause())}this._updateLayer(f),f.onAdd&&f.onAdd(this.map)}}moveLayer(t,a){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new s.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===a)return;let h=this._order.indexOf(t);this._order.splice(h,1);let g=a?this._order.indexOf(a):this._order.length;a&&g===-1?this.fire(new s.j(new Error(`Cannot move layer "${t}" before non-existing layer "${a}".`))):(this._order.splice(g,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();let a=this._layers[t];if(!a)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${t}".`)));a.setEventedParent(null);let h=this._order.indexOf(t);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=a,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],a.onRemove&&a.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,a,h){this._checkLoaded();let g=this.getLayer(t);g?g.minzoom===a&&g.maxzoom===h||(a!=null&&(g.minzoom=a),h!=null&&(g.maxzoom=h),this._updateLayer(g)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,a,h={}){this._checkLoaded();let g=this.getLayer(t);if(g){if(!s.aE(g.filter,a))return a==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(s.u.filter,`layers.${g.id}.filter`,a,null,h)||(g.filter=s.aB(a),this._updateLayer(g)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return s.aB(this.getLayer(t).filter)}setLayoutProperty(t,a,h,g={}){this._checkLoaded();let f=this.getLayer(t);f?s.aE(f.getLayoutProperty(a),h)||(f.setLayoutProperty(a,h,g),this._updateLayer(f)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,a){let h=this.getLayer(t);if(h)return h.getLayoutProperty(a);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,a,h,g={}){this._checkLoaded();let f=this.getLayer(t);f?s.aE(f.getPaintProperty(a),h)||(f.setPaintProperty(a,h,g)&&this._updateLayer(f),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,a){return this.getLayer(t).getPaintProperty(a)}setFeatureState(t,a){this._checkLoaded();let h=t.source,g=t.sourceLayer,f=this.sourceCaches[h];if(f===void 0)return void this.fire(new s.j(new Error(`The source '${h}' does not exist in the map's style.`)));let y=f.getSource().type;y==="geojson"&&g?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):y!=="vector"||g?(t.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),f.setFeatureState(g,t.id,a)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,a){this._checkLoaded();let h=t.source,g=this.sourceCaches[h];if(g===void 0)return void this.fire(new s.j(new Error(`The source '${h}' does not exist in the map's style.`)));let f=g.getSource().type,y=f==="vector"?t.sourceLayer:void 0;f!=="vector"||y?a&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(y,t.id,a):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();let a=t.source,h=t.sourceLayer,g=this.sourceCaches[a];if(g!==void 0)return g.getSource().type!=="vector"||h?(t.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(h,t.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let t=s.aF(this.sourceCaches,f=>f.serialize()),a=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,g=this.stylesheet;return s.aG({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:t,layers:a,terrain:h},f=>f!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){let a=y=>this._layers[y].type==="fill-extrusion",h={},g=[];for(let y=this._order.length-1;y>=0;y--){let B=this._order[y];if(a(B)){h[B]=y;for(let x of t){let k=x[B];if(k)for(let R of k)g.push(R)}}}g.sort((y,B)=>B.intersectionZ-y.intersectionZ);let f=[];for(let y=this._order.length-1;y>=0;y--){let B=this._order[y];if(a(B))for(let x=g.length-1;x>=0;x--){let k=g[x].feature;if(h[k.layer.id]<y)break;f.push(k),g.pop()}else for(let x of t){let k=x[B];if(k)for(let R of k)f.push(R.feature)}}return f}queryRenderedFeatures(t,a,h){a&&a.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);let g={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(let B of a.layers){let x=this._layers[B];if(!x)return this.fire(new s.j(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];g[x.source]=!0}}let f=[];a.availableImages=this._availableImages;let y=this._serializedAllLayers();for(let B in this.sourceCaches)a.layers&&!g[B]||f.push(Ee(this.sourceCaches[B],this._layers,y,t,a,h));return this.placement&&f.push(function(B,x,k,R,G,P,M){let j={},et=P.queryRenderedSymbols(R),W=[];for(let X of Object.keys(et).map(Number))W.push(M[X]);W.sort(We);for(let X of W){let ct=X.featureIndex.lookupSymbolFeatures(et[X.bucketInstanceId],x,X.bucketIndex,X.sourceLayerIndex,G.filter,G.layers,G.availableImages,B);for(let rt in ct){let ut=j[rt]=j[rt]||[],Ft=ct[rt];Ft.sort((Qt,se)=>{let oe=X.featureSortOrder;if(oe){let xe=oe.indexOf(Qt.featureIndex);return oe.indexOf(se.featureIndex)-xe}return se.featureIndex-Qt.featureIndex});for(let Qt of Ft)ut.push(Qt)}}for(let X in j)j[X].forEach(ct=>{let rt=ct.feature,ut=k[B[X].source].getFeatureState(rt.layer["source-layer"],rt.id);rt.source=rt.layer.source,rt.layer["source-layer"]&&(rt.sourceLayer=rt.layer["source-layer"]),rt.state=ut});return j}(this._layers,y,this.sourceCaches,t,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)}querySourceFeatures(t,a){a&&a.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",a.filter,null,a);let h=this.sourceCaches[t];return h?function(g,f){let y=g.getRenderableIds().map(k=>g.getTileByID(k)),B=[],x={};for(let k=0;k<y.length;k++){let R=y[k],G=R.tileID.canonical.key;x[G]||(x[G]=!0,R.querySourceFeatures(B,f))}return B}(h,a):[]}getLight(){return this.light.getLight()}setLight(t,a={}){this._checkLoaded();let h=this.light.getLight(),g=!1;for(let y in t)if(!s.aE(t[y],h[y])){g=!0;break}if(!g)return;let f={now:w.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,a),this.light.updateTransitions(f)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,a={}){let h=this.getSky(),g=!1;if(!t&&!h)return;if(t&&!h)g=!0;else if(!t&&h)g=!0;else for(let y in t)if(!s.aE(t[y],h[y])){g=!0;break}if(!g)return;let f={now:w.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,a),this.sky.updateTransitions(f)}_validate(t,a,h,g,f={}){return(!f||f.validate!==!1)&&Bn(this,t.call(s.u,s.e({key:a,style:this.serialize(),value:h,styleSpec:s.v},g)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pi().off(he,this._rtlPluginLoaded);for(let a in this._layers)this._layers[a].setEventedParent(null);for(let a in this.sourceCaches){let h=this.sourceCaches[a];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(let a in this.sourceCaches)this.sourceCaches[a].update(t,this.map.terrain)}_generateCollisionBoxes(){for(let t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,a,h,g,f=!1){let y=!1,B=!1,x={};for(let k of this._order){let R=this._layers[k];if(R.type!=="symbol")continue;if(!x[R.source]){let P=this.sourceCaches[R.source];x[R.source]=P.getRenderableIds(!0).map(M=>P.getTileByID(M)).sort((M,j)=>j.tileID.overscaledZ-M.tileID.overscaledZ||(M.tileID.isLessThan(j.tileID)?-1:1))}let G=this.crossTileSymbolIndex.addLayer(R,x[R.source],t.center.lng);y=y||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((f=f||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),t.zoom))&&(this.pauseablePlacement=new is(t,this.map.terrain,this._order,f,a,h,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,x),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),B=!0),y&&this.pauseablePlacement.placement.setStale()),B||y)for(let k of this._order){let R=this._layers[k];R.type==="symbol"&&this.placement.updateLayerOpacities(R,x[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(let t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,a){return s._(this,void 0,void 0,function*(){let h=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();let g=this.sourceCaches[a.source];return g&&g.setDependencies(a.tileID.key,a.type,a.icons),h})}getGlyphs(t,a){return s._(this,void 0,void 0,function*(){let h=yield this.glyphManager.getGlyphs(a.stacks),g=this.sourceCaches[a.source];return g&&g.setDependencies(a.tileID.key,a.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,a={}){this._checkLoaded(),t&&this._validate(s.u.glyphs,"glyphs",t,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,a,h={},g){this._checkLoaded();let f=[{id:t,url:a}],y=[...vt(this.stylesheet.sprite),...f];this._validate(s.u.sprite,"sprite",y,null,h)||(this.stylesheet.sprite=y,this._loadSprite(f,!0,g))}removeSprite(t){this._checkLoaded();let a=vt(this.stylesheet.sprite);if(a.find(h=>h.id===t)){if(this._spritesImagesIds[t])for(let h of this._spritesImagesIds[t])this.imageManager.removeImage(h),this._changedImages[h]=!0;a.splice(a.findIndex(h=>h.id===t),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return vt(this.stylesheet.sprite)}setSprite(t,a={},h){this._checkLoaded(),t&&this._validate(s.u.sprite,"sprite",t,null,a)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,h):(this._unloadSprite(),h&&h(null)))}}var At=s.Y([{name:"a_pos",type:"Int16",components:2}]);let St={prelude:_t(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_t(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_t(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_t(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_t("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_t(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:_t(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_t("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_t("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_t("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_t(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_t(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_t(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_t(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_t(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_t(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_t(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_t(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_t(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_t(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_t(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_t(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_t(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_t(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_t(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_t(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_t("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_t("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_t("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:_t("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _t(u,t){let a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=t.match(/attribute ([\w]+) ([\w]+)/g),g=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),f=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=f?f.concat(g):g,B={};return{fragmentSource:u=u.replace(a,(x,k,R,G,P)=>(B[P]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${P}
varying ${R} ${G} ${P};
#else
uniform ${R} ${G} u_${P};
#endif
`:`
#ifdef HAS_UNIFORM_u_${P}
    ${R} ${G} ${P} = u_${P};
#endif
`)),vertexSource:t=t.replace(a,(x,k,R,G,P)=>{let M=G==="float"?"vec2":"vec4",j=P.match(/color/)?"color":M;return B[P]?k==="define"?`
#ifndef HAS_UNIFORM_u_${P}
uniform lowp float u_${P}_t;
attribute ${R} ${M} a_${P};
varying ${R} ${G} ${P};
#else
uniform ${R} ${G} u_${P};
#endif
`:j==="vec4"?`
#ifndef HAS_UNIFORM_u_${P}
    ${P} = a_${P};
#else
    ${R} ${G} ${P} = u_${P};
#endif
`:`
#ifndef HAS_UNIFORM_u_${P}
    ${P} = unpack_mix_${j}(a_${P}, u_${P}_t);
#else
    ${R} ${G} ${P} = u_${P};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${P}
uniform lowp float u_${P}_t;
attribute ${R} ${M} a_${P};
#else
uniform ${R} ${G} u_${P};
#endif
`:j==="vec4"?`
#ifndef HAS_UNIFORM_u_${P}
    ${R} ${G} ${P} = a_${P};
#else
    ${R} ${G} ${P} = u_${P};
#endif
`:`
#ifndef HAS_UNIFORM_u_${P}
    ${R} ${G} ${P} = unpack_mix_${j}(a_${P}, u_${P}_t);
#else
    ${R} ${G} ${P} = u_${P};
#endif
`}),staticAttributes:h,staticUniforms:y}}class zt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,a,h,g,f,y,B,x,k){this.context=t;let R=this.boundPaintVertexBuffers.length!==g.length;for(let G=0;!R&&G<g.length;G++)this.boundPaintVertexBuffers[G]!==g[G]&&(R=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==h||R||this.boundIndexBuffer!==f||this.boundVertexOffset!==y||this.boundDynamicVertexBuffer!==B||this.boundDynamicVertexBuffer2!==x||this.boundDynamicVertexBuffer3!==k?this.freshBind(a,h,g,f,y,B,x,k):(t.bindVertexArray.set(this.vao),B&&B.bind(),f&&f.dynamicDraw&&f.bind(),x&&x.bind(),k&&k.bind())}freshBind(t,a,h,g,f,y,B,x){let k=t.numAttributes,R=this.context,G=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=g,this.boundVertexOffset=f,this.boundDynamicVertexBuffer=y,this.boundDynamicVertexBuffer2=B,this.boundDynamicVertexBuffer3=x,a.enableAttributes(G,t);for(let P of h)P.enableAttributes(G,t);y&&y.enableAttributes(G,t),B&&B.enableAttributes(G,t),x&&x.enableAttributes(G,t),a.bind(),a.setVertexAttribPointers(G,t,f);for(let P of h)P.bind(),P.setVertexAttribPointers(G,t,f);y&&(y.bind(),y.setVertexAttribPointers(G,t,f)),g&&g.bind(),B&&(B.bind(),B.setVertexAttribPointers(G,t,f)),x&&(x.bind(),x.setVertexAttribPointers(G,t,f)),R.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let ee=(u,t,a,h,g)=>({u_matrix:u,u_texture:0,u_ele_delta:t,u_fog_matrix:a,u_fog_color:h?h.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:h?h.calculateFogBlendOpacity(g):0,u_horizon_color:h?h.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1});function be(u){let t=[];for(let a=0;a<u.length;a++){if(u[a]===null)continue;let h=u[a].split(" ");t.push(h.pop())}return t}class Ie{constructor(t,a,h,g,f,y){let B=t.gl;this.program=B.createProgram();let x=be(a.staticAttributes),k=h?h.getBinderAttributes():[],R=x.concat(k),G=St.prelude.staticUniforms?be(St.prelude.staticUniforms):[],P=a.staticUniforms?be(a.staticUniforms):[],M=h?h.getBinderUniforms():[],j=G.concat(P).concat(M),et=[];for(let Qt of j)et.indexOf(Qt)<0&&et.push(Qt);let W=h?h.defines():[];f&&W.push("#define OVERDRAW_INSPECTOR;"),y&&W.push("#define TERRAIN3D;");let X=W.concat(St.prelude.fragmentSource,a.fragmentSource).join(`
`),ct=W.concat(St.prelude.vertexSource,a.vertexSource).join(`
`),rt=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(rt,X),B.compileShader(rt),!B.getShaderParameter(rt,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(rt)}`);B.attachShader(this.program,rt);let ut=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(ut,ct),B.compileShader(ut),!B.getShaderParameter(ut,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(ut)}`);B.attachShader(this.program,ut),this.attributes={};let Ft={};this.numAttributes=R.length;for(let Qt=0;Qt<this.numAttributes;Qt++)R[Qt]&&(B.bindAttribLocation(this.program,Qt,R[Qt]),this.attributes[R[Qt]]=Qt);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(ut),B.deleteShader(rt);for(let Qt=0;Qt<et.length;Qt++){let se=et[Qt];if(se&&!Ft[se]){let oe=B.getUniformLocation(this.program,se);oe&&(Ft[se]=oe)}}this.fixedUniforms=g(t,Ft),this.terrainUniforms=((Qt,se)=>({u_depth:new s.aH(Qt,se.u_depth),u_terrain:new s.aH(Qt,se.u_terrain),u_terrain_dim:new s.aI(Qt,se.u_terrain_dim),u_terrain_matrix:new s.aJ(Qt,se.u_terrain_matrix),u_terrain_unpack:new s.aK(Qt,se.u_terrain_unpack),u_terrain_exaggeration:new s.aI(Qt,se.u_terrain_exaggeration)}))(t,Ft),this.binderUniforms=h?h.getUniforms(t,Ft):[]}draw(t,a,h,g,f,y,B,x,k,R,G,P,M,j,et,W,X,ct){let rt=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(h),t.setStencilMode(g),t.setColorMode(f),t.setCullFace(y),x){t.activeTexture.set(rt.TEXTURE2),rt.bindTexture(rt.TEXTURE_2D,x.depthTexture),t.activeTexture.set(rt.TEXTURE3),rt.bindTexture(rt.TEXTURE_2D,x.texture);for(let Ft in this.terrainUniforms)this.terrainUniforms[Ft].set(x[Ft])}for(let Ft in this.fixedUniforms)this.fixedUniforms[Ft].set(B[Ft]);et&&et.setUniforms(t,this.binderUniforms,M,{zoom:j});let ut=0;switch(a){case rt.LINES:ut=2;break;case rt.TRIANGLES:ut=3;break;case rt.LINE_STRIP:ut=1}for(let Ft of P.get()){let Qt=Ft.vaos||(Ft.vaos={});(Qt[k]||(Qt[k]=new zt)).bind(t,this,R,et?et.getPaintVertexBuffers():[],G,Ft.vertexOffset,W,X,ct),rt.drawElements(a,Ft.primitiveLength*ut,rt.UNSIGNED_SHORT,Ft.primitiveOffset*ut*2)}}}function pe(u,t,a){let h=1/vi(a,1,t.transform.tileZoom),g=Math.pow(2,a.tileID.overscaledZ),f=a.tileSize*Math.pow(2,t.transform.tileZoom)/g,y=f*(a.tileID.canonical.x+a.tileID.wrap*g),B=f*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,u.fromScale,u.toScale],u_fade:u.t,u_pixel_coord_upper:[y>>16,B>>16],u_pixel_coord_lower:[65535&y,65535&B]}}let $t=(u,t,a,h)=>{let g=t.style.light,f=g.properties.get("position"),y=[f.x,f.y,f.z],B=function(){var k=new s.A(9);return s.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();g.properties.get("anchor")==="viewport"&&function(k,R){var G=Math.sin(R),P=Math.cos(R);k[0]=P,k[1]=G,k[2]=0,k[3]=-G,k[4]=P,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(B,-t.transform.angle),function(k,R,G){var P=R[0],M=R[1],j=R[2];k[0]=P*G[0]+M*G[3]+j*G[6],k[1]=P*G[1]+M*G[4]+j*G[7],k[2]=P*G[2]+M*G[5]+j*G[8]}(y,y,B);let x=g.properties.get("color");return{u_matrix:u,u_lightpos:y,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[x.r,x.g,x.b],u_vertical_gradient:+a,u_opacity:h}},fe=(u,t,a,h,g,f,y)=>s.e($t(u,t,a,h),pe(f,t,y),{u_height_factor:-Math.pow(2,g.overscaledZ)/y.tileSize/8}),Ce=u=>({u_matrix:u}),Te=(u,t,a,h)=>s.e(Ce(u),pe(a,t,h)),Li=(u,t)=>({u_matrix:u,u_world:t}),ki=(u,t,a,h,g)=>s.e(Te(u,t,a,h),{u_world:g}),Ze=(u,t,a,h)=>{let g=u.transform,f,y;if(h.paint.get("circle-pitch-alignment")==="map"){let B=vi(a,1,g.zoom);f=!0,y=[B,B]}else f=!1,y=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:u.translatePosMatrix(t.posMatrix,a,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+f,u_device_pixel_ratio:u.pixelRatio,u_extrude_scale:y}},Fe=(u,t,a)=>({u_matrix:u,u_inv_matrix:t,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),ii=(u,t,a=1)=>({u_matrix:u,u_color:t,u_overlay:0,u_overlay_scale:a}),ai=u=>({u_matrix:u}),wi=(u,t,a,h)=>({u_matrix:u,u_extrude_scale:vi(t,1,a),u_intensity:h}),ar=(u,t,a,h)=>{let g=s.H();s.aP(g,0,u.width,u.height,0,0,1);let f=u.context.gl;return{u_matrix:g,u_world:[f.drawingBufferWidth,f.drawingBufferHeight],u_image:a,u_color_ramp:h,u_opacity:t.paint.get("heatmap-opacity")}};function si(u,t){let a=Math.pow(2,t.canonical.z),h=t.canonical.y;return[new s.Z(0,h/a).toLngLat().lat,new s.Z(0,(h+1)/a).toLngLat().lat]}let vr=(u,t,a,h)=>{let g=u.transform;return{u_matrix:wo(u,t,a,h),u_ratio:1/vi(t,1,g.zoom),u_device_pixel_ratio:u.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},nn=(u,t,a,h,g)=>s.e(vr(u,t,a,g),{u_image:0,u_image_height:h}),Br=(u,t,a,h,g)=>{let f=u.transform,y=Rn(t,f);return{u_matrix:wo(u,t,a,g),u_texsize:t.imageAtlasTexture.size,u_ratio:1/vi(t,1,f.zoom),u_device_pixel_ratio:u.pixelRatio,u_image:0,u_scale:[y,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},ms=(u,t,a,h,g,f)=>{let y=u.lineAtlas,B=Rn(t,u.transform),x=a.layout.get("line-cap")==="round",k=y.getDash(h.from,x),R=y.getDash(h.to,x),G=k.width*g.fromScale,P=R.width*g.toScale;return s.e(vr(u,t,a,f),{u_patternscale_a:[B/G,-k.height/2],u_patternscale_b:[B/P,-R.height/2],u_sdfgamma:y.width/(256*Math.min(G,P)*u.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:R.y,u_mix:g.t})};function Rn(u,t){return 1/vi(u,1,t.tileZoom)}function wo(u,t,a,h){return u.translatePosMatrix(h?h.posMatrix:t.tileID.posMatrix,t,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}let el=(u,t,a,h,g)=>{return{u_matrix:u,u_tl_parent:t,u_scale_parent:a,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(y=g.paint.get("raster-saturation"),y>0?1-1/(1.001-y):-y),u_contrast_factor:(f=g.paint.get("raster-contrast"),f>0?1/(1-f):1+f),u_spin_weights:Fc(g.paint.get("raster-hue-rotate"))};var f,y};function Fc(u){u*=Math.PI/180;let t=Math.sin(u),a=Math.cos(u);return[(2*a+1)/3,(-Math.sqrt(3)*t-a+1)/3,(Math.sqrt(3)*t-a+1)/3]}let Gl=(u,t,a,h,g,f,y,B,x,k,R,G,P,M)=>{let j=y.transform;return{u_is_size_zoom_constant:+(u==="constant"||u==="source"),u_is_size_feature_constant:+(u==="constant"||u==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:j.cameraToCenterDistance,u_pitch:j.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:j.width/j.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:x,u_coord_matrix:k,u_is_text:+G,u_pitch_with_map:+h,u_is_along_line:g,u_is_variable_anchor:f,u_texsize:P,u_texture:0,u_translation:R,u_pitched_scale:M}},Fa=(u,t,a,h,g,f,y,B,x,k,R,G,P,M,j)=>{let et=y.transform;return s.e(Gl(u,t,a,h,g,f,y,B,x,k,R,G,P,j),{u_gamma_scale:h?Math.cos(et._pitch)*et.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+M})},ka=(u,t,a,h,g,f,y,B,x,k,R,G,P,M)=>s.e(Fa(u,t,a,h,g,f,y,B,x,k,R,!0,G,!0,M),{u_texsize_icon:P,u_texture_icon:1}),Bo=(u,t,a)=>({u_matrix:u,u_opacity:t,u_color:a}),_o=(u,t,a,h,g,f)=>s.e(function(y,B,x,k){let R=x.imageManager.getPattern(y.from.toString()),G=x.imageManager.getPattern(y.to.toString()),{width:P,height:M}=x.imageManager.getPixelSize(),j=Math.pow(2,k.tileID.overscaledZ),et=k.tileSize*Math.pow(2,x.transform.tileZoom)/j,W=et*(k.tileID.canonical.x+k.tileID.wrap*j),X=et*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[P,M],u_mix:B.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/vi(k,1,x.transform.tileZoom),u_pixel_coord_upper:[W>>16,X>>16],u_pixel_coord_lower:[65535&W,65535&X]}}(h,f,a,g),{u_matrix:u,u_opacity:t}),il={fillExtrusion:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_lightpos:new s.aN(u,t.u_lightpos),u_lightintensity:new s.aI(u,t.u_lightintensity),u_lightcolor:new s.aN(u,t.u_lightcolor),u_vertical_gradient:new s.aI(u,t.u_vertical_gradient),u_opacity:new s.aI(u,t.u_opacity)}),fillExtrusionPattern:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_lightpos:new s.aN(u,t.u_lightpos),u_lightintensity:new s.aI(u,t.u_lightintensity),u_lightcolor:new s.aN(u,t.u_lightcolor),u_vertical_gradient:new s.aI(u,t.u_vertical_gradient),u_height_factor:new s.aI(u,t.u_height_factor),u_image:new s.aH(u,t.u_image),u_texsize:new s.aO(u,t.u_texsize),u_pixel_coord_upper:new s.aO(u,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(u,t.u_pixel_coord_lower),u_scale:new s.aN(u,t.u_scale),u_fade:new s.aI(u,t.u_fade),u_opacity:new s.aI(u,t.u_opacity)}),fill:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix)}),fillPattern:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_image:new s.aH(u,t.u_image),u_texsize:new s.aO(u,t.u_texsize),u_pixel_coord_upper:new s.aO(u,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(u,t.u_pixel_coord_lower),u_scale:new s.aN(u,t.u_scale),u_fade:new s.aI(u,t.u_fade)}),fillOutline:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_world:new s.aO(u,t.u_world)}),fillOutlinePattern:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_world:new s.aO(u,t.u_world),u_image:new s.aH(u,t.u_image),u_texsize:new s.aO(u,t.u_texsize),u_pixel_coord_upper:new s.aO(u,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(u,t.u_pixel_coord_lower),u_scale:new s.aN(u,t.u_scale),u_fade:new s.aI(u,t.u_fade)}),circle:(u,t)=>({u_camera_to_center_distance:new s.aI(u,t.u_camera_to_center_distance),u_scale_with_map:new s.aH(u,t.u_scale_with_map),u_pitch_with_map:new s.aH(u,t.u_pitch_with_map),u_extrude_scale:new s.aO(u,t.u_extrude_scale),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_matrix:new s.aJ(u,t.u_matrix)}),collisionBox:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_pixel_extrude_scale:new s.aO(u,t.u_pixel_extrude_scale)}),collisionCircle:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_inv_matrix:new s.aJ(u,t.u_inv_matrix),u_camera_to_center_distance:new s.aI(u,t.u_camera_to_center_distance),u_viewport_size:new s.aO(u,t.u_viewport_size)}),debug:(u,t)=>({u_color:new s.aL(u,t.u_color),u_matrix:new s.aJ(u,t.u_matrix),u_overlay:new s.aH(u,t.u_overlay),u_overlay_scale:new s.aI(u,t.u_overlay_scale)}),clippingMask:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix)}),heatmap:(u,t)=>({u_extrude_scale:new s.aI(u,t.u_extrude_scale),u_intensity:new s.aI(u,t.u_intensity),u_matrix:new s.aJ(u,t.u_matrix)}),heatmapTexture:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_world:new s.aO(u,t.u_world),u_image:new s.aH(u,t.u_image),u_color_ramp:new s.aH(u,t.u_color_ramp),u_opacity:new s.aI(u,t.u_opacity)}),hillshade:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_image:new s.aH(u,t.u_image),u_latrange:new s.aO(u,t.u_latrange),u_light:new s.aO(u,t.u_light),u_shadow:new s.aL(u,t.u_shadow),u_highlight:new s.aL(u,t.u_highlight),u_accent:new s.aL(u,t.u_accent)}),hillshadePrepare:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_image:new s.aH(u,t.u_image),u_dimension:new s.aO(u,t.u_dimension),u_zoom:new s.aI(u,t.u_zoom),u_unpack:new s.aK(u,t.u_unpack)}),line:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_ratio:new s.aI(u,t.u_ratio),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_units_to_pixels:new s.aO(u,t.u_units_to_pixels)}),lineGradient:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_ratio:new s.aI(u,t.u_ratio),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_units_to_pixels:new s.aO(u,t.u_units_to_pixels),u_image:new s.aH(u,t.u_image),u_image_height:new s.aI(u,t.u_image_height)}),linePattern:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_texsize:new s.aO(u,t.u_texsize),u_ratio:new s.aI(u,t.u_ratio),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_image:new s.aH(u,t.u_image),u_units_to_pixels:new s.aO(u,t.u_units_to_pixels),u_scale:new s.aN(u,t.u_scale),u_fade:new s.aI(u,t.u_fade)}),lineSDF:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_ratio:new s.aI(u,t.u_ratio),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_units_to_pixels:new s.aO(u,t.u_units_to_pixels),u_patternscale_a:new s.aO(u,t.u_patternscale_a),u_patternscale_b:new s.aO(u,t.u_patternscale_b),u_sdfgamma:new s.aI(u,t.u_sdfgamma),u_image:new s.aH(u,t.u_image),u_tex_y_a:new s.aI(u,t.u_tex_y_a),u_tex_y_b:new s.aI(u,t.u_tex_y_b),u_mix:new s.aI(u,t.u_mix)}),raster:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_tl_parent:new s.aO(u,t.u_tl_parent),u_scale_parent:new s.aI(u,t.u_scale_parent),u_buffer_scale:new s.aI(u,t.u_buffer_scale),u_fade_t:new s.aI(u,t.u_fade_t),u_opacity:new s.aI(u,t.u_opacity),u_image0:new s.aH(u,t.u_image0),u_image1:new s.aH(u,t.u_image1),u_brightness_low:new s.aI(u,t.u_brightness_low),u_brightness_high:new s.aI(u,t.u_brightness_high),u_saturation_factor:new s.aI(u,t.u_saturation_factor),u_contrast_factor:new s.aI(u,t.u_contrast_factor),u_spin_weights:new s.aN(u,t.u_spin_weights)}),symbolIcon:(u,t)=>({u_is_size_zoom_constant:new s.aH(u,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(u,t.u_is_size_feature_constant),u_size_t:new s.aI(u,t.u_size_t),u_size:new s.aI(u,t.u_size),u_camera_to_center_distance:new s.aI(u,t.u_camera_to_center_distance),u_pitch:new s.aI(u,t.u_pitch),u_rotate_symbol:new s.aH(u,t.u_rotate_symbol),u_aspect_ratio:new s.aI(u,t.u_aspect_ratio),u_fade_change:new s.aI(u,t.u_fade_change),u_matrix:new s.aJ(u,t.u_matrix),u_label_plane_matrix:new s.aJ(u,t.u_label_plane_matrix),u_coord_matrix:new s.aJ(u,t.u_coord_matrix),u_is_text:new s.aH(u,t.u_is_text),u_pitch_with_map:new s.aH(u,t.u_pitch_with_map),u_is_along_line:new s.aH(u,t.u_is_along_line),u_is_variable_anchor:new s.aH(u,t.u_is_variable_anchor),u_texsize:new s.aO(u,t.u_texsize),u_texture:new s.aH(u,t.u_texture),u_translation:new s.aO(u,t.u_translation),u_pitched_scale:new s.aI(u,t.u_pitched_scale)}),symbolSDF:(u,t)=>({u_is_size_zoom_constant:new s.aH(u,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(u,t.u_is_size_feature_constant),u_size_t:new s.aI(u,t.u_size_t),u_size:new s.aI(u,t.u_size),u_camera_to_center_distance:new s.aI(u,t.u_camera_to_center_distance),u_pitch:new s.aI(u,t.u_pitch),u_rotate_symbol:new s.aH(u,t.u_rotate_symbol),u_aspect_ratio:new s.aI(u,t.u_aspect_ratio),u_fade_change:new s.aI(u,t.u_fade_change),u_matrix:new s.aJ(u,t.u_matrix),u_label_plane_matrix:new s.aJ(u,t.u_label_plane_matrix),u_coord_matrix:new s.aJ(u,t.u_coord_matrix),u_is_text:new s.aH(u,t.u_is_text),u_pitch_with_map:new s.aH(u,t.u_pitch_with_map),u_is_along_line:new s.aH(u,t.u_is_along_line),u_is_variable_anchor:new s.aH(u,t.u_is_variable_anchor),u_texsize:new s.aO(u,t.u_texsize),u_texture:new s.aH(u,t.u_texture),u_gamma_scale:new s.aI(u,t.u_gamma_scale),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_is_halo:new s.aH(u,t.u_is_halo),u_translation:new s.aO(u,t.u_translation),u_pitched_scale:new s.aI(u,t.u_pitched_scale)}),symbolTextAndIcon:(u,t)=>({u_is_size_zoom_constant:new s.aH(u,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(u,t.u_is_size_feature_constant),u_size_t:new s.aI(u,t.u_size_t),u_size:new s.aI(u,t.u_size),u_camera_to_center_distance:new s.aI(u,t.u_camera_to_center_distance),u_pitch:new s.aI(u,t.u_pitch),u_rotate_symbol:new s.aH(u,t.u_rotate_symbol),u_aspect_ratio:new s.aI(u,t.u_aspect_ratio),u_fade_change:new s.aI(u,t.u_fade_change),u_matrix:new s.aJ(u,t.u_matrix),u_label_plane_matrix:new s.aJ(u,t.u_label_plane_matrix),u_coord_matrix:new s.aJ(u,t.u_coord_matrix),u_is_text:new s.aH(u,t.u_is_text),u_pitch_with_map:new s.aH(u,t.u_pitch_with_map),u_is_along_line:new s.aH(u,t.u_is_along_line),u_is_variable_anchor:new s.aH(u,t.u_is_variable_anchor),u_texsize:new s.aO(u,t.u_texsize),u_texsize_icon:new s.aO(u,t.u_texsize_icon),u_texture:new s.aH(u,t.u_texture),u_texture_icon:new s.aH(u,t.u_texture_icon),u_gamma_scale:new s.aI(u,t.u_gamma_scale),u_device_pixel_ratio:new s.aI(u,t.u_device_pixel_ratio),u_is_halo:new s.aH(u,t.u_is_halo),u_translation:new s.aO(u,t.u_translation),u_pitched_scale:new s.aI(u,t.u_pitched_scale)}),background:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_opacity:new s.aI(u,t.u_opacity),u_color:new s.aL(u,t.u_color)}),backgroundPattern:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_opacity:new s.aI(u,t.u_opacity),u_image:new s.aH(u,t.u_image),u_pattern_tl_a:new s.aO(u,t.u_pattern_tl_a),u_pattern_br_a:new s.aO(u,t.u_pattern_br_a),u_pattern_tl_b:new s.aO(u,t.u_pattern_tl_b),u_pattern_br_b:new s.aO(u,t.u_pattern_br_b),u_texsize:new s.aO(u,t.u_texsize),u_mix:new s.aI(u,t.u_mix),u_pattern_size_a:new s.aO(u,t.u_pattern_size_a),u_pattern_size_b:new s.aO(u,t.u_pattern_size_b),u_scale_a:new s.aI(u,t.u_scale_a),u_scale_b:new s.aI(u,t.u_scale_b),u_pixel_coord_upper:new s.aO(u,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(u,t.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(u,t.u_tile_units_to_pixels)}),terrain:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_texture:new s.aH(u,t.u_texture),u_ele_delta:new s.aI(u,t.u_ele_delta),u_fog_matrix:new s.aJ(u,t.u_fog_matrix),u_fog_color:new s.aL(u,t.u_fog_color),u_fog_ground_blend:new s.aI(u,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(u,t.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(u,t.u_horizon_color),u_horizon_fog_blend:new s.aI(u,t.u_horizon_fog_blend)}),terrainDepth:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_ele_delta:new s.aI(u,t.u_ele_delta)}),terrainCoords:(u,t)=>({u_matrix:new s.aJ(u,t.u_matrix),u_texture:new s.aH(u,t.u_texture),u_terrain_coords_id:new s.aI(u,t.u_terrain_coords_id),u_ele_delta:new s.aI(u,t.u_ele_delta)}),sky:(u,t)=>({u_sky_color:new s.aL(u,t.u_sky_color),u_horizon_color:new s.aL(u,t.u_horizon_color),u_horizon:new s.aI(u,t.u_horizon),u_sky_horizon_blend:new s.aI(u,t.u_sky_horizon_blend)})};class Gn{constructor(t,a,h){this.context=t;let g=t.gl;this.buffer=g.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){let a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let rl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class pa{constructor(t,a,h,g){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=g,this.context=t;let f=t.gl;this.buffer=f.createBuffer(),t.bindVertexBuffer.set(this.buffer),f.bufferData(f.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);let a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,a){for(let h=0;h<this.attributes.length;h++){let g=a.attributes[this.attributes[h].name];g!==void 0&&t.enableVertexAttribArray(g)}}setVertexAttribPointers(t,a,h){for(let g=0;g<this.attributes.length;g++){let f=this.attributes[g],y=a.attributes[f.name];y!==void 0&&t.vertexAttribPointer(y,f.components,t[rl[f.type]],!1,this.itemSize,f.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let xo=new WeakMap;function ro(u){var t;if(xo.has(u))return xo.get(u);{let a=(t=u.getParameter(u.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return xo.set(u,a),a}}class fr{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class La extends fr{getDefault(){return s.aM.transparent}set(t){let a=this.current;(t.r!==a.r||t.g!==a.g||t.b!==a.b||t.a!==a.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Jo extends fr{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Cs extends fr{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class kc extends fr{getDefault(){return[!0,!0,!0,!0]}set(t){let a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Xo extends fr{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class no extends fr{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class hA extends fr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){let a=this.current;(t.func!==a.func||t.ref!==a.ref||t.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Yo extends fr{getDefault(){let t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){let a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Zl extends fr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;t?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=t,this.dirty=!1}}class Ea extends fr{getDefault(){return[0,1]}set(t){let a=this.current;(t[0]!==a[0]||t[1]!==a[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Pl extends fr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;t?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=t,this.dirty=!1}}class gA extends fr{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class so extends fr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;t?a.enable(a.BLEND):a.disable(a.BLEND),this.current=t,this.dirty=!1}}class nl extends fr{getDefault(){let t=this.gl;return[t.ONE,t.ZERO]}set(t){let a=this.current;(t[0]!==a[0]||t[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class dA extends fr{getDefault(){return s.aM.transparent}set(t){let a=this.current;(t.r!==a.r||t.g!==a.g||t.b!==a.b||t.a!==a.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class pA extends fr{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class jo extends fr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;t?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=t,this.dirty=!1}}class Hl extends fr{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class fA extends fr{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class mA extends fr{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Ta extends fr{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class CA extends fr{getDefault(){let t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){let a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class qo extends fr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class IA extends fr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class T extends fr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.bindTexture(a.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class $ extends fr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class xt extends fr{getDefault(){return null}set(t){let a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Vt extends fr{getDefault(){return null}set(t){var a;if(t===this.current&&!this.dirty)return;let h=this.gl;ro(h)?h.bindVertexArray(t):(a=h.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class ae extends fr{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class ye extends fr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Pe extends fr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ai extends fr{constructor(t,a){super(t),this.context=t,this.parent=a}getDefault(){return null}}class Ri extends Ai{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Ki extends Ai{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class tr extends Ai{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class mr{constructor(t,a,h,g,f){this.context=t,this.width=a,this.height=h;let y=t.gl,B=this.framebuffer=y.createFramebuffer();if(this.colorAttachment=new Ri(t,B),g)this.depthAttachment=f?new tr(t,B):new Ki(t,B);else if(f)throw new Error("Stencil cannot be set without depth");if(y.checkFramebufferStatus(y.FRAMEBUFFER)!==y.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let t=this.context.gl,a=this.colorAttachment.get();if(a&&t.deleteTexture(a),this.depthAttachment){let h=this.depthAttachment.get();h&&t.deleteRenderbuffer(h)}t.deleteFramebuffer(this.framebuffer)}}class ji{constructor(t,a,h){this.blendFunction=t,this.blendColor=a,this.mask=h}}ji.Replace=[1,0],ji.disabled=new ji(ji.Replace,s.aM.transparent,[!1,!1,!1,!1]),ji.unblended=new ji(ji.Replace,s.aM.transparent,[!0,!0,!0,!0]),ji.alphaBlended=new ji([1,771],s.aM.transparent,[!0,!0,!0,!0]);class an{constructor(t){var a,h;if(this.gl=t,this.clearColor=new La(this),this.clearDepth=new Jo(this),this.clearStencil=new Cs(this),this.colorMask=new kc(this),this.depthMask=new Xo(this),this.stencilMask=new no(this),this.stencilFunc=new hA(this),this.stencilOp=new Yo(this),this.stencilTest=new Zl(this),this.depthRange=new Ea(this),this.depthTest=new Pl(this),this.depthFunc=new gA(this),this.blend=new so(this),this.blendFunc=new nl(this),this.blendColor=new dA(this),this.blendEquation=new pA(this),this.cullFace=new jo(this),this.cullFaceSide=new Hl(this),this.frontFace=new fA(this),this.program=new mA(this),this.activeTexture=new Ta(this),this.viewport=new CA(this),this.bindFramebuffer=new qo(this),this.bindRenderbuffer=new IA(this),this.bindTexture=new T(this),this.bindVertexBuffer=new $(this),this.bindElementBuffer=new xt(this),this.bindVertexArray=new Vt(this),this.pixelStoreUnpack=new ae(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new Pe(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ro(t)){this.HALF_FLOAT=t.HALF_FLOAT;let g=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=t.RGBA16F)!==null&&a!==void 0?a:g?.RGBA16F_EXT,this.RGB16F=(h=t.RGB16F)!==null&&h!==void 0?h:g?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");let g=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,a){return new Gn(this,t,a)}createVertexBuffer(t,a,h){return new pa(this,t,a,h)}createRenderbuffer(t,a,h){let g=this.gl,f=g.createRenderbuffer();return this.bindRenderbuffer.set(f),g.renderbufferStorage(g.RENDERBUFFER,t,a,h),this.bindRenderbuffer.set(null),f}createFramebuffer(t,a,h,g){return new mr(this,t,a,h,g)}clear({color:t,depth:a,stencil:h}){let g=this.gl,f=0;t&&(f|=g.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(f|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h!==void 0&&(f|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),g.clear(f)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){s.aE(t.blendFunction,ji.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ro(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var a;return ro(this.gl)?this.gl.deleteVertexArray(t):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class Bi{constructor(t,a,h){this.func=t,this.mask=a,this.range=h}}Bi.ReadOnly=!1,Bi.ReadWrite=!0,Bi.disabled=new Bi(519,Bi.ReadOnly,[0,1]);let fn=7680;class qi{constructor(t,a,h,g,f,y){this.test=t,this.ref=a,this.mask=h,this.fail=g,this.depthFail=f,this.pass=y}}qi.disabled=new qi({func:519,mask:0},0,0,fn,fn,fn);class Ar{constructor(t,a,h){this.enable=t,this.mode=a,this.frontFace=h}}let Cn;function Is(u,t,a,h,g){let f=u.context,y=f.gl,B=u.useProgram("collisionBox"),x=[],k=0,R=0;for(let X=0;X<h.length;X++){let ct=h[X],rt=t.getTile(ct).getBucket(a);if(!rt)continue;let ut=g?rt.textCollisionBox:rt.iconCollisionBox,Ft=rt.collisionCircleArray;if(Ft.length>0){let Qt=s.H();s.aQ(Qt,rt.placementInvProjMatrix,u.transform.glCoordMatrix),s.aQ(Qt,Qt,rt.placementViewportMatrix),x.push({circleArray:Ft,circleOffset:R,transform:ct.posMatrix,invTransform:Qt,coord:ct}),k+=Ft.length/4,R=k}ut&&B.draw(f,y.LINES,Bi.disabled,qi.disabled,u.colorModeForRenderPass(),Ar.disabled,{u_matrix:ct.posMatrix,u_pixel_extrude_scale:[1/(G=u.transform).width,1/G.height]},u.style.map.terrain&&u.style.map.terrain.getTerrainData(ct),a.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,null,u.transform.zoom,null,null,ut.collisionVertexBuffer)}var G;if(!g||!x.length)return;let P=u.useProgram("collisionCircle"),M=new s.aR;M.resize(4*k),M._trim();let j=0;for(let X of x)for(let ct=0;ct<X.circleArray.length/4;ct++){let rt=4*ct,ut=X.circleArray[rt+0],Ft=X.circleArray[rt+1],Qt=X.circleArray[rt+2],se=X.circleArray[rt+3];M.emplace(j++,ut,Ft,Qt,se,0),M.emplace(j++,ut,Ft,Qt,se,1),M.emplace(j++,ut,Ft,Qt,se,2),M.emplace(j++,ut,Ft,Qt,se,3)}(!Cn||Cn.length<2*k)&&(Cn=function(X){let ct=2*X,rt=new s.aT;rt.resize(ct),rt._trim();for(let ut=0;ut<ct;ut++){let Ft=6*ut;rt.uint16[Ft+0]=4*ut+0,rt.uint16[Ft+1]=4*ut+1,rt.uint16[Ft+2]=4*ut+2,rt.uint16[Ft+3]=4*ut+2,rt.uint16[Ft+4]=4*ut+3,rt.uint16[Ft+5]=4*ut+0}return rt}(k));let et=f.createIndexBuffer(Cn,!0),W=f.createVertexBuffer(M,s.aS.members,!0);for(let X of x){let ct=Fe(X.transform,X.invTransform,u.transform);P.draw(f,y.TRIANGLES,Bi.disabled,qi.disabled,u.colorModeForRenderPass(),Ar.disabled,ct,u.style.map.terrain&&u.style.map.terrain.getTerrainData(X.coord),a.id,W,et,s.a0.simpleSegment(0,2*X.circleOffset,X.circleArray.length,X.circleArray.length/2),null,u.transform.zoom,null,null,null)}W.destroy(),et.destroy()}Ar.disabled=new Ar(!1,1029,2305),Ar.backCCW=new Ar(!0,1029,2305);let fa=s.an(new Float32Array(16));function Ua(u,t,a,h,g,f){let{horizontalAlign:y,verticalAlign:B}=s.au(u);return new s.P((-(y-.5)*t/g+h[0])*f,(-(B-.5)*a/g+h[1])*f)}function oo(u,t,a,h,g,f){let y=t.tileAnchorPoint.add(new s.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let B=h.mult(f);a||(B=B.rotate(-g));let x=y.add(B);return It(x.x,x.y,t.labelPlaneMatrix,t.getElevation).point}if(a){let B=Ot(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(u),x=Math.atan(B.y/B.x)+(B.x<0?Math.PI:0);return u.add(h.rotate(x))}return u.add(h)}function ao(u,t,a,h,g,f,y,B,x,k,R,G,P,M){let j=u.text.placedSymbolArray,et=u.text.dynamicLayoutVertexArray,W=u.icon.dynamicLayoutVertexArray,X={};et.clear();for(let ct=0;ct<j.length;ct++){let rt=j.get(ct),ut=rt.hidden||!rt.crossTileID||u.allowVerticalPlacement&&!rt.placedOrientation?null:h[rt.crossTileID];if(ut){let Ft=new s.P(rt.anchorX,rt.anchorY),Qt={getElevation:M,width:g.width,height:g.height,labelPlaneMatrix:f,lineVertexArray:null,pitchWithMap:a,projection:R,projectionCache:null,tileAnchorPoint:Ft,translation:G,unwrappedTileID:P},se=a?It(Ft.x,Ft.y,y,M):Ot(Ft.x,Ft.y,Qt),oe=K(g.cameraToCenterDistance,se.signedDistanceFromCamera),xe=s.ai(u.textSizeData,x,rt)*oe/s.ap;a&&(xe*=u.tilePixelRatio/B);let{width:Ue,height:_e,anchor:Be,textOffset:De,textBoxScale:ri}=ut,ve=Ua(Be,Ue,_e,De,ri,xe),Ge=R.getPitchedTextCorrection(g,Ft.add(new s.P(G[0],G[1])),P),Ci=oo(se.point,Qt,t,ve,g.angle,Ge),Ji=u.allowVerticalPlacement&&rt.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Ui=0;Ui<rt.numGlyphs;Ui++)s.aj(et,Ci,Ji);k&&rt.associatedIconIndex>=0&&(X[rt.associatedIconIndex]={shiftedAnchor:Ci,angle:Ji})}else je(rt.numGlyphs,et)}if(k){W.clear();let ct=u.icon.placedSymbolArray;for(let rt=0;rt<ct.length;rt++){let ut=ct.get(rt);if(ut.hidden)je(ut.numGlyphs,W);else{let Ft=X[rt];if(Ft)for(let Qt=0;Qt<ut.numGlyphs;Qt++)s.aj(W,Ft.shiftedAnchor,Ft.angle);else je(ut.numGlyphs,W)}}u.icon.dynamicLayoutVertexBuffer.updateData(W)}u.text.dynamicLayoutVertexBuffer.updateData(et)}function Zn(u,t,a){return a.iconsInText&&t?"symbolTextAndIcon":u?"symbolSDF":"symbolIcon"}function Qa(u,t,a,h,g,f,y,B,x,k,R,G){let P=u.context,M=P.gl,j=u.transform,et=es(),W=B==="map",X=x==="map",ct=B!=="viewport"&&a.layout.get("symbol-placement")!=="point",rt=W&&!X&&!ct,ut=!X&&ct,Ft=!a.layout.get("symbol-sort-key").isConstant(),Qt=!1,se=u.depthModeForSublayer(0,Bi.ReadOnly),oe=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),xe=[],Ue=et.getCircleRadiusCorrection(j);for(let _e of h){let Be=t.getTile(_e),De=Be.getBucket(a);if(!De)continue;let ri=g?De.text:De.icon;if(!ri||!ri.segments.get().length||!ri.hasVisibleVertices)continue;let ve=ri.programConfigurations.get(a.id),Ge=g||De.sdfIcons,Ci=g?De.textSizeData:De.iconSizeData,Ji=X||j.pitch!==0,Ui=u.useProgram(Zn(Ge,g,De),ve),fi=s.ag(Ci,j.zoom),hr=u.style.map.terrain&&u.style.map.terrain.getTerrainData(_e),Lr,Er,er,Tr,Hr=[0,0],Dr=null;if(g)Er=Be.glyphAtlasTexture,er=M.LINEAR,Lr=Be.glyphAtlasTexture.size,De.iconsInText&&(Hr=Be.imageAtlasTexture.size,Dr=Be.imageAtlasTexture,Tr=Ji||u.options.rotating||u.options.zooming||Ci.kind==="composite"||Ci.kind==="camera"?M.LINEAR:M.NEAREST);else{let cr=a.layout.get("icon-size").constantOr(0)!==1||De.iconsNeedLinear;Er=Be.imageAtlasTexture,er=Ge||u.options.rotating||u.options.zooming||cr||Ji?M.LINEAR:M.NEAREST,Lr=Be.imageAtlasTexture.size}let Ir=vi(Be,1,u.transform.zoom),yn=ut?_e.posMatrix:fa,Hs=_r(yn,X,W,u.transform,Ir),ra=nr(yn,X,W,u.transform,Ir),ws=nr(_e.posMatrix,X,W,u.transform,Ir),Cr=et.translatePosition(u.transform,Be,f,y),TA=oe&&De.hasTextData(),Yl=a.layout.get("icon-text-fit")!=="none"&&TA&&De.hasIconData();if(ct){let cr=u.style.map.terrain?(Da,na)=>u.style.map.terrain.getElevation(_e,Da,na):null,Mo=a.layout.get("text-rotation-alignment")==="map";it(De,_e.posMatrix,u,g,Hs,ws,X,k,Mo,et,_e.toUnwrapped(),j.width,j.height,Cr,cr)}let Bs=_e.posMatrix,qn=g&&oe||Yl,Ms=ct||qn?fa:Hs,as=ra,Rr=Ge&&a.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,An;An=Ge?De.iconsInText?ka(Ci.kind,fi,rt,X,ct,qn,u,Bs,Ms,as,Cr,Lr,Hr,Ue):Fa(Ci.kind,fi,rt,X,ct,qn,u,Bs,Ms,as,Cr,g,Lr,!0,Ue):Gl(Ci.kind,fi,rt,X,ct,qn,u,Bs,Ms,as,Cr,g,Lr,Ue);let bn={program:Ui,buffers:ri,uniformValues:An,atlasTexture:Er,atlasTextureIcon:Dr,atlasInterpolation:er,atlasInterpolationIcon:Tr,isSDF:Ge,hasHalo:Rr};if(Ft&&De.canOverlap){Qt=!0;let cr=ri.segments.get();for(let Mo of cr)xe.push({segments:new s.a0([Mo]),sortKey:Mo.sortKey,state:bn,terrainData:hr})}else xe.push({segments:ri.segments,sortKey:0,state:bn,terrainData:hr})}Qt&&xe.sort((_e,Be)=>_e.sortKey-Be.sortKey);for(let _e of xe){let Be=_e.state;if(P.activeTexture.set(M.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,M.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(P.activeTexture.set(M.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,M.CLAMP_TO_EDGE)),Be.isSDF){let De=Be.uniformValues;Be.hasHalo&&(De.u_is_halo=1,ma(Be.buffers,_e.segments,a,u,Be.program,se,R,G,De,_e.terrainData)),De.u_is_halo=0}ma(Be.buffers,_e.segments,a,u,Be.program,se,R,G,Be.uniformValues,_e.terrainData)}}function ma(u,t,a,h,g,f,y,B,x,k){let R=h.context;g.draw(R,R.gl.TRIANGLES,f,y,B,Ar.disabled,x,k,a.id,u.layoutVertexBuffer,u.indexBuffer,t,a.paint,h.transform.zoom,u.programConfigurations.get(a.id),u.dynamicLayoutVertexBuffer,u.opacityVertexBuffer)}function Pn(u,t,a,h){let g=u.context,f=g.gl,y=qi.disabled,B=new ji([f.ONE,f.ONE],s.aM.transparent,[!0,!0,!0,!0]),x=t.getBucket(a);if(!x)return;let k=h.key,R=a.heatmapFbos.get(k);R||(R=So(g,t.tileSize,t.tileSize),a.heatmapFbos.set(k,R)),g.bindFramebuffer.set(R.framebuffer),g.viewport.set([0,0,t.tileSize,t.tileSize]),g.clear({color:s.aM.transparent});let G=x.programConfigurations.get(a.id),P=u.useProgram("heatmap",G),M=u.style.map.terrain.getTerrainData(h);P.draw(g,f.TRIANGLES,Bi.disabled,y,B,Ar.disabled,wi(h.posMatrix,t,u.transform.zoom,a.paint.get("heatmap-intensity")),M,a.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,a.paint,u.transform.zoom,G)}function Ls(u,t,a){let h=u.context,g=h.gl;h.setColorMode(u.colorModeForRenderPass());let f=Fo(h,t),y=a.key,B=t.heatmapFbos.get(y);B&&(h.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.colorAttachment.get()),h.activeTexture.set(g.TEXTURE1),f.bind(g.LINEAR,g.CLAMP_TO_EDGE),u.useProgram("heatmapTexture").draw(h,g.TRIANGLES,Bi.disabled,qi.disabled,u.colorModeForRenderPass(),Ar.disabled,ar(u,t,0,1),null,t.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments,t.paint,u.transform.zoom),B.destroy(),t.heatmapFbos.delete(y))}function So(u,t,a){var h,g;let f=u.gl,y=f.createTexture();f.bindTexture(f.TEXTURE_2D,y),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);let B=(h=u.HALF_FLOAT)!==null&&h!==void 0?h:f.UNSIGNED_BYTE,x=(g=u.RGBA16F)!==null&&g!==void 0?g:f.RGBA;f.texImage2D(f.TEXTURE_2D,0,x,t,a,0,f.RGBA,B,null);let k=u.createFramebuffer(t,a,!1,!1);return k.colorAttachment.set(y),k}function Fo(u,t){return t.colorRampTexture||(t.colorRampTexture=new Mt(u,t.colorRamp,u.gl.RGBA)),t.colorRampTexture}function ko(u,t,a,h,g){if(!a||!h||!h.imageAtlas)return;let f=h.imageAtlas.patternPositions,y=f[a.to.toString()],B=f[a.from.toString()];if(!y&&B&&(y=B),!B&&y&&(B=y),!y||!B){let x=g.getPaintProperty(t);y=f[x],B=f[x]}y&&B&&u.setConstantPatternPositions(y,B)}function In(u,t,a,h,g,f,y){let B=u.context.gl,x="fill-pattern",k=a.paint.get(x),R=k&&k.constantOr(1),G=a.getCrossfadeParameters(),P,M,j,et,W;y?(M=R&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",P=B.LINES):(M=R?"fillPattern":"fill",P=B.TRIANGLES);let X=k.constantOr(null);for(let ct of h){let rt=t.getTile(ct);if(R&&!rt.patternsLoaded())continue;let ut=rt.getBucket(a);if(!ut)continue;let Ft=ut.programConfigurations.get(a.id),Qt=u.useProgram(M,Ft),se=u.style.map.terrain&&u.style.map.terrain.getTerrainData(ct);R&&(u.context.activeTexture.set(B.TEXTURE0),rt.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ft.updatePaintBuffers(G)),ko(Ft,x,X,rt,a);let oe=se?ct:null,xe=u.translatePosMatrix(oe?oe.posMatrix:ct.posMatrix,rt,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(y){et=ut.indexBuffer2,W=ut.segments2;let Ue=[B.drawingBufferWidth,B.drawingBufferHeight];j=M==="fillOutlinePattern"&&R?ki(xe,u,G,rt,Ue):Li(xe,Ue)}else et=ut.indexBuffer,W=ut.segments,j=R?Te(xe,u,G,rt):Ce(xe);Qt.draw(u.context,P,g,u.stencilModeForClipping(ct),f,Ar.disabled,j,se,a.id,ut.layoutVertexBuffer,et,W,a.paint,u.transform.zoom,Ft)}}function yA(u,t,a,h,g,f,y){let B=u.context,x=B.gl,k="fill-extrusion-pattern",R=a.paint.get(k),G=R.constantOr(1),P=a.getCrossfadeParameters(),M=a.paint.get("fill-extrusion-opacity"),j=R.constantOr(null);for(let et of h){let W=t.getTile(et),X=W.getBucket(a);if(!X)continue;let ct=u.style.map.terrain&&u.style.map.terrain.getTerrainData(et),rt=X.programConfigurations.get(a.id),ut=u.useProgram(G?"fillExtrusionPattern":"fillExtrusion",rt);G&&(u.context.activeTexture.set(x.TEXTURE0),W.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),rt.updatePaintBuffers(P)),ko(rt,k,j,W,a);let Ft=u.translatePosMatrix(et.posMatrix,W,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Qt=a.paint.get("fill-extrusion-vertical-gradient"),se=G?fe(Ft,u,Qt,M,et,P,W):$t(Ft,u,Qt,M);ut.draw(B,B.gl.TRIANGLES,g,f,y,Ar.backCCW,se,ct,a.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,a.paint,u.transform.zoom,rt,u.style.map.terrain&&X.centroidVertexBuffer)}}function Lo(u,t,a,h,g,f,y){let B=u.context,x=B.gl,k=a.fbo;if(!k)return;let R=u.useProgram("hillshade"),G=u.style.map.terrain&&u.style.map.terrain.getTerrainData(t);B.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,k.colorAttachment.get()),R.draw(B,x.TRIANGLES,g,f,y,Ar.disabled,((P,M,j,et)=>{let W=j.paint.get("hillshade-shadow-color"),X=j.paint.get("hillshade-highlight-color"),ct=j.paint.get("hillshade-accent-color"),rt=j.paint.get("hillshade-illumination-direction")*(Math.PI/180);j.paint.get("hillshade-illumination-anchor")==="viewport"&&(rt-=P.transform.angle);let ut=!P.options.moving;return{u_matrix:et?et.posMatrix:P.transform.calculatePosMatrix(M.tileID.toUnwrapped(),ut),u_image:0,u_latrange:si(0,M.tileID),u_light:[j.paint.get("hillshade-exaggeration"),rt],u_shadow:W,u_highlight:X,u_accent:ct}})(u,a,h,G?t:null),G,h.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments)}function $o(u,t,a,h,g,f){let y=u.context,B=y.gl,x=t.dem;if(x&&x.data){let k=x.dim,R=x.stride,G=x.getPixels();if(y.activeTexture.set(B.TEXTURE1),y.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||u.getTileTexture(R),t.demTexture){let M=t.demTexture;M.update(G,{premultiply:!1}),M.bind(B.NEAREST,B.CLAMP_TO_EDGE)}else t.demTexture=new Mt(y,G,B.RGBA,{premultiply:!1}),t.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);y.activeTexture.set(B.TEXTURE0);let P=t.fbo;if(!P){let M=new Mt(y,{width:k,height:k,data:null},B.RGBA);M.bind(B.LINEAR,B.CLAMP_TO_EDGE),P=t.fbo=y.createFramebuffer(k,k,!0,!1),P.colorAttachment.set(M.texture)}y.bindFramebuffer.set(P.framebuffer),y.viewport.set([0,0,k,k]),u.useProgram("hillshadePrepare").draw(y,B.TRIANGLES,h,g,f,Ar.disabled,((M,j)=>{let et=j.stride,W=s.H();return s.aP(W,0,s.X,-s.X,0,0,1),s.J(W,W,[0,-s.X,0]),{u_matrix:W,u_image:1,u_dimension:[et,et],u_zoom:M.overscaledZ,u_unpack:j.getUnpackVector()}})(t.tileID,x),null,a.id,u.rasterBoundsBuffer,u.quadTriangleIndexBuffer,u.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Es(u,t,a,h,g,f){let y=h.paint.get("raster-fade-duration");if(!f&&y>0){let B=w.now(),x=(B-u.timeAdded)/y,k=t?(B-t.timeAdded)/y:-1,R=a.getSource(),G=g.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),P=!t||Math.abs(t.tileID.overscaledZ-G)>Math.abs(u.tileID.overscaledZ-G),M=P&&u.refreshedUponExpiration?1:s.ac(P?x:1-k,0,1);return u.refreshedUponExpiration&&x>=1&&(u.refreshedUponExpiration=!1),t?{opacity:1,mix:1-M}:{opacity:M,mix:0}}return{opacity:1,mix:0}}let Ra=new s.aM(1,0,0,1),gr=new s.aM(0,1,0,1),bA=new s.aM(0,0,1,1),Ca=new s.aM(1,0,1,1),ys=new s.aM(0,1,1,1);function Hn(u,t,a,h){bs(u,0,t+a/2,u.transform.width,a,h)}function ta(u,t,a,h){bs(u,t-a/2,0,a,u.transform.height,h)}function bs(u,t,a,h,g,f){let y=u.context,B=y.gl;B.enable(B.SCISSOR_TEST),B.scissor(t*u.pixelRatio,a*u.pixelRatio,h*u.pixelRatio,g*u.pixelRatio),y.clear({color:f}),B.disable(B.SCISSOR_TEST)}function Eo(u,t,a){let h=u.context,g=h.gl,f=a.posMatrix,y=u.useProgram("debug"),B=Bi.disabled,x=qi.disabled,k=u.colorModeForRenderPass(),R="$debug",G=u.style.map.terrain&&u.style.map.terrain.getTerrainData(a);h.activeTexture.set(g.TEXTURE0);let P=t.getTileByID(a.key).latestRawTileData,M=Math.floor((P&&P.byteLength||0)/1024),j=t.getTile(a).tileSize,et=512/Math.min(j,512)*(a.overscaledZ/u.transform.zoom)*.5,W=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(W+=` => ${a.overscaledZ}`),function(X,ct){X.initDebugOverlayCanvas();let rt=X.debugOverlayCanvas,ut=X.context.gl,Ft=X.debugOverlayCanvas.getContext("2d");Ft.clearRect(0,0,rt.width,rt.height),Ft.shadowColor="white",Ft.shadowBlur=2,Ft.lineWidth=1.5,Ft.strokeStyle="white",Ft.textBaseline="top",Ft.font="bold 36px Open Sans, sans-serif",Ft.fillText(ct,5,5),Ft.strokeText(ct,5,5),X.debugOverlayTexture.update(rt),X.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(u,`${W} ${M}kB`),y.draw(h,g.TRIANGLES,B,x,ji.alphaBlended,Ar.disabled,ii(f,s.aM.transparent,et),null,R,u.debugBuffer,u.quadTriangleIndexBuffer,u.debugSegments),y.draw(h,g.LINE_STRIP,B,x,k,Ar.disabled,ii(f,s.aM.red),G,R,u.debugBuffer,u.tileBorderIndexBuffer,u.debugSegments)}function Ga(u,t,a){let h=u.context,g=h.gl,f=u.colorModeForRenderPass(),y=new Bi(g.LEQUAL,Bi.ReadWrite,u.depthRangeFor3D),B=u.useProgram("terrain"),x=t.getTerrainMesh();h.bindFramebuffer.set(null),h.viewport.set([0,0,u.width,u.height]);for(let k of a){let R=u.renderToTexture.getTexture(k),G=t.getTerrainData(k.tileID);h.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,R.texture);let P=u.transform.calculatePosMatrix(k.tileID.toUnwrapped()),M=t.getMeshFrameDelta(u.transform.zoom),j=u.transform.calculateFogMatrix(k.tileID.toUnwrapped()),et=ee(P,M,j,u.style.sky,u.transform.pitch);B.draw(h,g.TRIANGLES,y,qi.disabled,f,Ar.backCCW,et,G,"terrain",x.vertexBuffer,x.indexBuffer,x.segments)}}class rs{constructor(t,a,h){this.vertexBuffer=t,this.indexBuffer=a,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ea{constructor(t,a){this.context=new an(t),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wo}resize(t,a,h){if(this.width=Math.floor(t*h),this.height=Math.floor(a*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let g of this.style._order)this.style._layers[g].resize()}setup(){let t=this.context,a=new s.aX;a.emplaceBack(0,0),a.emplaceBack(s.X,0),a.emplaceBack(0,s.X),a.emplaceBack(s.X,s.X),this.tileExtentBuffer=t.createVertexBuffer(a,At.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);let h=new s.aX;h.emplaceBack(0,0),h.emplaceBack(s.X,0),h.emplaceBack(0,s.X),h.emplaceBack(s.X,s.X),this.debugBuffer=t.createVertexBuffer(h,At.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);let g=new s.$;g.emplaceBack(0,0,0,0),g.emplaceBack(s.X,0,s.X,0),g.emplaceBack(0,s.X,0,s.X),g.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=t.createVertexBuffer(g,He.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);let f=new s.aX;f.emplaceBack(0,0),f.emplaceBack(1,0),f.emplaceBack(0,1),f.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(f,At.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);let y=new s.aZ;y.emplaceBack(0),y.emplaceBack(1),y.emplaceBack(3),y.emplaceBack(2),y.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(y);let B=new s.aY;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(B);let x=this.context.gl;this.stencilClearMode=new qi({func:x.ALWAYS,mask:0},0,255,x.ZERO,x.ZERO,x.ZERO)}clearStencil(){let t=this.context,a=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let h=s.H();s.aP(h,0,this.width,this.height,0,0,1),s.K(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,a.TRIANGLES,Bi.disabled,this.stencilClearMode,ji.disabled,Ar.disabled,ai(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,a){if(this.currentStencilSource===t.source||!t.isTileClipped()||!a||!a.length)return;this.currentStencilSource=t.source;let h=this.context,g=h.gl;this.nextStencilID+a.length>256&&this.clearStencil(),h.setColorMode(ji.disabled),h.setDepthMode(Bi.disabled);let f=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let y of a){let B=this._tileClippingMaskIDs[y.key]=this.nextStencilID++,x=this.style.map.terrain&&this.style.map.terrain.getTerrainData(y);f.draw(h,g.TRIANGLES,Bi.disabled,new qi({func:g.ALWAYS,mask:0},B,255,g.KEEP,g.KEEP,g.REPLACE),ji.disabled,Ar.disabled,ai(y.posMatrix),x,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let t=this.nextStencilID++,a=this.context.gl;return new qi({func:a.NOTEQUAL,mask:255},t,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(t){let a=this.context.gl;return new qi({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(t){let a=this.context.gl,h=t.sort((y,B)=>B.overscaledZ-y.overscaledZ),g=h[h.length-1].overscaledZ,f=h[0].overscaledZ-g+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();let y={};for(let B=0;B<f;B++)y[B+g]=new qi({func:a.GEQUAL,mask:255},B+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=f,[y,h]}return[{[g]:qi.disabled},h]}colorModeForRenderPass(){let t=this.context.gl;return this._showOverdrawInspector?new ji([t.CONSTANT_COLOR,t.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ji.unblended:ji.alphaBlended}depthModeForSublayer(t,a,h){if(!this.opaquePassEnabledForLayer())return Bi.disabled;let g=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Bi(h||this.context.gl.LEQUAL,a,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,a){this.style=t,this.options=a,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();let h=this.style._order,g=this.style.sourceCaches,f={},y={},B={};for(let x in g){let k=g[x];k.used&&k.prepare(this.context),f[x]=k.getVisibleCoordinates(),y[x]=f[x].slice().reverse(),B[x]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let x=0;x<h.length;x++)if(this.style._layers[h[x]].is3D()){this.opaquePassCutoff=x;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let x of h){let k=this.style._layers[x];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;let R=y[k.source];(k.type==="custom"||R.length)&&this.renderLayer(this,g[k.source],k,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(x,k){let R=x.context,G=R.gl,P=((X,ct,rt)=>({u_sky_color:X.properties.get("sky-color"),u_horizon_color:X.properties.get("horizon-color"),u_horizon:(ct.height/2+ct.getHorizon())*rt,u_sky_horizon_blend:X.properties.get("sky-horizon-blend")*ct.height/2*rt}))(k,x.style.map.transform,x.pixelRatio),M=new Bi(G.LEQUAL,Bi.ReadWrite,[0,1]),j=qi.disabled,et=x.colorModeForRenderPass(),W=x.useProgram("sky");if(!k.mesh){let X=new s.aX;X.emplaceBack(-1,-1),X.emplaceBack(1,-1),X.emplaceBack(1,1),X.emplaceBack(-1,1);let ct=new s.aY;ct.emplaceBack(0,1,2),ct.emplaceBack(0,2,3),k.mesh=new rs(R.createVertexBuffer(X,At.members),R.createIndexBuffer(ct),s.a0.simpleSegment(0,0,X.length,ct.length))}W.draw(R,G.TRIANGLES,M,j,et,Ar.disabled,P,void 0,"sky",k.mesh.vertexBuffer,k.mesh.indexBuffer,k.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){let x=this.style._layers[h[this.currentLayer]],k=g[x.source],R=f[x.source];this._renderTileClippingMasks(x,R),this.renderLayer(this,k,x,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){let x=this.style._layers[h[this.currentLayer]],k=g[x.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(x))continue;let R=(x.type==="symbol"?B:y)[x.source];this._renderTileClippingMasks(x,f[x.source]),this.renderLayer(this,k,x,R)}if(this.options.showTileBoundaries){let x=function(k,R){let G=null,P=Object.values(k._layers).flatMap(W=>W.source&&!W.isHidden(R)?[k.sourceCaches[W.source]]:[]),M=P.filter(W=>W.getSource().type==="vector"),j=P.filter(W=>W.getSource().type!=="vector"),et=W=>{(!G||G.getSource().maxzoom<W.getSource().maxzoom)&&(G=W)};return M.forEach(W=>et(W)),G||j.forEach(W=>et(W)),G}(this.style,this.transform.zoom);x&&function(k,R,G){for(let P=0;P<G.length;P++)Eo(k,R,G[P])}(this,x,x.getVisibleCoordinates())}this.options.showPadding&&function(x){let k=x.transform.padding;Hn(x,x.transform.height-(k.top||0),3,Ra),Hn(x,k.bottom||0,3,gr),ta(x,k.left||0,3,bA),ta(x,x.transform.width-(k.right||0),3,Ca);let R=x.transform.centerPoint;(function(G,P,M,j){bs(G,P-1,M-10,2,20,j),bs(G,P-10,M-1,20,2,j)})(x,R.x,x.transform.height-R.y,ys)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;let a=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix,g=this.terrainFacilitator.dirty;g||(g=t?!s.a_(a,h):!s.a$(a,h)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(s.b0(a,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(f,y){let B=f.context,x=B.gl,k=ji.unblended,R=new Bi(x.LEQUAL,Bi.ReadWrite,[0,1]),G=y.getTerrainMesh(),P=y.sourceCache.getRenderableTiles(),M=f.useProgram("terrainDepth");B.bindFramebuffer.set(y.getFramebuffer("depth").framebuffer),B.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),B.clear({color:s.aM.transparent,depth:1});for(let j of P){let et=y.getTerrainData(j.tileID),W={u_matrix:f.transform.calculatePosMatrix(j.tileID.toUnwrapped()),u_ele_delta:y.getMeshFrameDelta(f.transform.zoom)};M.draw(B,x.TRIANGLES,R,qi.disabled,k,Ar.backCCW,W,et,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}B.bindFramebuffer.set(null),B.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain),function(f,y){let B=f.context,x=B.gl,k=ji.unblended,R=new Bi(x.LEQUAL,Bi.ReadWrite,[0,1]),G=y.getTerrainMesh(),P=y.getCoordsTexture(),M=y.sourceCache.getRenderableTiles(),j=f.useProgram("terrainCoords");B.bindFramebuffer.set(y.getFramebuffer("coords").framebuffer),B.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),B.clear({color:s.aM.transparent,depth:1}),y.coordsIndex=[];for(let et of M){let W=y.getTerrainData(et.tileID);B.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,P.texture);let X={u_matrix:f.transform.calculatePosMatrix(et.tileID.toUnwrapped()),u_terrain_coords_id:(255-y.coordsIndex.length)/255,u_texture:0,u_ele_delta:y.getMeshFrameDelta(f.transform.zoom)};j.draw(B,x.TRIANGLES,R,qi.disabled,k,Ar.backCCW,X,W,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),y.coordsIndex.push(et.tileID.key)}B.bindFramebuffer.set(null),B.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain))}renderLayer(t,a,h,g){if(!h.isHidden(this.transform.zoom)&&(h.type==="background"||h.type==="custom"||(g||[]).length))switch(this.id=h.id,h.type){case"symbol":(function(f,y,B,x,k){if(f.renderPass!=="translucent")return;let R=qi.disabled,G=f.colorModeForRenderPass();(B._unevaluatedLayout.hasValue("text-variable-anchor")||B._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(P,M,j,et,W,X,ct,rt,ut){let Ft=M.transform,Qt=es(),se=W==="map",oe=X==="map";for(let xe of P){let Ue=et.getTile(xe),_e=Ue.getBucket(j);if(!_e||!_e.text||!_e.text.segments.get().length)continue;let Be=s.ag(_e.textSizeData,Ft.zoom),De=vi(Ue,1,M.transform.zoom),ri=_r(xe.posMatrix,oe,se,M.transform,De),ve=j.layout.get("icon-text-fit")!=="none"&&_e.hasIconData();if(Be){let Ge=Math.pow(2,Ft.zoom-Ue.tileID.overscaledZ),Ci=M.style.map.terrain?(Ui,fi)=>M.style.map.terrain.getElevation(xe,Ui,fi):null,Ji=Qt.translatePosition(Ft,Ue,ct,rt);ao(_e,se,oe,ut,Ft,ri,xe.posMatrix,Ge,Be,ve,Qt,Ji,xe.toUnwrapped(),Ci)}}}(x,f,B,y,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),k),B.paint.get("icon-opacity").constantOr(1)!==0&&Qa(f,y,B,x,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),R,G),B.paint.get("text-opacity").constantOr(1)!==0&&Qa(f,y,B,x,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),R,G),y.map.showCollisionBoxes&&(Is(f,y,B,x,!0),Is(f,y,B,x,!1))})(t,a,h,g,this.style.placement.variableOffsets);break;case"circle":(function(f,y,B,x){if(f.renderPass!=="translucent")return;let k=B.paint.get("circle-opacity"),R=B.paint.get("circle-stroke-width"),G=B.paint.get("circle-stroke-opacity"),P=!B.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(R.constantOr(1)===0||G.constantOr(1)===0))return;let M=f.context,j=M.gl,et=f.depthModeForSublayer(0,Bi.ReadOnly),W=qi.disabled,X=f.colorModeForRenderPass(),ct=[];for(let rt=0;rt<x.length;rt++){let ut=x[rt],Ft=y.getTile(ut),Qt=Ft.getBucket(B);if(!Qt)continue;let se=Qt.programConfigurations.get(B.id),oe=f.useProgram("circle",se),xe=Qt.layoutVertexBuffer,Ue=Qt.indexBuffer,_e=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ut),Be={programConfiguration:se,program:oe,layoutVertexBuffer:xe,indexBuffer:Ue,uniformValues:Ze(f,ut,Ft,B),terrainData:_e};if(P){let De=Qt.segments.get();for(let ri of De)ct.push({segments:new s.a0([ri]),sortKey:ri.sortKey,state:Be})}else ct.push({segments:Qt.segments,sortKey:0,state:Be})}P&&ct.sort((rt,ut)=>rt.sortKey-ut.sortKey);for(let rt of ct){let{programConfiguration:ut,program:Ft,layoutVertexBuffer:Qt,indexBuffer:se,uniformValues:oe,terrainData:xe}=rt.state;Ft.draw(M,j.TRIANGLES,et,W,X,Ar.disabled,oe,xe,B.id,Qt,se,rt.segments,B.paint,f.transform.zoom,ut)}})(t,a,h,g);break;case"heatmap":(function(f,y,B,x){if(B.paint.get("heatmap-opacity")===0)return;let k=f.context;if(f.style.map.terrain){for(let R of x){let G=y.getTile(R);y.hasRenderableParent(R)||(f.renderPass==="offscreen"?Pn(f,G,B,R):f.renderPass==="translucent"&&Ls(f,B,R))}k.viewport.set([0,0,f.width,f.height])}else f.renderPass==="offscreen"?function(R,G,P,M){let j=R.context,et=j.gl,W=qi.disabled,X=new ji([et.ONE,et.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(ct,rt,ut){let Ft=ct.gl;ct.activeTexture.set(Ft.TEXTURE1),ct.viewport.set([0,0,rt.width/4,rt.height/4]);let Qt=ut.heatmapFbos.get(s.aU);Qt?(Ft.bindTexture(Ft.TEXTURE_2D,Qt.colorAttachment.get()),ct.bindFramebuffer.set(Qt.framebuffer)):(Qt=So(ct,rt.width/4,rt.height/4),ut.heatmapFbos.set(s.aU,Qt))})(j,R,P),j.clear({color:s.aM.transparent});for(let ct=0;ct<M.length;ct++){let rt=M[ct];if(G.hasRenderableParent(rt))continue;let ut=G.getTile(rt),Ft=ut.getBucket(P);if(!Ft)continue;let Qt=Ft.programConfigurations.get(P.id),se=R.useProgram("heatmap",Qt),{zoom:oe}=R.transform;se.draw(j,et.TRIANGLES,Bi.disabled,W,X,Ar.disabled,wi(rt.posMatrix,ut,oe,P.paint.get("heatmap-intensity")),null,P.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,P.paint,R.transform.zoom,Qt)}j.viewport.set([0,0,R.width,R.height])}(f,y,B,x):f.renderPass==="translucent"&&function(R,G){let P=R.context,M=P.gl;P.setColorMode(R.colorModeForRenderPass());let j=G.heatmapFbos.get(s.aU);j&&(P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,j.colorAttachment.get()),P.activeTexture.set(M.TEXTURE1),Fo(P,G).bind(M.LINEAR,M.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(P,M.TRIANGLES,Bi.disabled,qi.disabled,R.colorModeForRenderPass(),Ar.disabled,ar(R,G,0,1),null,G.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,G.paint,R.transform.zoom))}(f,B)})(t,a,h,g);break;case"line":(function(f,y,B,x){if(f.renderPass!=="translucent")return;let k=B.paint.get("line-opacity"),R=B.paint.get("line-width");if(k.constantOr(1)===0||R.constantOr(1)===0)return;let G=f.depthModeForSublayer(0,Bi.ReadOnly),P=f.colorModeForRenderPass(),M=B.paint.get("line-dasharray"),j=B.paint.get("line-pattern"),et=j.constantOr(1),W=B.paint.get("line-gradient"),X=B.getCrossfadeParameters(),ct=et?"linePattern":M?"lineSDF":W?"lineGradient":"line",rt=f.context,ut=rt.gl,Ft=!0;for(let Qt of x){let se=y.getTile(Qt);if(et&&!se.patternsLoaded())continue;let oe=se.getBucket(B);if(!oe)continue;let xe=oe.programConfigurations.get(B.id),Ue=f.context.program.get(),_e=f.useProgram(ct,xe),Be=Ft||_e.program!==Ue,De=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Qt),ri=j.constantOr(null);if(ri&&se.imageAtlas){let Ci=se.imageAtlas,Ji=Ci.patternPositions[ri.to.toString()],Ui=Ci.patternPositions[ri.from.toString()];Ji&&Ui&&xe.setConstantPatternPositions(Ji,Ui)}let ve=De?Qt:null,Ge=et?Br(f,se,B,X,ve):M?ms(f,se,B,M,X,ve):W?nn(f,se,B,oe.lineClipsArray.length,ve):vr(f,se,B,ve);if(et)rt.activeTexture.set(ut.TEXTURE0),se.imageAtlasTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),xe.updatePaintBuffers(X);else if(M&&(Be||f.lineAtlas.dirty))rt.activeTexture.set(ut.TEXTURE0),f.lineAtlas.bind(rt);else if(W){let Ci=oe.gradients[B.id],Ji=Ci.texture;if(B.gradientVersion!==Ci.version){let Ui=256;if(B.stepInterpolant){let fi=y.getSource().maxzoom,hr=Qt.canonical.z===fi?Math.ceil(1<<f.transform.maxZoom-Qt.canonical.z):1;Ui=s.ac(s.aV(oe.maxLineLength/s.X*1024*hr),256,rt.maxTextureSize)}Ci.gradient=s.aW({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:Ui,image:Ci.gradient||void 0,clips:oe.lineClipsArray}),Ci.texture?Ci.texture.update(Ci.gradient):Ci.texture=new Mt(rt,Ci.gradient,ut.RGBA),Ci.version=B.gradientVersion,Ji=Ci.texture}rt.activeTexture.set(ut.TEXTURE0),Ji.bind(B.stepInterpolant?ut.NEAREST:ut.LINEAR,ut.CLAMP_TO_EDGE)}_e.draw(rt,ut.TRIANGLES,G,f.stencilModeForClipping(Qt),P,Ar.disabled,Ge,De,B.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,B.paint,f.transform.zoom,xe,oe.layoutVertexBuffer2),Ft=!1}})(t,a,h,g);break;case"fill":(function(f,y,B,x){let k=B.paint.get("fill-color"),R=B.paint.get("fill-opacity");if(R.constantOr(1)===0)return;let G=f.colorModeForRenderPass(),P=B.paint.get("fill-pattern"),M=f.opaquePassEnabledForLayer()&&!P.constantOr(1)&&k.constantOr(s.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===M){let j=f.depthModeForSublayer(1,f.renderPass==="opaque"?Bi.ReadWrite:Bi.ReadOnly);In(f,y,B,x,j,G,!1)}if(f.renderPass==="translucent"&&B.paint.get("fill-antialias")){let j=f.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,Bi.ReadOnly);In(f,y,B,x,j,G,!0)}})(t,a,h,g);break;case"fill-extrusion":(function(f,y,B,x){let k=B.paint.get("fill-extrusion-opacity");if(k!==0&&f.renderPass==="translucent"){let R=new Bi(f.context.gl.LEQUAL,Bi.ReadWrite,f.depthRangeFor3D);if(k!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))yA(f,y,B,x,R,qi.disabled,ji.disabled),yA(f,y,B,x,R,f.stencilModeFor3D(),f.colorModeForRenderPass());else{let G=f.colorModeForRenderPass();yA(f,y,B,x,R,qi.disabled,G)}}})(t,a,h,g);break;case"hillshade":(function(f,y,B,x){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;let k=f.context,R=f.depthModeForSublayer(0,Bi.ReadOnly),G=f.colorModeForRenderPass(),[P,M]=f.renderPass==="translucent"?f.stencilConfigForOverlap(x):[{},x];for(let j of M){let et=y.getTile(j);et.needsHillshadePrepare!==void 0&&et.needsHillshadePrepare&&f.renderPass==="offscreen"?$o(f,et,B,R,qi.disabled,G):f.renderPass==="translucent"&&Lo(f,j,et,B,R,P[j.overscaledZ],G)}k.viewport.set([0,0,f.width,f.height])})(t,a,h,g);break;case"raster":(function(f,y,B,x){if(f.renderPass!=="translucent"||B.paint.get("raster-opacity")===0||!x.length)return;let k=f.context,R=k.gl,G=y.getSource(),P=f.useProgram("raster"),M=f.colorModeForRenderPass(),[j,et]=G instanceof Ke?[{},x]:f.stencilConfigForOverlap(x),W=et[et.length-1].overscaledZ,X=!f.options.moving;for(let ct of et){let rt=f.depthModeForSublayer(ct.overscaledZ-W,B.paint.get("raster-opacity")===1?Bi.ReadWrite:Bi.ReadOnly,R.LESS),ut=y.getTile(ct);ut.registerFadeDuration(B.paint.get("raster-fade-duration"));let Ft=y.findLoadedParent(ct,0),Qt=y.findLoadedSibling(ct),se=Es(ut,Ft||Qt||null,y,B,f.transform,f.style.map.terrain),oe,xe,Ue=B.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;k.activeTexture.set(R.TEXTURE0),ut.texture.bind(Ue,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(R.TEXTURE1),Ft?(Ft.texture.bind(Ue,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),oe=Math.pow(2,Ft.tileID.overscaledZ-ut.tileID.overscaledZ),xe=[ut.tileID.canonical.x*oe%1,ut.tileID.canonical.y*oe%1]):ut.texture.bind(Ue,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),ut.texture.useMipmap&&k.extTextureFilterAnisotropic&&f.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax);let _e=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ct),Be=_e?ct:null,De=Be?Be.posMatrix:f.transform.calculatePosMatrix(ct.toUnwrapped(),X),ri=el(De,xe||[0,0],oe||1,se,B);G instanceof Ke?P.draw(k,R.TRIANGLES,rt,qi.disabled,M,Ar.disabled,ri,_e,B.id,G.boundsBuffer,f.quadTriangleIndexBuffer,G.boundsSegments):P.draw(k,R.TRIANGLES,rt,j[ct.overscaledZ],M,Ar.disabled,ri,_e,B.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}})(t,a,h,g);break;case"background":(function(f,y,B,x){let k=B.paint.get("background-color"),R=B.paint.get("background-opacity");if(R===0)return;let G=f.context,P=G.gl,M=f.transform,j=M.tileSize,et=B.paint.get("background-pattern");if(f.isPatternMissing(et))return;let W=!et&&k.a===1&&R===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==W)return;let X=qi.disabled,ct=f.depthModeForSublayer(0,W==="opaque"?Bi.ReadWrite:Bi.ReadOnly),rt=f.colorModeForRenderPass(),ut=f.useProgram(et?"backgroundPattern":"background"),Ft=x||M.coveringTiles({tileSize:j,terrain:f.style.map.terrain});et&&(G.activeTexture.set(P.TEXTURE0),f.imageManager.bind(f.context));let Qt=B.getCrossfadeParameters();for(let se of Ft){let oe=x?se.posMatrix:f.transform.calculatePosMatrix(se.toUnwrapped()),xe=et?_o(oe,R,f,et,{tileID:se,tileSize:j},Qt):Bo(oe,R,k),Ue=f.style.map.terrain&&f.style.map.terrain.getTerrainData(se);ut.draw(G,P.TRIANGLES,ct,X,rt,Ar.disabled,xe,Ue,B.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}})(t,0,h,g);break;case"custom":(function(f,y,B){let x=f.context,k=B.implementation;if(f.renderPass==="offscreen"){let R=k.prerender;R&&(f.setCustomLayerDefaults(),x.setColorMode(f.colorModeForRenderPass()),R.call(k,x.gl,f.transform.customLayerMatrix()),x.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),x.setColorMode(f.colorModeForRenderPass()),x.setStencilMode(qi.disabled);let R=k.renderingMode==="3d"?new Bi(f.context.gl.LEQUAL,Bi.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Bi.ReadOnly);x.setDepthMode(R),k.render(x.gl,f.transform.customLayerMatrix(),{farZ:f.transform.farZ,nearZ:f.transform.nearZ,fov:f.transform._fov,modelViewProjectionMatrix:f.transform.modelViewProjectionMatrix,projectionMatrix:f.transform.projectionMatrix}),x.setDirty(),f.setBaseState(),x.bindFramebuffer.set(null)}})(t,0,h)}}translatePosMatrix(t,a,h,g,f){if(!h[0]&&!h[1])return t;let y=f?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(y){let k=Math.sin(y),R=Math.cos(y);h=[h[0]*R-h[1]*k,h[0]*k+h[1]*R]}let B=[f?h[0]:vi(a,h[0],this.transform.zoom),f?h[1]:vi(a,h[1],this.transform.zoom),0],x=new Float32Array(16);return s.J(x,t,B),x}saveTileTexture(t){let a=this._tileTextures[t.size[0]];a?a.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){let a=this._tileTextures[t];return a&&a.length>0?a.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;let a=this.imageManager.getPattern(t.from.toString()),h=this.imageManager.getPattern(t.to.toString());return!a||!h}useProgram(t,a){this.cache=this.cache||{};let h=t+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new Ie(this.context,St[t],a,il[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Mt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:t,drawingBufferHeight:a}=this.context.gl;return this.width!==t||this.height!==a}}class To{constructor(t,a){this.points=t,this.planes=a}static fromInvProjectionMatrix(t,a,h){let g=Math.pow(2,h),f=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{let x=1/(B=s.af([],B,t))[3]/a*g;return s.b1(B,B,[x,x,1/B[3],x])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{let x=function(P,M){var j=M[0],et=M[1],W=M[2],X=j*j+et*et+W*W;return X>0&&(X=1/Math.sqrt(X)),P[0]=M[0]*X,P[1]=M[1]*X,P[2]=M[2]*X,P}([],function(P,M,j){var et=M[0],W=M[1],X=M[2],ct=j[0],rt=j[1],ut=j[2];return P[0]=W*ut-X*rt,P[1]=X*ct-et*ut,P[2]=et*rt-W*ct,P}([],kt([],f[B[0]],f[B[1]]),kt([],f[B[2]],f[B[1]]))),k=-((R=x)[0]*(G=f[B[1]])[0]+R[1]*G[1]+R[2]*G[2]);var R,G;return x.concat(k)});return new To(f,y)}}class vs{constructor(t,a){this.min=t,this.max=a,this.center=function(h,g,f){return h[0]=.5*g[0],h[1]=.5*g[1],h[2]=.5*g[2],h}([],function(h,g,f){return h[0]=g[0]+f[0],h[1]=g[1]+f[1],h[2]=g[2]+f[2],h}([],this.min,this.max))}quadrant(t){let a=[t%2==0,t<2],h=ot(this.min),g=ot(this.max);for(let f=0;f<a.length;f++)h[f]=a[f]?this.min[f]:this.center[f],g[f]=a[f]?this.center[f]:this.max[f];return g[2]=this.max[2],new vs(h,g)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){let a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],h=!0;for(let g=0;g<t.planes.length;g++){let f=t.planes[g],y=0;for(let B=0;B<a.length;B++)s.b2(f,a[B])>=0&&y++;if(y===0)return 0;y!==a.length&&(h=!1)}if(h)return 2;for(let g=0;g<3;g++){let f=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let B=0;B<t.points.length;B++){let x=t.points[B][g]-this.min[g];f=Math.min(f,x),y=Math.max(y,x)}if(y<0||f>this.max[g]-this.min[g])return 0}return 1}}class Mn{constructor(t=0,a=0,h=0,g=0){if(isNaN(t)||t<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=a,this.left=h,this.right=g}interpolate(t,a,h){return a.top!=null&&t.top!=null&&(this.top=s.y.number(t.top,a.top,h)),a.bottom!=null&&t.bottom!=null&&(this.bottom=s.y.number(t.bottom,a.bottom,h)),a.left!=null&&t.left!=null&&(this.left=s.y.number(t.left,a.left,h)),a.right!=null&&t.right!=null&&(this.right=s.y.number(t.right,a.right,h)),this}getCenter(t,a){let h=s.ac((this.left+t-this.right)/2,0,t),g=s.ac((this.top+a-this.bottom)/2,0,a);return new s.P(h,g)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Mn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Ao=85.051129;class Ts{constructor(t,a,h,g,f){this.tileSize=512,this._renderWorldCopies=f===void 0||!!f,this._minZoom=t||0,this._maxZoom=a||22,this._minPitch=h??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Mn,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let t=new Ts(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.lngRange=t.lngRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){let a=-s.b3(t,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var h=new s.A(4);return s.A!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,g,f){var y=g[0],B=g[1],x=g[2],k=g[3],R=Math.sin(f),G=Math.cos(f);h[0]=y*G+x*R,h[1]=B*G+k*R,h[2]=y*-R+x*G,h[3]=B*-R+k*G}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){let a=s.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){let a=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,a,h){this._unmodified=!1,this._edgeInsets.interpolate(t,a,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){let a=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(t){let a=[new s.b4(0,t)];if(this._renderWorldCopies){let h=this.pointCoordinate(new s.P(0,0)),g=this.pointCoordinate(new s.P(this.width,0)),f=this.pointCoordinate(new s.P(this.width,this.height)),y=this.pointCoordinate(new s.P(0,this.height)),B=Math.floor(Math.min(h.x,g.x,f.x,y.x)),x=Math.floor(Math.max(h.x,g.x,f.x,y.x)),k=1;for(let R=B-k;R<=x+k;R++)R!==0&&a.push(new s.b4(R,t))}return a}coveringTiles(t){var a,h;let g=this.coveringZoomLevel(t),f=g;if(t.minzoom!==void 0&&g<t.minzoom)return[];t.maxzoom!==void 0&&g>t.maxzoom&&(g=t.maxzoom);let y=this.pointCoordinate(this.getCameraPoint()),B=s.Z.fromLngLat(this.center),x=Math.pow(2,g),k=[x*y.x,x*y.y,0],R=[x*B.x,x*B.y,0],G=To.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,g),P=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(P=g);let M=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,j=rt=>({aabb:new vs([rt*x,0,0],[(rt+1)*x,x,0]),zoom:0,x:0,y:0,wrap:rt,fullyVisible:!1}),et=[],W=[],X=g,ct=t.reparseOverscaled?f:g;if(this._renderWorldCopies)for(let rt=1;rt<=3;rt++)et.push(j(-rt)),et.push(j(rt));for(et.push(j(0));et.length>0;){let rt=et.pop(),ut=rt.x,Ft=rt.y,Qt=rt.fullyVisible;if(!Qt){let _e=rt.aabb.intersects(G);if(_e===0)continue;Qt=_e===2}let se=t.terrain?k:R,oe=rt.aabb.distanceX(se),xe=rt.aabb.distanceY(se),Ue=Math.max(Math.abs(oe),Math.abs(xe));if(rt.zoom===X||Ue>M+(1<<X-rt.zoom)-2&&rt.zoom>=P){let _e=X-rt.zoom,Be=k[0]-.5-(ut<<_e),De=k[1]-.5-(Ft<<_e);W.push({tileID:new s.S(rt.zoom===X?ct:rt.zoom,rt.wrap,rt.zoom,ut,Ft),distanceSq:Lt([R[0]-.5-ut,R[1]-.5-Ft]),tileDistanceToCamera:Math.sqrt(Be*Be+De*De)})}else for(let _e=0;_e<4;_e++){let Be=(ut<<1)+_e%2,De=(Ft<<1)+(_e>>1),ri=rt.zoom+1,ve=rt.aabb.quadrant(_e);if(t.terrain){let Ge=new s.S(ri,rt.wrap,ri,Be,De),Ci=t.terrain.getMinMaxElevation(Ge),Ji=(a=Ci.minElevation)!==null&&a!==void 0?a:this.elevation,Ui=(h=Ci.maxElevation)!==null&&h!==void 0?h:this.elevation;ve=new vs([ve.min[0],ve.min[1],Ji],[ve.max[0],ve.max[1],Ui])}et.push({aabb:ve,zoom:ri,x:Be,y:De,wrap:rt.wrap,fullyVisible:Qt})}}return W.sort((rt,ut)=>rt.distanceSq-ut.distanceSq).map(rt=>rt.tileID)}resize(t,a){this.width=t,this.height=a,this.pixelsToGLUnits=[2/t,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){let a=s.ac(t.lat,-85.051129,Ao);return new s.P(s.O(t.lng)*this.worldSize,s.Q(a)*this.worldSize)}unproject(t){return new s.Z(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){let a=this.elevation,h=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,t),f=t.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-f))return;let y=h+a-f,B=Math.cos(this._pitch)*this.cameraToCenterDistance/y/s.b5(1,g.lat),x=this.scaleZoom(B/this.tileSize);this._elevation=f,this._center=g,this.zoom=x}setLocationAtPoint(t,a){let h=this.pointCoordinate(a),g=this.pointCoordinate(this.centerPoint),f=this.locationCoordinate(t),y=new s.Z(f.x-(h.x-g.x),f.y-(h.y-g.y));this.center=this.coordinateLocation(y),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,a){return a?this.coordinatePoint(this.locationCoordinate(t),a.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,a){return this.coordinateLocation(this.pointCoordinate(t,a))}locationCoordinate(t){return s.Z.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,a){if(a){let P=a.pointCoordinate(t);if(P!=null)return P}let h=[t.x,t.y,0,1],g=[t.x,t.y,1,1];s.af(h,h,this.pixelMatrixInverse),s.af(g,g,this.pixelMatrixInverse);let f=h[3],y=g[3],B=h[1]/f,x=g[1]/y,k=h[2]/f,R=g[2]/y,G=k===R?0:(0-k)/(R-k);return new s.Z(s.y.number(h[0]/f,g[0]/y,G)/this.worldSize,s.y.number(B,x,G)/this.worldSize)}coordinatePoint(t,a=0,h=this.pixelMatrix){let g=[t.x*this.worldSize,t.y*this.worldSize,a,1];return s.af(g,g,h),new s.P(g[0]/g[3],g[1]/g[3])}getBounds(){let t=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new s.P(0,t))).extend(this.pointLocation(new s.P(this.width,t))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ao])}calculateTileMatrix(t){let a=t.canonical,h=this.worldSize/this.zoomScale(a.z),g=a.x+Math.pow(2,a.z)*t.wrap,f=s.an(new Float64Array(16));return s.J(f,f,[g*h,a.y*h,0]),s.K(f,f,[h/s.X,h/s.X,1]),f}calculatePosMatrix(t,a=!1){let h=t.key,g=a?this._alignedPosMatrixCache:this._posMatrixCache;if(g[h])return g[h];let f=this.calculateTileMatrix(t);return s.L(f,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,f),g[h]=new Float32Array(f),g[h]}calculateFogMatrix(t){let a=t.key,h=this._fogMatrixCache;if(h[a])return h[a];let g=this.calculateTileMatrix(t);return s.L(g,this.fogMatrix,g),h[a]=new Float32Array(g),h[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,a){a=s.ac(+a,this.minZoom,this.maxZoom);let h={center:new s.N(t.lng,t.lat),zoom:a},g=this.lngRange;if(!this._renderWorldCopies&&g===null){let rt=179.9999999999;g=[-rt,rt]}let f=this.tileSize*this.zoomScale(h.zoom),y=0,B=f,x=0,k=f,R=0,G=0,{x:P,y:M}=this.size;if(this.latRange){let rt=this.latRange;y=s.Q(rt[1])*f,B=s.Q(rt[0])*f,B-y<M&&(R=M/(B-y))}g&&(x=s.b3(s.O(g[0])*f,0,f),k=s.b3(s.O(g[1])*f,0,f),k<x&&(k+=f),k-x<P&&(G=P/(k-x)));let{x:j,y:et}=this.project.call({worldSize:f},t),W,X,ct=Math.max(G||0,R||0);if(ct){let rt=new s.P(G?(k+x)/2:j,R?(B+y)/2:et);return h.center=this.unproject.call({worldSize:f},rt).wrap(),h.zoom+=this.scaleZoom(ct),h}if(this.latRange){let rt=M/2;et-rt<y&&(X=y+rt),et+rt>B&&(X=B-rt)}if(g){let rt=(x+k)/2,ut=j;this._renderWorldCopies&&(ut=s.b3(j,rt-f/2,rt+f/2));let Ft=P/2;ut-Ft<x&&(W=x+Ft),ut+Ft>k&&(W=k-Ft)}if(W!==void 0||X!==void 0){let rt=new s.P(W??j,X??et);h.center=this.unproject.call({worldSize:f},rt).wrap()}return h}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t=this._unmodified,{center:a,zoom:h}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=h,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;let t=this.centerOffset,a=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let g=s.an(new Float64Array(16));s.K(g,g,[this.width/2,-this.height/2,1]),s.J(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=s.an(new Float64Array(16)),s.K(g,g,[1,-1,1]),s.J(g,g,[-1,-1,0]),s.K(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;let f=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),y=Math.min(this.elevation,this.minElevationForCurrentTile),B=f-y*this._pixelPerMeter/Math.cos(this._pitch),x=y<0?B:f,k=Math.PI/2+this._pitch,R=this._fov*(.5+t.y/this.height),G=Math.sin(R)*x/Math.sin(s.ac(Math.PI-k-R,.01,Math.PI-.01)),P=this.getHorizon(),M=2*Math.atan(P/this.cameraToCenterDistance)*(.5+t.y/(2*P)),j=Math.sin(M)*x/Math.sin(s.ac(Math.PI-k-M,.01,Math.PI-.01)),et=Math.min(G,j);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*et+x),this.nearZ=this.height/50,g=new Float64Array(16),s.b6(g,this._fov,this.width/this.height,this.nearZ,this.farZ),g[8]=2*-t.x/this.width,g[9]=2*t.y/this.height,this.projectionMatrix=s.ae(g),s.K(g,g,[1,-1,1]),s.J(g,g,[0,0,-this.cameraToCenterDistance]),s.b7(g,g,this._pitch),s.ad(g,g,this.angle),s.J(g,g,[-a,-h,0]),this.mercatorMatrix=s.K([],g,[this.worldSize,this.worldSize,this.worldSize]),s.K(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,g),s.J(g,g,[0,0,-this.elevation]),this.modelViewProjectionMatrix=g,this.invModelViewProjectionMatrix=s.as([],g),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,f,this.farZ),this.fogMatrix[8]=2*-t.x/this.width,this.fogMatrix[9]=2*t.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-a,-h,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,g);let W=this.width%2/2,X=this.height%2/2,ct=Math.cos(this.angle),rt=Math.sin(this.angle),ut=a-Math.round(a)+ct*W+rt*X,Ft=h-Math.round(h)+ct*X+rt*W,Qt=new Float64Array(g);if(s.J(Qt,Qt,[ut>.5?ut-1:ut,Ft>.5?Ft-1:Ft,0]),this.alignedModelViewProjectionMatrix=Qt,g=s.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let t=this.pointCoordinate(new s.P(0,0)),a=[t.x*this.worldSize,t.y*this.worldSize,0,1];return s.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,t))}getCameraQueryGeometry(t){let a=this.getCameraPoint();if(t.length===1)return[t[0],a];{let h=a.x,g=a.y,f=a.x,y=a.y;for(let B of t)h=Math.min(h,B.x),g=Math.min(g,B.y),f=Math.max(f,B.x),y=Math.max(y,B.y);return[new s.P(h,g),new s.P(f,g),new s.P(f,y),new s.P(h,y),new s.P(h,g)]}}lngLatToCameraDepth(t,a){let h=this.locationCoordinate(t),g=[h.x*this.worldSize,h.y*this.worldSize,a,1];return s.af(g,g,this.modelViewProjectionMatrix),g[2]/g[3]}}function Uo(u,t){let a,h=!1,g=null,f=null,y=()=>{g=null,h&&(u.apply(f,a),g=setTimeout(y,t),h=!1)};return(...B)=>(h=!0,f=this,a=B,g||y(),g)}class Qo{constructor(t){this._getCurrentHash=()=>{let a=window.location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(h=g)}),(h&&h[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{let a=this._getCurrentHash();if(a.length>=3&&!a.some(h=>isNaN(h))){let h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:h,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let a=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{let a=this._getCurrentHash();if(a.length===0)return;let h=a.join("/"),g=h;g.split("&").length>0&&(g=g.split("&")[0]),this._hashName&&(g=`${this._hashName}=${h}`);let f=window.location.hash.replace(g,"");f.startsWith("#&")?f=f.slice(0,1)+f.slice(2):f==="#"&&(f="");let y=window.location.href.replace(/(#.+)?$/,f);y=y.replace("&&","&"),window.history.replaceState(window.history.state,null,y)},this._updateHash=Uo(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){let a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,g=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),f=Math.pow(10,g),y=Math.round(a.lng*f)/f,B=Math.round(a.lat*f)/f,x=this._map.getBearing(),k=this._map.getPitch(),R="";if(R+=t?`/${y}/${B}/${h}`:`${h}/${B}/${y}`,(x||k)&&(R+="/"+Math.round(10*x)/10),k&&(R+=`/${Math.round(k)}`),this._hashName){let G=this._hashName,P=!1,M=window.location.hash.slice(1).split("&").map(j=>{let et=j.split("=")[0];return et===G?(P=!0,`${et}=${R}`):j}).filter(j=>j);return P||M.push(`${G}=${R}`),`#${M.join("&")}`}return`#${R}`}}let lo={linearity:.3,easing:s.b8(0,0,.3,1)},Za=s.e({deceleration:2500,maxSpeed:1400},lo),Us=s.e({deceleration:20,maxSpeed:1400},lo),Ro=s.e({deceleration:1e3,maxSpeed:360},lo),xr=s.e({deceleration:1e3,maxSpeed:90},lo);class kr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:t})}_drainInertiaBuffer(){let t=this._inertiaBuffer,a=w.now();for(;t.length>0&&a-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let a={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:f}of this._inertiaBuffer)a.zoom+=f.zoomDelta||0,a.bearing+=f.bearingDelta||0,a.pitch+=f.pitchDelta||0,f.panDelta&&a.pan._add(f.panDelta),f.around&&(a.around=f.around),f.pinchAround&&(a.pinchAround=f.pinchAround);let h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(a.pan.mag()){let f=qr(a.pan.mag(),h,s.e({},Za,t||{}));g.offset=a.pan.mult(f.amount/a.pan.mag()),g.center=this._map.transform.center,Vr(g,f)}if(a.zoom){let f=qr(a.zoom,h,Us);g.zoom=this._map.transform.zoom+f.amount,Vr(g,f)}if(a.bearing){let f=qr(a.bearing,h,Ro);g.bearing=this._map.transform.bearing+s.ac(f.amount,-179,179),Vr(g,f)}if(a.pitch){let f=qr(a.pitch,h,xr);g.pitch=this._map.transform.pitch+f.amount,Vr(g,f)}if(g.zoom||g.bearing){let f=a.pinchAround===void 0?a.around:a.pinchAround;g.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),s.e(g,{noMoveStart:!0})}}function Vr(u,t){(!u.duration||u.duration<t.duration)&&(u.duration=t.duration,u.easing=t.easing)}function qr(u,t,a){let{maxSpeed:h,linearity:g,deceleration:f}=a,y=s.ac(u*g/(t/1e3),-h,h),B=Math.abs(y)/(f*g);return{easing:a.easing,duration:1e3*B,amount:y*(B/2)}}class zr extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,h,g={}){let f=_.mousePos(a.getCanvas(),h),y=a.unproject(f);super(t,s.e({point:f,lngLat:y,originalEvent:h},g)),this._defaultPrevented=!1,this.target=a}}class ns extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,h){let g=t==="touchend"?h.changedTouches:h.touches,f=_.touchPos(a.getCanvasContainer(),g),y=f.map(x=>a.unproject(x)),B=f.reduce((x,k,R,G)=>x.add(k.div(G.length)),new s.P(0,0));super(t,{points:f,point:B,lngLats:y,lngLat:a.unproject(B),originalEvent:h}),this._defaultPrevented=!1}}class Pa extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,h){super(t,{originalEvent:h}),this._defaultPrevented=!1}}class sl{constructor(t,a){this._map=t,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Pa(t.type,this._map,t))}mousedown(t,a){return this._mousedownPos=a,this._firePreventable(new zr(t.type,this._map,t))}mouseup(t){this._map.fire(new zr(t.type,this._map,t))}click(t,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new zr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new zr(t.type,this._map,t))}mouseover(t){this._map.fire(new zr(t.type,this._map,t))}mouseout(t){this._map.fire(new zr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new ns(t.type,this._map,t))}touchmove(t){this._map.fire(new ns(t.type,this._map,t))}touchend(t){this._map.fire(new ns(t.type,this._map,t))}touchcancel(t){this._map.fire(new ns(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $r{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new zr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new zr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qs{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(s.P.convert(t),this._map.terrain)}}class ss{constructor(t,a){this._map=t,this._tr=new Qs(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,a){this.isEnabled()&&t.shiftKey&&t.button===0&&(_.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(t,a){if(!this._active)return;let h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;let g=this._startPos;this._lastPos=h,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));let f=Math.min(g.x,h.x),y=Math.max(g.x,h.x),B=Math.min(g.y,h.y),x=Math.max(g.y,h.y);_.setTransform(this._box,`translate(${f}px,${B}px)`),this._box.style.width=y-f+"px",this._box.style.height=x-B+"px"}mouseupWindow(t,a){if(!this._active||t.button!==0)return;let h=this._startPos,g=a;if(this.reset(),_.suppressClick(),h.x!==g.x||h.y!==g.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:t})),{cameraAnimation:f=>f.fitScreenCoordinates(h,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,a){return this._map.fire(new s.k(t,{originalEvent:a}))}}function vA(u,t){if(u.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${u.length}, points ${t.length}`);let a={};for(let h=0;h<u.length;h++)a[u[h].identifier]=t[h];return a}class Ml{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),h.length===this.numTouches&&(this.centroid=function(g){let f=new s.P(0,0);for(let y of g)f._add(y);return f.div(g.length)}(a),this.touches=vA(h,a)))}touchmove(t,a,h){if(this.aborted||!this.centroid)return;let g=vA(h,a);for(let f in this.touches){let y=g[f];(!y||y.dist(this.touches[f])>30)&&(this.aborted=!0)}}touchend(t,a,h){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){let g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class ol{constructor(t){this.singleTap=new Ml(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,a,h){this.singleTap.touchstart(t,a,h)}touchmove(t,a,h){this.singleTap.touchmove(t,a,h)}touchend(t,a,h){let g=this.singleTap.touchend(t,a,h);if(g){let f=t.timeStamp-this.lastTime<500,y=!this.lastTap||this.lastTap.dist(g)<30;if(f&&y||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ia{constructor(t){this._tr=new Qs(t),this._zoomIn=new ol({numTouches:1,numTaps:2}),this._zoomOut=new ol({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,a,h){this._zoomIn.touchstart(t,a,h),this._zoomOut.touchstart(t,a,h)}touchmove(t,a,h){this._zoomIn.touchmove(t,a,h),this._zoomOut.touchmove(t,a,h)}touchend(t,a,h){let g=this._zoomIn.touchend(t,a,h),f=this._zoomOut.touchend(t,a,h),y=this._tr;return g?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:y.zoom+1,around:y.unproject(g)},{originalEvent:t})}):f?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:y.zoom-1,around:y.unproject(f)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rs{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){let a=this._moveFunction(...t);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(t,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,a){if(!this.isEnabled())return;let h=this._lastPoint;if(!h)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);let g=a.length?a[0]:a;return!this._moved&&g.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(h,g))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&_.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Xn={0:1,2:2};class Yn{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){let a=_.mouseButton(t);this._eventButton=a}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(a,h){let g=Xn[h];return a.buttons===void 0||(a.buttons&g)!==g}(t,this._eventButton)}isValidEndEvent(t){return _.mouseButton(t)===this._eventButton}}class wA{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}let Ha=u=>{u.mousedown=u.dragStart,u.mousemoveWindow=u.dragMove,u.mouseup=u.dragEnd,u.contextmenu=t=>{t.preventDefault()}},Nl=({enable:u,clickTolerance:t,bearingDegreesPerPixelMoved:a=.8})=>{let h=new Yn({checkCorrectEvent:g=>_.mouseButton(g)===0&&g.ctrlKey||_.mouseButton(g)===2});return new Rs({clickTolerance:t,move:(g,f)=>({bearingDelta:(f.x-g.x)*a}),moveStateManager:h,enable:u,assignEvents:Ha})},BA=({enable:u,clickTolerance:t,pitchDegreesPerPixelMoved:a=-.5})=>{let h=new Yn({checkCorrectEvent:g=>_.mouseButton(g)===0&&g.ctrlKey||_.mouseButton(g)===2});return new Rs({clickTolerance:t,move:(g,f)=>({pitchDelta:(f.y-g.y)*a}),moveStateManager:h,enable:u,assignEvents:Ha})};class Go{constructor(t,a){this._clickTolerance=t.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,a,h){return this._calculateTransform(t,a,h)}touchmove(t,a,h){if(this._active){if(!this._shouldBePrevented(h.length))return t.preventDefault(),this._calculateTransform(t,a,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,a,h){this._calculateTransform(t,a,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,a,h){h.length>0&&(this._active=!0);let g=vA(h,a),f=new s.P(0,0),y=new s.P(0,0),B=0;for(let k in g){let R=g[k],G=this._touches[k];G&&(f._add(R),y._add(R.sub(G)),B++,g[k]=R)}if(this._touches=g,this._shouldBePrevented(B)||!y.mag())return;let x=y.div(B);return this._sum._add(x),this._sum.mag()<this._clickTolerance?void 0:{around:f.div(B),panDelta:x}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _A{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(t,a,h){if(!this._firstTwoTouches)return;t.preventDefault();let[g,f]=this._firstTwoTouches,y=xA(h,a,g),B=xA(h,a,f);if(!y||!B)return;let x=this._aroundCenter?null:y.add(B).div(2);return this._move([y,B],x,t)}touchend(t,a,h){if(!this._firstTwoTouches)return;let[g,f]=this._firstTwoTouches,y=xA(h,a,g),B=xA(h,a,f);y&&B||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function xA(u,t,a){for(let h=0;h<u.length;h++)if(u[h].identifier===a)return t[h]}function al(u,t){return Math.log(u/t)/Math.LN2}class Al extends _A{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,a){let h=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(al(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:al(this._distance,h),pinchAround:a}}}function SA(u,t){return 180*u.angleWith(t)/Math.PI}class ll extends _A{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,a,h){let g=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:SA(this._vector,g),pinchAround:a}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());let a=25/(Math.PI*this._minDiameter)*360,h=SA(t,this._startVector);return Math.abs(h)<a}}function Vl(u){return Math.abs(u.y)>Math.abs(u.x)}class FA extends _A{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,a,h){super.touchstart(t,a,h),this._currentTouchCount=h.length}_start(t){this._lastPoints=t,Vl(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,a,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let g=t[0].sub(this._lastPoints[0]),f=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,f,h.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(g.y+f.y)/2*-.5}):void 0}gestureBeginsVertically(t,a,h){if(this._valid!==void 0)return this._valid;let g=t.mag()>=2,f=a.mag()>=2;if(!g&&!f)return;if(!g||!f)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;let y=t.y>0==a.y>0;return Vl(t)&&Vl(a)&&y}}let Lc={panStep:100,bearingStep:15,pitchStep:10};class Gs{constructor(t){this._tr=new Qs(t);let a=Lc;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let a=0,h=0,g=0,f=0,y=0;switch(t.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:t.shiftKey?h=-1:(t.preventDefault(),f=-1);break;case 39:t.shiftKey?h=1:(t.preventDefault(),f=1);break;case 38:t.shiftKey?g=1:(t.preventDefault(),y=-1);break;case 40:t.shiftKey?g=-1:(t.preventDefault(),y=1);break;default:return}return this._rotationDisabled&&(h=0,g=0),{cameraAnimation:B=>{let x=this._tr;B.easeTo({duration:300,easeId:"keyboardHandler",easing:Zo,zoom:a?Math.round(x.zoom)+a*(t.shiftKey?2:1):x.zoom,bearing:x.bearing+h*this._bearingStep,pitch:x.pitch+g*this._pitchStep,offset:[-f*this._panStep,-y*this._panStep],center:x.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Zo(u){return u*(2-u)}let Ec=4.000244140625;class co{constructor(t,a){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=t,this._tr=new Qs(t),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let a=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,h=w.now(),g=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%Ec==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(g*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),t.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=t,this._delta-=a,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let a=_.mousePos(this._map.getCanvas(),t),h=this._tr;this._around=a.y>h.transform.height/2-h.transform.getHorizon()?s.N.convert(this._aroundCenter?h.center:h.unproject(a)):s.N.convert(h.center),this._aroundPoint=h.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let t=this._tr.transform;if(this._delta!==0){let x=this._type==="wheel"&&Math.abs(this._delta)>Ec?this._wheelZoomRate:this._defaultZoomRate,k=2/(1+Math.exp(-Math.abs(this._delta*x)));this._delta<0&&k!==0&&(k=1/k);let R=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let a=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,h=this._startZoom,g=this._easing,f,y=!1,B=w.now()-this._lastWheelEventTime;if(this._type==="wheel"&&h&&g&&B){let x=Math.min(B/200,1),k=g(x);f=s.y.number(h,a,k),x<1?this._frameId||(this._frameId=!0):y=!0}else f=a,y=!0;return this._active=!0,y&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!y,zoomDelta:f-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let a=s.b9;if(this._prevEase){let h=this._prevEase,g=(w.now()-h.start)/h.duration,f=h.easing(g+.01)-h.easing(g),y=.27/Math.sqrt(f*f+1e-4)*.01,B=Math.sqrt(.0729-y*y);a=s.b8(y,B,.25,1)}return this._prevEase={start:w.now(),duration:t,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ma{constructor(t,a){this._clickZoom=t,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Tc{constructor(t){this._tr=new Qs(t),this.reset()}reset(){this._active=!1}dblclick(t,a){return t.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uc{constructor(){this._tap=new ol({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,a,h){if(!this._swipePoint)if(this._tapTime){let g=a[0],f=t.timeStamp-this._tapTime<500,y=this._tapPoint.dist(g)<30;f&&y?h.length>0&&(this._swipePoint=g,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(t,a,h)}touchmove(t,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;let g=a[0],f=g.y-this._swipePoint.y;return this._swipePoint=g,t.preventDefault(),this._active=!0,{zoomDelta:f/128}}}else this._tap.touchmove(t,a,h)}touchend(t,a,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{let g=this._tap.touchend(t,a,h);g&&(this._tapTime=t.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kA{constructor(t,a,h){this._el=t,this._mousePan=a,this._touchPan=h}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Cu{constructor(t,a,h){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=a,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qc{constructor(t,a,h,g){this._el=t,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Na{constructor(t,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=_.create("div","maplibregl-cooperative-gesture-screen",t);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=a,this._container.appendChild(g);let f=document.createElement("div");f.className="maplibregl-mobile-message",f.textContent=h,this._container.appendChild(f),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(_.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,a){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:t,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Zs=u=>u.zoom||u.drag||u.pitch||u.rotate;class oi extends s.k{}function Dl(u){return u.panDelta&&u.panDelta.mag()||u.zoomDelta||u.bearingDelta||u.pitchDelta}class Rc{constructor(t,a){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,f)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let y=g.type==="renderFrame"?void 0:g,B={needsRenderFrame:!1},x={},k={},R=g.touches,G=R?this._getMapTouches(R):void 0,P=G?_.touchPos(this._map.getCanvas(),G):_.mousePos(this._map.getCanvas(),g);for(let{handlerName:et,handler:W,allowed:X}of this._handlers){if(!W.isEnabled())continue;let ct;this._blockedByActive(k,X,et)?W.reset():W[f||g.type]&&(ct=W[f||g.type](g,P,G),this.mergeHandlerResult(B,x,ct,et,y),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()),(ct||W.isActive())&&(k[et]=W)}let M={};for(let et in this._previousActiveHandlers)k[et]||(M[et]=y);this._previousActiveHandlers=k,(Object.keys(M).length||Dl(B))&&(this._changes.push([B,x,M]),this._triggerRenderFrame()),(Object.keys(k).length||Dl(B))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:j}=B;j&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],j(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new kr(t),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);let h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(let[g,f,y]of this._listeners)_.addEventListener(g,f,g===document?this.handleWindowEvent:this.handleEvent,y)}destroy(){for(let[t,a,h]of this._listeners)_.removeEventListener(t,a,t===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(t){let a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new sl(a,t));let g=a.boxZoom=new ss(a,t);this._add("boxZoom",g),t.interactive&&t.boxZoom&&g.enable();let f=a.cooperativeGestures=new Na(a,t.cooperativeGestures);this._add("cooperativeGestures",f),t.cooperativeGestures&&f.enable();let y=new Ia(a),B=new Tc(a);a.doubleClickZoom=new Ma(B,y),this._add("tapZoom",y),this._add("clickZoom",B),t.interactive&&t.doubleClickZoom&&a.doubleClickZoom.enable();let x=new Uc;this._add("tapDragZoom",x);let k=a.touchPitch=new FA(a);this._add("touchPitch",k),t.interactive&&t.touchPitch&&a.touchPitch.enable(t.touchPitch);let R=Nl(t),G=BA(t);a.dragRotate=new Cu(t,R,G),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),t.interactive&&t.dragRotate&&a.dragRotate.enable();let P=(({enable:ct,clickTolerance:rt})=>{let ut=new Yn({checkCorrectEvent:Ft=>_.mouseButton(Ft)===0&&!Ft.ctrlKey});return new Rs({clickTolerance:rt,move:(Ft,Qt)=>({around:Qt,panDelta:Qt.sub(Ft)}),activateOnStart:!0,moveStateManager:ut,enable:ct,assignEvents:Ha})})(t),M=new Go(t,a);a.dragPan=new kA(h,P,M),this._add("mousePan",P),this._add("touchPan",M,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&a.dragPan.enable(t.dragPan);let j=new ll,et=new Al;a.touchZoomRotate=new Qc(h,et,j,x),this._add("touchRotate",j,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&a.touchZoomRotate.enable(t.touchZoomRotate);let W=a.scrollZoom=new co(a,()=>this._triggerRenderFrame());this._add("scrollZoom",W,["mousePan"]),t.interactive&&t.scrollZoom&&a.scrollZoom.enable(t.scrollZoom);let X=a.keyboard=new Gs(a);this._add("keyboard",X),t.interactive&&t.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new $r(a))}_add(t,a,h){this._handlers.push({handlerName:t,handler:a,allowed:h}),this._handlersById[t]=a}stop(t){if(!this._updatingCamera){for(let{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(let{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Zs(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,a,h){for(let g in t)if(g!==h&&(!a||a.indexOf(g)<0))return!0;return!1}_getMapTouches(t){let a=[];for(let h of t)this._el.contains(h.target)&&a.push(h);return a}mergeHandlerResult(t,a,h,g,f){if(!h)return;s.e(t,h);let y={handlerName:g,originalEvent:h.originalEvent||f};h.zoomDelta!==void 0&&(a.zoom=y),h.panDelta!==void 0&&(a.drag=y),h.pitchDelta!==void 0&&(a.pitch=y),h.bearingDelta!==void 0&&(a.rotate=y)}_applyChanges(){let t={},a={},h={};for(let[g,f,y]of this._changes)g.panDelta&&(t.panDelta=(t.panDelta||new s.P(0,0))._add(g.panDelta)),g.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(t.around=g.around),g.pinchAround!==void 0&&(t.pinchAround=g.pinchAround),g.noInertia&&(t.noInertia=g.noInertia),s.e(a,f),s.e(h,y);this._updateMapTransform(t,a,h),this._changes=[]}_updateMapTransform(t,a,h){let g=this._map,f=g._getTransformForUpdate(),y=g.terrain;if(!(Dl(t)||y&&this._terrainMovement))return this._fireEvents(a,h,!0);let{panDelta:B,zoomDelta:x,bearingDelta:k,pitchDelta:R,around:G,pinchAround:P}=t;P!==void 0&&(G=P),g._stop(!0),G=G||g.transform.centerPoint;let M=f.pointLocation(B?G.sub(B):G);k&&(f.bearing+=k),R&&(f.pitch+=R),x&&(f.zoom+=x),y?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?f.center=f.pointLocation(f.centerPoint.sub(B)):f.setLocationAtPoint(M,G):(this._terrainMovement=!0,this._map._elevationFreeze=!0,f.setLocationAtPoint(M,G)):f.setLocationAtPoint(M,G),g._applyUpdatedTransform(f),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(a,h,!0)}_fireEvents(t,a,h){let g=Zs(this._eventsInProgress),f=Zs(t),y={};for(let G in t){let{originalEvent:P}=t[G];this._eventsInProgress[G]||(y[`${G}start`]=P),this._eventsInProgress[G]=t[G]}!g&&f&&this._fireEvent("movestart",f.originalEvent);for(let G in y)this._fireEvent(G,y[G]);f&&this._fireEvent("move",f.originalEvent);for(let G in t){let{originalEvent:P}=t[G];this._fireEvent(G,P)}let B={},x;for(let G in this._eventsInProgress){let{handlerName:P,originalEvent:M}=this._eventsInProgress[G];this._handlersById[P].isActive()||(delete this._eventsInProgress[G],x=a[P]||M,B[`${G}end`]=x)}for(let G in B)this._fireEvent(G,B[G]);let k=Zs(this._eventsInProgress),R=(g||f)&&!k;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let G=this._map._getTransformForUpdate();G.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(G)}if(h&&R){this._updatingCamera=!0;let G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),P=M=>M!==0&&-this._bearingSnap<M&&M<this._bearingSnap;!G||!G.essential&&w.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:x})),P(this._map.getBearing())&&this._map.resetNorth()):(P(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:x})),this._updatingCamera=!1}}_fireEvent(t,a){this._map.fire(new s.k(t,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new oi("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ia extends s.E{constructor(t,a){super(),this._renderFrameCallback=()=>{let h=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(t,a){return this.jumpTo({center:t},a)}panBy(t,a,h){return t=s.P.convert(t).mult(-1),this.panTo(this.transform.center,s.e({offset:t},a),h)}panTo(t,a,h){return this.easeTo(s.e({center:t},a),h)}getZoom(){return this.transform.zoom}setZoom(t,a){return this.jumpTo({zoom:t},a),this}zoomTo(t,a,h){return this.easeTo(s.e({zoom:t},a),h)}zoomIn(t,a){return this.zoomTo(this.getZoom()+1,t,a),this}zoomOut(t,a){return this.zoomTo(this.getZoom()-1,t,a),this}getBearing(){return this.transform.bearing}setBearing(t,a){return this.jumpTo({bearing:t},a),this}getPadding(){return this.transform.padding}setPadding(t,a){return this.jumpTo({padding:t},a),this}rotateTo(t,a,h){return this.easeTo(s.e({bearing:t},a),h)}resetNorth(t,a){return this.rotateTo(0,s.e({duration:1e3},t),a),this}resetNorthPitch(t,a){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},t),a),this}snapToNorth(t,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,a):this}getPitch(){return this.transform.pitch}setPitch(t,a){return this.jumpTo({pitch:t},a),this}cameraForBounds(t,a){t=Dt.convert(t).adjustAntiMeridian();let h=a&&a.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),h,a)}_cameraForBoxAndBearing(t,a,h,g){let f={top:0,bottom:0,right:0,left:0};if(typeof(g=s.e({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){let _e=g.padding;g.padding={top:_e,bottom:_e,right:_e,left:_e}}g.padding=s.e(f,g.padding);let y=this.transform,B=y.padding,x=new Dt(t,a),k=y.project(x.getNorthWest()),R=y.project(x.getNorthEast()),G=y.project(x.getSouthEast()),P=y.project(x.getSouthWest()),M=s.ba(-h),j=k.rotate(M),et=R.rotate(M),W=G.rotate(M),X=P.rotate(M),ct=new s.P(Math.max(j.x,et.x,X.x,W.x),Math.max(j.y,et.y,X.y,W.y)),rt=new s.P(Math.min(j.x,et.x,X.x,W.x),Math.min(j.y,et.y,X.y,W.y)),ut=ct.sub(rt),Ft=(y.width-(B.left+B.right+g.padding.left+g.padding.right))/ut.x,Qt=(y.height-(B.top+B.bottom+g.padding.top+g.padding.bottom))/ut.y;if(Qt<0||Ft<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let se=Math.min(y.scaleZoom(y.scale*Math.min(Ft,Qt)),g.maxZoom),oe=s.P.convert(g.offset),xe=new s.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(s.ba(h)),Ue=oe.add(xe).mult(y.scale/y.zoomScale(se));return{center:y.unproject(k.add(G).div(2).sub(Ue)),zoom:se,bearing:h}}fitBounds(t,a,h){return this._fitInternal(this.cameraForBounds(t,a),a,h)}fitScreenCoordinates(t,a,h,g,f){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(t)),this.transform.pointLocation(s.P.convert(a)),h,g),g,f)}_fitInternal(t,a,h){return t?(delete(a=s.e(t,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(t,a){this.stop();let h=this._getTransformForUpdate(),g=!1,f=!1,y=!1;return"zoom"in t&&h.zoom!==+t.zoom&&(g=!0,h.zoom=+t.zoom),t.center!==void 0&&(h.center=s.N.convert(t.center)),"bearing"in t&&h.bearing!==+t.bearing&&(f=!0,h.bearing=+t.bearing),"pitch"in t&&h.pitch!==+t.pitch&&(y=!0,h.pitch=+t.pitch),t.padding==null||h.isPaddingEqual(t.padding)||(h.padding=t.padding),this._applyUpdatedTransform(h),this.fire(new s.k("movestart",a)).fire(new s.k("move",a)),g&&this.fire(new s.k("zoomstart",a)).fire(new s.k("zoom",a)).fire(new s.k("zoomend",a)),f&&this.fire(new s.k("rotatestart",a)).fire(new s.k("rotate",a)).fire(new s.k("rotateend",a)),y&&this.fire(new s.k("pitchstart",a)).fire(new s.k("pitch",a)).fire(new s.k("pitchend",a)),this.fire(new s.k("moveend",a))}calculateCameraOptionsFromTo(t,a,h,g=0){let f=s.Z.fromLngLat(t,a),y=s.Z.fromLngLat(h,g),B=y.x-f.x,x=y.y-f.y,k=y.z-f.z,R=Math.hypot(B,x,k);if(R===0)throw new Error("Can't calculate camera options with same From and To");let G=Math.hypot(B,x),P=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),M=180*Math.atan2(B,-x)/Math.PI,j=180*Math.acos(G/R)/Math.PI;return j=k<0?90-j:90+j,{center:y.toLngLat(),zoom:P,pitch:j,bearing:M}}easeTo(t,a){var h;this._stop(!1,t.easeId),((t=s.e({offset:[0,0],duration:500,easing:s.b9},t)).animate===!1||!t.essential&&w.prefersReducedMotion)&&(t.duration=0);let g=this._getTransformForUpdate(),f=g.zoom,y=g.bearing,B=g.pitch,x=g.padding,k="bearing"in t?this._normalizeBearing(t.bearing,y):y,R="pitch"in t?+t.pitch:B,G="padding"in t?t.padding:g.padding,P=s.P.convert(t.offset),M=g.centerPoint.add(P),j=g.pointLocation(M),{center:et,zoom:W}=g.getConstrained(s.N.convert(t.center||j),(h=t.zoom)!==null&&h!==void 0?h:f);this._normalizeCenter(et,g);let X=g.project(j),ct=g.project(et).sub(X),rt=g.zoomScale(W-f),ut,Ft;t.around&&(ut=s.N.convert(t.around),Ft=g.locationPoint(ut));let Qt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||W!==f,this._rotating=this._rotating||y!==k,this._pitching=this._pitching||R!==B,this._padding=!g.isPaddingEqual(G),this._easeId=t.easeId,this._prepareEase(a,t.noMoveStart,Qt),this.terrain&&this._prepareElevation(et),this._ease(se=>{if(this._zooming&&(g.zoom=s.y.number(f,W,se)),this._rotating&&(g.bearing=s.y.number(y,k,se)),this._pitching&&(g.pitch=s.y.number(B,R,se)),this._padding&&(g.interpolatePadding(x,G,se),M=g.centerPoint.add(P)),this.terrain&&!t.freezeElevation&&this._updateElevation(se),ut)g.setLocationAtPoint(ut,Ft);else{let oe=g.zoomScale(g.zoom-f),xe=W>f?Math.min(2,rt):Math.max(.5,rt),Ue=Math.pow(xe,1-se),_e=g.unproject(X.add(ct.mult(se*Ue)).mult(oe));g.setLocationAtPoint(g.renderWorldCopies?_e.wrap():_e,M)}this._applyUpdatedTransform(g),this._fireMoveEvents(a)},se=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(a,se)},t),this}_prepareEase(t,a,h={}){this._moving=!0,a||h.moving||this.fire(new s.k("movestart",t)),this._zooming&&!h.zooming&&this.fire(new s.k("zoomstart",t)),this._rotating&&!h.rotating&&this.fire(new s.k("rotatestart",t)),this._pitching&&!h.pitching&&this.fire(new s.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&a!==this._elevationTarget){let h=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(h-(a-(h*t+this._elevationStart))/(1-t)),this._elevationTarget=a}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){let a=t.getCameraPosition(),h=this.terrain.getElevationForLngLatZoom(a.lngLat,t.zoom);if(a.altitude<h){let g=this.calculateCameraOptionsFromTo(a.lngLat,h,t.center,t.elevation);return{pitch:g.pitch,zoom:g.zoom}}return{}}_applyUpdatedTransform(t){let a=[];if(this.terrain&&a.push(g=>this._elevateCameraIfInsideTerrain(g)),this.transformCameraUpdate&&a.push(g=>this.transformCameraUpdate(g)),!a.length)return;let h=t.clone();for(let g of a){let f=h.clone(),{center:y,zoom:B,pitch:x,bearing:k,elevation:R}=g(f);y&&(f.center=y),B!==void 0&&(f.zoom=B),x!==void 0&&(f.pitch=x),k!==void 0&&(f.bearing=k),R!==void 0&&(f.elevation=R),h.apply(f)}this.transform.apply(h)}_fireMoveEvents(t){this.fire(new s.k("move",t)),this._zooming&&this.fire(new s.k("zoom",t)),this._rotating&&this.fire(new s.k("rotate",t)),this._pitching&&this.fire(new s.k("pitch",t))}_afterEase(t,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;let h=this._zooming,g=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new s.k("zoomend",t)),g&&this.fire(new s.k("rotateend",t)),f&&this.fire(new s.k("pitchend",t)),this.fire(new s.k("moveend",t))}flyTo(t,a){var h;if(!t.essential&&w.prefersReducedMotion){let Ge=s.M(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ge,a)}this.stop(),t=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},t);let g=this._getTransformForUpdate(),f=g.zoom,y=g.bearing,B=g.pitch,x=g.padding,k="bearing"in t?this._normalizeBearing(t.bearing,y):y,R="pitch"in t?+t.pitch:B,G="padding"in t?t.padding:g.padding,P=s.P.convert(t.offset),M=g.centerPoint.add(P),j=g.pointLocation(M),{center:et,zoom:W}=g.getConstrained(s.N.convert(t.center||j),(h=t.zoom)!==null&&h!==void 0?h:f);this._normalizeCenter(et,g);let X=g.zoomScale(W-f),ct=g.project(j),rt=g.project(et).sub(ct),ut=t.curve,Ft=Math.max(g.width,g.height),Qt=Ft/X,se=rt.mag();if("minZoom"in t){let Ge=s.ac(Math.min(t.minZoom,f,W),g.minZoom,g.maxZoom),Ci=Ft/g.zoomScale(Ge-f);ut=Math.sqrt(Ci/se*2)}let oe=ut*ut;function xe(Ge){let Ci=(Qt*Qt-Ft*Ft+(Ge?-1:1)*oe*oe*se*se)/(2*(Ge?Qt:Ft)*oe*se);return Math.log(Math.sqrt(Ci*Ci+1)-Ci)}function Ue(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function _e(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}let Be=xe(!1),De=function(Ge){return _e(Be)/_e(Be+ut*Ge)},ri=function(Ge){return Ft*((_e(Be)*(Ue(Ci=Be+ut*Ge)/_e(Ci))-Ue(Be))/oe)/se;var Ci},ve=(xe(!0)-Be)/ut;if(Math.abs(se)<1e-6||!isFinite(ve)){if(Math.abs(Ft-Qt)<1e-6)return this.easeTo(t,a);let Ge=Qt<Ft?-1:1;ve=Math.abs(Math.log(Qt/Ft))/ut,ri=()=>0,De=Ci=>Math.exp(Ge*ut*Ci)}return t.duration="duration"in t?+t.duration:1e3*ve/("screenSpeed"in t?+t.screenSpeed/ut:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=y!==k,this._pitching=R!==B,this._padding=!g.isPaddingEqual(G),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(et),this._ease(Ge=>{let Ci=Ge*ve,Ji=1/De(Ci);g.zoom=Ge===1?W:f+g.scaleZoom(Ji),this._rotating&&(g.bearing=s.y.number(y,k,Ge)),this._pitching&&(g.pitch=s.y.number(B,R,Ge)),this._padding&&(g.interpolatePadding(x,G,Ge),M=g.centerPoint.add(P)),this.terrain&&!t.freezeElevation&&this._updateElevation(Ge);let Ui=Ge===1?et:g.unproject(ct.add(rt.mult(ri(Ci))).mult(Ji));g.setLocationAtPoint(g.renderWorldCopies?Ui.wrap():Ui,M),this._applyUpdatedTransform(g),this._fireMoveEvents(a)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,a){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,a)}return t||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(t,a,h){h.animate===!1||h.duration===0?(t(1),a()):(this._easeStart=w.now(),this._easeOptions=h,this._onEaseFrame=t,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,a){t=s.b3(t,-180,180);let h=Math.abs(t-a);return Math.abs(t-360-a)<h&&(t-=360),Math.abs(t+360-a)<h&&(t+=360),t}_normalizeCenter(t,a){if(!a.renderWorldCopies||a.lngRange)return;let h=t.lng-a.center.lng;t.lng+=h>180?-360:h<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}let Nn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class os{constructor(t=Nn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,a){let h=this._map._getUIString(`AttributionControl.${a}`);t.title=h,t.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){let g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}let a=this._map.style.sourceCaches;for(let g in a){let f=a[g];if(f.used||f.usedForTerrain){let y=f.getSource();y.attribution&&t.indexOf(y.attribution)<0&&t.push(y.attribution)}}t=t.filter(g=>String(g).trim()),t.sort((g,f)=>g.length-f.length),t=t.filter((g,f)=>{for(let y=f+1;y<t.length;y++)if(t[y].indexOf(g)>=0)return!1;return!0});let h=t.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,t.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gc{constructor(t={}){this._updateCompact=()=>{let a=this._container.children;if(a.length){let h=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");let a=_.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class lr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){let a=++this._id;return this._queue.push({callback:t,id:a,cancelled:!1}),a}remove(t){let a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(let g of h)if(g.id===t)return void(g.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let a=this._currentlyRunning=this._queue;this._queue=[];for(let h of a)if(!h.cancelled&&(h.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Po=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Ps extends s.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,a){this.sourceCache.update(t,a),this._renderableTilesKeys=[];let h={};for(let g of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))h[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),s.aP(g.posMatrix,0,s.X,0,s.X,0,1),this._tiles[g.key]=new Ei(g,this.tileSize));for(let g in this._tiles)h[g]||delete this._tiles[g]}freeRtt(t){for(let a in this._tiles){let h=this._tiles[a];(!t||h.tileID.equals(t)||h.tileID.isChildOf(t)||t.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){let a={};for(let h of this._renderableTilesKeys){let g=this._tiles[h].tileID;if(g.canonical.equals(t.canonical)){let f=t.clone();f.posMatrix=new Float64Array(16),s.aP(f.posMatrix,0,s.X,0,s.X,0,1),a[h]=f}else if(g.canonical.isChildOf(t.canonical)){let f=t.clone();f.posMatrix=new Float64Array(16);let y=g.canonical.z-t.canonical.z,B=g.canonical.x-(g.canonical.x>>y<<y),x=g.canonical.y-(g.canonical.y>>y<<y),k=s.X>>y;s.aP(f.posMatrix,0,k,0,k,0,1),s.J(f.posMatrix,f.posMatrix,[-B*k,-x*k,0]),a[h]=f}else if(t.canonical.isChildOf(g.canonical)){let f=t.clone();f.posMatrix=new Float64Array(16);let y=t.canonical.z-g.canonical.z,B=t.canonical.x-(t.canonical.x>>y<<y),x=t.canonical.y-(t.canonical.y>>y<<y),k=s.X>>y;s.aP(f.posMatrix,0,s.X,0,s.X,0,1),s.J(f.posMatrix,f.posMatrix,[B*k,x*k,0]),s.K(f.posMatrix,f.posMatrix,[1/2**y,1/2**y,0]),a[h]=f}}return a}getSourceTile(t,a){let h=this.sourceCache._source,g=t.overscaledZ-this.deltaZoom;if(g>h.maxzoom&&(g=h.maxzoom),g<h.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(g).key);let f=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!f||!f.dem)&&a)for(;g>=h.minzoom&&(!f||!f.dem);)f=this.sourceCache.getTileByID(t.scaledTo(g--).key);return f}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=t)}}class Zc{constructor(t,a,h){this.painter=t,this.sourceCache=new Ps(a),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,a,h,g=s.X){var f;if(!(a>=0&&a<g&&h>=0&&h<g))return 0;let y=this.getTerrainData(t),B=(f=y.tile)===null||f===void 0?void 0:f.dem;if(!B)return 0;let x=function(j,et,W){var X=et[0],ct=et[1];return j[0]=W[0]*X+W[4]*ct+W[12],j[1]=W[1]*X+W[5]*ct+W[13],j}([],[a/g*s.X,h/g*s.X],y.u_terrain_matrix),k=[x[0]*B.dim,x[1]*B.dim],R=Math.floor(k[0]),G=Math.floor(k[1]),P=k[0]-R,M=k[1]-G;return B.get(R,G)*(1-P)*(1-M)+B.get(R+1,G)*P*(1-M)+B.get(R,G+1)*(1-P)*M+B.get(R+1,G+1)*P*M}getElevationForLngLatZoom(t,a){if(!s.bb(a,t.wrap()))return 0;let{tileID:h,mercatorX:g,mercatorY:f}=this._getOverscaledTileIDFromLngLatZoom(t,a);return this.getElevation(h,g%s.X,f%s.X,s.X)}getElevation(t,a,h,g=s.X){return this.getDEMElevation(t,a,h,g)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){let g=this.painter.context,f=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Mt(g,f,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Mt(g,new s.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}let a=this.sourceCache.getSourceTile(t,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){let g=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new Mt(g,a.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),a.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}let h=a&&a+a.tileID.key+t.key;if(h&&!this._demMatrixCache[h]){let g=this.sourceCache.sourceCache._source.maxzoom,f=t.canonical.z-a.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=g?f=t.canonical.z-g:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let y=t.canonical.x-(t.canonical.x>>f<<f),B=t.canonical.y-(t.canonical.y>>f<<f),x=s.bc(new Float64Array(16),[1/(s.X<<f),1/(s.X<<f),0]);s.J(x,x,[y*s.X,B*s.X,0]),this._demMatrixCache[t.key]={matrix:x,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(t){let a=this.painter,h=a.width/devicePixelRatio,g=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Mt(a.context,{width:h,height:g,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Mt(a.context,{width:h,height:g,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(h,g,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,h,g))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let f=0,y=0;f<this._coordsTextureSize;f++)for(let B=0;B<this._coordsTextureSize;B++,y+=4)a[y+0]=255&B,a[y+1]=255&f,a[y+2]=B>>8<<4|f>>8,a[y+3]=0;let h=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),g=new Mt(t,h,t.gl.RGBA,{premultiply:!1});return g.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);let a=new Uint8Array(4),h=this.painter.context,g=h.gl,f=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),y=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),B=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(f,B-y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null);let x=a[0]+(a[2]>>4<<8),k=a[1]+((15&a[2])<<8),R=this.coordsIndex[255-a[3]],G=R&&this.sourceCache.getTileByID(R);if(!G)return null;let P=this._coordsTextureSize,M=(1<<G.tileID.canonical.z)*P;return new s.Z((G.tileID.canonical.x*P+x)/M+G.tileID.wrap,(G.tileID.canonical.y*P+k)/M,this.getElevation(G.tileID,x,k,P))}depthAtPoint(t){let a=new Uint8Array(4),h=this.painter.context,g=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let t=this.painter.context,a=new s.bd,h=new s.aY,g=this.meshSize,f=s.X/g,y=g*g;for(let G=0;G<=g;G++)for(let P=0;P<=g;P++)a.emplaceBack(P*f,G*f,0);for(let G=0;G<y;G+=g+1)for(let P=0;P<g;P++)h.emplaceBack(P+G,g+P+G+1,g+P+G+2),h.emplaceBack(P+G,g+P+G+2,P+G+1);let B=a.length,x=B+2*(g+1);for(let G of[0,1])for(let P=0;P<=g;P++)for(let M of[0,1])a.emplaceBack(P*f,G*s.X,M);for(let G=0;G<2*g;G+=2)h.emplaceBack(x+G,x+G+1,x+G+3),h.emplaceBack(x+G,x+G+3,x+G+2),h.emplaceBack(B+G,B+G+3,B+G+1),h.emplaceBack(B+G,B+G+2,B+G+3);let k=a.length,R=k+2*(g+1);for(let G of[0,1])for(let P=0;P<=g;P++)for(let M of[0,1])a.emplaceBack(G*s.X,P*f,M);for(let G=0;G<2*g;G+=2)h.emplaceBack(k+G,k+G+1,k+G+3),h.emplaceBack(k+G,k+G+3,k+G+2),h.emplaceBack(R+G,R+G+3,R+G+1),h.emplaceBack(R+G,R+G+2,R+G+3);return this._mesh=new rs(t.createVertexBuffer(a,Po.members),t.createIndexBuffer(h),s.a0.simpleSegment(0,0,a.length,h.length)),this._mesh}getMeshFrameDelta(t){return 2*Math.PI*s.be/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,a){var h;let{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(t,a);return(h=this.getMinMaxElevation(g).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(t){let a=this.getTerrainData(t).tile,h={minElevation:null,maxElevation:null};return a&&a.dem&&(h.minElevation=a.dem.min*this.exaggeration,h.maxElevation=a.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(t,a){let h=s.Z.fromLngLat(t.wrap()),g=(1<<a)*s.X,f=h.x*g,y=h.y*g,B=Math.floor(f/s.X),x=Math.floor(y/s.X);return{tileID:new s.S(a,0,a,B,x),mercatorX:f,mercatorY:y}}}class kh{constructor(t,a,h){this._context=t,this._size=a,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){let a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Mt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(h.texture),{id:t,fbo:a,texture:h,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>t.id!==a),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(let a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(let t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}let Va={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pc{constructor(t,a){this.painter=t,this.terrain=a,this.pool=new kh(t.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(h=>!t._layers[h].isHidden(a)),this._coordsDescendingInv={};for(let h in t.sourceCaches){this._coordsDescendingInv[h]={};let g=t.sourceCaches[h].getVisibleCoordinates();for(let f of g){let y=this.terrain.sourceCache.getTerrainCoords(f);for(let B in y)this._coordsDescendingInv[h][B]||(this._coordsDescendingInv[h][B]=[]),this._coordsDescendingInv[h][B].push(y[B])}}this._coordsDescendingInvStr={};for(let h of t._order){let g=t._layers[h],f=g.source;if(Va[g.type]&&!this._coordsDescendingInvStr[f]){this._coordsDescendingInvStr[f]={};for(let y in this._coordsDescendingInv[f])this._coordsDescendingInvStr[f][y]=this._coordsDescendingInv[f][y].map(B=>B.key).sort().join()}}for(let h of this._renderableTiles)for(let g in this._coordsDescendingInvStr){let f=this._coordsDescendingInvStr[g][h.tileID.key];f&&f!==h.rttCoords[g]&&(h.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;let a=t.type,h=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Va[a]&&(this._prevType&&Va[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(t.id),!g))return!0;if(Va[this._prevType]||Va[a]&&g){this._prevType=a;let f=this._stacks.length-1,y=this._stacks[f]||[];for(let B of this._renderableTiles){if(this.pool.isFull()&&(Ga(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[f]){let k=this.pool.getObjectForId(B.rtt[f].id);if(k.stamp===B.rtt[f].stamp){this.pool.useObject(k);continue}}let x=this.pool.getOrCreateFreeObject();this.pool.useObject(x),this.pool.stampObject(x),B.rtt[f]={id:x.id,stamp:x.stamp},h.context.bindFramebuffer.set(x.fbo.framebuffer),h.context.clear({color:s.aM.transparent,stencil:0}),h.currentStencilSource=void 0;for(let k=0;k<y.length;k++){let R=h.style._layers[y[k]],G=R.source?this._coordsDescendingInv[R.source][B.tileID.key]:[B.tileID];h.context.viewport.set([0,0,x.fbo.width,x.fbo.height]),h._renderTileClippingMasks(R,G),h.renderLayer(h,h.style.sourceCaches[R.source],R,G),R.source&&(B.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][B.tileID.key])}}return Ga(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Va[a]}return!1}}let Kl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Hc=p,Lh={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Nn,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},LA=u=>{u.touchstart=u.dragStart,u.touchmoveWindow=u.dragMove,u.touchend=u.dragEnd},Ol={showCompass:!0,showZoom:!0,visualizePitch:!1};class cl{constructor(t,a,h=!1){this.mousedown=y=>{this.startMouse(s.e({},y,{ctrlKey:!0,preventDefault:()=>y.preventDefault()}),_.mousePos(this.element,y)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.moveMouse(y,_.mousePos(this.element,y))},this.mouseup=y=>{this.mouseRotate.dragEnd(y),this.mousePitch&&this.mousePitch.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,y.targetTouches)[0],this.startTouch(y,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,y.targetTouches)[0],this.moveTouch(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let g=t.dragRotate._mouseRotate.getClickTolerance(),f=t.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=Nl({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:y,clickTolerance:B,bearingDegreesPerPixelMoved:x=.8})=>{let k=new wA;return new Rs({clickTolerance:B,move:(R,G)=>({bearingDelta:(G.x-R.x)*x}),moveStateManager:k,enable:y,assignEvents:LA})})({clickTolerance:g,enable:!0}),this.map=t,h&&(this.mousePitch=BA({clickTolerance:f,enable:!0}),this.touchPitch=(({enable:y,clickTolerance:B,pitchDegreesPerPixelMoved:x=-.5})=>{let k=new wA;return new Rs({clickTolerance:B,move:(R,G)=>({pitchDelta:(G.y-R.y)*x}),moveStateManager:k,enable:y,assignEvents:LA})})({clickTolerance:f,enable:!0})),_.addEventListener(a,"mousedown",this.mousedown),_.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(a,"touchcancel",this.reset)}startMouse(t,a){this.mouseRotate.dragStart(t,a),this.mousePitch&&this.mousePitch.dragStart(t,a),_.disableDrag()}startTouch(t,a){this.touchRotate.dragStart(t,a),this.touchPitch&&this.touchPitch.dragStart(t,a),_.disableDrag()}moveMouse(t,a){let h=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(t,a)||{};if(g&&h.setBearing(h.getBearing()+g),this.mousePitch){let{pitchDelta:f}=this.mousePitch.dragMove(t,a)||{};f&&h.setPitch(h.getPitch()+f)}}moveTouch(t,a){let h=this.map,{bearingDelta:g}=this.touchRotate.dragMove(t,a)||{};if(g&&h.setBearing(h.getBearing()+g),this.touchPitch){let{pitchDelta:f}=this.touchPitch.dragMove(t,a)||{};f&&h.setPitch(h.getPitch()+f)}}off(){let t=this.element;_.removeEventListener(t,"mousedown",this.mousedown),_.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let jn;function Qr(u,t,a){let h=new s.N(u.lng,u.lat);if(u=new s.N(u.lng,u.lat),t){let g=new s.N(u.lng-360,u.lat),f=new s.N(u.lng+360,u.lat),y=a.locationPoint(u).distSqr(t);a.locationPoint(g).distSqr(t)<y?u=g:a.locationPoint(f).distSqr(t)<y&&(u=f)}for(;Math.abs(u.lng-a.center.lng)>180;){let g=a.locationPoint(u);if(g.x>=0&&g.y>=0&&g.x<=a.width&&g.y<=a.height)break;u.lng>a.center.lng?u.lng-=360:u.lng+=360}return u.lng!==h.lng&&a.locationPoint(u).y>a.height/2-a.getHorizon()?u:h}let EA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ul(u,t,a){let h=u.classList;for(let g in EA)h.remove(`maplibregl-${a}-anchor-${g}`);h.add(`maplibregl-${a}-anchor-${t}`)}class zl extends s.E{constructor(t){if(super(),this._onKeyPress=a=>{let h=a.code,g=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=a=>{let h=a.originalEvent.target,g=this._element;this._popup&&(h===g||g.contains(h))&&this.togglePopup()},this._update=a=>{var h;if(!this._map)return;let g=this._map.loaded()&&!this._map.isMoving();(a?.type==="terrain"||a?.type==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Qr(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${EA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${f}`),w.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){let h=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=s.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div");let a=_.createNS("http://www.w3.org/2000/svg","svg"),h=41,g=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${h}px`),a.setAttributeNS(null,"width",`${g}px`),a.setAttributeNS(null,"viewBox",`0 0 ${g} ${h}`);let f=_.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"stroke","none"),f.setAttributeNS(null,"stroke-width","1"),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"fill-rule","evenodd");let y=_.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"fill-rule","nonzero");let B=_.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(3.0, 29.0)"),B.setAttributeNS(null,"fill","#000000");let x=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let X of x){let ct=_.createNS("http://www.w3.org/2000/svg","ellipse");ct.setAttributeNS(null,"opacity","0.04"),ct.setAttributeNS(null,"cx","10.5"),ct.setAttributeNS(null,"cy","5.80029008"),ct.setAttributeNS(null,"rx",X.rx),ct.setAttributeNS(null,"ry",X.ry),B.appendChild(ct)}let k=_.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);let R=_.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(R);let G=_.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");let P=_.createNS("http://www.w3.org/2000/svg","path");P.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(P);let M=_.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(6.0, 7.0)"),M.setAttributeNS(null,"fill","#FFFFFF");let j=_.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(8.0, 8.0)");let et=_.createNS("http://www.w3.org/2000/svg","circle");et.setAttributeNS(null,"fill","#000000"),et.setAttributeNS(null,"opacity","0.25"),et.setAttributeNS(null,"cx","5.5"),et.setAttributeNS(null,"cy","5.5"),et.setAttributeNS(null,"r","5.4999962");let W=_.createNS("http://www.w3.org/2000/svg","circle");W.setAttributeNS(null,"fill","#FFFFFF"),W.setAttributeNS(null,"cx","5.5"),W.setAttributeNS(null,"cy","5.5"),W.setAttributeNS(null,"r","5.4999962"),j.appendChild(et),j.appendChild(W),y.appendChild(B),y.appendChild(k),y.appendChild(G),y.appendChild(M),y.appendChild(j),a.appendChild(y),a.setAttributeNS(null,"height",h*this._scale+"px"),a.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(a),this._offset=s.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),ul(this._element,this._anchor,"marker"),t&&t.className)for(let a of t.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=s.N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){let g=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){let t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var a,h;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let g=this._map,f=g.terrain.depthAtPoint(this._pos),y=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,y)-f<.006)return void(this._element.style.opacity=this._opacity);let B=-this._offset.y/g.transform._pixelPerMeter,x=Math.sin(g.getPitch()*Math.PI/180)*B,k=g.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),R=g.transform.lngLatToCameraDepth(this._lngLat,y+x)-k>.006;((h=this._popup)===null||h===void 0?void 0:h.isOpen())&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=s.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,a){return t===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}let Iu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},hl=0,gl=!1,Ho={maxWidth:100,unit:"metric"};function dl(u,t,a){let h=a&&a.maxWidth||100,g=u._container.clientHeight/2,f=u.unproject([0,g]),y=u.unproject([h,g]),B=f.distanceTo(y);if(a&&a.unit==="imperial"){let x=3.2808*B;x>5280?gi(t,h,x/5280,u._getUIString("ScaleControl.Miles")):gi(t,h,x,u._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?gi(t,h,B/1852,u._getUIString("ScaleControl.NauticalMiles")):B>=1e3?gi(t,h,B/1e3,u._getUIString("ScaleControl.Kilometers")):gi(t,h,B,u._getUIString("ScaleControl.Meters"))}function gi(u,t,a,h){let g=function(f){let y=Math.pow(10,`${Math.floor(f)}`.length-1),B=f/y;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(x){let k=Math.pow(10,Math.ceil(-Math.log(x)/Math.LN10));return Math.round(x*k)/k}(B),y*B}(a);u.style.width=t*(g/a)+"px",u.innerHTML=`${g}&nbsp;${h}`}let _i={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Wl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jl(u){if(u){if(typeof u=="number"){let t=Math.round(Math.abs(u)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,u),"top-left":new s.P(t,t),"top-right":new s.P(-t,t),bottom:new s.P(0,-u),"bottom-left":new s.P(t,-t),"bottom-right":new s.P(-t,-t),left:new s.P(u,0),right:new s.P(-u,0)}}if(u instanceof s.P||Array.isArray(u)){let t=s.P.convert(u);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:s.P.convert(u.center||[0,0]),top:s.P.convert(u.top||[0,0]),"top-left":s.P.convert(u["top-left"]||[0,0]),"top-right":s.P.convert(u["top-right"]||[0,0]),bottom:s.P.convert(u.bottom||[0,0]),"bottom-left":s.P.convert(u["bottom-left"]||[0,0]),"bottom-right":s.P.convert(u["bottom-right"]||[0,0]),left:s.P.convert(u.left||[0,0]),right:s.P.convert(u.right||[0,0])}}return Jl(new s.P(0,0))}let Xl=p;l.AJAXError=s.bh,l.Evented=s.E,l.LngLat=s.N,l.MercatorCoordinate=s.Z,l.Point=s.P,l.addProtocol=s.bi,l.config=s.a,l.removeProtocol=s.bj,l.AttributionControl=os,l.BoxZoomHandler=ss,l.CanvasSource=ti,l.CooperativeGesturesHandler=Na,l.DoubleClickZoomHandler=Ma,l.DragPanHandler=kA,l.DragRotateHandler=Cu,l.EdgeInsets=Mn,l.FullscreenControl=class extends s.E{constructor(u={}){super(),this._onFullscreenChange=()=>{var t;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=a?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,u&&u.container&&(u.container instanceof HTMLElement?this._container=u.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let u=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",u).setAttribute("aria-hidden","true"),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.title=u}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Le,l.GeolocateControl=class extends s.E{constructor(u){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{let a=new s.N(t.coords.longitude,t.coords.latitude),h=t.coords.accuracy,g=this._map.getBearing(),f=s.e({bearing:g},this.options.fitBoundsOptions),y=Dt.fromLngLat(a,h);this._map.fitBounds(y,f,{geolocateSource:!0})},this._updateMarker=t=>{if(t){let a=new s.N(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&gl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{let a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zl({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},Iu,u)}onAdd(u){return this._map=u,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(t=!1){if(jn!==void 0&&!t)return jn;if(window.navigator.permissions===void 0)return jn=!!window.navigator.geolocation,jn;try{jn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{jn=!!window.navigator.geolocation}return jn})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,hl=0,gl=!1}_isOutOfMapMaxBounds(u){let t=this._map.getMaxBounds(),a=u.coords;return t&&(a.longitude<t.getWest()||a.longitude>t.getEast()||a.latitude<t.getSouth()||a.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let u=this._map.getBounds(),t=u.getSouthEast(),a=u.getNorthEast(),h=t.distanceTo(a),g=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hl--,gl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let u;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hl++,hl>1?(u={maximumAge:6e5,timeout:0},gl=!0):(u=this.options.positionOptions,gl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.Hash=Qo,l.ImageSource=Ke,l.KeyboardHandler=Gs,l.LngLatBounds=Dt,l.LogoControl=Gc,l.Map=class extends ia{constructor(u){s.bf.mark(s.bg.create);let t=Object.assign(Object.assign({},Lh),u);if(t.minZoom!=null&&t.maxZoom!=null&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(t.minPitch!=null&&t.maxPitch!=null&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(t.minPitch!=null&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(t.maxPitch!=null&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ts(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new lr,this._controls=[],this._mapId=s.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._maxTileCacheZoomLevels=t.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=t.preserveDrawingBuffer===!0,this._antialias=t.antialias===!0,this._trackResize=t.trackResize===!0,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles===!0,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions===!0,this._collectResourceTiming=t.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Kl),t.locale),this._clickTolerance=t.clickTolerance,this._overridePixelRatio=t.pixelRatio,this._maxCanvasSize=t.maxCanvasSize,this.transformCameraUpdate=t.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=t.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=D.addThrottleControl(()=>this.isMoving()),this._requestManager=new tt(t.transformRequest),typeof t.container=="string"){if(this._container=document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1,h=Uo(g=>{this._trackResize&&!this._removed&&(this.resize(g),this.redraw())},50);this._resizeObserver=new ResizeObserver(g=>{a?h(g):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Rc(this,t),this._hash=t.hash&&new Qo(typeof t.hash=="string"&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,s.e({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,this._validateStyle=t.validateStyle,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new os(typeof t.attributionControl=="boolean"?void 0:t.attributionControl)),t.maplibreLogo&&this.addControl(new Gc,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new s.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new s.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new s.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(u,t){if(t===void 0&&(t=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let a=u.onAdd(this);this._controls.push(u);let h=this._controlPositions[t];return t.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(u){if(!u||!u.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let t=this._controls.indexOf(u);return t>-1&&this._controls.splice(t,1),u.onRemove(this),this}hasControl(u){return this._controls.indexOf(u)>-1}calculateCameraOptionsFromTo(u,t,a,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(u,t,a,h)}resize(u){var t;let a=this._containerDimensions(),h=a[0],g=a[1],f=this._getClampedPixelRatio(h,g);if(this._resizeCanvas(h,g,f),this.painter.resize(h,g,f),this.painter.overLimit()){let B=this.painter.context.gl;this._maxCanvasSize=[B.drawingBufferWidth,B.drawingBufferHeight];let x=this._getClampedPixelRatio(h,g);this._resizeCanvas(h,g,x),this.painter.resize(h,g,x)}this.transform.resize(h,g),(t=this._requestedCameraState)===null||t===void 0||t.resize(h,g);let y=!this._moving;return y&&(this.stop(),this.fire(new s.k("movestart",u)).fire(new s.k("move",u))),this.fire(new s.k("resize",u)),y&&this.fire(new s.k("moveend",u)),this}_getClampedPixelRatio(u,t){let{0:a,1:h}=this._maxCanvasSize,g=this.getPixelRatio(),f=u*g,y=t*g;return Math.min(f>a?a/f:1,y>h?h/y:1)*g}getPixelRatio(){var u;return(u=this._overridePixelRatio)!==null&&u!==void 0?u:devicePixelRatio}setPixelRatio(u){this._overridePixelRatio=u,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(u){return this.transform.setMaxBounds(Dt.convert(u)),this._update()}setMinZoom(u){if((u=u??-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(u){if((u=u??22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(u){if((u=u??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(u){if((u=u??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(u){return this.transform.renderWorldCopies=u,this._update()}project(u){return this.transform.locationPoint(s.N.convert(u),this.style&&this.terrain)}unproject(u){return this.transform.pointLocation(s.P.convert(u),this.terrain)}isMoving(){var u;return this._moving||((u=this.handlers)===null||u===void 0?void 0:u.isMoving())}isZooming(){var u;return this._zooming||((u=this.handlers)===null||u===void 0?void 0:u.isZooming())}isRotating(){var u;return this._rotating||((u=this.handlers)===null||u===void 0?void 0:u.isRotating())}_createDelegatedListener(u,t,a){if(u==="mouseenter"||u==="mouseover"){let h=!1;return{layers:t,listener:a,delegates:{mousemove:f=>{let y=t.filter(x=>this.getLayer(x)),B=y.length!==0?this.queryRenderedFeatures(f.point,{layers:y}):[];B.length?h||(h=!0,a.call(this,new zr(u,this,f.originalEvent,{features:B}))):h=!1},mouseout:()=>{h=!1}}}}if(u==="mouseleave"||u==="mouseout"){let h=!1;return{layers:t,listener:a,delegates:{mousemove:y=>{let B=t.filter(x=>this.getLayer(x));(B.length!==0?this.queryRenderedFeatures(y.point,{layers:B}):[]).length?h=!0:h&&(h=!1,a.call(this,new zr(u,this,y.originalEvent)))},mouseout:y=>{h&&(h=!1,a.call(this,new zr(u,this,y.originalEvent)))}}}}{let h=g=>{let f=t.filter(B=>this.getLayer(B)),y=f.length!==0?this.queryRenderedFeatures(g.point,{layers:f}):[];y.length&&(g.features=y,a.call(this,g),delete g.features)};return{layers:t,listener:a,delegates:{[u]:h}}}}_saveDelegatedListener(u,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(t)}_removeDelegatedListener(u,t,a){if(!this._delegatedListeners||!this._delegatedListeners[u])return;let h=this._delegatedListeners[u];for(let g=0;g<h.length;g++){let f=h[g];if(f.listener===a&&f.layers.length===t.length&&f.layers.every(y=>t.includes(y))){for(let y in f.delegates)this.off(y,f.delegates[y]);return void h.splice(g,1)}}}on(u,t,a){if(a===void 0)return super.on(u,t);let h=this._createDelegatedListener(u,typeof t=="string"?[t]:t,a);this._saveDelegatedListener(u,h);for(let g in h.delegates)this.on(g,h.delegates[g]);return this}once(u,t,a){if(a===void 0)return super.once(u,t);let h=typeof t=="string"?[t]:t,g=this._createDelegatedListener(u,h,a);for(let f in g.delegates){let y=g.delegates[f];g.delegates[f]=(...B)=>{this._removeDelegatedListener(u,h,a),y(...B)}}this._saveDelegatedListener(u,g);for(let f in g.delegates)this.once(f,g.delegates[f]);return this}off(u,t,a){return a===void 0?super.off(u,t):(this._removeDelegatedListener(u,typeof t=="string"?[t]:t,a),this)}queryRenderedFeatures(u,t){if(!this.style)return[];let a,h=u instanceof s.P||Array.isArray(u),g=h?u:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(h?{}:u)||{},g instanceof s.P||typeof g[0]=="number")a=[s.P.convert(g)];else{let f=s.P.convert(g[0]),y=s.P.convert(g[1]);a=[f,new s.P(y.x,f.y),y,new s.P(f.x,y.y),f]}return this.style.queryRenderedFeatures(a,t,this.transform)}querySourceFeatures(u,t){return this.style.querySourceFeatures(u,t)}setStyle(u,t){return(t=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&u?(this._diffStyle(u,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(u,t))}setTransformRequest(u){return this._requestManager.setTransformRequest(u),this}_getUIString(u){let t=this._locale[u];if(t==null)throw new Error(`Missing UI string '${u}'`);return t}_updateStyle(u,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(u,t));let a=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!u)),u?(this.style=new pt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof u=="string"?this.style.loadURL(u,t,a):this.style.loadJSON(u,t,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new pt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(u,t){if(typeof u=="string"){let a=this._requestManager.transformRequest(u,"Style");s.h(a,new AbortController).then(h=>{this._updateDiff(h.data,t)}).catch(h=>{h&&this.fire(new s.j(h))})}else typeof u=="object"&&this._updateDiff(u,t)}_updateDiff(u,t){try{this.style.setState(u,t)&&this._update(!0)}catch(a){s.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(u,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(u,t){return this._lazyInitEmptyStyle(),this.style.addSource(u,t),this._update(!0)}isSourceLoaded(u){let t=this.style&&this.style.sourceCaches[u];if(t!==void 0)return t.loaded();this.fire(new s.j(new Error(`There is no source with ID '${u}'`)))}setTerrain(u){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),u){let t=this.style.sourceCaches[u.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${u.source}`);this.terrain===null&&t.reload();for(let a in this.style._layers){let h=this.style._layers[a];h.type==="hillshade"&&h.source===u.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zc(this.painter,t,u),this.painter.renderToTexture=new Pc(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==u.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:u})),this}getTerrain(){var u,t;return(t=(u=this.terrain)===null||u===void 0?void 0:u.options)!==null&&t!==void 0?t:null}areTilesLoaded(){let u=this.style&&this.style.sourceCaches;for(let t in u){let a=u[t]._tiles;for(let h in a){let g=a[h];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(u){return this.style.removeSource(u),this._update(!0)}getSource(u){return this.style.getSource(u)}addImage(u,t,a={}){let{pixelRatio:h=1,sdf:g=!1,stretchX:f,stretchY:y,content:B,textFitWidth:x,textFitHeight:k}=a;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||s.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:R,height:G,data:P}=t,M=t;return this.style.addImage(u,{data:new s.R({width:R,height:G},new Uint8Array(P)),pixelRatio:h,stretchX:f,stretchY:y,content:B,textFitWidth:x,textFitHeight:k,sdf:g,version:0,userImage:M}),M.onAdd&&M.onAdd(this,u),this}}{let{width:R,height:G,data:P}=w.getImageData(t);this.style.addImage(u,{data:new s.R({width:R,height:G},P),pixelRatio:h,stretchX:f,stretchY:y,content:B,textFitWidth:x,textFitHeight:k,sdf:g,version:0})}}updateImage(u,t){let a=this.style.getImage(u);if(!a)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let h=t instanceof HTMLImageElement||s.b(t)?w.getImageData(t):t,{width:g,height:f,data:y}=h;if(g===void 0||f===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==a.data.width||f!==a.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let B=!(t instanceof HTMLImageElement||s.b(t));return a.data.replace(y,B),this.style.updateImage(u,a),this}getImage(u){return this.style.getImage(u)}hasImage(u){return u?!!this.style.getImage(u):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(u){this.style.removeImage(u)}loadImage(u){return D.getImage(this._requestManager.transformRequest(u,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(u,t){return this._lazyInitEmptyStyle(),this.style.addLayer(u,t),this._update(!0)}moveLayer(u,t){return this.style.moveLayer(u,t),this._update(!0)}removeLayer(u){return this.style.removeLayer(u),this._update(!0)}getLayer(u){return this.style.getLayer(u)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(u,t,a){return this.style.setLayerZoomRange(u,t,a),this._update(!0)}setFilter(u,t,a={}){return this.style.setFilter(u,t,a),this._update(!0)}getFilter(u){return this.style.getFilter(u)}setPaintProperty(u,t,a,h={}){return this.style.setPaintProperty(u,t,a,h),this._update(!0)}getPaintProperty(u,t){return this.style.getPaintProperty(u,t)}setLayoutProperty(u,t,a,h={}){return this.style.setLayoutProperty(u,t,a,h),this._update(!0)}getLayoutProperty(u,t){return this.style.getLayoutProperty(u,t)}setGlyphs(u,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(u,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(u,t,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(u,t,a,h=>{h||this._update(!0)}),this}removeSprite(u){return this._lazyInitEmptyStyle(),this.style.removeSprite(u),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(u,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(u,t,a=>{a||this._update(!0)}),this}setLight(u,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(u,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(u){return this._lazyInitEmptyStyle(),this.style.setSky(u),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(u,t){return this.style.setFeatureState(u,t),this._update()}removeFeatureState(u,t){return this.style.removeFeatureState(u,t),this._update()}getFeatureState(u){return this.style.getFeatureState(u)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let u=0,t=0;return this._container&&(u=this._container.clientWidth||400,t=this._container.clientHeight||300),[u,t]}_setupContainer(){let u=this._container;u.classList.add("maplibregl-map");let t=this._canvasContainer=_.create("div","maplibregl-canvas-container",u);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let a=this._containerDimensions(),h=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],h);let g=this._controlContainer=_.create("div","maplibregl-control-container",u),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{f[y]=_.create("div",`maplibregl-ctrl-${y} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(u,t,a){this._canvas.width=Math.floor(a*u),this._canvas.height=Math.floor(a*t),this._canvas.style.width=`${u}px`,this._canvas.style.height=`${t}px`}_setupPainter(){let u={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},t=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{t={requestedAttributes:u},h&&(t.statusMessage=h.statusMessage,t.type=h.type)},{once:!0});let a=this._canvas.getContext("webgl2",u)||this._canvas.getContext("webgl",u);if(!a){let h="Failed to initialize WebGL";throw t?(t.message=h,new Error(JSON.stringify(t))):new Error(h)}this.painter=new ea(a,this.transform),E.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(u){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(u){return this._update(),this._renderTaskQueue.add(u)}_cancelRenderFrame(u){this._renderTaskQueue.remove(u)}_render(u){let t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(u),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let g=this.transform.zoom,f=w.now();this.style.zoomHistory.update(g,f);let y=new s.z(g,{now:f,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),B=y.crossFadingFactor();B===1&&B===this._crossFadingFactor||(a=!0,this._crossFadingFactor=B),this.style.update(y)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var u;this._hash&&this._hash.remove();for(let a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),(u=this._resizeObserver)===null||u===void 0||u.disconnect();let t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(u=>{s.bf.frame(u),this._frameRequest=null,this._render(u)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())}get showPadding(){return!!this._showPadding}set showPadding(u){this._showPadding!==u&&(this._showPadding=u,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())}get repaint(){return!!this._repaint}set repaint(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(u){this._vertices=u,this._update()}get version(){return Hc}getCameraTargetElevation(){return this.transform.elevation}},l.MapMouseEvent=zr,l.MapTouchEvent=ns,l.MapWheelEvent=Pa,l.Marker=zl,l.NavigationControl=class{constructor(u){this._updateZoomButtons=()=>{let t=this._map.getZoom(),a=t===this._map.getMaxZoom(),h=t===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{let t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,a)=>{let h=this._map._getUIString(`NavigationControl.${a}`);t.title=h,t.setAttribute("aria-label",h)},this.options=s.e({},Ol,u),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(u){return this._map=u,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(u,t){let a=_.create("button",u,this._container);return a.type="button",a.addEventListener("click",t),a}},l.Popup=class extends s.E{constructor(u){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let B of this.options.className.split(" "))this._container.classList.add(B);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Qr(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!t)return;let h=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor,f=Jl(this.options.offset);if(!g){let B=this._container.offsetWidth,x=this._container.offsetHeight,k;k=h.y+f.bottom.y<x?["top"]:h.y>this._map.transform.height-x?["bottom"]:[],h.x<B/2?k.push("left"):h.x>this._map.transform.width-B/2&&k.push("right"),g=k.length===0?"bottom":k.join("-")}let y=h.add(f[g]);this.options.subpixelPositioning||(y=y.round()),_.setTransform(this._container,`${EA[g]} translate(${y.x}px,${y.y}px)`),ul(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(_i),u)}addTo(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.N.convert(u),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(u){return this.setDOMContent(document.createTextNode(u))}setHTML(u){let t=document.createDocumentFragment(),a=document.createElement("body"),h;for(a.innerHTML=u;h=a.firstChild,h;)t.appendChild(h);return this.setDOMContent(t)}getMaxWidth(){var u;return(u=this._container)===null||u===void 0?void 0:u.style.maxWidth}setMaxWidth(u){return this.options.maxWidth=u,this._update(),this}setDOMContent(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(u){return this._container&&this._container.classList.add(u),this}removeClassName(u){return this._container&&this._container.classList.remove(u),this}setOffset(u){return this.options.offset=u,this._update(),this}toggleClassName(u){if(this._container)return this._container.classList.toggle(u)}setSubpixelPositioning(u){this.options.subpixelPositioning=u}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let u=this._container.querySelector(Wl);u&&u.focus()}},l.RasterDEMTileSource=Oe,l.RasterTileSource=Xe,l.ScaleControl=class{constructor(u){this._onMove=()=>{dl(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,dl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ho),u)}getDefaultPosition(){return"bottom-left"}onAdd(u){return this._map=u,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",u.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=co,l.Style=pt,l.TerrainControl=class{constructor(u){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=u}onAdd(u){return this._map=u,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=FA,l.TwoFingersTouchRotateHandler=ll,l.TwoFingersTouchZoomHandler=Al,l.TwoFingersTouchZoomRotateHandler=Qc,l.VectorTileSource=Tt,l.VideoSource=ze,l.addSourceType=(u,t)=>s._(void 0,void 0,void 0,function*(){if(Si(u))throw new Error(`A source type called "${u}" already exists.`);((a,h)=>{ci[a]=h})(u,t)}),l.clearPrewarmedResources=function(){let u=Ut;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(J),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return pi().getRTLTextPluginStatus()},l.getVersion=function(){return Xl},l.getWorkerCount=function(){return dt.workerCount},l.getWorkerUrl=function(){return s.a.WORKER_URL},l.importScriptInWorkers=function(u){return ce().broadcast("IS",u)},l.prewarm=function(){ie().acquire(J)},l.setMaxParallelImageRequests=function(u){s.a.MAX_PARALLEL_IMAGE_REQUESTS=u},l.setRTLTextPlugin=function(u,t){return pi().setRTLTextPlugin(u,t)},l.setWorkerCount=function(u){dt.workerCount=u},l.setWorkerUrl=function(u){s.a.WORKER_URL=u}});var o=n;return o})});var Lb=ua((Sd,Fd)=>{(function(n,e){typeof Sd=="object"&&typeof Fd<"u"?e(Sd):typeof define=="function"&&define.amd?define(["exports"],e):e((n=typeof globalThis<"u"?globalThis:n||self).VectorTextProtocol={})})(Sd,function(n){"use strict";function e(ht){return ht&&ht.__esModule&&Object.prototype.hasOwnProperty.call(ht,"default")?ht.default:ht}function r(ht){if(ht.__esModule)return ht;var pt=ht.default;if(typeof pt=="function"){var At=function St(){return this instanceof St?Reflect.construct(pt,arguments,this.constructor):pt.apply(this,arguments)};At.prototype=pt.prototype}else At={};return Object.defineProperty(At,"__esModule",{value:!0}),Object.keys(ht).forEach(function(St){var _t=Object.getOwnPropertyDescriptor(ht,St);Object.defineProperty(At,St,_t.get?_t:{enumerable:!0,get:function(){return ht[St]}})}),At}function o(ht){return new Function("d","return {"+ht.map(function(pt,At){return JSON.stringify(pt)+": d["+At+"]"}).join(",")+"}")}function l(ht){var pt=new RegExp('["'+ht+`
]`),At=ht.charCodeAt(0);function St(ee,be){var Ie,pe,$t={},fe={},Ce=[],Te=ee.length,Li=0,ki=0;function Ze(){if(Li>=Te)return fe;if(pe)return pe=!1,$t;var ii,ai=Li;if(ee.charCodeAt(ai)===34){for(var wi=ai;wi++<Te;)if(ee.charCodeAt(wi)===34){if(ee.charCodeAt(wi+1)!==34)break;++wi}return Li=wi+2,(ii=ee.charCodeAt(wi+1))===13?(pe=!0,ee.charCodeAt(wi+2)===10&&++Li):ii===10&&(pe=!0),ee.slice(ai+1,wi).replace(/""/g,'"')}for(;Li<Te;){var ar=1;if((ii=ee.charCodeAt(Li++))===10)pe=!0;else if(ii===13)pe=!0,ee.charCodeAt(Li)===10&&(++Li,++ar);else if(ii!==At)continue;return ee.slice(ai,Li-ar)}return ee.slice(ai)}for(;(Ie=Ze())!==fe;){for(var Fe=[];Ie!==$t&&Ie!==fe;)Fe.push(Ie),Ie=Ze();be&&(Fe=be(Fe,ki++))==null||Ce.push(Fe)}return Ce}function _t(ee){return ee.map(zt).join(ht)}function zt(ee){return ee==null?"":pt.test(ee+="")?'"'+ee.replace(/\"/g,'""')+'"':ee}return{parse:function(ee,be){var Ie,pe,$t=St(ee,function(fe,Ce){if(Ie)return Ie(fe,Ce-1);pe=fe,Ie=be?function(Te,Li){var ki=o(Te);return function(Ze,Fe){return Li(ki(Ze),Fe,Te)}}(fe,be):o(fe)});return $t.columns=pe,$t},parseRows:St,format:function(ee,be){return be==null&&(be=function(Ie){var pe=Object.create(null),$t=[];return Ie.forEach(function(fe){for(var Ce in fe)Ce in pe||$t.push(pe[Ce]=Ce)}),$t}(ee)),[be.map(zt).join(ht)].concat(ee.map(function(Ie){return be.map(function(pe){return zt(Ie[pe])}).join(ht)})).join(`
`)},formatRows:function(ee){return ee.map(_t).join(`
`)}}}var s=l(","),p=s.parse,m=s.parseRows,I=s.format,w=s.formatRows,_=l("	"),E=_.parse,U=_.parseRows,F=_.format,V=_.formatRows,H=r(Object.freeze({__proto__:null,csvFormat:I,csvFormatRows:w,csvParse:p,csvParseRows:m,dsvFormat:l,tsvFormat:F,tsvFormatRows:V,tsvParse:E,tsvParseRows:U})),Y={exports:{}};function D(ht,pt){var At=tt(ht,pt);return At.whole+"\xB0 "+(At.minutes?At.minutes+"' ":"")+(At.seconds?At.seconds+'" ':"")+At.dir}function tt(ht,pt){var At=({lat:["N","S"],lon:["E","W"]}[pt]||"")[ht>=0?0:1],St=Math.abs(ht),_t=Math.floor(St),zt=60*(St-_t),ee=Math.floor(zt);return{whole:_t,minutes:ee,seconds:Math.floor(60*(zt-ee)),dir:At}}function ot(ht,pt){if(pt||(pt="NSEW"),typeof ht!="string")return null;var At=(ht=ht.toUpperCase()).match(/^[\s\,]*([NSEW])?\s*([\-|—|―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/);if(!At)return null;var St,_t=At[0];if(At[1]&&At[5]?(St=At[1],_t=_t.slice(0,-1)):St=At[1]||At[5],St&&pt.indexOf(St)===-1)return null;var zt=At[2]?parseFloat(At[2]):0,ee=At[3]?parseFloat(At[3])/60:0,be=At[4]?parseFloat(At[4])/3600:0,Ie=zt<0?-1:1;return St!=="S"&&St!=="W"||(Ie*=-1),{val:(Math.abs(zt)+ee+be)*Ie,dim:St,matched:_t,remain:ht.slice(_t.length)}}Y.exports=function(ht,pt){var At=ot(ht,pt);return At===null?null:At.val},Y.exports.pair=function(ht,pt){var At=ot(ht=ht.trim(),pt);if(!At)return null;var St=ot(ht=At.remain.trim(),pt);return!St||St.remain?null:At.dim?function(_t,zt,ee){if(ee==="N"||ee==="S")return[_t,zt];if(ee==="W"||ee==="E")return[zt,_t]}(At.val,St.val,At.dim):[At.val,St.val]},Y.exports.format=D,Y.exports.formatPair=function(ht){return D(ht.lat,"lat")+" "+D(ht.lon,"lon")},Y.exports.coordToDMS=tt;var bt=Y.exports,kt=H,Lt=bt,vt=/(Lat)(itude)?/gi,ft=/(L)(on|ng)(gitude)?/i;function Mt(ht,pt){var At,St,_t;for(var zt in ht)(St=zt.match(pt))&&(!At||St[0].length/zt.length>_t)&&(_t=St[0].length/zt.length,At=zt);return At}function qt(ht){return Mt(ht,vt)}function at(ht){return Mt(ht,ft)}function st(ht){return typeof ht=="object"?Object.keys(ht).length:0}function wt(ht){var pt=[];return[",",";","	","|"].forEach(function(At){var St=kt.dsvFormat(At).parse(ht);if(St.length>=1){for(var _t=st(St[0]),zt=0;zt<St.length;zt++)if(st(St[zt])!==_t)return;pt.push({delimiter:At,arity:Object.keys(St[0]).length})}}),pt.length?pt.sort(function(At,St){return St.arity-At.arity})[0].delimiter:null}var yt={isLon:function(ht){return!!ht.match(ft)},isLat:function(ht){return!!ht.match(vt)},guessLatHeader:qt,guessLonHeader:at,csv:kt.csvParse,tsv:kt.tsvParse,dsv:kt,auto:function(ht){var pt=wt(ht);return pt?function(At){return delete At.columns,At}(kt.dsvFormat(pt).parse(ht)):null},csv2geojson:function(ht,pt,At){At||(At=pt,pt={}),pt.delimiter=pt.delimiter||",";var St=pt.latfield||"",_t=pt.lonfield||"",zt=pt.crs||"",ee=[],be={type:"FeatureCollection",features:ee};if(zt!==""&&(be.crs={type:"name",properties:{name:zt}}),pt.delimiter!=="auto"||typeof ht!="string"||(pt.delimiter=wt(ht),pt.delimiter)){var Ie=pt.numericFields?pt.numericFields.split(","):null,pe=typeof ht=="string"?kt.dsvFormat(pt.delimiter).parse(ht,function(Fe){if(Ie)for(var ii in Fe)Ie.includes(ii)&&(Fe[ii]=+Fe[ii]);return Fe}):ht;if(pe.length){var $t,fe=[];if(St||(St=qt(pe[0])),_t||(_t=at(pe[0])),!St||!_t){for($t=0;$t<pe.length;$t++)ee.push({type:"Feature",properties:pe[$t],geometry:null});At(fe.length?fe:null,be)}else{for($t=0;$t<pe.length;$t++)if(pe[$t][_t]!==void 0&&pe[$t][St]!==void 0){var Ce,Te,Li,ki=pe[$t][_t],Ze=pe[$t][St];(Li=Lt(ki,"EW"))&&(ki=Li),(Li=Lt(Ze,"NS"))&&(Ze=Li),Ce=parseFloat(ki),Te=parseFloat(Ze),isNaN(Ce)||isNaN(Te)?fe.push({message:"A row contained an invalid value for latitude or longitude",row:pe[$t],index:$t}):(pt.includeLatLon||(delete pe[$t][_t],delete pe[$t][St]),ee.push({type:"Feature",properties:pe[$t],geometry:{type:"Point",coordinates:[parseFloat(Ce),parseFloat(Te)]}}))}At(fe.length?fe:null,be)}}else At(null,be)}else At({type:"Error",message:"Could not autodetect delimiter"})},toLine:function(ht){for(var pt=ht.features,At={type:"Feature",geometry:{type:"LineString",coordinates:[]}},St=0;St<pt.length;St++)At.geometry.coordinates.push(pt[St].geometry.coordinates);return At.properties=pt.reduce(function(_t,zt){for(var ee in zt.properties)_t[ee]||(_t[ee]=[]),_t[ee].push(zt.properties[ee]);return _t},{}),{type:"FeatureCollection",features:[At]}},toPolygon:function(ht){for(var pt=ht.features,At={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},St=0;St<pt.length;St++)At.geometry.coordinates[0].push(pt[St].geometry.coordinates);return At.properties=pt.reduce(function(_t,zt){for(var ee in zt.properties)_t[ee]||(_t[ee]=[]),_t[ee].push(zt.properties[ee]);return _t},{}),{type:"FeatureCollection",features:[At]}}};function te(ht){return ht}function jt(ht,pt){var At=pt.id,St=pt.bbox,_t=pt.properties==null?{}:pt.properties,zt=function(ee,be){var Ie=function(Ze){if(Ze==null)return te;var Fe,ii,ai=Ze.scale[0],wi=Ze.scale[1],ar=Ze.translate[0],si=Ze.translate[1];return function(vr,nn){nn||(Fe=ii=0);var Br=2,ms=vr.length,Rn=new Array(ms);for(Rn[0]=(Fe+=vr[0])*ai+ar,Rn[1]=(ii+=vr[1])*wi+si;Br<ms;)Rn[Br]=vr[Br],++Br;return Rn}}(ee.transform),pe=ee.arcs;function $t(Ze,Fe){Fe.length&&Fe.pop();for(var ii=pe[Ze<0?~Ze:Ze],ai=0,wi=ii.length;ai<wi;++ai)Fe.push(Ie(ii[ai],ai));Ze<0&&function(ar,si){for(var vr,nn=ar.length,Br=nn-si;Br<--nn;)vr=ar[Br],ar[Br++]=ar[nn],ar[nn]=vr}(Fe,wi)}function fe(Ze){return Ie(Ze)}function Ce(Ze){for(var Fe=[],ii=0,ai=Ze.length;ii<ai;++ii)$t(Ze[ii],Fe);return Fe.length<2&&Fe.push(Fe[0]),Fe}function Te(Ze){for(var Fe=Ce(Ze);Fe.length<4;)Fe.push(Fe[0]);return Fe}function Li(Ze){return Ze.map(Te)}function ki(Ze){var Fe,ii=Ze.type;switch(ii){case"GeometryCollection":return{type:ii,geometries:Ze.geometries.map(ki)};case"Point":Fe=fe(Ze.coordinates);break;case"MultiPoint":Fe=Ze.coordinates.map(fe);break;case"LineString":Fe=Ce(Ze.arcs);break;case"MultiLineString":Fe=Ze.arcs.map(Ce);break;case"Polygon":Fe=Li(Ze.arcs);break;case"MultiPolygon":Fe=Ze.arcs.map(Li);break;default:return null}return{type:ii,coordinates:Fe}}return ki(be)}(ht,pt);return At==null&&St==null?{type:"Feature",properties:_t,geometry:zt}:St==null?{type:"Feature",id:At,properties:_t,geometry:zt}:{type:"Feature",id:At,bbox:St,properties:_t,geometry:zt}}function Xt(ht,pt){return Array.from(ht.getElementsByTagName(pt))}function Wt(ht){return ht[0]==="#"?ht:`#${ht}`}function Ct(ht){return ht?.normalize(),ht&&ht.textContent||""}function Et(ht,pt,At){let St=ht.getElementsByTagName(pt),_t=St.length?St[0]:null;return _t&&At&&At(_t),_t}function ue(ht,pt,At){let St={};if(!ht)return St;let _t=ht.getElementsByTagName(pt),zt=_t.length?_t[0]:null;return zt&&At?At(zt,St):St}function J(ht,pt,At){let St=Ct(Et(ht,pt));return St&&At&&At(St)||{}}function dt(ht,pt,At){let St=parseFloat(Ct(Et(ht,pt)));if(!isNaN(St))return St&&At&&At(St)||{}}function mt(ht,pt,At){let St=parseFloat(Ct(Et(ht,pt)));if(!isNaN(St))return At&&At(St),St}function Ut(ht,pt){let At={};for(let St of pt)J(ht,St,_t=>{At[St]=_t});return At}function Pt(ht){return ht?.nodeType===1}function ie(ht){return ue(ht,"line",pt=>Object.assign({},J(pt,"color",At=>({stroke:`#${At}`})),dt(pt,"opacity",At=>({"stroke-opacity":At})),dt(pt,"width",At=>({"stroke-width":96*At/25.4}))))}function le(ht){let pt=[];if(ht===null)return pt;for(let At of Array.from(ht.childNodes)){if(!Pt(At))continue;let St=ce(At.nodeName);if(St==="gpxtpx:TrackPointExtension")pt=pt.concat(le(At));else{let _t=Ct(At);pt.push([St,Qe(_t)])}}return pt}function ce(ht){return["heart","gpxtpx:hr","hr"].includes(ht)?"heart":ht}function Qe(ht){let pt=parseFloat(ht);return isNaN(pt)?ht:pt}function Ee(ht){let pt=[parseFloat(ht.getAttribute("lon")||""),parseFloat(ht.getAttribute("lat")||"")];if(isNaN(pt[0])||isNaN(pt[1]))return null;mt(ht,"ele",St=>{pt.push(St)});let At=Et(ht,"time");return{coordinates:pt,time:At?Ct(At):null,extendedValues:le(Et(ht,"extensions"))}}function We(ht){let pt=Ut(ht,["name","cmt","desc","type","time","keywords"]),At=Array.from(ht.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*"));for(let _t of At)_t.parentNode?.parentNode===ht&&(pt[_t.tagName.replace(":","_")]=Ct(_t));let St=Xt(ht,"link");return St.length&&(pt.links=St.map(_t=>Object.assign({href:_t.getAttribute("href")},Ut(_t,["text","type"])))),pt}function Je(ht,pt){let At=Xt(ht,pt),St=[],_t=[],zt={};for(let ee=0;ee<At.length;ee++){let be=Ee(At[ee]);if(be){St.push(be.coordinates),be.time&&_t.push(be.time);for(let[Ie,pe]of be.extendedValues){let $t=Ie==="heart"?Ie:Ie.replace("gpxtpx:","")+"s";zt[$t]||(zt[$t]=Array(At.length).fill(null)),zt[$t][ee]=pe}}}if(!(St.length<2))return{line:St,times:_t,extendedValues:zt}}function Dt(ht){let pt=Je(ht,"rtept");if(pt)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},We(ht),ie(Et(ht,"extensions"))),geometry:{type:"LineString",coordinates:pt.line}}}function de(ht){let pt=Xt(ht,"trkseg"),At=[],St=[],_t=[];for(let be of pt){let Ie=Je(be,"trkpt");Ie&&(_t.push(Ie),Ie.times&&Ie.times.length&&St.push(Ie.times))}if(_t.length===0)return null;let zt=_t.length>1,ee=Object.assign({_gpxType:"trk"},We(ht),ie(Et(ht,"extensions")),St.length?{coordinateProperties:{times:zt?St:St[0]}}:{});for(let be of _t){At.push(be.line),ee.coordinateProperties||(ee.coordinateProperties={});let Ie=ee.coordinateProperties,pe=Object.entries(be.extendedValues);for(let $t=0;$t<pe.length;$t++){let[fe,Ce]=pe[$t];zt?(Ie[fe]||(Ie[fe]=_t.map(Te=>new Array(Te.line.length).fill(null))),Ie[fe][$t]=Ce):Ie[fe]=Ce}}return{type:"Feature",properties:ee,geometry:zt?{type:"MultiLineString",coordinates:At}:{type:"LineString",coordinates:At[0]}}}function Tt(ht){let pt=Object.assign(We(ht),Ut(ht,["sym"])),At=Ee(ht);return At?{type:"Feature",properties:pt,geometry:{type:"Point",coordinates:At.coordinates}}:null}function*Xe(ht){for(let pt of Xt(ht,"trk")){let At=de(pt);At&&(yield At)}for(let pt of Xt(ht,"rte")){let At=Dt(pt);At&&(yield At)}for(let pt of Xt(ht,"wpt")){let At=Tt(pt);At&&(yield At)}}let Oe="http://www.garmin.com/xmlschemas/ActivityExtension/v2",Le=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],He=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function Ke(ht,pt){let At=[];for(let[St,_t]of pt){let zt=Et(ht,St);if(!zt){let be=ht.getElementsByTagNameNS(Oe,St);be.length&&(zt=be[0])}let ee=parseFloat(Ct(zt));isNaN(ee)||At.push([_t,ee])}return At}function ze(ht){let pt=[mt(ht,"LongitudeDegrees"),mt(ht,"LatitudeDegrees")];if(pt[0]===void 0||isNaN(pt[0])||pt[1]===void 0||isNaN(pt[1]))return null;let At=Et(ht,"HeartRateBpm"),St=Ct(Et(ht,"Time"));return Et(ht,"AltitudeMeters",_t=>{let zt=parseFloat(Ct(_t));isNaN(zt)||pt.push(zt)}),{coordinates:pt,time:St||null,heartRate:At?parseFloat(Ct(At)):null,extensions:Ke(ht,Le)}}function ti(ht){let pt=Xt(ht,"Trackpoint"),At=[],St=[],_t=[];if(pt.length<2)return null;let zt={},ee={extendedProperties:zt};for(let be=0;be<pt.length;be++){let Ie=ze(pt[be]);if(Ie===null)continue;At.push(Ie.coordinates);let{time:pe,heartRate:$t,extensions:fe}=Ie;pe&&St.push(pe),$t&&_t.push($t);for(let[Ce,Te]of fe)zt[Ce]||(zt[Ce]=Array(pt.length).fill(null)),zt[Ce][be]=Te}return At.length<2?null:Object.assign(ee,{line:At,times:St,heartRates:_t})}function ci(ht){let pt=Xt(ht,"Track"),At=[],St=[],_t=[],zt=[],ee,be=Object.assign(Object.fromEntries(Ke(ht,He)),ue(ht,"Name",Ie=>({name:Ct(Ie)})));for(let Ie of pt)ee=ti(Ie),ee&&(At.push(ee.line),ee.times.length&&St.push(ee.times),ee.heartRates.length&&_t.push(ee.heartRates),zt.push(ee.extendedProperties));for(let Ie=0;Ie<zt.length;Ie++){let pe=zt[Ie];for(let $t in pe)pt.length===1?ee&&(be[$t]=ee.extendedProperties[$t]):(be[$t]||(be[$t]=At.map(fe=>Array(fe.length).fill(null))),be[$t][Ie]=pe[$t])}return At.length===0?null:((St.length||_t.length)&&(be.coordinateProperties=Object.assign(St.length?{times:At.length===1?St[0]:St}:{},_t.length?{heart:At.length===1?_t[0]:_t}:{})),{type:"Feature",properties:be,geometry:At.length===1?{type:"LineString",coordinates:At[0]}:{type:"MultiLineString",coordinates:At}})}function*Si(ht){for(let pt of Xt(ht,"Lap")){let At=ci(pt);At&&(yield At)}for(let pt of Xt(ht,"Courses")){let At=ci(pt);At&&(yield At)}}function he(ht,pt){let At={},St=pt=="stroke"||pt==="fill"?pt:pt+"-color";return ht[0]==="#"&&(ht=ht.substring(1)),ht.length===6||ht.length===3?At[St]="#"+ht:ht.length===8&&(At[pt+"-opacity"]=parseInt(ht.substring(0,2),16)/255,At[St]="#"+ht.substring(6,8)+ht.substring(4,6)+ht.substring(2,4)),At}function Zi(ht,pt,At){let St={};return mt(ht,pt,_t=>{St[At]=_t}),St}function Hi(ht,pt){return ue(ht,"color",At=>he(Ct(At),pt))}function pi(ht){return ue(ht,"Icon",(pt,At)=>(J(pt,"href",St=>{At.icon=St}),At))}function Ei(ht){return Object.assign({},function(pt){return ue(pt,"PolyStyle",(At,St)=>Object.assign(St,ue(At,"color",_t=>he(Ct(_t),"fill")),J(At,"fill",_t=>{if(_t==="0")return{"fill-opacity":0}}),J(At,"outline",_t=>{if(_t==="0")return{"stroke-opacity":0}})))}(ht),function(pt){return ue(pt,"LineStyle",At=>Object.assign(Hi(At,"stroke"),Zi(At,"width","stroke-width")))}(ht),function(pt){return ue(pt,"LabelStyle",At=>Object.assign(Hi(At,"label"),Zi(At,"scale","label-scale")))}(ht),function(pt){return ue(pt,"IconStyle",At=>Object.assign(Hi(At,"icon"),Zi(At,"scale","icon-scale"),Zi(At,"heading","icon-heading"),ue(At,"hotSpot",St=>{let _t=parseFloat(St.getAttribute("x")||""),zt=parseFloat(St.getAttribute("y")||""),ee=St.getAttribute("xunits")||"",be=St.getAttribute("yunits")||"";return isNaN(_t)||isNaN(zt)?{}:{"icon-offset":[_t,zt],"icon-offset-units":[ee,be]}}),pi(At)))}(ht))}let ne=ht=>Number(ht),ui={string:ht=>ht,int:ne,uint:ne,short:ne,ushort:ne,float:ne,double:ne,bool:ht=>Boolean(ht)};function Ve(ht,pt){return ue(ht,"ExtendedData",(At,St)=>{for(let _t of Xt(At,"Data"))St[_t.getAttribute("name")||""]=Ct(Et(_t,"value"));for(let _t of Xt(At,"SimpleData")){let zt=_t.getAttribute("name")||"",ee=pt[zt]||ui.string;St[zt]=ee(Ct(_t))}return St})}function rr(ht){let pt=Et(ht,"description");for(let At of Array.from(pt?.childNodes||[]))if(At.nodeType===4)return{description:{"@type":"html",value:Ct(At)}};return{}}function Ni(ht){return ue(ht,"TimeSpan",pt=>({timespan:{begin:Ct(Et(pt,"begin")),end:Ct(Et(pt,"end"))}}))}function $e(ht){return ue(ht,"TimeStamp",pt=>({timestamp:Ct(Et(pt,"when"))}))}function wr(ht,pt){return J(ht,"styleUrl",At=>(At=Wt(At),pt[At]?Object.assign({styleUrl:At},pt[At]):{styleUrl:At}))}let zi=/\s*/g,_r=/^\s*|\s*$/g,nr=/\s+/;function It(ht){return ht.replace(zi,"").split(",").map(parseFloat).filter(pt=>!isNaN(pt)).slice(0,3)}function K(ht){return ht.replace(_r,"").split(nr).map(It).filter(pt=>pt.length>=2)}function z(ht){let pt=Xt(ht,"coord");pt.length===0&&(pt=function(St,_t,zt){return Array.from(St.getElementsByTagNameNS(zt,_t))}(ht,"coord","*"));let At=pt.map(St=>Ct(St).split(" ").map(parseFloat));return At.length===0?null:{geometry:At.length>2?{type:"LineString",coordinates:At}:{type:"Point",coordinates:At[0]},times:Xt(ht,"when").map(St=>Ct(St))}}function it(ht){if(ht.length===0)return ht;let pt=ht[0],At=ht[ht.length-1],St=!0;for(let _t=0;_t<Math.max(pt.length,At.length);_t++)if(pt[_t]!==At[_t]){St=!1;break}return St?ht:ht.concat([ht[0]])}function gt(ht){return Ct(Et(ht,"coordinates"))}function Ht(ht){let pt=[],At=[];for(let St=0;St<ht.childNodes.length;St++){let _t=ht.childNodes.item(St);if(Pt(_t))switch(_t.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{let zt=Ht(_t);pt=pt.concat(zt.geometries),At=At.concat(zt.coordTimes);break}case"Point":{let zt=It(gt(_t));zt.length>=2&&pt.push({type:"Point",coordinates:zt});break}case"LinearRing":case"LineString":{let zt=K(gt(_t));zt.length>=2&&pt.push({type:"LineString",coordinates:zt});break}case"Polygon":{let zt=[];for(let ee of Xt(_t,"LinearRing")){let be=it(K(gt(ee)));be.length>=4&&zt.push(be)}zt.length&&pt.push({type:"Polygon",coordinates:zt});break}case"Track":case"gx:Track":{let zt=z(_t);if(!zt)break;let{times:ee,geometry:be}=zt;pt.push(be),ee.length&&At.push(ee);break}}}return{geometries:pt,coordTimes:At}}function Nt(ht,pt,At,St){let{coordTimes:_t,geometries:zt}=Ht(ht),ee=function(pe){return pe.length===0?null:pe.length===1?pe[0]:{type:"GeometryCollection",geometries:pe}}(zt);if(!ee&&St.skipNullGeometry)return null;let be={type:"Feature",geometry:ee,properties:Object.assign(Ut(ht,["name","address","visibility","open","phoneNumber","description"]),rr(ht),wr(ht,pt),Ei(ht),Ve(ht,At),Ni(ht),$e(ht),_t.length?{coordinateProperties:{times:_t.length===1?_t[0]:_t}}:{})};be.properties?.visibility!==void 0&&(be.properties.visibility=be.properties.visibility!=="0");let Ie=ht.getAttribute("id");return Ie!==null&&Ie!==""&&(be.id=Ie),be}function Jt(ht){return Et(ht,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[it(K(gt(ht)))]}}:function(pt){let At=Et(pt,"LatLonBox");if(At){let St=mt(At,"north"),_t=mt(At,"west"),zt=mt(At,"east"),ee=mt(At,"south"),be=mt(At,"rotation");if(typeof St=="number"&&typeof ee=="number"&&typeof _t=="number"&&typeof zt=="number"){let Ie=[_t,ee,zt,St],pe=[[[_t,St],[zt,St],[zt,ee],[_t,ee],[_t,St]]];return typeof be=="number"&&(pe=function($t,fe,Ce){let Te=[($t[0]+$t[2])/2,($t[1]+$t[3])/2];return[fe[0].map(Li=>{let ki=Li[1]-Te[1],Ze=Li[0]-Te[0],Fe=Math.sqrt(Math.pow(ki,2)+Math.pow(Ze,2)),ii=Math.atan2(ki,Ze)+Ce*Rt;return[Te[0]+Math.cos(ii)*Fe,Te[1]+Math.sin(ii)*Fe]})]}(Ie,pe,be)),{bbox:Ie,geometry:{type:"Polygon",coordinates:pe}}}}return null}(ht)}let Rt=Math.PI/180;function Ot(ht,pt,At,St){let _t=Jt(ht),zt=_t?.geometry||null;if(!zt&&St.skipNullGeometry)return null;let ee={type:"Feature",geometry:zt,properties:Object.assign({"@geometry-type":"groundoverlay"},Ut(ht,["name","address","visibility","open","phoneNumber","description"]),rr(ht),wr(ht,pt),Ei(ht),pi(ht),Ve(ht,At),Ni(ht),$e(ht))};_t?.bbox&&(ee.bbox=_t.bbox),ee.properties?.visibility!==void 0&&(ee.properties.visibility=ee.properties.visibility!=="0");let be=ht.getAttribute("id");return be!==null&&be!==""&&(ee.id=be),ee}function me(ht){let pt=ht.getAttribute("id"),At=ht.parentNode;return!pt&&Pt(At)&&At.localName==="CascadingStyle"&&(pt=At.getAttribute("kml:id")||At.getAttribute("id")),Wt(pt||"")}function Ae(ht){let pt={};for(let At of Xt(ht,"Style"))pt[me(At)]=Ei(At);for(let At of Xt(ht,"StyleMap")){let St=Wt(At.getAttribute("id")||"");J(At,"styleUrl",_t=>{_t=Wt(_t),pt[_t]&&(pt[St]=pt[_t])})}return pt}function Se(ht){let pt={};for(let At of Xt(ht,"SimpleField"))pt[At.getAttribute("name")||""]=ui[At.getAttribute("type")||""]||ui.string;return pt}let Ye=["name","visibility","open","address","description","phoneNumber","visibility"];function*je(ht,pt={skipNullGeometry:!1}){let At=Ae(ht),St=Se(ht);for(let _t of Xt(ht,"Placemark")){let zt=Nt(_t,At,St,pt);zt&&(yield zt)}for(let _t of Xt(ht,"GroundOverlay")){let zt=Ot(_t,At,St,pt);zt&&(yield zt)}}var Mi=Object.freeze({__proto__:null,gpx:function(ht){return{type:"FeatureCollection",features:Array.from(Xe(ht))}},gpxGen:Xe,kml:function(ht,pt={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(je(ht,pt))}},kmlGen:je,kmlWithFolders:function(ht,pt={skipNullGeometry:!1}){let At=Ae(ht),St=Se(ht),_t={type:"root",children:[]};return function zt(ee,be,Ie){if(Pt(ee))switch(ee.tagName){case"GroundOverlay":{let pe=Ot(ee,At,St,Ie);pe&&be.children.push(pe);break}case"Placemark":{let pe=Nt(ee,At,St,Ie);pe&&be.children.push(pe);break}case"Folder":{let pe=function($t){let fe={};for(let Ce of Array.from($t.childNodes))Pt(Ce)&&Ye.includes(Ce.tagName)&&(fe[Ce.tagName]=Ct(Ce));return{type:"folder",meta:fe,children:[]}}(ee);be.children.push(pe),be=pe;break}}if(ee.childNodes)for(let pe=0;pe<ee.childNodes.length;pe++)zt(ee.childNodes[pe],be,Ie)}(ht,_t,pt),_t},tcx:function(ht){return{type:"FeatureCollection",features:Array.from(Si(ht))}},tcxGen:Si}),Ti={exports:{}};(function(ht){var pt={};function At(zt){return Math.floor(Math.abs(zt)+.5)*(zt>=0?1:-1)}function St(zt,ee,be){var Ie=2*((zt=At(zt*be))-(ee=At(ee*be)));Ie<0&&(Ie=-Ie-1);for(var pe="";Ie>=32;)pe+=String.fromCharCode(63+(32|31&Ie)),Ie/=32;return pe+=String.fromCharCode(63+(0|Ie))}function _t(zt){for(var ee=[],be=0;be<zt.length;be++){var Ie=zt[be].slice();ee.push([Ie[1],Ie[0]])}return ee}pt.decode=function(zt,ee){for(var be,Ie=0,pe=0,$t=0,fe=[],Ce=0,Te=0,Li=null,ki=Math.pow(10,Number.isInteger(ee)?ee:5);Ie<zt.length;){Li=null,Ce=1,Te=0;do Te+=(31&(Li=zt.charCodeAt(Ie++)-63))*Ce,Ce*=32;while(Li>=32);be=1&Te?(-Te-1)/2:Te/2,Ce=1,Te=0;do Te+=(31&(Li=zt.charCodeAt(Ie++)-63))*Ce,Ce*=32;while(Li>=32);pe+=be,$t+=1&Te?(-Te-1)/2:Te/2,fe.push([pe/ki,$t/ki])}return fe},pt.encode=function(zt,ee){if(!zt.length)return"";for(var be=Math.pow(10,Number.isInteger(ee)?ee:5),Ie=St(zt[0][0],0,be)+St(zt[0][1],0,be),pe=1;pe<zt.length;pe++){var $t=zt[pe],fe=zt[pe-1];Ie+=St($t[0],fe[0],be),Ie+=St($t[1],fe[1],be)}return Ie},pt.fromGeoJSON=function(zt,ee){if(zt&&zt.type==="Feature"&&(zt=zt.geometry),!zt||zt.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return pt.encode(_t(zt.coordinates),ee)},pt.toGeoJSON=function(zt,ee){return{type:"LineString",coordinates:_t(pt.decode(zt,ee))}},ht.exports&&(ht.exports=pt)})(Ti);var Vi=Ti.exports,vi=(()=>{let ht=$t=>$t[0],pt=$t=>$t[$t.length-1],At=$t=>$t.join(","),St=($t,fe,Ce)=>{let Te=$t[fe];Te?Te.push(Ce):$t[fe]=[Ce]},_t=($t,fe,Ce)=>{let Te=$t[fe],Li=null;Te&&(Li=Te.indexOf(Ce))>=0&&Te.splice(Li,1)},zt=($t,fe)=>{let Ce=$t[fe];return Ce&&Ce.length>0?Ce[0]:null},ee=$t=>$t.length>3&&At(ht($t))===At(pt($t)),be=($t,fe,Ce)=>{fe=fe||0,Ce=Ce||1;let Te=$t.reduce((ar,si,vr)=>$t[ar][fe]>si[fe]?ar:vr,0),Li=Te<=0?$t.length-2:Te-1,ki=Te>=$t.length-1?1:Te+1,Ze=$t[Li][fe],Fe=$t[Te][fe],ii=$t[ki][fe],ai=$t[Li][Ce],wi=$t[Te][Ce];return(Fe-Ze)*($t[ki][Ce]-ai)-(ii-Ze)*(wi-ai)<0?"clockwise":"counterclockwise"},Ie=$t=>$t instanceof Array?$t.map(Ie):parseFloat($t);class pe extends Map{constructor(){super(),this.binders=[]}add(fe,Ce){this.has(fe)||this.set(fe,Ce)}addBinder(fe){this.binders.push(fe)}bindAll(){this.binders.forEach(fe=>fe.bind())}}return{purgeProps:($t,fe)=>{if($t){let Ce=Object.assign({},$t);if(fe)for(let Te of fe)delete Ce[Te];return Ce}return{}},mergeProps:($t,fe)=>($t=$t||{},fe=fe||{},Object.assign($t,fe)),first:ht,last:pt,coordsToKey:At,addToMap:St,removeFromMap:_t,getFirstFromMap:zt,isRing:ee,ringDirection:be,ptInsidePolygon:($t,fe,Ce,Te)=>{Ce=Ce||0,Te=Te||1;let Li=!1;for(let ki=0,Ze=fe.length-1;ki<fe.length;Ze=ki++)(fe[ki][Ce]<=$t[Ce]&&$t[Ce]<fe[Ze][Ce]||fe[Ze][Ce]<=$t[Ce]&&$t[Ce]<fe[ki][Ce])&&$t[Te]<(fe[Ze][Te]-fe[ki][Te])*($t[Ce]-fe[ki][Ce])/(fe[Ze][Ce]-fe[ki][Ce])+fe[ki][Te]&&(Li=!Li);return Li},strToFloat:Ie,RefElements:pe,LateBinder:class{constructor($t,fe,Ce,Te){this.container=$t,this.valueFunc=fe,this.ctx=Ce,this.args=Te}bind(){let $t=this.valueFunc.apply(this.ctx,this.args);if(this.container instanceof Array){let fe=this.container.indexOf(this);if(fe>=0){let Ce=[fe,1];$t&&Ce.push($t),[].splice.apply(this.container,Ce)}}else if(typeof this.container=="object"){let fe=Object.keys(this.container).find(Ce=>this.container[Ce]===this);fe&&($t?this.container[fe]=$t:delete this.container[fe])}}},WayCollection:class extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay($t){($t=$t.toCoordsArray()).length>0&&(this.push($t),St(this.firstMap,At(ht($t)),$t),St(this.lastMap,At(pt($t)),$t))}toStrings(){let $t=[],fe=null;for(;fe=this.shift();){_t(this.firstMap,At(ht(fe)),fe),_t(this.lastMap,At(pt(fe)),fe);let Ce=fe,Te=null;do{let Li=At(pt(Ce)),ki=!1;Te=zt(this.firstMap,Li),Te||(Te=zt(this.lastMap,Li),ki=!0),Te&&(this.splice(this.indexOf(Te),1),_t(this.firstMap,At(ht(Te)),Te),_t(this.lastMap,At(pt(Te)),Te),ki&&(Te.length>Ce.length&&([Ce,Te]=[Te,Ce]),Te.reverse()),Ce=Ce.concat(Te.slice(1)))}while(Te);$t.push(Ie(Ce))}return $t}toRings($t){let fe=this.toStrings(),Ce=[],Te=null;for(;Te=fe.shift();)ee(Te)&&(be(Te)!==$t&&Te.reverse(),Ce.push(Te));return Ce}}}})(),pr={building:{},highway:{whitelist:["services","rest_area","escape","elevator"]},natural:{blacklist:["coastline","cliff","ridge","arete","tree_row"]},landuse:{},waterway:{whitelist:["riverbank","dock","boatyard","dam"]},amenity:{},leisure:{},barrier:{whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},railway:{whitelist:["station","turntable","roundhouse","platform"]},area:{},boundary:{},man_made:{blacklist:["cutline","embankment","pipeline"]},power:{whitelist:["plant","substation","generator","transformer"]},place:{},shop:{},aeroway:{blacklist:["taxiway"]},tourism:{},historic:{},public_transport:{},office:{},"building:part":{},military:{},ruins:{},"area:highway":{},craft:{},golf:{},indoor:{}},ur=(()=>{let{first:ht,last:pt,coordsToKey:At,addToMap:St,removeFromMap:_t,getFirstFromMap:zt,isRing:ee,ringDirection:be,ptInsidePolygon:Ie,strToFloat:pe,LateBinder:$t,WayCollection:fe}=vi,Ce=pr;class Te{constructor(Fe,ii,ai){this.type=Fe,this.id=ii,this.refElems=ai,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,ai&&ai.add(this.getCompositeId(),this)}addTags(Fe){this.tags=Object.assign(this.tags,Fe),this.hasTag=!!Fe}addTag(Fe,ii){this.tags[Fe]=ii,this.hasTag=!!Fe}addProp(Fe,ii){this.props[Fe]=ii}addProps(Fe){this.props=Object.assign(this.props,Fe)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}toFeatureArray(){return[]}}class Li extends Te{constructor(Fe,ii){super("node",Fe,ii),this.latLng=null}setLatLng(Fe){this.latLng=Fe}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:pe([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}class ki extends Te{constructor(Fe,ii){super("way",Fe,ii),this.latLngArray=[],this.isPolygon=!1}addLatLng(Fe){this.latLngArray.push(Fe)}setLatLngArray(Fe){this.latLngArray=Fe}addNodeRef(Fe){let ii=new $t(this.latLngArray,function(ai){let wi=this.refElems.get(`node/${ai}`);if(wi)return wi.refCount++,wi.getLatLng()},this,[Fe]);this.latLngArray.push(ii),this.refElems.addBinder(ii)}analyzeGeometryType(Fe,ii){let ai=Ce[Fe];ai&&(this.isPolygon=!0,ai.whitelist?this.isPolygon=ai.whitelist.indexOf(ii)>=0:ai.blacklist&&(this.isPolygon=!(ai.blacklist.indexOf(ii)>=0)))}addTags(Fe){super.addTags(Fe);for(let[ii,ai]of Object.entries(Fe))this.analyzeGeometryType(ii,ai)}addTag(Fe,ii){super.addTag(Fe,ii),this.analyzeGeometryType(Fe,ii)}toCoordsArray(){return this.latLngArray.map(Fe=>[Fe.lon,Fe.lat])}toFeatureArray(){let Fe=this.toCoordsArray();if(Fe.length>1){Fe=pe(Fe);let ii={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:Fe}};return this.isPolygon&&ee(Fe)?(be(Fe)!=="counterclockwise"&&Fe.reverse(),ii.geometry={type:"Polygon",coordinates:[Fe]},[ii]):[ii]}return[]}}return{Node:Li,Way:ki,Relation:class extends Te{constructor(Ze,Fe){super("relation",Ze,Fe),this.relations=[],this.nodes=[],this.bounds=null}setBounds(Ze){this.bounds=Ze}addMember(Ze){switch(Ze.type){case"relation":let Fe=new $t(this.relations,function(wi){let ar=this.refElems.get(`relation/${wi}`);if(ar)return ar.refCount++,ar},this,[Ze.ref]);this.relations.push(Fe),this.refElems.addBinder(Fe);break;case"way":Ze.role||(Ze.role="");let ii=this[Ze.role];if(ii||(ii=this[Ze.role]=[]),Ze.geometry){let wi=new ki(Ze.ref,this.refElems);wi.setLatLngArray(Ze.geometry),wi.refCount++,ii.push(wi)}else if(Ze.nodes){let wi=new ki(Ze.ref,this.refElems);for(let ar of Ze.nodes)wi.addNodeRef(ar);wi.refCount++,ii.push(wi)}else{let wi=new $t(ii,function(ar){let si=this.refElems.get(`way/${ar}`);if(si)return si.refCount++,si},this,[Ze.ref]);ii.push(wi),this.refElems.addBinder(wi)}break;case"node":let ai=null;if(Ze.lat&&Ze.lon){ai=new Li(Ze.ref,this.refElems),ai.setLatLng({lon:Ze.lon,lat:Ze.lat}),Ze.tags&&ai.addTags(Ze.tags);for(let[wi,ar]of Object.entries(Ze))["id","type","lat","lon"].indexOf(wi)<0&&ai.addProp(wi,ar);ai.refCount++,this.nodes.push(ai)}else{let wi=new $t(this.nodes,function(ar){let si=this.refElems.get(`node/${ar}`);if(si)return si.refCount++,si},this,[Ze.ref]);this.nodes.push(wi),this.refElems.addBinder(wi)}}}toFeatureArray(){let Ze=[],Fe=[],ii=[],ai=["outer","inner",""];for(let si of this.relations)if(si)for(let vr of ai){let nn=si[vr];if(nn){let Br=this[vr];Br?[].splice.apply(Br,[Br.length,0].concat(nn)):this[vr]=nn}}for(let si of ai){let vr=this[si];if(vr){this[si]=new fe;for(let nn of vr)this[si].addWay(nn)}}let wi=null,ar={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps()};this.bounds||delete ar.bbox,this.outer?(wi=((si,vr)=>{let nn=si?si.toRings("counterclockwise"):[],Br=vr?vr.toRings("clockwise"):[];if(nn.length>0){let ms=[],Rn=null;for(Rn of nn)ms.push([Rn]);for(;Rn=Br.shift();)for(let wo in nn)if(Ie(ht(Rn),nn[wo])){ms[wo].push(Rn);break}return ms.length===1?{type:"Polygon",coordinates:ms[0]}:{type:"MultiPolygon",coordinates:ms}}return null})(this.outer,this.inner),wi&&(ar.geometry=wi,Ze.push(ar))):this[""]&&(wi=(si=>{let vr=si?si.toStrings():[];return vr.length>0?vr.length===1?{type:"LineString",coordinates:vr[0]}:{type:"MultiLineString",coordinates:vr}:null})(this[""]),wi&&(ar.geometry=wi,Fe.push(ar)));for(let si of this.nodes)ii=ii.concat(si.toFeatureArray());return Ze.concat(Fe).concat(ii)}}}})(),Qi=(()=>{function ht(At){return At.match(/^(.+?)\[(.+?)\]>$/g)!=null}function pt(At){let St=/^(.+?)\[(.+?)\]>$/g.exec(At);return St?{evt:St[1]+">",exp:St[2]}:{evt:At}}return class{constructor(At){At&&(this.queryParent=!!At.queryParent,this.progressive=At.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(At,St,_t){_t=_t?_t+".":"";let zt=/<([^ >\/]+)(.*?)>/gm,ee=null,be=[];for(;ee=zt.exec(At);){let Ie=ee[1],pe={$tag:Ie},$t=_t+Ie,fe=ee[2].trim(),Ce=!1;(fe.endsWith("/")||Ie.startsWith("?")||Ie.startsWith("!"))&&(Ce=!0);let Te=/([^ ]+?)="(.+?)"/g,Li=/([^ ]+?)='(.+?)'/g,ki=null,Ze=!1;for(;ki=Te.exec(fe);)Ze=!0,pe[ki[1]]=ki[2];if(!Ze)for(;ki=Li.exec(fe);)Ze=!0,pe[ki[1]]=ki[2];if(Ze||fe===""||(pe.text=fe),this.progressive&&this.emit(`<${$t}>`,pe,St),!Ce){let Fe=new RegExp(`([^]+?)</${Ie}>`,"g");Fe.lastIndex=zt.lastIndex;let ii=Fe.exec(At);if(ii&&ii[1]){zt.lastIndex=Fe.lastIndex;let ai=this.parse(ii[1],pe,$t);ai.length>0?pe.$innerNodes=ai:pe.$innerText=ii[1]}}this.queryParent&&St&&this.parentMap.set(pe,St),this.progressive&&this.emit(`</${$t}>`,pe,St),be.push(pe)}return be}getParent(At){return this.queryParent?this.parentMap.get(At):null}#t(At,St){let _t=this.evtListeners[At];_t?_t.push(St):this.evtListeners[At]=[St]}addListener(At,St){ht(At)&&(At=pt(At),St.condition=function(_t){let zt="return "+_t.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",zt)}(At.exp),At=At.evt),this.#t(At,St)}#e(At,St){let _t=this.evtListeners[At],zt=null;_t&&(zt=_t.indexOf(St))>=0&&_t.splice(zt,1)}removeListener(At,St){ht(At)&&(At=(At=pt(At)).evt),this.#e(At,St)}emit(At,...St){let _t=this.evtListeners[At];if(_t)for(let zt of _t)zt.condition?zt.condition.apply(null,St)===!0&&zt.apply(null,St):zt.apply(null,St)}on(At,St){this.addListener(At,St)}off(At,St){this.removeListener(At,St)}}})();let{Node:Oi,Way:sr,Relation:Zt}=ur,{purgeProps:Ne,RefElements:ke}=vi,Wi=Qi;var Fi=(ht,pt)=>{let At=!1,St=!1,_t=!0;(Ie=>{if(Ie){At=!(!Ie.completeFeature&&!Ie.allFeatures),St=!!Ie.renderTagged;let pe=Ie.suppressWay||Ie.excludeWay;pe===void 0||pe||(_t=!1)}})(pt);let zt=(Ie=>Ie.elements?"json":Ie.indexOf("<osm")>=0?"xml":Ie.trim().startsWith("{")?"json-raw":"invalid")(ht),ee=new ke,be=[];zt==="json-raw"&&(zt=(ht=JSON.parse(ht)).elements?"json":"invalid"),zt==="json"?(Ie=>{for(let pe of Ie.elements)switch(pe.type){case"node":let $t=new Oi(pe.id,ee);pe.tags&&$t.addTags(pe.tags),$t.addProps(Ne(pe,["id","type","tags","lat","lon"])),$t.setLatLng(pe);break;case"way":let fe=new sr(pe.id,ee);if(pe.tags&&fe.addTags(pe.tags),fe.addProps(Ne(pe,["id","type","tags","nodes","geometry"])),pe.nodes)for(let Te of pe.nodes)fe.addNodeRef(Te);else pe.geometry&&fe.setLatLngArray(pe.geometry);break;case"relation":let Ce=new Zt(pe.id,ee);if(pe.bounds&&Ce.setBounds([parseFloat(pe.bounds.minlon),parseFloat(pe.bounds.minlat),parseFloat(pe.bounds.maxlon),parseFloat(pe.bounds.maxlat)]),pe.tags&&Ce.addTags(pe.tags),Ce.addProps(Ne(pe,["id","type","tags","bounds","members"])),pe.members)for(let Te of pe.members)Ce.addMember(Te)}})(ht):zt==="xml"&&(Ie=>{let pe=new Wi({progressive:!0});pe.on("</osm.node>",$t=>{let fe=new Oi($t.id,ee);for(let[Ce,Te]of Object.entries($t))!Ce.startsWith("$")&&["id","lon","lat"].indexOf(Ce)<0&&fe.addProp(Ce,Te);if(fe.setLatLng($t),$t.$innerNodes)for(let Ce of $t.$innerNodes)Ce.$tag==="tag"&&fe.addTag(Ce.k,Ce.v)}),pe.on("</osm.way>",$t=>{let fe=new sr($t.id,ee);for(let[Ce,Te]of Object.entries($t))!Ce.startsWith("$")&&["id"].indexOf(Ce)<0&&fe.addProp(Ce,Te);if($t.$innerNodes)for(let Ce of $t.$innerNodes)Ce.$tag==="nd"?Ce.lon&&Ce.lat?fe.addLatLng(Ce):Ce.ref&&fe.addNodeRef(Ce.ref):Ce.$tag==="tag"&&fe.addTag(Ce.k,Ce.v)}),pe.on("<osm.relation>",$t=>{new Zt($t.id,ee)}),pe.on("</osm.relation.member>",($t,fe)=>{let Ce=ee.get(`relation/${fe.id}`),Te={type:$t.type,role:$t.role?$t.role:"",ref:$t.ref};if($t.lat&&$t.lon){Te.lat=$t.lat,Te.lon=$t.lon,Te.tags={};for(let[Li,ki]of Object.entries($t))!Li.startsWith("$")&&["type","lat","lon"].indexOf(Li)<0&&(Te[Li]=ki)}if($t.$innerNodes){let Li=[],ki=[];for(let Ze of $t.$innerNodes)Ze.lat&&Ze.lon?Li.push(Ze):ki.push(Ze.ref);Li.length>0?Te.geometry=Li:ki.length>0&&(Te.nodes=ki)}Ce.addMember(Te)}),pe.on("</osm.relation.bounds>",($t,fe)=>{ee.get(`relation/${fe.id}`).setBounds([parseFloat($t.minlon),parseFloat($t.minlat),parseFloat($t.maxlon),parseFloat($t.maxlat)])}),pe.on("</osm.relation.tag>",($t,fe)=>{ee.get(`relation/${fe.id}`).addTag($t.k,$t.v)}),pe.parse(Ie)})(ht),ee.bindAll();for(let Ie of ee.values())if(Ie.refCount<=0||Ie.hasTag&&St&&!(Ie instanceof sr&&_t)){let pe=Ie.toFeatureArray();if(Ie instanceof Zt&&!At&&pe.length>0)return pe[0].geometry;be=be.concat(pe)}return{type:"FeatureCollection",features:be}},rn=e(Fi);let Fr=["topojson","osm","kml","gpx","tcx","csv","tsv","polyline"];class jr{constructor(pt,At,St={}){this.blankGeoJSON=()=>({type:"FeatureCollection",features:[]}),this._rawData=At,this._format=pt,this._options=St;let _t={topojson:this.loadTopoJson,osm:this.loadOsm,kml:this.loadXml,gpx:this.loadXml,tcx:this.loadXml,csv:this.loadCsv,tsv:this.loadCsv,polyline:this.loadPolyline};this._conversionFn=_t[pt]}async convert(){return this._conversionFn?this._conversionFn():new Promise((pt,At)=>At(`No converter exists for ${this._format}`))}async loadXml(){return Mi[this._format](new DOMParser().parseFromString(this._rawData,"text/xml"))}async loadCsv(){let pt=this._options.csvOptions||{};return this._format==="tsv"&&(pt.delimiter="	"),await new Promise((At,St)=>{yt.csv2geojson(this._rawData,pt,(_t,zt)=>{_t?St(_t):At(zt)})})}async loadTopoJson(){let pt={};try{pt=JSON.parse(this._rawData)}catch{throw"Invalid TopoJson"}let At=this.blankGeoJSON();return pt.type==="Topology"&&pt.objects!==void 0&&(At={type:"FeatureCollection",features:At.features=Object.keys(pt.objects).map(St=>{return _t=pt,typeof(zt=St)=="string"&&(zt=_t.objects[zt]),zt.type==="GeometryCollection"?{type:"FeatureCollection",features:zt.geometries.map(function(ee){return jt(_t,ee)})}:jt(_t,zt);var _t,zt}).reduce((St,_t)=>[...St,..._t.features],[])}),At}async loadOsm(){return rn(this._rawData)}async loadPolyline(){let pt=this._options.polylineOptions||{};return await new Promise((At,St)=>{try{let _t=Vi.toGeoJSON(this._rawData,pt.precision),zt=_t;pt.type==="point"?_t.coordinates.length===1?zt={type:"Point",coordinates:_t.coordinates[0]}:console.warn("Cannot convert polyline to "+pt.type):pt.type==="polygon"&&(_t.coordinates[0][0]===_t.coordinates[_t.coordinates.length-1][0]&&_t.coordinates[0][1]===_t.coordinates[_t.coordinates.length-1][1]?zt={type:"Polygon",coordinates:[_t.coordinates]}:console.warn("Cannot convert polyline to "+pt.type)),At({type:"FeatureCollection",features:[{type:"Feature",geometry:zt,properties:pt.properties||{}}]})}catch(_t){St(_t)}})}}var br=null;try{var on=typeof Fd<"u"&&typeof Fd.require=="function"&&Bd("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Bd=="function"&&Bd("worker_threads");br=on.Worker}catch{}function dn(ht,pt,At){var St=function(ee,be){return Buffer.from(ee,"base64").toString("utf8")}(ht),_t=St.indexOf(`
`,10)+1,zt=St.substring(_t)+"";return function(ee){return new br(zt,Object.assign({},ee,{eval:!0}))}}function pn(ht,pt,At){var St=function(be,Ie){return atob(be)}(ht),_t=St.indexOf(`
`,10)+1,zt=St.substring(_t)+"",ee=new Blob([zt],{type:"application/javascript"});return URL.createObjectURL(ee)}var vo=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",es,Or=(es="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCWZ1bmN0aW9uIGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzICh4KSB7CgkJcmV0dXJuIHggJiYgeC5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnZGVmYXVsdCcpID8geFsnZGVmYXVsdCddIDogeDsKCX0KCglmdW5jdGlvbiBnZXRBdWdtZW50ZWROYW1lc3BhY2UobikgewoJICBpZiAobi5fX2VzTW9kdWxlKSByZXR1cm4gbjsKCSAgdmFyIGYgPSBuLmRlZmF1bHQ7CgkJaWYgKHR5cGVvZiBmID09ICJmdW5jdGlvbiIpIHsKCQkJdmFyIGEgPSBmdW5jdGlvbiBhICgpIHsKCQkJCWlmICh0aGlzIGluc3RhbmNlb2YgYSkgewoJICAgICAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoZiwgYXJndW1lbnRzLCB0aGlzLmNvbnN0cnVjdG9yKTsKCQkJCX0KCQkJCXJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkJCX07CgkJCWEucHJvdG90eXBlID0gZi5wcm90b3R5cGU7CgkgIH0gZWxzZSBhID0ge307CgkgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCAnX19lc01vZHVsZScsIHt2YWx1ZTogdHJ1ZX0pOwoJCU9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24gKGspIHsKCQkJdmFyIGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIGspOwoJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgaywgZC5nZXQgPyBkIDogewoJCQkJZW51bWVyYWJsZTogdHJ1ZSwKCQkJCWdldDogZnVuY3Rpb24gKCkgewoJCQkJCXJldHVybiBuW2tdOwoJCQkJfQoJCQl9KTsKCQl9KTsKCQlyZXR1cm4gYTsKCX0KCglmdW5jdGlvbiBvYmplY3RDb252ZXJ0ZXIoY29sdW1ucykgewoJICByZXR1cm4gbmV3IEZ1bmN0aW9uKCJkIiwgInJldHVybiB7IiArIGNvbHVtbnMubWFwKGZ1bmN0aW9uKG5hbWUsIGkpIHsKCSAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobmFtZSkgKyAiOiBkWyIgKyBpICsgIl0iOwoJICB9KS5qb2luKCIsIikgKyAifSIpOwoJfQoKCWZ1bmN0aW9uIGN1c3RvbUNvbnZlcnRlcihjb2x1bW5zLCBmKSB7CgkgIHZhciBvYmplY3QgPSBvYmplY3RDb252ZXJ0ZXIoY29sdW1ucyk7CgkgIHJldHVybiBmdW5jdGlvbihyb3csIGkpIHsKCSAgICByZXR1cm4gZihvYmplY3Qocm93KSwgaSwgY29sdW1ucyk7CgkgIH07Cgl9CgoJLy8gQ29tcHV0ZSB1bmlxdWUgY29sdW1ucyBpbiBvcmRlciBvZiBkaXNjb3ZlcnkuCglmdW5jdGlvbiBpbmZlckNvbHVtbnMocm93cykgewoJICB2YXIgY29sdW1uU2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKSwKCSAgICAgIGNvbHVtbnMgPSBbXTsKCgkgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihyb3cpIHsKCSAgICBmb3IgKHZhciBjb2x1bW4gaW4gcm93KSB7CgkgICAgICBpZiAoIShjb2x1bW4gaW4gY29sdW1uU2V0KSkgewoJICAgICAgICBjb2x1bW5zLnB1c2goY29sdW1uU2V0W2NvbHVtbl0gPSBjb2x1bW4pOwoJICAgICAgfQoJICAgIH0KCSAgfSk7CgoJICByZXR1cm4gY29sdW1uczsKCX0KCglmdW5jdGlvbiBkc3YkMShkZWxpbWl0ZXIpIHsKCSAgdmFyIHJlRm9ybWF0ID0gbmV3IFJlZ0V4cCgiW1wiIiArIGRlbGltaXRlciArICJcbl0iKSwKCSAgICAgIGRlbGltaXRlckNvZGUgPSBkZWxpbWl0ZXIuY2hhckNvZGVBdCgwKTsKCgkgIGZ1bmN0aW9uIHBhcnNlKHRleHQsIGYpIHsKCSAgICB2YXIgY29udmVydCwgY29sdW1ucywgcm93cyA9IHBhcnNlUm93cyh0ZXh0LCBmdW5jdGlvbihyb3csIGkpIHsKCSAgICAgIGlmIChjb252ZXJ0KSByZXR1cm4gY29udmVydChyb3csIGkgLSAxKTsKCSAgICAgIGNvbHVtbnMgPSByb3csIGNvbnZlcnQgPSBmID8gY3VzdG9tQ29udmVydGVyKHJvdywgZikgOiBvYmplY3RDb252ZXJ0ZXIocm93KTsKCSAgICB9KTsKCSAgICByb3dzLmNvbHVtbnMgPSBjb2x1bW5zOwoJICAgIHJldHVybiByb3dzOwoJICB9CgoJICBmdW5jdGlvbiBwYXJzZVJvd3ModGV4dCwgZikgewoJICAgIHZhciBFT0wgPSB7fSwgLy8gc2VudGluZWwgdmFsdWUgZm9yIGVuZC1vZi1saW5lCgkgICAgICAgIEVPRiA9IHt9LCAvLyBzZW50aW5lbCB2YWx1ZSBmb3IgZW5kLW9mLWZpbGUKCSAgICAgICAgcm93cyA9IFtdLCAvLyBvdXRwdXQgcm93cwoJICAgICAgICBOID0gdGV4dC5sZW5ndGgsCgkgICAgICAgIEkgPSAwLCAvLyBjdXJyZW50IGNoYXJhY3RlciBpbmRleAoJICAgICAgICBuID0gMCwgLy8gdGhlIGN1cnJlbnQgbGluZSBudW1iZXIKCSAgICAgICAgdCwgLy8gdGhlIGN1cnJlbnQgdG9rZW4KCSAgICAgICAgZW9sOyAvLyBpcyB0aGUgY3VycmVudCB0b2tlbiBmb2xsb3dlZCBieSBFT0w/CgoJICAgIGZ1bmN0aW9uIHRva2VuKCkgewoJICAgICAgaWYgKEkgPj0gTikgcmV0dXJuIEVPRjsgLy8gc3BlY2lhbCBjYXNlOiBlbmQgb2YgZmlsZQoJICAgICAgaWYgKGVvbCkgcmV0dXJuIGVvbCA9IGZhbHNlLCBFT0w7IC8vIHNwZWNpYWwgY2FzZTogZW5kIG9mIGxpbmUKCgkgICAgICAvLyBzcGVjaWFsIGNhc2U6IHF1b3RlcwoJICAgICAgdmFyIGogPSBJLCBjOwoJICAgICAgaWYgKHRleHQuY2hhckNvZGVBdChqKSA9PT0gMzQpIHsKCSAgICAgICAgdmFyIGkgPSBqOwoJICAgICAgICB3aGlsZSAoaSsrIDwgTikgewoJICAgICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoaSkgPT09IDM0KSB7CgkgICAgICAgICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMzQpIGJyZWFrOwoJICAgICAgICAgICAgKytpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBJID0gaSArIDI7CgkgICAgICAgIGMgPSB0ZXh0LmNoYXJDb2RlQXQoaSArIDEpOwoJICAgICAgICBpZiAoYyA9PT0gMTMpIHsKCSAgICAgICAgICBlb2wgPSB0cnVlOwoJICAgICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoaSArIDIpID09PSAxMCkgKytJOwoJICAgICAgICB9IGVsc2UgaWYgKGMgPT09IDEwKSB7CgkgICAgICAgICAgZW9sID0gdHJ1ZTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqICsgMSwgaSkucmVwbGFjZSgvIiIvZywgIlwiIik7CgkgICAgICB9CgoJICAgICAgLy8gY29tbW9uIGNhc2U6IGZpbmQgbmV4dCBkZWxpbWl0ZXIgb3IgbmV3bGluZQoJICAgICAgd2hpbGUgKEkgPCBOKSB7CgkgICAgICAgIHZhciBrID0gMTsKCSAgICAgICAgYyA9IHRleHQuY2hhckNvZGVBdChJKyspOwoJICAgICAgICBpZiAoYyA9PT0gMTApIGVvbCA9IHRydWU7IC8vIFxuCgkgICAgICAgIGVsc2UgaWYgKGMgPT09IDEzKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IDEwKSArK0ksICsrazsgfSAvLyBccnxcclxuCgkgICAgICAgIGVsc2UgaWYgKGMgIT09IGRlbGltaXRlckNvZGUpIGNvbnRpbnVlOwoJICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqLCBJIC0gayk7CgkgICAgICB9CgoJICAgICAgLy8gc3BlY2lhbCBjYXNlOiBsYXN0IHRva2VuIGJlZm9yZSBFT0YKCSAgICAgIHJldHVybiB0ZXh0LnNsaWNlKGopOwoJICAgIH0KCgkgICAgd2hpbGUgKCh0ID0gdG9rZW4oKSkgIT09IEVPRikgewoJICAgICAgdmFyIGEgPSBbXTsKCSAgICAgIHdoaWxlICh0ICE9PSBFT0wgJiYgdCAhPT0gRU9GKSB7CgkgICAgICAgIGEucHVzaCh0KTsKCSAgICAgICAgdCA9IHRva2VuKCk7CgkgICAgICB9CgkgICAgICBpZiAoZiAmJiAoYSA9IGYoYSwgbisrKSkgPT0gbnVsbCkgY29udGludWU7CgkgICAgICByb3dzLnB1c2goYSk7CgkgICAgfQoKCSAgICByZXR1cm4gcm93czsKCSAgfQoKCSAgZnVuY3Rpb24gZm9ybWF0KHJvd3MsIGNvbHVtbnMpIHsKCSAgICBpZiAoY29sdW1ucyA9PSBudWxsKSBjb2x1bW5zID0gaW5mZXJDb2x1bW5zKHJvd3MpOwoJICAgIHJldHVybiBbY29sdW1ucy5tYXAoZm9ybWF0VmFsdWUpLmpvaW4oZGVsaW1pdGVyKV0uY29uY2F0KHJvd3MubWFwKGZ1bmN0aW9uKHJvdykgewoJICAgICAgcmV0dXJuIGNvbHVtbnMubWFwKGZ1bmN0aW9uKGNvbHVtbikgewoJICAgICAgICByZXR1cm4gZm9ybWF0VmFsdWUocm93W2NvbHVtbl0pOwoJICAgICAgfSkuam9pbihkZWxpbWl0ZXIpOwoJICAgIH0pKS5qb2luKCJcbiIpOwoJICB9CgoJICBmdW5jdGlvbiBmb3JtYXRSb3dzKHJvd3MpIHsKCSAgICByZXR1cm4gcm93cy5tYXAoZm9ybWF0Um93KS5qb2luKCJcbiIpOwoJICB9CgoJICBmdW5jdGlvbiBmb3JtYXRSb3cocm93KSB7CgkgICAgcmV0dXJuIHJvdy5tYXAoZm9ybWF0VmFsdWUpLmpvaW4oZGVsaW1pdGVyKTsKCSAgfQoKCSAgZnVuY3Rpb24gZm9ybWF0VmFsdWUodGV4dCkgewoJICAgIHJldHVybiB0ZXh0ID09IG51bGwgPyAiIgoJICAgICAgICA6IHJlRm9ybWF0LnRlc3QodGV4dCArPSAiIikgPyAiXCIiICsgdGV4dC5yZXBsYWNlKC9cIi9nLCAiXCJcIiIpICsgIlwiIgoJICAgICAgICA6IHRleHQ7CgkgIH0KCgkgIHJldHVybiB7CgkgICAgcGFyc2U6IHBhcnNlLAoJICAgIHBhcnNlUm93czogcGFyc2VSb3dzLAoJICAgIGZvcm1hdDogZm9ybWF0LAoJICAgIGZvcm1hdFJvd3M6IGZvcm1hdFJvd3MKCSAgfTsKCX0KCgl2YXIgY3N2ID0gZHN2JDEoIiwiKTsKCgl2YXIgY3N2UGFyc2UgPSBjc3YucGFyc2U7Cgl2YXIgY3N2UGFyc2VSb3dzID0gY3N2LnBhcnNlUm93czsKCXZhciBjc3ZGb3JtYXQgPSBjc3YuZm9ybWF0OwoJdmFyIGNzdkZvcm1hdFJvd3MgPSBjc3YuZm9ybWF0Um93czsKCgl2YXIgdHN2ID0gZHN2JDEoIlx0Iik7CgoJdmFyIHRzdlBhcnNlID0gdHN2LnBhcnNlOwoJdmFyIHRzdlBhcnNlUm93cyA9IHRzdi5wYXJzZVJvd3M7Cgl2YXIgdHN2Rm9ybWF0ID0gdHN2LmZvcm1hdDsKCXZhciB0c3ZGb3JtYXRSb3dzID0gdHN2LmZvcm1hdFJvd3M7CgoJdmFyIGQzRHN2ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewoJCV9fcHJvdG9fXzogbnVsbCwKCQljc3ZGb3JtYXQ6IGNzdkZvcm1hdCwKCQljc3ZGb3JtYXRSb3dzOiBjc3ZGb3JtYXRSb3dzLAoJCWNzdlBhcnNlOiBjc3ZQYXJzZSwKCQljc3ZQYXJzZVJvd3M6IGNzdlBhcnNlUm93cywKCQlkc3ZGb3JtYXQ6IGRzdiQxLAoJCXRzdkZvcm1hdDogdHN2Rm9ybWF0LAoJCXRzdkZvcm1hdFJvd3M6IHRzdkZvcm1hdFJvd3MsCgkJdHN2UGFyc2U6IHRzdlBhcnNlLAoJCXRzdlBhcnNlUm93czogdHN2UGFyc2VSb3dzCgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoZDNEc3YpOwoKCXZhciBzZXhhZ2VzaW1hbCQxID0ge2V4cG9ydHM6IHt9fTsKCglzZXhhZ2VzaW1hbCQxLmV4cG9ydHMgPSBlbGVtZW50OwoJc2V4YWdlc2ltYWwkMS5leHBvcnRzLnBhaXIgPSBwYWlyOwoJc2V4YWdlc2ltYWwkMS5leHBvcnRzLmZvcm1hdCA9IGZvcm1hdDsKCXNleGFnZXNpbWFsJDEuZXhwb3J0cy5mb3JtYXRQYWlyID0gZm9ybWF0UGFpcjsKCXNleGFnZXNpbWFsJDEuZXhwb3J0cy5jb29yZFRvRE1TID0gY29vcmRUb0RNUzsKCgoJZnVuY3Rpb24gZWxlbWVudChpbnB1dCwgZGltcykgewoJICB2YXIgcmVzdWx0ID0gc2VhcmNoKGlucHV0LCBkaW1zKTsKCSAgcmV0dXJuIChyZXN1bHQgPT09IG51bGwpID8gbnVsbCA6IHJlc3VsdC52YWw7Cgl9CgoKCWZ1bmN0aW9uIGZvcm1hdFBhaXIoaW5wdXQpIHsKCSAgcmV0dXJuIGZvcm1hdChpbnB1dC5sYXQsICdsYXQnKSArICcgJyArIGZvcm1hdChpbnB1dC5sb24sICdsb24nKTsKCX0KCgoJLy8gSXMgMCBOb3J0aCBvciBTb3V0aD8KCWZ1bmN0aW9uIGZvcm1hdChpbnB1dCwgZGltKSB7CgkgIHZhciBkbXMgPSBjb29yZFRvRE1TKGlucHV0LCBkaW0pOwoJICByZXR1cm4gZG1zLndob2xlICsgJ8KwICcgKwoJICAgIChkbXMubWludXRlcyA/IGRtcy5taW51dGVzICsgJ1wnICcgOiAnJykgKwoJICAgIChkbXMuc2Vjb25kcyA/IGRtcy5zZWNvbmRzICsgJyIgJyA6ICcnKSArIGRtcy5kaXI7Cgl9CgoKCWZ1bmN0aW9uIGNvb3JkVG9ETVMoaW5wdXQsIGRpbSkgewoJICB2YXIgZGlycyA9IHsgbGF0OiBbJ04nLCAnUyddLCBsb246IFsnRScsICdXJ10gfVtkaW1dIHx8ICcnOwoJICB2YXIgZGlyID0gZGlyc1tpbnB1dCA+PSAwID8gMCA6IDFdOwoJICB2YXIgYWJzID0gTWF0aC5hYnMoaW5wdXQpOwoJICB2YXIgd2hvbGUgPSBNYXRoLmZsb29yKGFicyk7CgkgIHZhciBmcmFjdGlvbiA9IGFicyAtIHdob2xlOwoJICB2YXIgZnJhY3Rpb25NaW51dGVzID0gZnJhY3Rpb24gKiA2MDsKCSAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKGZyYWN0aW9uTWludXRlcyk7CgkgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigoZnJhY3Rpb25NaW51dGVzIC0gbWludXRlcykgKiA2MCk7CgoJICByZXR1cm4gewoJICAgIHdob2xlOiB3aG9sZSwKCSAgICBtaW51dGVzOiBtaW51dGVzLAoJICAgIHNlY29uZHM6IHNlY29uZHMsCgkgICAgZGlyOiBkaXIKCSAgfTsKCX0KCgoJZnVuY3Rpb24gc2VhcmNoKGlucHV0LCBkaW1zKSB7CgkgIGlmICghZGltcykgZGltcyA9ICdOU0VXJzsKCSAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsOwoKCSAgaW5wdXQgPSBpbnB1dC50b1VwcGVyQ2FzZSgpOwoJICB2YXIgcmVnZXggPSAvXltcc1wsXSooW05TRVddKT9ccyooW1wtfFzigJR8XOKAlV0/WzAtOS5dKylbwrDCusuaXT9ccyooPzooWzAtOS5dKylbJ+KAmeKAsuKAmF1ccyopPyg/OihbMC05Ll0rKSg/OicnfCJ84oCdfOKAsylccyopPyhbTlNFV10pPy87CgoJICB2YXIgbSA9IGlucHV0Lm1hdGNoKHJlZ2V4KTsKCSAgaWYgKCFtKSByZXR1cm4gbnVsbDsgIC8vIG5vIG1hdGNoCgoJICB2YXIgbWF0Y2hlZCA9IG1bMF07CgoJICAvLyBleHRyYWN0IGRpbWVuc2lvbi4uIG1bMV0gPSBsZWFkaW5nLCBtWzVdID0gdHJhaWxpbmcKCSAgdmFyIGRpbTsKCSAgaWYgKG1bMV0gJiYgbVs1XSkgeyAgICAgICAgICAgICAgICAgLy8gaWYgbWF0Y2hlZCBib3RoLi4KCSAgICBkaW0gPSBtWzFdOyAgICAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCBsZWFkaW5nCgkgICAgbWF0Y2hlZCA9IG1hdGNoZWQuc2xpY2UoMCwgLTEpOyAgIC8vIHJlbW92ZSB0cmFpbGluZyBkaW1lbnNpb24gZnJvbSBtYXRjaAoJICB9IGVsc2UgewoJICAgIGRpbSA9IG1bMV0gfHwgbVs1XTsKCSAgfQoKCSAgLy8gaWYgdW5yZWNvZ25pemVkIGRpbWVuc2lvbgoJICBpZiAoZGltICYmIGRpbXMuaW5kZXhPZihkaW0pID09PSAtMSkgcmV0dXJuIG51bGw7CgoJICAvLyBleHRyYWN0IERNUwoJICB2YXIgZGVnID0gbVsyXSA/IHBhcnNlRmxvYXQobVsyXSkgOiAwOwoJICB2YXIgbWluID0gbVszXSA/IHBhcnNlRmxvYXQobVszXSkgLyA2MCA6IDA7CgkgIHZhciBzZWMgPSBtWzRdID8gcGFyc2VGbG9hdChtWzRdKSAvIDM2MDAgOiAwOwoJICB2YXIgc2lnbiA9IChkZWcgPCAwKSA/IC0xIDogMTsKCSAgaWYgKGRpbSA9PT0gJ1MnIHx8IGRpbSA9PT0gJ1cnKSBzaWduICo9IC0xOwoKCSAgcmV0dXJuIHsKCSAgICB2YWw6IChNYXRoLmFicyhkZWcpICsgbWluICsgc2VjKSAqIHNpZ24sCgkgICAgZGltOiBkaW0sCgkgICAgbWF0Y2hlZDogbWF0Y2hlZCwKCSAgICByZW1haW46IGlucHV0LnNsaWNlKG1hdGNoZWQubGVuZ3RoKQoJICB9OwoJfQoKCglmdW5jdGlvbiBwYWlyKGlucHV0LCBkaW1zKSB7CgkgIGlucHV0ID0gaW5wdXQudHJpbSgpOwoJICB2YXIgb25lID0gc2VhcmNoKGlucHV0LCBkaW1zKTsKCSAgaWYgKCFvbmUpIHJldHVybiBudWxsOwoKCSAgaW5wdXQgPSBvbmUucmVtYWluLnRyaW0oKTsKCSAgdmFyIHR3byA9IHNlYXJjaChpbnB1dCwgZGltcyk7CgkgIGlmICghdHdvIHx8IHR3by5yZW1haW4pIHJldHVybiBudWxsOwoKCSAgaWYgKG9uZS5kaW0pIHsKCSAgICByZXR1cm4gc3dhcGRpbShvbmUudmFsLCB0d28udmFsLCBvbmUuZGltKTsKCSAgfSBlbHNlIHsKCSAgICByZXR1cm4gW29uZS52YWwsIHR3by52YWxdOwoJICB9Cgl9CgoKCWZ1bmN0aW9uIHN3YXBkaW0oYSwgYiwgZGltKSB7CgkgIGlmIChkaW0gPT09ICdOJyB8fCBkaW0gPT09ICdTJykgcmV0dXJuIFthLCBiXTsKCSAgaWYgKGRpbSA9PT0gJ1cnIHx8IGRpbSA9PT0gJ0UnKSByZXR1cm4gW2IsIGFdOwoJfQoKCXZhciBzZXhhZ2VzaW1hbEV4cG9ydHMgPSBzZXhhZ2VzaW1hbCQxLmV4cG9ydHM7CgoJdmFyIGRzdiA9IHJlcXVpcmUkJDAsCgkgICAgc2V4YWdlc2ltYWwgPSBzZXhhZ2VzaW1hbEV4cG9ydHM7CgoJdmFyIGxhdFJlZ2V4ID0gLyhMYXQpKGl0dWRlKT8vZ2ksCgkgICAgbG9uUmVnZXggPSAvKEwpKG9ufG5nKShnaXR1ZGUpPy9pOwoKCWZ1bmN0aW9uIGd1ZXNzSGVhZGVyKHJvdywgcmVnZXhwKSB7CgkgICAgdmFyIG5hbWUsIG1hdGNoLCBzY29yZTsKCSAgICBmb3IgKHZhciBmIGluIHJvdykgewoJICAgICAgICBtYXRjaCA9IGYubWF0Y2gocmVnZXhwKTsKCSAgICAgICAgaWYgKG1hdGNoICYmICghbmFtZSB8fCBtYXRjaFswXS5sZW5ndGggLyBmLmxlbmd0aCA+IHNjb3JlKSkgewoJICAgICAgICAgICAgc2NvcmUgPSBtYXRjaFswXS5sZW5ndGggLyBmLmxlbmd0aDsKCSAgICAgICAgICAgIG5hbWUgPSBmOwoJICAgICAgICB9CgkgICAgfQoJICAgIHJldHVybiBuYW1lOwoJfQoKCWZ1bmN0aW9uIGd1ZXNzTGF0SGVhZGVyKHJvdykgeyByZXR1cm4gZ3Vlc3NIZWFkZXIocm93LCBsYXRSZWdleCk7IH0KCWZ1bmN0aW9uIGd1ZXNzTG9uSGVhZGVyKHJvdykgeyByZXR1cm4gZ3Vlc3NIZWFkZXIocm93LCBsb25SZWdleCk7IH0KCglmdW5jdGlvbiBpc0xhdChmKSB7IHJldHVybiAhIWYubWF0Y2gobGF0UmVnZXgpOyB9CglmdW5jdGlvbiBpc0xvbihmKSB7IHJldHVybiAhIWYubWF0Y2gobG9uUmVnZXgpOyB9CgoJZnVuY3Rpb24ga2V5Q291bnQobykgewoJICAgIHJldHVybiAodHlwZW9mIG8gPT0gJ29iamVjdCcpID8gT2JqZWN0LmtleXMobykubGVuZ3RoIDogMDsKCX0KCglmdW5jdGlvbiBhdXRvRGVsaW1pdGVyKHgpIHsKCSAgICB2YXIgZGVsaW1pdGVycyA9IFsnLCcsICc7JywgJ1x0JywgJ3wnXTsKCSAgICB2YXIgcmVzdWx0cyA9IFtdOwoKCSAgICBkZWxpbWl0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGRlbGltaXRlcikgewoJICAgICAgICB2YXIgcmVzID0gZHN2LmRzdkZvcm1hdChkZWxpbWl0ZXIpLnBhcnNlKHgpOwoJICAgICAgICBpZiAocmVzLmxlbmd0aCA+PSAxKSB7CgkgICAgICAgICAgICB2YXIgY291bnQgPSBrZXlDb3VudChyZXNbMF0pOwoJICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoa2V5Q291bnQocmVzW2ldKSAhPT0gY291bnQpIHJldHVybjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CgkgICAgICAgICAgICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsCgkgICAgICAgICAgICAgICAgYXJpdHk6IE9iamVjdC5rZXlzKHJlc1swXSkubGVuZ3RoLAoJICAgICAgICAgICAgfSk7CgkgICAgICAgIH0KCSAgICB9KTsKCgkgICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiByZXN1bHRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKCSAgICAgICAgICAgIHJldHVybiBiLmFyaXR5IC0gYS5hcml0eTsKCSAgICAgICAgfSlbMF0uZGVsaW1pdGVyOwoJICAgIH0gZWxzZSB7CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH0KCX0KCgkvKioKCSAqIFNpbGx5IHN0b3BnYXAgZm9yIGRzdiB0byBkMy1kc3YgdXBncmFkZQoJICoKCSAqIEBwYXJhbSB7QXJyYXl9IHggZHN2IG91dHB1dAoJICogQHJldHVybnMge0FycmF5fSBhcnJheSB3aXRob3V0IGNvbHVtbnMgbWVtYmVyCgkgKi8KCWZ1bmN0aW9uIGRlbGV0ZUNvbHVtbnMoeCkgewoJICAgIGRlbGV0ZSB4LmNvbHVtbnM7CgkgICAgcmV0dXJuIHg7Cgl9CgoJZnVuY3Rpb24gYXV0byh4KSB7CgkgICAgdmFyIGRlbGltaXRlciA9IGF1dG9EZWxpbWl0ZXIoeCk7CgkgICAgaWYgKCFkZWxpbWl0ZXIpIHJldHVybiBudWxsOwoJICAgIHJldHVybiBkZWxldGVDb2x1bW5zKGRzdi5kc3ZGb3JtYXQoZGVsaW1pdGVyKS5wYXJzZSh4KSk7Cgl9CgoJZnVuY3Rpb24gY3N2Mmdlb2pzb24oeCwgb3B0aW9ucywgY2FsbGJhY2spIHsKCgkgICAgaWYgKCFjYWxsYmFjaykgewoJICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7CgkgICAgICAgIG9wdGlvbnMgPSB7fTsKCSAgICB9CgoJICAgIG9wdGlvbnMuZGVsaW1pdGVyID0gb3B0aW9ucy5kZWxpbWl0ZXIgfHwgJywnOwoKCSAgICB2YXIgbGF0ZmllbGQgPSBvcHRpb25zLmxhdGZpZWxkIHx8ICcnLAoJICAgICAgICBsb25maWVsZCA9IG9wdGlvbnMubG9uZmllbGQgfHwgJycsCgkgICAgICAgIGNycyA9IG9wdGlvbnMuY3JzIHx8ICcnOwoKCSAgICB2YXIgZmVhdHVyZXMgPSBbXSwKCSAgICAgICAgZmVhdHVyZWNvbGxlY3Rpb24gPSB7dHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywgZmVhdHVyZXM6IGZlYXR1cmVzfTsKCgkgICAgaWYgKGNycyAhPT0gJycpIHsKCSAgICAgICAgZmVhdHVyZWNvbGxlY3Rpb24uY3JzID0ge3R5cGU6ICduYW1lJywgcHJvcGVydGllczoge25hbWU6IGNyc319OwoJICAgIH0KCgkgICAgaWYgKG9wdGlvbnMuZGVsaW1pdGVyID09PSAnYXV0bycgJiYgdHlwZW9mIHggPT0gJ3N0cmluZycpIHsKCSAgICAgICAgb3B0aW9ucy5kZWxpbWl0ZXIgPSBhdXRvRGVsaW1pdGVyKHgpOwoJICAgICAgICBpZiAoIW9wdGlvbnMuZGVsaW1pdGVyKSB7CgkgICAgICAgICAgICBjYWxsYmFjayh7CgkgICAgICAgICAgICAgICAgdHlwZTogJ0Vycm9yJywKCSAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGF1dG9kZXRlY3QgZGVsaW1pdGVyJwoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICByZXR1cm47CgkgICAgICAgIH0KCSAgICB9CgoJICAgIHZhciBudW1lcmljRmllbGRzID0gb3B0aW9ucy5udW1lcmljRmllbGRzID8gb3B0aW9ucy5udW1lcmljRmllbGRzLnNwbGl0KCcsJykgOiBudWxsOwoKCSAgICB2YXIgcGFyc2VkID0gKHR5cGVvZiB4ID09ICdzdHJpbmcnKSA/CgkgICAgICAgIGRzdi5kc3ZGb3JtYXQob3B0aW9ucy5kZWxpbWl0ZXIpLnBhcnNlKHgsIGZ1bmN0aW9uIChkKSB7CgkgICAgICAgICAgICBpZiAobnVtZXJpY0ZpZWxkcykgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChudW1lcmljRmllbGRzLmluY2x1ZGVzKGtleSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIGRba2V5XSA9ICtkW2tleV07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXR1cm4gZDsKCSAgICAgICAgfSkgOiB4OwoKCSAgICBpZiAoIXBhcnNlZC5sZW5ndGgpIHsKCSAgICAgICAgY2FsbGJhY2sobnVsbCwgZmVhdHVyZWNvbGxlY3Rpb24pOwoJICAgICAgICByZXR1cm47CgkgICAgfQoKCSAgICB2YXIgZXJyb3JzID0gW107CgkgICAgdmFyIGk7CgoKCSAgICBpZiAoIWxhdGZpZWxkKSBsYXRmaWVsZCA9IGd1ZXNzTGF0SGVhZGVyKHBhcnNlZFswXSk7CgkgICAgaWYgKCFsb25maWVsZCkgbG9uZmllbGQgPSBndWVzc0xvbkhlYWRlcihwYXJzZWRbMF0pOwoJICAgIHZhciBub0dlb21ldHJ5ID0gKCFsYXRmaWVsZCB8fCAhbG9uZmllbGQpOwoKCSAgICBpZiAobm9HZW9tZXRyeSkgewoJICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFyc2VkLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKHsKCSAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCgkgICAgICAgICAgICAgICAgcHJvcGVydGllczogcGFyc2VkW2ldLAoJICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBudWxsCgkgICAgICAgICAgICB9KTsKCSAgICAgICAgfQoJICAgICAgICBjYWxsYmFjayhlcnJvcnMubGVuZ3RoID8gZXJyb3JzIDogbnVsbCwgZmVhdHVyZWNvbGxlY3Rpb24pOwoJICAgICAgICByZXR1cm47CgkgICAgfQoKCSAgICBmb3IgKGkgPSAwOyBpIDwgcGFyc2VkLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIGlmIChwYXJzZWRbaV1bbG9uZmllbGRdICE9PSB1bmRlZmluZWQgJiYKCSAgICAgICAgICAgIHBhcnNlZFtpXVtsYXRmaWVsZF0gIT09IHVuZGVmaW5lZCkgewoKCSAgICAgICAgICAgIHZhciBsb25rID0gcGFyc2VkW2ldW2xvbmZpZWxkXSwKCSAgICAgICAgICAgICAgICBsYXRrID0gcGFyc2VkW2ldW2xhdGZpZWxkXSwKCSAgICAgICAgICAgICAgICBsb25mLCBsYXRmLAoJICAgICAgICAgICAgICAgIGE7CgoJICAgICAgICAgICAgYSA9IHNleGFnZXNpbWFsKGxvbmssICdFVycpOwoJICAgICAgICAgICAgaWYgKGEpIGxvbmsgPSBhOwoJICAgICAgICAgICAgYSA9IHNleGFnZXNpbWFsKGxhdGssICdOUycpOwoJICAgICAgICAgICAgaWYgKGEpIGxhdGsgPSBhOwoKCSAgICAgICAgICAgIGxvbmYgPSBwYXJzZUZsb2F0KGxvbmspOwoJICAgICAgICAgICAgbGF0ZiA9IHBhcnNlRmxvYXQobGF0ayk7CgoJICAgICAgICAgICAgaWYgKGlzTmFOKGxvbmYpIHx8CgkgICAgICAgICAgICAgICAgaXNOYU4obGF0ZikpIHsKCSAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7CgkgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBIHJvdyBjb250YWluZWQgYW4gaW52YWxpZCB2YWx1ZSBmb3IgbGF0aXR1ZGUgb3IgbG9uZ2l0dWRlJywKCSAgICAgICAgICAgICAgICAgICAgcm93OiBwYXJzZWRbaV0sCgkgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpCgkgICAgICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5pbmNsdWRlTGF0TG9uKSB7CgkgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwYXJzZWRbaV1bbG9uZmllbGRdOwoJICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGFyc2VkW2ldW2xhdGZpZWxkXTsKCSAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goewoJICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCgkgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHBhcnNlZFtpXSwKCSAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCgkgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogWwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQobG9uZiksCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChsYXRmKQoJICAgICAgICAgICAgICAgICAgICAgICAgXQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9CgoJICAgIGNhbGxiYWNrKGVycm9ycy5sZW5ndGggPyBlcnJvcnMgOiBudWxsLCBmZWF0dXJlY29sbGVjdGlvbik7Cgl9CgoJZnVuY3Rpb24gdG9MaW5lKGdqKSB7CgkgICAgdmFyIGZlYXR1cmVzID0gZ2ouZmVhdHVyZXM7CgkgICAgdmFyIGxpbmUgPSB7CgkgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKCSAgICAgICAgZ2VvbWV0cnk6IHsKCSAgICAgICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJywKCSAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbXQoJICAgICAgICB9CgkgICAgfTsKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIGxpbmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMucHVzaChmZWF0dXJlc1tpXS5nZW9tZXRyeS5jb29yZGluYXRlcyk7CgkgICAgfQoJICAgIGxpbmUucHJvcGVydGllcyA9IGZlYXR1cmVzLnJlZHVjZShmdW5jdGlvbiAoYWdncmVnYXRlZFByb3BlcnRpZXMsIG5ld0ZlYXR1cmUpIHsKCSAgICAgICAgZm9yICh2YXIga2V5IGluIG5ld0ZlYXR1cmUucHJvcGVydGllcykgewoJICAgICAgICAgICAgaWYgKCFhZ2dyZWdhdGVkUHJvcGVydGllc1trZXldKSB7CgkgICAgICAgICAgICAgICAgYWdncmVnYXRlZFByb3BlcnRpZXNba2V5XSA9IFtdOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYWdncmVnYXRlZFByb3BlcnRpZXNba2V5XS5wdXNoKG5ld0ZlYXR1cmUucHJvcGVydGllc1trZXldKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYWdncmVnYXRlZFByb3BlcnRpZXM7CgkgICAgfSwge30pOwoJICAgIHJldHVybiB7CgkgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCgkgICAgICAgIGZlYXR1cmVzOiBbbGluZV0KCSAgICB9OwoJfQoKCWZ1bmN0aW9uIHRvUG9seWdvbihnaikgewoJICAgIHZhciBmZWF0dXJlcyA9IGdqLmZlYXR1cmVzOwoJICAgIHZhciBwb2x5ID0gewoJICAgICAgICB0eXBlOiAnRmVhdHVyZScsCgkgICAgICAgIGdlb21ldHJ5OiB7CgkgICAgICAgICAgICB0eXBlOiAnUG9seWdvbicsCgkgICAgICAgICAgICBjb29yZGluYXRlczogW1tdXQoJICAgICAgICB9CgkgICAgfTsKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHBvbHkuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0ucHVzaChmZWF0dXJlc1tpXS5nZW9tZXRyeS5jb29yZGluYXRlcyk7CgkgICAgfQoJICAgIHBvbHkucHJvcGVydGllcyA9IGZlYXR1cmVzLnJlZHVjZShmdW5jdGlvbiAoYWdncmVnYXRlZFByb3BlcnRpZXMsIG5ld0ZlYXR1cmUpIHsKCSAgICAgICAgZm9yICh2YXIga2V5IGluIG5ld0ZlYXR1cmUucHJvcGVydGllcykgewoJICAgICAgICAgICAgaWYgKCFhZ2dyZWdhdGVkUHJvcGVydGllc1trZXldKSB7CgkgICAgICAgICAgICAgICAgYWdncmVnYXRlZFByb3BlcnRpZXNba2V5XSA9IFtdOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYWdncmVnYXRlZFByb3BlcnRpZXNba2V5XS5wdXNoKG5ld0ZlYXR1cmUucHJvcGVydGllc1trZXldKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYWdncmVnYXRlZFByb3BlcnRpZXM7CgkgICAgfSwge30pOwoJICAgIHJldHVybiB7CgkgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCgkgICAgICAgIGZlYXR1cmVzOiBbcG9seV0KCSAgICB9OwoJfQoKCXZhciBjc3YyZ2VvanNvbl8xID0gewoJICAgIGlzTG9uOiBpc0xvbiwKCSAgICBpc0xhdDogaXNMYXQsCgkgICAgZ3Vlc3NMYXRIZWFkZXI6IGd1ZXNzTGF0SGVhZGVyLAoJICAgIGd1ZXNzTG9uSGVhZGVyOiBndWVzc0xvbkhlYWRlciwKCSAgICBjc3Y6IGRzdi5jc3ZQYXJzZSwKCSAgICB0c3Y6IGRzdi50c3ZQYXJzZSwKCSAgICBkc3Y6IGRzdiwKCSAgICBhdXRvOiBhdXRvLAoJICAgIGNzdjJnZW9qc29uOiBjc3YyZ2VvanNvbiwKCSAgICB0b0xpbmU6IHRvTGluZSwKCSAgICB0b1BvbHlnb246IHRvUG9seWdvbgoJfTsKCglmdW5jdGlvbiBpZGVudGl0eSh4KSB7CgkgIHJldHVybiB4OwoJfQoKCWZ1bmN0aW9uIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHsKCSAgaWYgKHRyYW5zZm9ybSA9PSBudWxsKSByZXR1cm4gaWRlbnRpdHk7CgkgIHZhciB4MCwKCSAgICAgIHkwLAoJICAgICAga3ggPSB0cmFuc2Zvcm0uc2NhbGVbMF0sCgkgICAgICBreSA9IHRyYW5zZm9ybS5zY2FsZVsxXSwKCSAgICAgIGR4ID0gdHJhbnNmb3JtLnRyYW5zbGF0ZVswXSwKCSAgICAgIGR5ID0gdHJhbnNmb3JtLnRyYW5zbGF0ZVsxXTsKCSAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0LCBpKSB7CgkgICAgaWYgKCFpKSB4MCA9IHkwID0gMDsKCSAgICB2YXIgaiA9IDIsIG4gPSBpbnB1dC5sZW5ndGgsIG91dHB1dCA9IG5ldyBBcnJheShuKTsKCSAgICBvdXRwdXRbMF0gPSAoeDAgKz0gaW5wdXRbMF0pICoga3ggKyBkeDsKCSAgICBvdXRwdXRbMV0gPSAoeTAgKz0gaW5wdXRbMV0pICoga3kgKyBkeTsKCSAgICB3aGlsZSAoaiA8IG4pIG91dHB1dFtqXSA9IGlucHV0W2pdLCArK2o7CgkgICAgcmV0dXJuIG91dHB1dDsKCSAgfTsKCX0KCglmdW5jdGlvbiByZXZlcnNlKGFycmF5LCBuKSB7CgkgIHZhciB0LCBqID0gYXJyYXkubGVuZ3RoLCBpID0gaiAtIG47CgkgIHdoaWxlIChpIDwgLS1qKSB0ID0gYXJyYXlbaV0sIGFycmF5W2krK10gPSBhcnJheVtqXSwgYXJyYXlbal0gPSB0OwoJfQoKCWZ1bmN0aW9uIHRvcG9qc29uRmVhdHVyZSh0b3BvbG9neSwgbykgewoJICBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSBvID0gdG9wb2xvZ3kub2JqZWN0c1tvXTsKCSAgcmV0dXJuIG8udHlwZSA9PT0gIkdlb21ldHJ5Q29sbGVjdGlvbiIKCSAgICAgID8ge3R5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsIGZlYXR1cmVzOiBvLmdlb21ldHJpZXMubWFwKGZ1bmN0aW9uKG8pIHsgcmV0dXJuIGZlYXR1cmUodG9wb2xvZ3ksIG8pOyB9KX0KCSAgICAgIDogZmVhdHVyZSh0b3BvbG9neSwgbyk7Cgl9CgoJZnVuY3Rpb24gZmVhdHVyZSh0b3BvbG9neSwgbykgewoJICB2YXIgaWQgPSBvLmlkLAoJICAgICAgYmJveCA9IG8uYmJveCwKCSAgICAgIHByb3BlcnRpZXMgPSBvLnByb3BlcnRpZXMgPT0gbnVsbCA/IHt9IDogby5wcm9wZXJ0aWVzLAoJICAgICAgZ2VvbWV0cnkgPSBvYmplY3QodG9wb2xvZ3ksIG8pOwoJICByZXR1cm4gaWQgPT0gbnVsbCAmJiBiYm94ID09IG51bGwgPyB7dHlwZTogIkZlYXR1cmUiLCBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLCBnZW9tZXRyeTogZ2VvbWV0cnl9CgkgICAgICA6IGJib3ggPT0gbnVsbCA/IHt0eXBlOiAiRmVhdHVyZSIsIGlkOiBpZCwgcHJvcGVydGllczogcHJvcGVydGllcywgZ2VvbWV0cnk6IGdlb21ldHJ5fQoJICAgICAgOiB7dHlwZTogIkZlYXR1cmUiLCBpZDogaWQsIGJib3g6IGJib3gsIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsIGdlb21ldHJ5OiBnZW9tZXRyeX07Cgl9CgoJZnVuY3Rpb24gb2JqZWN0KHRvcG9sb2d5LCBvKSB7CgkgIHZhciB0cmFuc2Zvcm1Qb2ludCA9IHRyYW5zZm9ybSh0b3BvbG9neS50cmFuc2Zvcm0pLAoJICAgICAgYXJjcyA9IHRvcG9sb2d5LmFyY3M7CgoJICBmdW5jdGlvbiBhcmMoaSwgcG9pbnRzKSB7CgkgICAgaWYgKHBvaW50cy5sZW5ndGgpIHBvaW50cy5wb3AoKTsKCSAgICBmb3IgKHZhciBhID0gYXJjc1tpIDwgMCA/IH5pIDogaV0sIGsgPSAwLCBuID0gYS5sZW5ndGg7IGsgPCBuOyArK2spIHsKCSAgICAgIHBvaW50cy5wdXNoKHRyYW5zZm9ybVBvaW50KGFba10sIGspKTsKCSAgICB9CgkgICAgaWYgKGkgPCAwKSByZXZlcnNlKHBvaW50cywgbik7CgkgIH0KCgkgIGZ1bmN0aW9uIHBvaW50KHApIHsKCSAgICByZXR1cm4gdHJhbnNmb3JtUG9pbnQocCk7CgkgIH0KCgkgIGZ1bmN0aW9uIGxpbmUoYXJjcykgewoJICAgIHZhciBwb2ludHMgPSBbXTsKCSAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFyY3MubGVuZ3RoOyBpIDwgbjsgKytpKSBhcmMoYXJjc1tpXSwgcG9pbnRzKTsKCSAgICBpZiAocG9pbnRzLmxlbmd0aCA8IDIpIHBvaW50cy5wdXNoKHBvaW50c1swXSk7IC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiBwZXIgdGhlIHNwZWNpZmljYXRpb24uCgkgICAgcmV0dXJuIHBvaW50czsKCSAgfQoKCSAgZnVuY3Rpb24gcmluZyhhcmNzKSB7CgkgICAgdmFyIHBvaW50cyA9IGxpbmUoYXJjcyk7CgkgICAgd2hpbGUgKHBvaW50cy5sZW5ndGggPCA0KSBwb2ludHMucHVzaChwb2ludHNbMF0pOyAvLyBUaGlzIG1heSBoYXBwZW4gaWYgYW4gYXJjIGhhcyBvbmx5IHR3byBwb2ludHMuCgkgICAgcmV0dXJuIHBvaW50czsKCSAgfQoKCSAgZnVuY3Rpb24gcG9seWdvbihhcmNzKSB7CgkgICAgcmV0dXJuIGFyY3MubWFwKHJpbmcpOwoJICB9CgoJICBmdW5jdGlvbiBnZW9tZXRyeShvKSB7CgkgICAgdmFyIHR5cGUgPSBvLnR5cGUsIGNvb3JkaW5hdGVzOwoJICAgIHN3aXRjaCAodHlwZSkgewoJICAgICAgY2FzZSAiR2VvbWV0cnlDb2xsZWN0aW9uIjogcmV0dXJuIHt0eXBlOiB0eXBlLCBnZW9tZXRyaWVzOiBvLmdlb21ldHJpZXMubWFwKGdlb21ldHJ5KX07CgkgICAgICBjYXNlICJQb2ludCI6IGNvb3JkaW5hdGVzID0gcG9pbnQoby5jb29yZGluYXRlcyk7IGJyZWFrOwoJICAgICAgY2FzZSAiTXVsdGlQb2ludCI6IGNvb3JkaW5hdGVzID0gby5jb29yZGluYXRlcy5tYXAocG9pbnQpOyBicmVhazsKCSAgICAgIGNhc2UgIkxpbmVTdHJpbmciOiBjb29yZGluYXRlcyA9IGxpbmUoby5hcmNzKTsgYnJlYWs7CgkgICAgICBjYXNlICJNdWx0aUxpbmVTdHJpbmciOiBjb29yZGluYXRlcyA9IG8uYXJjcy5tYXAobGluZSk7IGJyZWFrOwoJICAgICAgY2FzZSAiUG9seWdvbiI6IGNvb3JkaW5hdGVzID0gcG9seWdvbihvLmFyY3MpOyBicmVhazsKCSAgICAgIGNhc2UgIk11bHRpUG9seWdvbiI6IGNvb3JkaW5hdGVzID0gby5hcmNzLm1hcChwb2x5Z29uKTsgYnJlYWs7CgkgICAgICBkZWZhdWx0OiByZXR1cm4gbnVsbDsKCSAgICB9CgkgICAgcmV0dXJuIHt0eXBlOiB0eXBlLCBjb29yZGluYXRlczogY29vcmRpbmF0ZXN9OwoJICB9CgoJICByZXR1cm4gZ2VvbWV0cnkobyk7Cgl9CgoJZnVuY3Rpb24gJChlbGVtZW50LCB0YWdOYW1lKSB7CgkgICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSk7Cgl9CglmdW5jdGlvbiBub3JtYWxpemVJZChpZCkgewoJICAgIHJldHVybiBpZFswXSA9PT0gIiMiID8gaWQgOiBgIyR7aWR9YDsKCX0KCWZ1bmN0aW9uICRucyhlbGVtZW50LCB0YWdOYW1lLCBucykgewoJICAgIHJldHVybiBBcnJheS5mcm9tKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhucywgdGFnTmFtZSkpOwoJfQoJLyoqCgkgKiBnZXQgdGhlIGNvbnRlbnQgb2YgYSB0ZXh0IG5vZGUsIGlmIGFueQoJICovCglmdW5jdGlvbiBub2RlVmFsKG5vZGUpIHsKCSAgICBub2RlPy5ub3JtYWxpemUoKTsKCSAgICByZXR1cm4gKG5vZGUgJiYgbm9kZS50ZXh0Q29udGVudCkgfHwgIiI7Cgl9CgkvKioKCSAqIEdldCBvbmUgWSBjaGlsZCBvZiBYLCBpZiBhbnksIG90aGVyd2lzZSBudWxsCgkgKi8KCWZ1bmN0aW9uIGdldDEobm9kZSwgdGFnTmFtZSwgY2FsbGJhY2spIHsKCSAgICBjb25zdCBuID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKTsKCSAgICBjb25zdCByZXN1bHQgPSBuLmxlbmd0aCA/IG5bMF0gOiBudWxsOwoJICAgIGlmIChyZXN1bHQgJiYgY2FsbGJhY2spCgkgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7CgkgICAgcmV0dXJuIHJlc3VsdDsKCX0KCWZ1bmN0aW9uIGdldChub2RlLCB0YWdOYW1lLCBjYWxsYmFjaykgewoJICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTsKCSAgICBpZiAoIW5vZGUpCgkgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzOwoJICAgIGNvbnN0IG4gPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpOwoJICAgIGNvbnN0IHJlc3VsdCA9IG4ubGVuZ3RoID8gblswXSA6IG51bGw7CgkgICAgaWYgKHJlc3VsdCAmJiBjYWxsYmFjaykgewoJICAgICAgICByZXR1cm4gY2FsbGJhY2socmVzdWx0LCBwcm9wZXJ0aWVzKTsKCSAgICB9CgkgICAgcmV0dXJuIHByb3BlcnRpZXM7Cgl9CglmdW5jdGlvbiB2YWwxKG5vZGUsIHRhZ05hbWUsIGNhbGxiYWNrKSB7CgkgICAgY29uc3QgdmFsID0gbm9kZVZhbChnZXQxKG5vZGUsIHRhZ05hbWUpKTsKCSAgICBpZiAodmFsICYmIGNhbGxiYWNrKQoJICAgICAgICByZXR1cm4gY2FsbGJhY2sodmFsKSB8fCB7fTsKCSAgICByZXR1cm4ge307Cgl9CglmdW5jdGlvbiAkbnVtKG5vZGUsIHRhZ05hbWUsIGNhbGxiYWNrKSB7CgkgICAgY29uc3QgdmFsID0gcGFyc2VGbG9hdChub2RlVmFsKGdldDEobm9kZSwgdGFnTmFtZSkpKTsKCSAgICBpZiAoaXNOYU4odmFsKSkKCSAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKCSAgICBpZiAodmFsICYmIGNhbGxiYWNrKQoJICAgICAgICByZXR1cm4gY2FsbGJhY2sodmFsKSB8fCB7fTsKCSAgICByZXR1cm4ge307Cgl9CglmdW5jdGlvbiBudW0xKG5vZGUsIHRhZ05hbWUsIGNhbGxiYWNrKSB7CgkgICAgY29uc3QgdmFsID0gcGFyc2VGbG9hdChub2RlVmFsKGdldDEobm9kZSwgdGFnTmFtZSkpKTsKCSAgICBpZiAoaXNOYU4odmFsKSkKCSAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKCSAgICBpZiAoY2FsbGJhY2spCgkgICAgICAgIGNhbGxiYWNrKHZhbCk7CgkgICAgcmV0dXJuIHZhbDsKCX0KCWZ1bmN0aW9uIGdldE11bHRpKG5vZGUsIHByb3BlcnR5TmFtZXMpIHsKCSAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307CgkgICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBwcm9wZXJ0eU5hbWVzKSB7CgkgICAgICAgIHZhbDEobm9kZSwgcHJvcGVydHksICh2YWwpID0+IHsKCSAgICAgICAgICAgIHByb3BlcnRpZXNbcHJvcGVydHldID0gdmFsOwoJICAgICAgICB9KTsKCSAgICB9CgkgICAgcmV0dXJuIHByb3BlcnRpZXM7Cgl9CglmdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkgewoJICAgIHJldHVybiBub2RlPy5ub2RlVHlwZSA9PT0gMTsKCX0KCglmdW5jdGlvbiBnZXRMaW5lU3R5bGUobm9kZSkgewoJICAgIHJldHVybiBnZXQobm9kZSwgImxpbmUiLCAobGluZVN0eWxlKSA9PiB7CgkgICAgICAgIGNvbnN0IHZhbCA9IE9iamVjdC5hc3NpZ24oe30sIHZhbDEobGluZVN0eWxlLCAiY29sb3IiLCAoY29sb3IpID0+IHsKCSAgICAgICAgICAgIHJldHVybiB7IHN0cm9rZTogYCMke2NvbG9yfWAgfTsKCSAgICAgICAgfSksICRudW0obGluZVN0eWxlLCAib3BhY2l0eSIsIChvcGFjaXR5KSA9PiB7CgkgICAgICAgICAgICByZXR1cm4geyAic3Ryb2tlLW9wYWNpdHkiOiBvcGFjaXR5IH07CgkgICAgICAgIH0pLCAkbnVtKGxpbmVTdHlsZSwgIndpZHRoIiwgKHdpZHRoKSA9PiB7CgkgICAgICAgICAgICAvLyBHUFggd2lkdGggaXMgaW4gbW0sIGNvbnZlcnQgdG8gcHggd2l0aCA5NiBweCBwZXIgaW5jaAoJICAgICAgICAgICAgcmV0dXJuIHsgInN0cm9rZS13aWR0aCI6ICh3aWR0aCAqIDk2KSAvIDI1LjQgfTsKCSAgICAgICAgfSkpOwoJICAgICAgICByZXR1cm4gdmFsOwoJICAgIH0pOwoJfQoKCWZ1bmN0aW9uIGdldEV4dGVuc2lvbnMobm9kZSkgewoJICAgIGxldCB2YWx1ZXMgPSBbXTsKCSAgICBpZiAobm9kZSA9PT0gbnVsbCkKCSAgICAgICAgcmV0dXJuIHZhbHVlczsKCSAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIEFycmF5LmZyb20obm9kZS5jaGlsZE5vZGVzKSkgewoJICAgICAgICBpZiAoIWlzRWxlbWVudChjaGlsZCkpCgkgICAgICAgICAgICBjb250aW51ZTsKCSAgICAgICAgY29uc3QgbmFtZSA9IGFiYnJldmlhdGVOYW1lKGNoaWxkLm5vZGVOYW1lKTsKCSAgICAgICAgaWYgKG5hbWUgPT09ICJncHh0cHg6VHJhY2tQb2ludEV4dGVuc2lvbiIpIHsKCSAgICAgICAgICAgIC8vIGxvb3AgYWdhaW4gZm9yIG5lc3RlZCBnYXJtaW4gZXh0ZW5zaW9ucyAoZWcuICJncHh0cHg6aHIiKQoJICAgICAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChnZXRFeHRlbnNpb25zKGNoaWxkKSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBwdXNoIGN1c3RvbSBleHRlbnNpb24gKGVnLiAicG93ZXIiKQoJICAgICAgICAgICAgY29uc3QgdmFsID0gbm9kZVZhbChjaGlsZCk7CgkgICAgICAgICAgICB2YWx1ZXMucHVzaChbbmFtZSwgcGFyc2VOdW1lcmljKHZhbCldKTsKCSAgICAgICAgfQoJICAgIH0KCSAgICByZXR1cm4gdmFsdWVzOwoJfQoJZnVuY3Rpb24gYWJicmV2aWF0ZU5hbWUobmFtZSkgewoJICAgIHJldHVybiBbImhlYXJ0IiwgImdweHRweDpociIsICJociJdLmluY2x1ZGVzKG5hbWUpID8gImhlYXJ0IiA6IG5hbWU7Cgl9CglmdW5jdGlvbiBwYXJzZU51bWVyaWModmFsKSB7CgkgICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdCh2YWwpOwoJICAgIHJldHVybiBpc05hTihudW0pID8gdmFsIDogbnVtOwoJfQoKCWZ1bmN0aW9uIGNvb3JkUGFpciQxKG5vZGUpIHsKCSAgICBjb25zdCBsbCA9IFsKCSAgICAgICAgcGFyc2VGbG9hdChub2RlLmdldEF0dHJpYnV0ZSgibG9uIikgfHwgIiIpLAoJICAgICAgICBwYXJzZUZsb2F0KG5vZGUuZ2V0QXR0cmlidXRlKCJsYXQiKSB8fCAiIiksCgkgICAgXTsKCSAgICBpZiAoaXNOYU4obGxbMF0pIHx8IGlzTmFOKGxsWzFdKSkgewoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9CgkgICAgbnVtMShub2RlLCAiZWxlIiwgKHZhbCkgPT4gewoJICAgICAgICBsbC5wdXNoKHZhbCk7CgkgICAgfSk7CgkgICAgY29uc3QgdGltZSA9IGdldDEobm9kZSwgInRpbWUiKTsKCSAgICByZXR1cm4gewoJICAgICAgICBjb29yZGluYXRlczogbGwsCgkgICAgICAgIHRpbWU6IHRpbWUgPyBub2RlVmFsKHRpbWUpIDogbnVsbCwKCSAgICAgICAgZXh0ZW5kZWRWYWx1ZXM6IGdldEV4dGVuc2lvbnMoZ2V0MShub2RlLCAiZXh0ZW5zaW9ucyIpKSwKCSAgICB9OwoJfQoKCWZ1bmN0aW9uIGV4dHJhY3RQcm9wZXJ0aWVzKG5vZGUpIHsKCSAgICBjb25zdCBwcm9wZXJ0aWVzID0gZ2V0TXVsdGkobm9kZSwgWwoJICAgICAgICAibmFtZSIsCgkgICAgICAgICJjbXQiLAoJICAgICAgICAiZGVzYyIsCgkgICAgICAgICJ0eXBlIiwKCSAgICAgICAgInRpbWUiLAoJICAgICAgICAia2V5d29yZHMiLAoJICAgIF0pOwoJICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBBcnJheS5mcm9tKG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUygiaHR0cDovL3d3dy5nYXJtaW4uY29tL3htbHNjaGVtYXMvR3B4RXh0ZW5zaW9ucy92MyIsICIqIikpOwoJICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZXh0ZW5zaW9ucykgewoJICAgICAgICBpZiAoY2hpbGQucGFyZW50Tm9kZT8ucGFyZW50Tm9kZSA9PT0gbm9kZSkgewoJICAgICAgICAgICAgcHJvcGVydGllc1tjaGlsZC50YWdOYW1lLnJlcGxhY2UoIjoiLCAiXyIpXSA9IG5vZGVWYWwoY2hpbGQpOwoJICAgICAgICB9CgkgICAgfQoJICAgIGNvbnN0IGxpbmtzID0gJChub2RlLCAibGluayIpOwoJICAgIGlmIChsaW5rcy5sZW5ndGgpIHsKCSAgICAgICAgcHJvcGVydGllcy5saW5rcyA9IGxpbmtzLm1hcCgobGluaykgPT4gT2JqZWN0LmFzc2lnbih7IGhyZWY6IGxpbmsuZ2V0QXR0cmlidXRlKCJocmVmIikgfSwgZ2V0TXVsdGkobGluaywgWyJ0ZXh0IiwgInR5cGUiXSkpKTsKCSAgICB9CgkgICAgcmV0dXJuIHByb3BlcnRpZXM7Cgl9CgoJLyoqCgkgKiBFeHRyYWN0IHBvaW50cyBmcm9tIGEgdHJrc2VnIG9yIHJ0ZSBlbGVtZW50LgoJICovCglmdW5jdGlvbiBnZXRQb2ludHMkMShub2RlLCBwb2ludG5hbWUpIHsKCSAgICBjb25zdCBwdHMgPSAkKG5vZGUsIHBvaW50bmFtZSk7CgkgICAgY29uc3QgbGluZSA9IFtdOwoJICAgIGNvbnN0IHRpbWVzID0gW107CgkgICAgY29uc3QgZXh0ZW5kZWRWYWx1ZXMgPSB7fTsKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB0cy5sZW5ndGg7IGkrKykgewoJICAgICAgICBjb25zdCBjID0gY29vcmRQYWlyJDEocHRzW2ldKTsKCSAgICAgICAgaWYgKCFjKSB7CgkgICAgICAgICAgICBjb250aW51ZTsKCSAgICAgICAgfQoJICAgICAgICBsaW5lLnB1c2goYy5jb29yZGluYXRlcyk7CgkgICAgICAgIGlmIChjLnRpbWUpCgkgICAgICAgICAgICB0aW1lcy5wdXNoKGMudGltZSk7CgkgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbF0gb2YgYy5leHRlbmRlZFZhbHVlcykgewoJICAgICAgICAgICAgY29uc3QgcGx1cmFsID0gbmFtZSA9PT0gImhlYXJ0IiA/IG5hbWUgOiBuYW1lLnJlcGxhY2UoImdweHRweDoiLCAiIikgKyAicyI7CgkgICAgICAgICAgICBpZiAoIWV4dGVuZGVkVmFsdWVzW3BsdXJhbF0pIHsKCSAgICAgICAgICAgICAgICBleHRlbmRlZFZhbHVlc1twbHVyYWxdID0gQXJyYXkocHRzLmxlbmd0aCkuZmlsbChudWxsKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGV4dGVuZGVkVmFsdWVzW3BsdXJhbF1baV0gPSB2YWw7CgkgICAgICAgIH0KCSAgICB9CgkgICAgaWYgKGxpbmUubGVuZ3RoIDwgMikKCSAgICAgICAgcmV0dXJuOyAvLyBJbnZhbGlkIGxpbmUgaW4gR2VvSlNPTgoJICAgIHJldHVybiB7CgkgICAgICAgIGxpbmU6IGxpbmUsCgkgICAgICAgIHRpbWVzOiB0aW1lcywKCSAgICAgICAgZXh0ZW5kZWRWYWx1ZXM6IGV4dGVuZGVkVmFsdWVzLAoJICAgIH07Cgl9CgkvKioKCSAqIEV4dHJhY3QgYSBMaW5lU3RyaW5nIGdlb21ldHJ5IGZyb20gYSBydGUKCSAqIGVsZW1lbnQuCgkgKi8KCWZ1bmN0aW9uIGdldFJvdXRlKG5vZGUpIHsKCSAgICBjb25zdCBsaW5lID0gZ2V0UG9pbnRzJDEobm9kZSwgInJ0ZXB0Iik7CgkgICAgaWYgKCFsaW5lKQoJICAgICAgICByZXR1cm47CgkgICAgcmV0dXJuIHsKCSAgICAgICAgdHlwZTogIkZlYXR1cmUiLAoJICAgICAgICBwcm9wZXJ0aWVzOiBPYmplY3QuYXNzaWduKHsgX2dweFR5cGU6ICJydGUiIH0sIGV4dHJhY3RQcm9wZXJ0aWVzKG5vZGUpLCBnZXRMaW5lU3R5bGUoZ2V0MShub2RlLCAiZXh0ZW5zaW9ucyIpKSksCgkgICAgICAgIGdlb21ldHJ5OiB7CgkgICAgICAgICAgICB0eXBlOiAiTGluZVN0cmluZyIsCgkgICAgICAgICAgICBjb29yZGluYXRlczogbGluZS5saW5lLAoJICAgICAgICB9LAoJICAgIH07Cgl9CglmdW5jdGlvbiBnZXRUcmFjayhub2RlKSB7CgkgICAgY29uc3Qgc2VnbWVudHMgPSAkKG5vZGUsICJ0cmtzZWciKTsKCSAgICBjb25zdCB0cmFjayA9IFtdOwoJICAgIGNvbnN0IHRpbWVzID0gW107CgkgICAgY29uc3QgZXh0cmFjdGVkTGluZXMgPSBbXTsKCSAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHsKCSAgICAgICAgY29uc3QgbGluZSA9IGdldFBvaW50cyQxKHNlZ21lbnQsICJ0cmtwdCIpOwoJICAgICAgICBpZiAobGluZSkgewoJICAgICAgICAgICAgZXh0cmFjdGVkTGluZXMucHVzaChsaW5lKTsKCSAgICAgICAgICAgIGlmIChsaW5lLnRpbWVzICYmIGxpbmUudGltZXMubGVuZ3RoKQoJICAgICAgICAgICAgICAgIHRpbWVzLnB1c2gobGluZS50aW1lcyk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgaWYgKGV4dHJhY3RlZExpbmVzLmxlbmd0aCA9PT0gMCkKCSAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgY29uc3QgbXVsdGkgPSBleHRyYWN0ZWRMaW5lcy5sZW5ndGggPiAxOwoJICAgIGNvbnN0IHByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKHsgX2dweFR5cGU6ICJ0cmsiIH0sIGV4dHJhY3RQcm9wZXJ0aWVzKG5vZGUpLCBnZXRMaW5lU3R5bGUoZ2V0MShub2RlLCAiZXh0ZW5zaW9ucyIpKSwgdGltZXMubGVuZ3RoCgkgICAgICAgID8gewoJICAgICAgICAgICAgY29vcmRpbmF0ZVByb3BlcnRpZXM6IHsKCSAgICAgICAgICAgICAgICB0aW1lczogbXVsdGkgPyB0aW1lcyA6IHRpbWVzWzBdLAoJICAgICAgICAgICAgfSwKCSAgICAgICAgfQoJICAgICAgICA6IHt9KTsKCSAgICBmb3IgKGNvbnN0IGxpbmUgb2YgZXh0cmFjdGVkTGluZXMpIHsKCSAgICAgICAgdHJhY2sucHVzaChsaW5lLmxpbmUpOwoJICAgICAgICBpZiAoIXByb3BlcnRpZXMuY29vcmRpbmF0ZVByb3BlcnRpZXMpIHsKCSAgICAgICAgICAgIHByb3BlcnRpZXMuY29vcmRpbmF0ZVByb3BlcnRpZXMgPSB7fTsKCSAgICAgICAgfQoJICAgICAgICBjb25zdCBwcm9wcyA9IHByb3BlcnRpZXMuY29vcmRpbmF0ZVByb3BlcnRpZXM7CgkgICAgICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhsaW5lLmV4dGVuZGVkVmFsdWVzKTsKCSAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICBjb25zdCBbbmFtZSwgdmFsXSA9IGVudHJpZXNbaV07CgkgICAgICAgICAgICBpZiAobXVsdGkpIHsKCSAgICAgICAgICAgICAgICBpZiAoIXByb3BzW25hbWVdKSB7CgkgICAgICAgICAgICAgICAgICAgIHByb3BzW25hbWVdID0gZXh0cmFjdGVkTGluZXMubWFwKChsaW5lKSA9PiBuZXcgQXJyYXkobGluZS5saW5lLmxlbmd0aCkuZmlsbChudWxsKSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHByb3BzW25hbWVdW2ldID0gdmFsOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgcHJvcHNbbmFtZV0gPSB2YWw7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9CgkgICAgcmV0dXJuIHsKCSAgICAgICAgdHlwZTogIkZlYXR1cmUiLAoJICAgICAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLAoJICAgICAgICBnZW9tZXRyeTogbXVsdGkKCSAgICAgICAgICAgID8gewoJICAgICAgICAgICAgICAgIHR5cGU6ICJNdWx0aUxpbmVTdHJpbmciLAoJICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB0cmFjaywKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIDogewoJICAgICAgICAgICAgICAgIHR5cGU6ICJMaW5lU3RyaW5nIiwKCSAgICAgICAgICAgICAgICBjb29yZGluYXRlczogdHJhY2tbMF0sCgkgICAgICAgICAgICB9LAoJICAgIH07Cgl9CgkvKioKCSAqIEV4dHJhY3QgYSBwb2ludCwgaWYgcG9zc2libGUsIGZyb20gYSBnaXZlbiBub2RlLAoJICogd2hpY2ggaXMgdXN1YWxseSBhIHdwdCBvciB0cmtwdAoJICovCglmdW5jdGlvbiBnZXRQb2ludChub2RlKSB7CgkgICAgY29uc3QgcHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oZXh0cmFjdFByb3BlcnRpZXMobm9kZSksIGdldE11bHRpKG5vZGUsIFsic3ltIl0pKTsKCSAgICBjb25zdCBwYWlyID0gY29vcmRQYWlyJDEobm9kZSk7CgkgICAgaWYgKCFwYWlyKQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICByZXR1cm4gewoJICAgICAgICB0eXBlOiAiRmVhdHVyZSIsCgkgICAgICAgIHByb3BlcnRpZXMsCgkgICAgICAgIGdlb21ldHJ5OiB7CgkgICAgICAgICAgICB0eXBlOiAiUG9pbnQiLAoJICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHBhaXIuY29vcmRpbmF0ZXMsCgkgICAgICAgIH0sCgkgICAgfTsKCX0KCS8qKgoJICogQ29udmVydCBHUFggdG8gR2VvSlNPTiBpbmNyZW1lbnRhbGx5LCByZXR1cm5pbmcKCSAqIGEgW0dlbmVyYXRvcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9JdGVyYXRvcnNfYW5kX0dlbmVyYXRvcnMpCgkgKiB0aGF0IHlpZWxkcyBvdXRwdXQgZmVhdHVyZSBieSBmZWF0dXJlLgoJICovCglmdW5jdGlvbiogZ3B4R2VuKG5vZGUpIHsKCSAgICBmb3IgKGNvbnN0IHRyYWNrIG9mICQobm9kZSwgInRyayIpKSB7CgkgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBnZXRUcmFjayh0cmFjayk7CgkgICAgICAgIGlmIChmZWF0dXJlKQoJICAgICAgICAgICAgeWllbGQgZmVhdHVyZTsKCSAgICB9CgkgICAgZm9yIChjb25zdCByb3V0ZSBvZiAkKG5vZGUsICJydGUiKSkgewoJICAgICAgICBjb25zdCBmZWF0dXJlID0gZ2V0Um91dGUocm91dGUpOwoJICAgICAgICBpZiAoZmVhdHVyZSkKCSAgICAgICAgICAgIHlpZWxkIGZlYXR1cmU7CgkgICAgfQoJICAgIGZvciAoY29uc3Qgd2F5cG9pbnQgb2YgJChub2RlLCAid3B0IikpIHsKCSAgICAgICAgY29uc3QgcG9pbnQgPSBnZXRQb2ludCh3YXlwb2ludCk7CgkgICAgICAgIGlmIChwb2ludCkKCSAgICAgICAgICAgIHlpZWxkIHBvaW50OwoJICAgIH0KCX0KCS8qKgoJICoKCSAqIENvbnZlcnQgYSBHUFggZG9jdW1lbnQgdG8gR2VvSlNPTi4gVGhlIGZpcnN0IGFyZ3VtZW50LCBgZG9jYCwgbXVzdCBiZSBhIEdQWAoJICogZG9jdW1lbnQgYXMgYW4gWE1MIERPTSAtIG5vdCBhcyBhIHN0cmluZy4gWW91IGNhbiBnZXQgdGhpcyB1c2luZyBqUXVlcnkncyBkZWZhdWx0CgkgKiBgLmFqYXhgIGZ1bmN0aW9uIG9yIHVzaW5nIGEgYmFyZSBYTUxIdHRwUmVxdWVzdCB3aXRoIHRoZSBgLnJlc3BvbnNlYCBwcm9wZXJ0eQoJICogaG9sZGluZyBhbiBYTUwgRE9NLgoJICoKCSAqIFRoZSBvdXRwdXQgaXMgYSBKYXZhU2NyaXB0IG9iamVjdCBvZiBHZW9KU09OIGRhdGEsIHNhbWUgYXMgYC5rbWxgIG91dHB1dHMsIHdpdGggdGhlCgkgKiBhZGRpdGlvbiBvZiBhIGBfZ3B4VHlwZWAgcHJvcGVydHkgb24gZWFjaCBgTGluZVN0cmluZ2AgZmVhdHVyZSB0aGF0IGluZGljYXRlcyB3aGV0aGVyCgkgKiB0aGUgZmVhdHVyZSB3YXMgZW5jb2RlZCBhcyBhIHJvdXRlIChgcnRlYCkgb3IgdHJhY2sgKGB0cmtgKSBpbiB0aGUgR1BYIGRvY3VtZW50LgoJICovCglmdW5jdGlvbiBncHgobm9kZSkgewoJICAgIHJldHVybiB7CgkgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCgkgICAgICAgIGZlYXR1cmVzOiBBcnJheS5mcm9tKGdweEdlbihub2RlKSksCgkgICAgfTsKCX0KCgljb25zdCBFWFRFTlNJT05TX05TID0gImh0dHA6Ly93d3cuZ2FybWluLmNvbS94bWxzY2hlbWFzL0FjdGl2aXR5RXh0ZW5zaW9uL3YyIjsKCWNvbnN0IFRSQUNLUE9JTlRfQVRUUklCVVRFUyA9IFsKCSAgICBbImhlYXJ0UmF0ZSIsICJoZWFydFJhdGVzIl0sCgkgICAgWyJDYWRlbmNlIiwgImNhZGVuY2VzIl0sCgkgICAgLy8gRXh0ZW5kZWQgVHJhY2twb2ludCBhdHRyaWJ1dGVzCgkgICAgWyJTcGVlZCIsICJzcGVlZHMiXSwKCSAgICBbIldhdHRzIiwgIndhdHRzIl0sCgldOwoJY29uc3QgTEFQX0FUVFJJQlVURVMgPSBbCgkgICAgWyJUb3RhbFRpbWVTZWNvbmRzIiwgInRvdGFsVGltZVNlY29uZHMiXSwKCSAgICBbIkRpc3RhbmNlTWV0ZXJzIiwgImRpc3RhbmNlTWV0ZXJzIl0sCgkgICAgWyJNYXhpbXVtU3BlZWQiLCAibWF4U3BlZWQiXSwKCSAgICBbIkF2ZXJhZ2VIZWFydFJhdGVCcG0iLCAiYXZnSGVhcnRSYXRlIl0sCgkgICAgWyJNYXhpbXVtSGVhcnRSYXRlQnBtIiwgIm1heEhlYXJ0UmF0ZSJdLAoJICAgIC8vIEV4dGVuZGVkIExhcCBhdHRyaWJ1dGVzCgkgICAgWyJBdmdTcGVlZCIsICJhdmdTcGVlZCJdLAoJICAgIFsiQXZnV2F0dHMiLCAiYXZnV2F0dHMiXSwKCSAgICBbIk1heFdhdHRzIiwgIm1heFdhdHRzIl0sCgldOwoJZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhub2RlLCBhdHRyaWJ1dGVOYW1lcykgewoJICAgIGNvbnN0IHByb3BlcnRpZXMgPSBbXTsKCSAgICBmb3IgKGNvbnN0IFt0YWcsIGFsaWFzXSBvZiBhdHRyaWJ1dGVOYW1lcykgewoJICAgICAgICBsZXQgZWxlbSA9IGdldDEobm9kZSwgdGFnKTsKCSAgICAgICAgaWYgKCFlbGVtKSB7CgkgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhFWFRFTlNJT05TX05TLCB0YWcpOwoJICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCkgewoJICAgICAgICAgICAgICAgIGVsZW0gPSBlbGVtZW50c1swXTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjb25zdCB2YWwgPSBwYXJzZUZsb2F0KG5vZGVWYWwoZWxlbSkpOwoJICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIHsKCSAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaChbYWxpYXMsIHZhbF0pOwoJICAgICAgICB9CgkgICAgfQoJICAgIHJldHVybiBwcm9wZXJ0aWVzOwoJfQoJZnVuY3Rpb24gY29vcmRQYWlyKG5vZGUpIHsKCSAgICBjb25zdCBsbCA9IFtudW0xKG5vZGUsICJMb25naXR1ZGVEZWdyZWVzIiksIG51bTEobm9kZSwgIkxhdGl0dWRlRGVncmVlcyIpXTsKCSAgICBpZiAobGxbMF0gPT09IHVuZGVmaW5lZCB8fAoJICAgICAgICBpc05hTihsbFswXSkgfHwKCSAgICAgICAgbGxbMV0gPT09IHVuZGVmaW5lZCB8fAoJICAgICAgICBpc05hTihsbFsxXSkpIHsKCSAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgfQoJICAgIGNvbnN0IGhlYXJ0UmF0ZSA9IGdldDEobm9kZSwgIkhlYXJ0UmF0ZUJwbSIpOwoJICAgIGNvbnN0IHRpbWUgPSBub2RlVmFsKGdldDEobm9kZSwgIlRpbWUiKSk7CgkgICAgZ2V0MShub2RlLCAiQWx0aXR1ZGVNZXRlcnMiLCAoYWx0KSA9PiB7CgkgICAgICAgIGNvbnN0IGEgPSBwYXJzZUZsb2F0KG5vZGVWYWwoYWx0KSk7CgkgICAgICAgIGlmICghaXNOYU4oYSkpIHsKCSAgICAgICAgICAgIGxsLnB1c2goYSk7CgkgICAgICAgIH0KCSAgICB9KTsKCSAgICByZXR1cm4gewoJICAgICAgICBjb29yZGluYXRlczogbGwsCgkgICAgICAgIHRpbWU6IHRpbWUgfHwgbnVsbCwKCSAgICAgICAgaGVhcnRSYXRlOiBoZWFydFJhdGUgPyBwYXJzZUZsb2F0KG5vZGVWYWwoaGVhcnRSYXRlKSkgOiBudWxsLAoJICAgICAgICBleHRlbnNpb25zOiBnZXRQcm9wZXJ0aWVzKG5vZGUsIFRSQUNLUE9JTlRfQVRUUklCVVRFUyksCgkgICAgfTsKCX0KCWZ1bmN0aW9uIGdldFBvaW50cyhub2RlKSB7CgkgICAgY29uc3QgcHRzID0gJChub2RlLCAiVHJhY2twb2ludCIpOwoJICAgIGNvbnN0IGxpbmUgPSBbXTsKCSAgICBjb25zdCB0aW1lcyA9IFtdOwoJICAgIGNvbnN0IGhlYXJ0UmF0ZXMgPSBbXTsKCSAgICBpZiAocHRzLmxlbmd0aCA8IDIpCgkgICAgICAgIHJldHVybiBudWxsOyAvLyBJbnZhbGlkIGxpbmUgaW4gR2VvSlNPTgoJICAgIGNvbnN0IGV4dGVuZGVkUHJvcGVydGllcyA9IHt9OwoJICAgIGNvbnN0IHJlc3VsdCA9IHsgZXh0ZW5kZWRQcm9wZXJ0aWVzIH07CgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgY29uc3QgYyA9IGNvb3JkUGFpcihwdHNbaV0pOwoJICAgICAgICBpZiAoYyA9PT0gbnVsbCkKCSAgICAgICAgICAgIGNvbnRpbnVlOwoJICAgICAgICBsaW5lLnB1c2goYy5jb29yZGluYXRlcyk7CgkgICAgICAgIGNvbnN0IHsgdGltZSwgaGVhcnRSYXRlLCBleHRlbnNpb25zIH0gPSBjOwoJICAgICAgICBpZiAodGltZSkKCSAgICAgICAgICAgIHRpbWVzLnB1c2godGltZSk7CgkgICAgICAgIGlmIChoZWFydFJhdGUpCgkgICAgICAgICAgICBoZWFydFJhdGVzLnB1c2goaGVhcnRSYXRlKTsKCSAgICAgICAgZm9yIChjb25zdCBbYWxpYXMsIHZhbHVlXSBvZiBleHRlbnNpb25zKSB7CgkgICAgICAgICAgICBpZiAoIWV4dGVuZGVkUHJvcGVydGllc1thbGlhc10pIHsKCSAgICAgICAgICAgICAgICBleHRlbmRlZFByb3BlcnRpZXNbYWxpYXNdID0gQXJyYXkocHRzLmxlbmd0aCkuZmlsbChudWxsKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGV4dGVuZGVkUHJvcGVydGllc1thbGlhc11baV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH0KCSAgICBpZiAobGluZS5sZW5ndGggPCAyKQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHsKCSAgICAgICAgbGluZTogbGluZSwKCSAgICAgICAgdGltZXM6IHRpbWVzLAoJICAgICAgICBoZWFydFJhdGVzOiBoZWFydFJhdGVzLAoJICAgIH0pOwoJfQoJZnVuY3Rpb24gZ2V0TGFwKG5vZGUpIHsKCSAgICBjb25zdCBzZWdtZW50cyA9ICQobm9kZSwgIlRyYWNrIik7CgkgICAgY29uc3QgdHJhY2sgPSBbXTsKCSAgICBjb25zdCB0aW1lcyA9IFtdOwoJICAgIGNvbnN0IGhlYXJ0UmF0ZXMgPSBbXTsKCSAgICBjb25zdCBhbGxFeHRlbmRlZFByb3BlcnRpZXMgPSBbXTsKCSAgICBsZXQgbGluZTsKCSAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuZnJvbUVudHJpZXMoZ2V0UHJvcGVydGllcyhub2RlLCBMQVBfQVRUUklCVVRFUykpLCBnZXQobm9kZSwgIk5hbWUiLCAobmFtZUVsZW1lbnQpID0+IHsKCSAgICAgICAgcmV0dXJuIHsgbmFtZTogbm9kZVZhbChuYW1lRWxlbWVudCkgfTsKCSAgICB9KSk7CgkgICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7CgkgICAgICAgIGxpbmUgPSBnZXRQb2ludHMoc2VnbWVudCk7CgkgICAgICAgIGlmIChsaW5lKSB7CgkgICAgICAgICAgICB0cmFjay5wdXNoKGxpbmUubGluZSk7CgkgICAgICAgICAgICBpZiAobGluZS50aW1lcy5sZW5ndGgpCgkgICAgICAgICAgICAgICAgdGltZXMucHVzaChsaW5lLnRpbWVzKTsKCSAgICAgICAgICAgIGlmIChsaW5lLmhlYXJ0UmF0ZXMubGVuZ3RoKQoJICAgICAgICAgICAgICAgIGhlYXJ0UmF0ZXMucHVzaChsaW5lLmhlYXJ0UmF0ZXMpOwoJICAgICAgICAgICAgYWxsRXh0ZW5kZWRQcm9wZXJ0aWVzLnB1c2gobGluZS5leHRlbmRlZFByb3BlcnRpZXMpOwoJICAgICAgICB9CgkgICAgfQoJICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRXh0ZW5kZWRQcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIGNvbnN0IGV4dGVuZGVkUHJvcGVydGllcyA9IGFsbEV4dGVuZGVkUHJvcGVydGllc1tpXTsKCSAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBleHRlbmRlZFByb3BlcnRpZXMpIHsKCSAgICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICAgICAgICBpZiAobGluZSkgewoJICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW3Byb3BlcnR5XSA9IGxpbmUuZXh0ZW5kZWRQcm9wZXJ0aWVzW3Byb3BlcnR5XTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICBpZiAoIXByb3BlcnRpZXNbcHJvcGVydHldKSB7CgkgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNbcHJvcGVydHldID0gdHJhY2subWFwKCh0cmFjaykgPT4gQXJyYXkodHJhY2subGVuZ3RoKS5maWxsKG51bGwpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcHJvcGVydGllc1twcm9wZXJ0eV1baV0gPSBleHRlbmRlZFByb3BlcnRpZXNbcHJvcGVydHldOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfQoJICAgIGlmICh0cmFjay5sZW5ndGggPT09IDApCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIGlmICh0aW1lcy5sZW5ndGggfHwgaGVhcnRSYXRlcy5sZW5ndGgpIHsKCSAgICAgICAgcHJvcGVydGllcy5jb29yZGluYXRlUHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24odGltZXMubGVuZ3RoCgkgICAgICAgICAgICA/IHsKCSAgICAgICAgICAgICAgICB0aW1lczogdHJhY2subGVuZ3RoID09PSAxID8gdGltZXNbMF0gOiB0aW1lcywKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIDoge30sIGhlYXJ0UmF0ZXMubGVuZ3RoCgkgICAgICAgICAgICA/IHsKCSAgICAgICAgICAgICAgICBoZWFydDogdHJhY2subGVuZ3RoID09PSAxID8gaGVhcnRSYXRlc1swXSA6IGhlYXJ0UmF0ZXMsCgkgICAgICAgICAgICB9CgkgICAgICAgICAgICA6IHt9KTsKCSAgICB9CgkgICAgcmV0dXJuIHsKCSAgICAgICAgdHlwZTogIkZlYXR1cmUiLAoJICAgICAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLAoJICAgICAgICBnZW9tZXRyeTogdHJhY2subGVuZ3RoID09PSAxCgkgICAgICAgICAgICA/IHsKCSAgICAgICAgICAgICAgICB0eXBlOiAiTGluZVN0cmluZyIsCgkgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRyYWNrWzBdLAoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgOiB7CgkgICAgICAgICAgICAgICAgdHlwZTogIk11bHRpTGluZVN0cmluZyIsCgkgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRyYWNrLAoJICAgICAgICAgICAgfSwKCSAgICB9OwoJfQoJLyoqCgkgKiBJbmNyZW1lbnRhbGx5IGNvbnZlcnQgYSBUQ1ggZG9jdW1lbnQgdG8gR2VvSlNPTi4gVGhlCgkgKiBmaXJzdCBhcmd1bWVudCwgYGRvY2AsIG11c3QgYmUgYSBUQ1gKCSAqIGRvY3VtZW50IGFzIGFuIFhNTCBET00gLSBub3QgYXMgYSBzdHJpbmcuCgkgKi8KCWZ1bmN0aW9uKiB0Y3hHZW4obm9kZSkgewoJICAgIGZvciAoY29uc3QgbGFwIG9mICQobm9kZSwgIkxhcCIpKSB7CgkgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBnZXRMYXAobGFwKTsKCSAgICAgICAgaWYgKGZlYXR1cmUpCgkgICAgICAgICAgICB5aWVsZCBmZWF0dXJlOwoJICAgIH0KCSAgICBmb3IgKGNvbnN0IGNvdXJzZSBvZiAkKG5vZGUsICJDb3Vyc2VzIikpIHsKCSAgICAgICAgY29uc3QgZmVhdHVyZSA9IGdldExhcChjb3Vyc2UpOwoJICAgICAgICBpZiAoZmVhdHVyZSkKCSAgICAgICAgICAgIHlpZWxkIGZlYXR1cmU7CgkgICAgfQoJfQoJLyoqCgkgKiBDb252ZXJ0IGEgVENYIGRvY3VtZW50IHRvIEdlb0pTT04uIFRoZSBmaXJzdCBhcmd1bWVudCwgYGRvY2AsIG11c3QgYmUgYSBUQ1gKCSAqIGRvY3VtZW50IGFzIGFuIFhNTCBET00gLSBub3QgYXMgYSBzdHJpbmcuCgkgKi8KCWZ1bmN0aW9uIHRjeChub2RlKSB7CgkgICAgcmV0dXJuIHsKCSAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKCSAgICAgICAgZmVhdHVyZXM6IEFycmF5LmZyb20odGN4R2VuKG5vZGUpKSwKCSAgICB9OwoJfQoKCWZ1bmN0aW9uIGZpeENvbG9yKHYsIHByZWZpeCkgewoJICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTsKCSAgICBjb25zdCBjb2xvclByb3AgPSBwcmVmaXggPT0gInN0cm9rZSIgfHwgcHJlZml4ID09PSAiZmlsbCIgPyBwcmVmaXggOiBwcmVmaXggKyAiLWNvbG9yIjsKCSAgICBpZiAodlswXSA9PT0gIiMiKSB7CgkgICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKCSAgICB9CgkgICAgaWYgKHYubGVuZ3RoID09PSA2IHx8IHYubGVuZ3RoID09PSAzKSB7CgkgICAgICAgIHByb3BlcnRpZXNbY29sb3JQcm9wXSA9ICIjIiArIHY7CgkgICAgfQoJICAgIGVsc2UgaWYgKHYubGVuZ3RoID09PSA4KSB7CgkgICAgICAgIHByb3BlcnRpZXNbcHJlZml4ICsgIi1vcGFjaXR5Il0gPSBwYXJzZUludCh2LnN1YnN0cmluZygwLCAyKSwgMTYpIC8gMjU1OwoJICAgICAgICBwcm9wZXJ0aWVzW2NvbG9yUHJvcF0gPQoJICAgICAgICAgICAgIiMiICsgdi5zdWJzdHJpbmcoNiwgOCkgKyB2LnN1YnN0cmluZyg0LCA2KSArIHYuc3Vic3RyaW5nKDIsIDQpOwoJICAgIH0KCSAgICByZXR1cm4gcHJvcGVydGllczsKCX0KCglmdW5jdGlvbiBudW1lcmljUHJvcGVydHkobm9kZSwgc291cmNlLCB0YXJnZXQpIHsKCSAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307CgkgICAgbnVtMShub2RlLCBzb3VyY2UsICh2YWwpID0+IHsKCSAgICAgICAgcHJvcGVydGllc1t0YXJnZXRdID0gdmFsOwoJICAgIH0pOwoJICAgIHJldHVybiBwcm9wZXJ0aWVzOwoJfQoJZnVuY3Rpb24gZ2V0Q29sb3Iobm9kZSwgb3V0cHV0KSB7CgkgICAgcmV0dXJuIGdldChub2RlLCAiY29sb3IiLCAoZWxlbSkgPT4gZml4Q29sb3Iobm9kZVZhbChlbGVtKSwgb3V0cHV0KSk7Cgl9CglmdW5jdGlvbiBleHRyYWN0SWNvbkhyZWYobm9kZSkgewoJICAgIHJldHVybiBnZXQobm9kZSwgIkljb24iLCAoaWNvbiwgcHJvcGVydGllcykgPT4gewoJICAgICAgICB2YWwxKGljb24sICJocmVmIiwgKGhyZWYpID0+IHsKCSAgICAgICAgICAgIHByb3BlcnRpZXMuaWNvbiA9IGhyZWY7CgkgICAgICAgIH0pOwoJICAgICAgICByZXR1cm4gcHJvcGVydGllczsKCSAgICB9KTsKCX0KCWZ1bmN0aW9uIGV4dHJhY3RJY29uKG5vZGUpIHsKCSAgICByZXR1cm4gZ2V0KG5vZGUsICJJY29uU3R5bGUiLCAoaWNvblN0eWxlKSA9PiB7CgkgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldENvbG9yKGljb25TdHlsZSwgImljb24iKSwgbnVtZXJpY1Byb3BlcnR5KGljb25TdHlsZSwgInNjYWxlIiwgImljb24tc2NhbGUiKSwgbnVtZXJpY1Byb3BlcnR5KGljb25TdHlsZSwgImhlYWRpbmciLCAiaWNvbi1oZWFkaW5nIiksIGdldChpY29uU3R5bGUsICJob3RTcG90IiwgKGhvdHNwb3QpID0+IHsKCSAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBwYXJzZUZsb2F0KGhvdHNwb3QuZ2V0QXR0cmlidXRlKCJ4IikgfHwgIiIpOwoJICAgICAgICAgICAgY29uc3QgdG9wID0gcGFyc2VGbG9hdChob3RzcG90LmdldEF0dHJpYnV0ZSgieSIpIHx8ICIiKTsKCSAgICAgICAgICAgIGNvbnN0IHh1bml0cyA9IGhvdHNwb3QuZ2V0QXR0cmlidXRlKCJ4dW5pdHMiKSB8fCAiIjsKCSAgICAgICAgICAgIGNvbnN0IHl1bml0cyA9IGhvdHNwb3QuZ2V0QXR0cmlidXRlKCJ5dW5pdHMiKSB8fCAiIjsKCSAgICAgICAgICAgIGlmICghaXNOYU4obGVmdCkgJiYgIWlzTmFOKHRvcCkpCgkgICAgICAgICAgICAgICAgcmV0dXJuIHsKCSAgICAgICAgICAgICAgICAgICAgImljb24tb2Zmc2V0IjogW2xlZnQsIHRvcF0sCgkgICAgICAgICAgICAgICAgICAgICJpY29uLW9mZnNldC11bml0cyI6IFt4dW5pdHMsIHl1bml0c10sCgkgICAgICAgICAgICAgICAgfTsKCSAgICAgICAgICAgIHJldHVybiB7fTsKCSAgICAgICAgfSksIGV4dHJhY3RJY29uSHJlZihpY29uU3R5bGUpKTsKCSAgICB9KTsKCX0KCWZ1bmN0aW9uIGV4dHJhY3RMYWJlbChub2RlKSB7CgkgICAgcmV0dXJuIGdldChub2RlLCAiTGFiZWxTdHlsZSIsIChsYWJlbFN0eWxlKSA9PiB7CgkgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldENvbG9yKGxhYmVsU3R5bGUsICJsYWJlbCIpLCBudW1lcmljUHJvcGVydHkobGFiZWxTdHlsZSwgInNjYWxlIiwgImxhYmVsLXNjYWxlIikpOwoJICAgIH0pOwoJfQoJZnVuY3Rpb24gZXh0cmFjdExpbmUobm9kZSkgewoJICAgIHJldHVybiBnZXQobm9kZSwgIkxpbmVTdHlsZSIsIChsaW5lU3R5bGUpID0+IHsKCSAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZ2V0Q29sb3IobGluZVN0eWxlLCAic3Ryb2tlIiksIG51bWVyaWNQcm9wZXJ0eShsaW5lU3R5bGUsICJ3aWR0aCIsICJzdHJva2Utd2lkdGgiKSk7CgkgICAgfSk7Cgl9CglmdW5jdGlvbiBleHRyYWN0UG9seShub2RlKSB7CgkgICAgcmV0dXJuIGdldChub2RlLCAiUG9seVN0eWxlIiwgKHBvbHlTdHlsZSwgcHJvcGVydGllcykgPT4gewoJICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wZXJ0aWVzLCBnZXQocG9seVN0eWxlLCAiY29sb3IiLCAoZWxlbSkgPT4gZml4Q29sb3Iobm9kZVZhbChlbGVtKSwgImZpbGwiKSksIHZhbDEocG9seVN0eWxlLCAiZmlsbCIsIChmaWxsKSA9PiB7CgkgICAgICAgICAgICBpZiAoZmlsbCA9PT0gIjAiKQoJICAgICAgICAgICAgICAgIHJldHVybiB7ICJmaWxsLW9wYWNpdHkiOiAwIH07CgkgICAgICAgIH0pLCB2YWwxKHBvbHlTdHlsZSwgIm91dGxpbmUiLCAob3V0bGluZSkgPT4gewoJICAgICAgICAgICAgaWYgKG91dGxpbmUgPT09ICIwIikKCSAgICAgICAgICAgICAgICByZXR1cm4geyAic3Ryb2tlLW9wYWNpdHkiOiAwIH07CgkgICAgICAgIH0pKTsKCSAgICB9KTsKCX0KCWZ1bmN0aW9uIGV4dHJhY3RTdHlsZShub2RlKSB7CgkgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGV4dHJhY3RQb2x5KG5vZGUpLCBleHRyYWN0TGluZShub2RlKSwgZXh0cmFjdExhYmVsKG5vZGUpLCBleHRyYWN0SWNvbihub2RlKSk7Cgl9CgoJY29uc3QgdG9OdW1iZXIgPSAoeCkgPT4gTnVtYmVyKHgpOwoJY29uc3QgdHlwZUNvbnZlcnRlcnMgPSB7CgkgICAgc3RyaW5nOiAoeCkgPT4geCwKCSAgICBpbnQ6IHRvTnVtYmVyLAoJICAgIHVpbnQ6IHRvTnVtYmVyLAoJICAgIHNob3J0OiB0b051bWJlciwKCSAgICB1c2hvcnQ6IHRvTnVtYmVyLAoJICAgIGZsb2F0OiB0b051bWJlciwKCSAgICBkb3VibGU6IHRvTnVtYmVyLAoJICAgIGJvb2w6ICh4KSA9PiBCb29sZWFuKHgpLAoJfTsKCWZ1bmN0aW9uIGV4dHJhY3RFeHRlbmRlZERhdGEobm9kZSwgc2NoZW1hKSB7CgkgICAgcmV0dXJuIGdldChub2RlLCAiRXh0ZW5kZWREYXRhIiwgKGV4dGVuZGVkRGF0YSwgcHJvcGVydGllcykgPT4gewoJICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgJChleHRlbmRlZERhdGEsICJEYXRhIikpIHsKCSAgICAgICAgICAgIHByb3BlcnRpZXNbZGF0YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSB8fCAiIl0gPSBub2RlVmFsKGdldDEoZGF0YSwgInZhbHVlIikpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAoY29uc3Qgc2ltcGxlRGF0YSBvZiAkKGV4dGVuZGVkRGF0YSwgIlNpbXBsZURhdGEiKSkgewoJICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNpbXBsZURhdGEuZ2V0QXR0cmlidXRlKCJuYW1lIikgfHwgIiI7CgkgICAgICAgICAgICBjb25zdCB0eXBlQ29udmVydGVyID0gc2NoZW1hW25hbWVdIHx8IHR5cGVDb252ZXJ0ZXJzLnN0cmluZzsKCSAgICAgICAgICAgIHByb3BlcnRpZXNbbmFtZV0gPSB0eXBlQ29udmVydGVyKG5vZGVWYWwoc2ltcGxlRGF0YSkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzOwoJICAgIH0pOwoJfQoJZnVuY3Rpb24gZ2V0TWF5YmVIVE1MRGVzY3JpcHRpb24obm9kZSkgewoJICAgIGNvbnN0IGRlc2NyaXB0aW9uTm9kZSA9IGdldDEobm9kZSwgImRlc2NyaXB0aW9uIik7CgkgICAgZm9yIChjb25zdCBjIG9mIEFycmF5LmZyb20oZGVzY3JpcHRpb25Ob2RlPy5jaGlsZE5vZGVzIHx8IFtdKSkgewoJICAgICAgICBpZiAoYy5ub2RlVHlwZSA9PT0gNCkgewoJICAgICAgICAgICAgcmV0dXJuIHsKCSAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogewoJICAgICAgICAgICAgICAgICAgICAiQHR5cGUiOiAiaHRtbCIsCgkgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlVmFsKGMpLAoJICAgICAgICAgICAgICAgIH0sCgkgICAgICAgICAgICB9OwoJICAgICAgICB9CgkgICAgfQoJICAgIHJldHVybiB7fTsKCX0KCWZ1bmN0aW9uIGV4dHJhY3RUaW1lU3Bhbihub2RlKSB7CgkgICAgcmV0dXJuIGdldChub2RlLCAiVGltZVNwYW4iLCAodGltZVNwYW4pID0+IHsKCSAgICAgICAgcmV0dXJuIHsKCSAgICAgICAgICAgIHRpbWVzcGFuOiB7CgkgICAgICAgICAgICAgICAgYmVnaW46IG5vZGVWYWwoZ2V0MSh0aW1lU3BhbiwgImJlZ2luIikpLAoJICAgICAgICAgICAgICAgIGVuZDogbm9kZVZhbChnZXQxKHRpbWVTcGFuLCAiZW5kIikpLAoJICAgICAgICAgICAgfSwKCSAgICAgICAgfTsKCSAgICB9KTsKCX0KCWZ1bmN0aW9uIGV4dHJhY3RUaW1lU3RhbXAobm9kZSkgewoJICAgIHJldHVybiBnZXQobm9kZSwgIlRpbWVTdGFtcCIsICh0aW1lU3RhbXApID0+IHsKCSAgICAgICAgcmV0dXJuIHsgdGltZXN0YW1wOiBub2RlVmFsKGdldDEodGltZVN0YW1wLCAid2hlbiIpKSB9OwoJICAgIH0pOwoJfQoJZnVuY3Rpb24gZXh0cmFjdENhc2NhZGVkU3R5bGUobm9kZSwgc3R5bGVNYXApIHsKCSAgICByZXR1cm4gdmFsMShub2RlLCAic3R5bGVVcmwiLCAoc3R5bGVVcmwpID0+IHsKCSAgICAgICAgc3R5bGVVcmwgPSBub3JtYWxpemVJZChzdHlsZVVybCk7CgkgICAgICAgIGlmIChzdHlsZU1hcFtzdHlsZVVybF0pIHsKCSAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgc3R5bGVVcmwgfSwgc3R5bGVNYXBbc3R5bGVVcmxdKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBGb3IgYmFja3dhcmQtY29tcGF0aWJpbGl0eS4gU2hvdWxkIHdlIHN0aWxsIGluY2x1ZGUKCSAgICAgICAgLy8gc3R5bGVVcmwgZXZlbiBpZiBpdCdzIG5vdCByZXNvbHZlZD8KCSAgICAgICAgcmV0dXJuIHsgc3R5bGVVcmwgfTsKCSAgICB9KTsKCX0KCgljb25zdCByZW1vdmVTcGFjZSA9IC9ccyovZzsKCWNvbnN0IHRyaW1TcGFjZSA9IC9eXHMqfFxzKiQvZzsKCWNvbnN0IHNwbGl0U3BhY2UgPSAvXHMrLzsKCS8qKgoJICogR2V0IG9uZSBjb29yZGluYXRlIGZyb20gYSBjb29yZGluYXRlIGFycmF5LCBpZiBhbnkKCSAqLwoJZnVuY3Rpb24gY29vcmQxKHZhbHVlKSB7CgkgICAgcmV0dXJuIHZhbHVlCgkgICAgICAgIC5yZXBsYWNlKHJlbW92ZVNwYWNlLCAiIikKCSAgICAgICAgLnNwbGl0KCIsIikKCSAgICAgICAgLm1hcChwYXJzZUZsb2F0KQoJICAgICAgICAuZmlsdGVyKChudW0pID0+ICFpc05hTihudW0pKQoJICAgICAgICAuc2xpY2UoMCwgMyk7Cgl9CgkvKioKCSAqIEdldCBhbGwgY29vcmRpbmF0ZXMgZnJvbSBhIGNvb3JkaW5hdGUgYXJyYXkgYXMgW1tdLFtdXQoJICovCglmdW5jdGlvbiBjb29yZCh2YWx1ZSkgewoJICAgIHJldHVybiB2YWx1ZQoJICAgICAgICAucmVwbGFjZSh0cmltU3BhY2UsICIiKQoJICAgICAgICAuc3BsaXQoc3BsaXRTcGFjZSkKCSAgICAgICAgLm1hcChjb29yZDEpCgkgICAgICAgIC5maWx0ZXIoKGNvb3JkKSA9PiB7CgkgICAgICAgIHJldHVybiBjb29yZC5sZW5ndGggPj0gMjsKCSAgICB9KTsKCX0KCWZ1bmN0aW9uIGd4Q29vcmRzKG5vZGUpIHsKCSAgICBsZXQgZWxlbXMgPSAkKG5vZGUsICJjb29yZCIpOwoJICAgIGlmIChlbGVtcy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgZWxlbXMgPSAkbnMobm9kZSwgImNvb3JkIiwgIioiKTsKCSAgICB9CgkgICAgY29uc3QgY29vcmRpbmF0ZXMgPSBlbGVtcy5tYXAoKGVsZW0pID0+IHsKCSAgICAgICAgcmV0dXJuIG5vZGVWYWwoZWxlbSkuc3BsaXQoIiAiKS5tYXAocGFyc2VGbG9hdCk7CgkgICAgfSk7CgkgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkgewoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9CgkgICAgcmV0dXJuIHsKCSAgICAgICAgZ2VvbWV0cnk6IGNvb3JkaW5hdGVzLmxlbmd0aCA+IDIKCSAgICAgICAgICAgID8gewoJICAgICAgICAgICAgICAgIHR5cGU6ICJMaW5lU3RyaW5nIiwKCSAgICAgICAgICAgICAgICBjb29yZGluYXRlcywKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIDogewoJICAgICAgICAgICAgICAgIHR5cGU6ICJQb2ludCIsCgkgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzWzBdLAoJICAgICAgICAgICAgfSwKCSAgICAgICAgdGltZXM6ICQobm9kZSwgIndoZW4iKS5tYXAoKGVsZW0pID0+IG5vZGVWYWwoZWxlbSkpLAoJICAgIH07Cgl9CglmdW5jdGlvbiBmaXhSaW5nKHJpbmcpIHsKCSAgICBpZiAocmluZy5sZW5ndGggPT09IDApCgkgICAgICAgIHJldHVybiByaW5nOwoJICAgIGNvbnN0IGZpcnN0ID0gcmluZ1swXTsKCSAgICBjb25zdCBsYXN0ID0gcmluZ1tyaW5nLmxlbmd0aCAtIDFdOwoJICAgIGxldCBlcXVhbCA9IHRydWU7CgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChmaXJzdC5sZW5ndGgsIGxhc3QubGVuZ3RoKTsgaSsrKSB7CgkgICAgICAgIGlmIChmaXJzdFtpXSAhPT0gbGFzdFtpXSkgewoJICAgICAgICAgICAgZXF1YWwgPSBmYWxzZTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICB9CgkgICAgfQoJICAgIGlmICghZXF1YWwpIHsKCSAgICAgICAgcmV0dXJuIHJpbmcuY29uY2F0KFtyaW5nWzBdXSk7CgkgICAgfQoJICAgIHJldHVybiByaW5nOwoJfQoJZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMobm9kZSkgewoJICAgIHJldHVybiBub2RlVmFsKGdldDEobm9kZSwgImNvb3JkaW5hdGVzIikpOwoJfQoJZnVuY3Rpb24gZ2V0R2VvbWV0cnkobm9kZSkgewoJICAgIGxldCBnZW9tZXRyaWVzID0gW107CgkgICAgbGV0IGNvb3JkVGltZXMgPSBbXTsKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewoJICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGROb2Rlcy5pdGVtKGkpOwoJICAgICAgICBpZiAoaXNFbGVtZW50KGNoaWxkKSkgewoJICAgICAgICAgICAgc3dpdGNoIChjaGlsZC50YWdOYW1lKSB7CgkgICAgICAgICAgICAgICAgY2FzZSAiTXVsdGlHZW9tZXRyeSI6CgkgICAgICAgICAgICAgICAgY2FzZSAiTXVsdGlUcmFjayI6CgkgICAgICAgICAgICAgICAgY2FzZSAiZ3g6TXVsdGlUcmFjayI6IHsKCSAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRHZW9tZXRyaWVzID0gZ2V0R2VvbWV0cnkoY2hpbGQpOwoJICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzID0gZ2VvbWV0cmllcy5jb25jYXQoY2hpbGRHZW9tZXRyaWVzLmdlb21ldHJpZXMpOwoJICAgICAgICAgICAgICAgICAgICBjb29yZFRpbWVzID0gY29vcmRUaW1lcy5jb25jYXQoY2hpbGRHZW9tZXRyaWVzLmNvb3JkVGltZXMpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgY2FzZSAiUG9pbnQiOiB7CgkgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gY29vcmQxKGdldENvb3JkaW5hdGVzKGNoaWxkKSk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPj0gMikgewoJICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cmllcy5wdXNoKHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiUG9pbnQiLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzLAoJICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhc2UgIkxpbmVhclJpbmciOgoJICAgICAgICAgICAgICAgIGNhc2UgIkxpbmVTdHJpbmciOiB7CgkgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gY29vcmQoZ2V0Q29vcmRpbmF0ZXMoY2hpbGQpKTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+PSAyKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzLnB1c2goewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJMaW5lU3RyaW5nIiwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcywKCSAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBjYXNlICJQb2x5Z29uIjogewoJICAgICAgICAgICAgICAgICAgICBjb25zdCBjb29yZHMgPSBbXTsKCSAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lYXJSaW5nIG9mICQoY2hpbGQsICJMaW5lYXJSaW5nIikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpbmcgPSBmaXhSaW5nKGNvb3JkKGdldENvb3JkaW5hdGVzKGxpbmVhclJpbmcpKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmluZy5sZW5ndGggPj0gNCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy5wdXNoKHJpbmcpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmIChjb29yZHMubGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzLnB1c2goewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQb2x5Z29uIiwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogY29vcmRzLAoJICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhc2UgIlRyYWNrIjoKCSAgICAgICAgICAgICAgICBjYXNlICJneDpUcmFjayI6IHsKCSAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3ggPSBneENvb3JkcyhjaGlsZCk7CgkgICAgICAgICAgICAgICAgICAgIGlmICghZ3gpCgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0aW1lcywgZ2VvbWV0cnkgfSA9IGd4OwoJICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzLnB1c2goZ2VvbWV0cnkpOwoJICAgICAgICAgICAgICAgICAgICBpZiAodGltZXMubGVuZ3RoKQoJICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRUaW1lcy5wdXNoKHRpbWVzKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfQoJICAgIHJldHVybiB7CgkgICAgICAgIGdlb21ldHJpZXMsCgkgICAgICAgIGNvb3JkVGltZXMsCgkgICAgfTsKCX0KCglmdW5jdGlvbiBnZW9tZXRyeUxpc3RUb0dlb21ldHJ5KGdlb21ldHJpZXMpIHsKCSAgICByZXR1cm4gZ2VvbWV0cmllcy5sZW5ndGggPT09IDAKCSAgICAgICAgPyBudWxsCgkgICAgICAgIDogZ2VvbWV0cmllcy5sZW5ndGggPT09IDEKCSAgICAgICAgICAgID8gZ2VvbWV0cmllc1swXQoJICAgICAgICAgICAgOiB7CgkgICAgICAgICAgICAgICAgdHlwZTogIkdlb21ldHJ5Q29sbGVjdGlvbiIsCgkgICAgICAgICAgICAgICAgZ2VvbWV0cmllcywKCSAgICAgICAgICAgIH07Cgl9CglmdW5jdGlvbiBnZXRQbGFjZW1hcmsobm9kZSwgc3R5bGVNYXAsIHNjaGVtYSwgb3B0aW9ucykgewoJICAgIGNvbnN0IHsgY29vcmRUaW1lcywgZ2VvbWV0cmllcyB9ID0gZ2V0R2VvbWV0cnkobm9kZSk7CgkgICAgY29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyeUxpc3RUb0dlb21ldHJ5KGdlb21ldHJpZXMpOwoJICAgIGlmICghZ2VvbWV0cnkgJiYgb3B0aW9ucy5za2lwTnVsbEdlb21ldHJ5KSB7CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH0KCSAgICBjb25zdCBmZWF0dXJlID0gewoJICAgICAgICB0eXBlOiAiRmVhdHVyZSIsCgkgICAgICAgIGdlb21ldHJ5LAoJICAgICAgICBwcm9wZXJ0aWVzOiBPYmplY3QuYXNzaWduKGdldE11bHRpKG5vZGUsIFsKCSAgICAgICAgICAgICJuYW1lIiwKCSAgICAgICAgICAgICJhZGRyZXNzIiwKCSAgICAgICAgICAgICJ2aXNpYmlsaXR5IiwKCSAgICAgICAgICAgICJvcGVuIiwKCSAgICAgICAgICAgICJwaG9uZU51bWJlciIsCgkgICAgICAgICAgICAiZGVzY3JpcHRpb24iLAoJICAgICAgICBdKSwgZ2V0TWF5YmVIVE1MRGVzY3JpcHRpb24obm9kZSksIGV4dHJhY3RDYXNjYWRlZFN0eWxlKG5vZGUsIHN0eWxlTWFwKSwgZXh0cmFjdFN0eWxlKG5vZGUpLCBleHRyYWN0RXh0ZW5kZWREYXRhKG5vZGUsIHNjaGVtYSksIGV4dHJhY3RUaW1lU3Bhbihub2RlKSwgZXh0cmFjdFRpbWVTdGFtcChub2RlKSwgY29vcmRUaW1lcy5sZW5ndGgKCSAgICAgICAgICAgID8gewoJICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVQcm9wZXJ0aWVzOiB7CgkgICAgICAgICAgICAgICAgICAgIHRpbWVzOiBjb29yZFRpbWVzLmxlbmd0aCA9PT0gMSA/IGNvb3JkVGltZXNbMF0gOiBjb29yZFRpbWVzLAoJICAgICAgICAgICAgICAgIH0sCgkgICAgICAgICAgICB9CgkgICAgICAgICAgICA6IHt9KSwKCSAgICB9OwoJICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXM/LnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMudmlzaWJpbGl0eSA9IGZlYXR1cmUucHJvcGVydGllcy52aXNpYmlsaXR5ICE9PSAiMCI7CgkgICAgfQoJICAgIGNvbnN0IGlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoImlkIik7CgkgICAgaWYgKGlkICE9PSBudWxsICYmIGlkICE9PSAiIikKCSAgICAgICAgZmVhdHVyZS5pZCA9IGlkOwoJICAgIHJldHVybiBmZWF0dXJlOwoJfQoKCWZ1bmN0aW9uIGdldEdyb3VuZE92ZXJsYXlCb3gobm9kZSkgewoJICAgIGNvbnN0IGxhdExvblF1YWQgPSBnZXQxKG5vZGUsICJneDpMYXRMb25RdWFkIik7CgkgICAgaWYgKGxhdExvblF1YWQpIHsKCSAgICAgICAgY29uc3QgcmluZyA9IGZpeFJpbmcoY29vcmQoZ2V0Q29vcmRpbmF0ZXMobm9kZSkpKTsKCSAgICAgICAgcmV0dXJuIHsKCSAgICAgICAgICAgIGdlb21ldHJ5OiB7CgkgICAgICAgICAgICAgICAgdHlwZTogIlBvbHlnb24iLAoJICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbcmluZ10sCgkgICAgICAgICAgICB9LAoJICAgICAgICB9OwoJICAgIH0KCSAgICByZXR1cm4gZ2V0TGF0TG9uQm94KG5vZGUpOwoJfQoJY29uc3QgREVHUkVFU19UT19SQURJQU5TID0gTWF0aC5QSSAvIDE4MDsKCWZ1bmN0aW9uIHJvdGF0ZUJveChiYm94LCBjb29yZGluYXRlcywgcm90YXRpb24pIHsKCSAgICBjb25zdCBjZW50ZXIgPSBbKGJib3hbMF0gKyBiYm94WzJdKSAvIDIsIChiYm94WzFdICsgYmJveFszXSkgLyAyXTsKCSAgICByZXR1cm4gWwoJICAgICAgICBjb29yZGluYXRlc1swXS5tYXAoKGNvb3JkaW5hdGUpID0+IHsKCSAgICAgICAgICAgIGNvbnN0IGR5ID0gY29vcmRpbmF0ZVsxXSAtIGNlbnRlclsxXTsKCSAgICAgICAgICAgIGNvbnN0IGR4ID0gY29vcmRpbmF0ZVswXSAtIGNlbnRlclswXTsKCSAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KGR5LCAyKSArIE1hdGgucG93KGR4LCAyKSk7CgkgICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoZHksIGR4KSArIHJvdGF0aW9uICogREVHUkVFU19UT19SQURJQU5TOwoJICAgICAgICAgICAgcmV0dXJuIFsKCSAgICAgICAgICAgICAgICBjZW50ZXJbMF0gKyBNYXRoLmNvcyhhbmdsZSkgKiBkaXN0YW5jZSwKCSAgICAgICAgICAgICAgICBjZW50ZXJbMV0gKyBNYXRoLnNpbihhbmdsZSkgKiBkaXN0YW5jZSwKCSAgICAgICAgICAgIF07CgkgICAgICAgIH0pLAoJICAgIF07Cgl9CglmdW5jdGlvbiBnZXRMYXRMb25Cb3gobm9kZSkgewoJICAgIGNvbnN0IGxhdExvbkJveCA9IGdldDEobm9kZSwgIkxhdExvbkJveCIpOwoJICAgIGlmIChsYXRMb25Cb3gpIHsKCSAgICAgICAgY29uc3Qgbm9ydGggPSBudW0xKGxhdExvbkJveCwgIm5vcnRoIik7CgkgICAgICAgIGNvbnN0IHdlc3QgPSBudW0xKGxhdExvbkJveCwgIndlc3QiKTsKCSAgICAgICAgY29uc3QgZWFzdCA9IG51bTEobGF0TG9uQm94LCAiZWFzdCIpOwoJICAgICAgICBjb25zdCBzb3V0aCA9IG51bTEobGF0TG9uQm94LCAic291dGgiKTsKCSAgICAgICAgY29uc3Qgcm90YXRpb24gPSBudW0xKGxhdExvbkJveCwgInJvdGF0aW9uIik7CgkgICAgICAgIGlmICh0eXBlb2Ygbm9ydGggPT09ICJudW1iZXIiICYmCgkgICAgICAgICAgICB0eXBlb2Ygc291dGggPT09ICJudW1iZXIiICYmCgkgICAgICAgICAgICB0eXBlb2Ygd2VzdCA9PT0gIm51bWJlciIgJiYKCSAgICAgICAgICAgIHR5cGVvZiBlYXN0ID09PSAibnVtYmVyIikgewoJICAgICAgICAgICAgY29uc3QgYmJveCA9IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdOwoJICAgICAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gWwoJICAgICAgICAgICAgICAgIFsKCSAgICAgICAgICAgICAgICAgICAgW3dlc3QsIG5vcnRoXSwKCSAgICAgICAgICAgICAgICAgICAgW2Vhc3QsIG5vcnRoXSwKCSAgICAgICAgICAgICAgICAgICAgW2Vhc3QsIHNvdXRoXSwKCSAgICAgICAgICAgICAgICAgICAgW3dlc3QsIHNvdXRoXSwKCSAgICAgICAgICAgICAgICAgICAgW3dlc3QsIG5vcnRoXSwgLy8gdG9wIGxlZnQgKGFnYWluKQoJICAgICAgICAgICAgICAgIF0sCgkgICAgICAgICAgICBdOwoJICAgICAgICAgICAgaWYgKHR5cGVvZiByb3RhdGlvbiA9PT0gIm51bWJlciIpIHsKCSAgICAgICAgICAgICAgICBjb29yZGluYXRlcyA9IHJvdGF0ZUJveChiYm94LCBjb29yZGluYXRlcywgcm90YXRpb24pOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIHsKCSAgICAgICAgICAgICAgICBiYm94LAoJICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB7CgkgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQb2x5Z29uIiwKCSAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMsCgkgICAgICAgICAgICAgICAgfSwKCSAgICAgICAgICAgIH07CgkgICAgICAgIH0KCSAgICB9CgkgICAgcmV0dXJuIG51bGw7Cgl9CglmdW5jdGlvbiBnZXRHcm91bmRPdmVybGF5KG5vZGUsIHN0eWxlTWFwLCBzY2hlbWEsIG9wdGlvbnMpIHsKCSAgICBjb25zdCBib3ggPSBnZXRHcm91bmRPdmVybGF5Qm94KG5vZGUpOwoJICAgIGNvbnN0IGdlb21ldHJ5ID0gYm94Py5nZW9tZXRyeSB8fCBudWxsOwoJICAgIGlmICghZ2VvbWV0cnkgJiYgb3B0aW9ucy5za2lwTnVsbEdlb21ldHJ5KSB7CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH0KCSAgICBjb25zdCBmZWF0dXJlID0gewoJICAgICAgICB0eXBlOiAiRmVhdHVyZSIsCgkgICAgICAgIGdlb21ldHJ5LAoJICAgICAgICBwcm9wZXJ0aWVzOiBPYmplY3QuYXNzaWduKAoJICAgICAgICAvKioKCSAgICAgICAgICogUmVsYXRlZCB0bwoJICAgICAgICAgKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS90bWN3LzAzN2ExY2I2NjYwZDc0YTM5MmU5ZGE3NDQ2NTQwZjQ2CgkgICAgICAgICAqLwoJICAgICAgICB7ICJAZ2VvbWV0cnktdHlwZSI6ICJncm91bmRvdmVybGF5IiB9LCBnZXRNdWx0aShub2RlLCBbCgkgICAgICAgICAgICAibmFtZSIsCgkgICAgICAgICAgICAiYWRkcmVzcyIsCgkgICAgICAgICAgICAidmlzaWJpbGl0eSIsCgkgICAgICAgICAgICAib3BlbiIsCgkgICAgICAgICAgICAicGhvbmVOdW1iZXIiLAoJICAgICAgICAgICAgImRlc2NyaXB0aW9uIiwKCSAgICAgICAgXSksIGdldE1heWJlSFRNTERlc2NyaXB0aW9uKG5vZGUpLCBleHRyYWN0Q2FzY2FkZWRTdHlsZShub2RlLCBzdHlsZU1hcCksIGV4dHJhY3RTdHlsZShub2RlKSwgZXh0cmFjdEljb25IcmVmKG5vZGUpLCBleHRyYWN0RXh0ZW5kZWREYXRhKG5vZGUsIHNjaGVtYSksIGV4dHJhY3RUaW1lU3Bhbihub2RlKSwgZXh0cmFjdFRpbWVTdGFtcChub2RlKSksCgkgICAgfTsKCSAgICBpZiAoYm94Py5iYm94KSB7CgkgICAgICAgIGZlYXR1cmUuYmJveCA9IGJveC5iYm94OwoJICAgIH0KCSAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzPy52aXNpYmlsaXR5ICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzLnZpc2liaWxpdHkgPSBmZWF0dXJlLnByb3BlcnRpZXMudmlzaWJpbGl0eSAhPT0gIjAiOwoJICAgIH0KCSAgICBjb25zdCBpZCA9IG5vZGUuZ2V0QXR0cmlidXRlKCJpZCIpOwoJICAgIGlmIChpZCAhPT0gbnVsbCAmJiBpZCAhPT0gIiIpCgkgICAgICAgIGZlYXR1cmUuaWQgPSBpZDsKCSAgICByZXR1cm4gZmVhdHVyZTsKCX0KCglmdW5jdGlvbiBnZXRTdHlsZUlkKHN0eWxlKSB7CgkgICAgbGV0IGlkID0gc3R5bGUuZ2V0QXR0cmlidXRlKCJpZCIpOwoJICAgIGNvbnN0IHBhcmVudE5vZGUgPSBzdHlsZS5wYXJlbnROb2RlOwoJICAgIGlmICghaWQgJiYKCSAgICAgICAgaXNFbGVtZW50KHBhcmVudE5vZGUpICYmCgkgICAgICAgIHBhcmVudE5vZGUubG9jYWxOYW1lID09PSAiQ2FzY2FkaW5nU3R5bGUiKSB7CgkgICAgICAgIGlkID0gcGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoImttbDppZCIpIHx8IHBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJpZCIpOwoJICAgIH0KCSAgICByZXR1cm4gbm9ybWFsaXplSWQoaWQgfHwgIiIpOwoJfQoJZnVuY3Rpb24gYnVpbGRTdHlsZU1hcChub2RlKSB7CgkgICAgY29uc3Qgc3R5bGVNYXAgPSB7fTsKCSAgICBmb3IgKGNvbnN0IHN0eWxlIG9mICQobm9kZSwgIlN0eWxlIikpIHsKCSAgICAgICAgc3R5bGVNYXBbZ2V0U3R5bGVJZChzdHlsZSldID0gZXh0cmFjdFN0eWxlKHN0eWxlKTsKCSAgICB9CgkgICAgZm9yIChjb25zdCBtYXAgb2YgJChub2RlLCAiU3R5bGVNYXAiKSkgewoJICAgICAgICBjb25zdCBpZCA9IG5vcm1hbGl6ZUlkKG1hcC5nZXRBdHRyaWJ1dGUoImlkIikgfHwgIiIpOwoJICAgICAgICB2YWwxKG1hcCwgInN0eWxlVXJsIiwgKHN0eWxlVXJsKSA9PiB7CgkgICAgICAgICAgICBzdHlsZVVybCA9IG5vcm1hbGl6ZUlkKHN0eWxlVXJsKTsKCSAgICAgICAgICAgIGlmIChzdHlsZU1hcFtzdHlsZVVybF0pIHsKCSAgICAgICAgICAgICAgICBzdHlsZU1hcFtpZF0gPSBzdHlsZU1hcFtzdHlsZVVybF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgIH0KCSAgICByZXR1cm4gc3R5bGVNYXA7Cgl9CglmdW5jdGlvbiBidWlsZFNjaGVtYShub2RlKSB7CgkgICAgY29uc3Qgc2NoZW1hID0ge307CgkgICAgZm9yIChjb25zdCBmaWVsZCBvZiAkKG5vZGUsICJTaW1wbGVGaWVsZCIpKSB7CgkgICAgICAgIHNjaGVtYVtmaWVsZC5nZXRBdHRyaWJ1dGUoIm5hbWUiKSB8fCAiIl0gPQoJICAgICAgICAgICAgdHlwZUNvbnZlcnRlcnNbZmllbGQuZ2V0QXR0cmlidXRlKCJ0eXBlIikgfHwgIiJdIHx8CgkgICAgICAgICAgICAgICAgdHlwZUNvbnZlcnRlcnNbInN0cmluZyJdOwoJICAgIH0KCSAgICByZXR1cm4gc2NoZW1hOwoJfQoJY29uc3QgRk9MREVSX1BST1BTID0gWwoJICAgICJuYW1lIiwKCSAgICAidmlzaWJpbGl0eSIsCgkgICAgIm9wZW4iLAoJICAgICJhZGRyZXNzIiwKCSAgICAiZGVzY3JpcHRpb24iLAoJICAgICJwaG9uZU51bWJlciIsCgkgICAgInZpc2liaWxpdHkiLAoJXTsKCWZ1bmN0aW9uIGdldEZvbGRlcihub2RlKSB7CgkgICAgY29uc3QgbWV0YSA9IHt9OwoJICAgIGZvciAoY29uc3QgY2hpbGQgb2YgQXJyYXkuZnJvbShub2RlLmNoaWxkTm9kZXMpKSB7CgkgICAgICAgIGlmIChpc0VsZW1lbnQoY2hpbGQpICYmIEZPTERFUl9QUk9QUy5pbmNsdWRlcyhjaGlsZC50YWdOYW1lKSkgewoJICAgICAgICAgICAgbWV0YVtjaGlsZC50YWdOYW1lXSA9IG5vZGVWYWwoY2hpbGQpOwoJICAgICAgICB9CgkgICAgfQoJICAgIHJldHVybiB7CgkgICAgICAgIHR5cGU6ICJmb2xkZXIiLAoJICAgICAgICBtZXRhLAoJICAgICAgICBjaGlsZHJlbjogW10sCgkgICAgfTsKCX0KCS8qKgoJICogWWllbGQgYSBuZXN0ZWQgdHJlZSB3aXRoIEtNTCBmb2xkZXIgc3RydWN0dXJlCgkgKgoJICogVGhpcyBnZW5lcmF0ZXMgYSB0cmVlIHdpdGggdGhlIGdpdmVuIHN0cnVjdHVyZToKCSAqCgkgKiBgYGBqcwoJICogewoJICogICAidHlwZSI6ICJyb290IiwKCSAqICAgImNoaWxkcmVuIjogWwoJICogICAgIHsKCSAqICAgICAgICJ0eXBlIjogImZvbGRlciIsCgkgKiAgICAgICAibWV0YSI6IHsKCSAqICAgICAgICAgIm5hbWUiOiAiVGVzdCIKCSAqICAgICAgIH0sCgkgKiAgICAgICAiY2hpbGRyZW4iOiBbCgkgKiAgICAgICAgICAvLyAuLi5mZWF0dXJlcyBhbmQgZm9sZGVycwoJICogICAgICAgXQoJICogICAgIH0KCSAqICAgICAvLyAuLi5mZWF0dXJlcwoJICogICBdCgkgKiB9CgkgKiBgYGAKCSAqCgkgKiAjIyMgR3JvdW5kT3ZlcmxheQoJICoKCSAqIEdyb3VuZE92ZXJsYXkgZWxlbWVudHMgYXJlIGNvbnZlcnRlZCBpbnRvCgkgKiBgRmVhdHVyZWAgb2JqZWN0cyB3aXRoIGBQb2x5Z29uYCBnZW9tZXRyaWVzLAoJICogYSBwcm9wZXJ0eSBsaWtlOgoJICoKCSAqIGBgYGpzb24KCSAqIHsKCSAqICAgIkBnZW9tZXRyeS10eXBlIjogImdyb3VuZG92ZXJsYXkiCgkgKiB9CgkgKiBgYGAKCSAqCgkgKiBBbmQgdGhlIGdyb3VuZCBvdmVybGF5J3MgaW1hZ2UgVVJMIGluIHRoZSBgaHJlZmAKCSAqIHByb3BlcnR5LiBHcm91bmQgb3ZlcmxheXMgd2lsbCBuZWVkIHRvIGJlIGRpc3BsYXllZAoJICogd2l0aCBhIHNlcGFyYXRlIG1ldGhvZCB0byBvdGhlciBmZWF0dXJlcywgZGVwZW5kaW5nCgkgKiBvbiB3aGljaCBtYXAgZnJhbWV3b3JrIHlvdSdyZSB1c2luZy4KCSAqLwoJZnVuY3Rpb24ga21sV2l0aEZvbGRlcnMobm9kZSwgb3B0aW9ucyA9IHsKCSAgICBza2lwTnVsbEdlb21ldHJ5OiBmYWxzZSwKCX0pIHsKCSAgICBjb25zdCBzdHlsZU1hcCA9IGJ1aWxkU3R5bGVNYXAobm9kZSk7CgkgICAgY29uc3Qgc2NoZW1hID0gYnVpbGRTY2hlbWEobm9kZSk7CgkgICAgY29uc3QgdHJlZSA9IHsgdHlwZTogInJvb3QiLCBjaGlsZHJlbjogW10gfTsKCSAgICBmdW5jdGlvbiB0cmF2ZXJzZShub2RlLCBwb2ludGVyLCBvcHRpb25zKSB7CgkgICAgICAgIGlmIChpc0VsZW1lbnQobm9kZSkpIHsKCSAgICAgICAgICAgIHN3aXRjaCAobm9kZS50YWdOYW1lKSB7CgkgICAgICAgICAgICAgICAgY2FzZSAiR3JvdW5kT3ZlcmxheSI6IHsKCSAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxhY2VtYXJrID0gZ2V0R3JvdW5kT3ZlcmxheShub2RlLCBzdHlsZU1hcCwgc2NoZW1hLCBvcHRpb25zKTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlbWFyaykgewoJICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlci5jaGlsZHJlbi5wdXNoKHBsYWNlbWFyayk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhc2UgIlBsYWNlbWFyayI6IHsKCSAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxhY2VtYXJrID0gZ2V0UGxhY2VtYXJrKG5vZGUsIHN0eWxlTWFwLCBzY2hlbWEsIG9wdGlvbnMpOwoJICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2VtYXJrKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyLmNoaWxkcmVuLnB1c2gocGxhY2VtYXJrKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgY2FzZSAiRm9sZGVyIjogewoJICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIobm9kZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvaW50ZXIuY2hpbGRyZW4ucHVzaChmb2xkZXIpOwoJICAgICAgICAgICAgICAgICAgICBwb2ludGVyID0gZm9sZGVyOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG5vZGUuY2hpbGROb2RlcykgewoJICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgICAgICB0cmF2ZXJzZShub2RlLmNoaWxkTm9kZXNbaV0sIHBvaW50ZXIsIG9wdGlvbnMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfQoJICAgIHRyYXZlcnNlKG5vZGUsIHRyZWUsIG9wdGlvbnMpOwoJICAgIHJldHVybiB0cmVlOwoJfQoJLyoqCgkgKiBDb252ZXJ0IEtNTCB0byBHZW9KU09OIGluY3JlbWVudGFsbHksIHJldHVybmluZwoJICogYSBbR2VuZXJhdG9yXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL0l0ZXJhdG9yc19hbmRfR2VuZXJhdG9ycykKCSAqIHRoYXQgeWllbGRzIG91dHB1dCBmZWF0dXJlIGJ5IGZlYXR1cmUuCgkgKi8KCWZ1bmN0aW9uKiBrbWxHZW4obm9kZSwgb3B0aW9ucyA9IHsKCSAgICBza2lwTnVsbEdlb21ldHJ5OiBmYWxzZSwKCX0pIHsKCSAgICBjb25zdCBzdHlsZU1hcCA9IGJ1aWxkU3R5bGVNYXAobm9kZSk7CgkgICAgY29uc3Qgc2NoZW1hID0gYnVpbGRTY2hlbWEobm9kZSk7CgkgICAgZm9yIChjb25zdCBwbGFjZW1hcmsgb2YgJChub2RlLCAiUGxhY2VtYXJrIikpIHsKCSAgICAgICAgY29uc3QgZmVhdHVyZSA9IGdldFBsYWNlbWFyayhwbGFjZW1hcmssIHN0eWxlTWFwLCBzY2hlbWEsIG9wdGlvbnMpOwoJICAgICAgICBpZiAoZmVhdHVyZSkKCSAgICAgICAgICAgIHlpZWxkIGZlYXR1cmU7CgkgICAgfQoJICAgIGZvciAoY29uc3QgZ3JvdW5kT3ZlcmxheSBvZiAkKG5vZGUsICJHcm91bmRPdmVybGF5IikpIHsKCSAgICAgICAgY29uc3QgZmVhdHVyZSA9IGdldEdyb3VuZE92ZXJsYXkoZ3JvdW5kT3ZlcmxheSwgc3R5bGVNYXAsIHNjaGVtYSwgb3B0aW9ucyk7CgkgICAgICAgIGlmIChmZWF0dXJlKQoJICAgICAgICAgICAgeWllbGQgZmVhdHVyZTsKCSAgICB9Cgl9CgkvKioKCSAqIENvbnZlcnQgYSBLTUwgZG9jdW1lbnQgdG8gR2VvSlNPTi4gVGhlIGZpcnN0IGFyZ3VtZW50LCBgZG9jYCwgbXVzdCBiZSBhIEtNTAoJICogZG9jdW1lbnQgYXMgYW4gWE1MIERPTSAtIG5vdCBhcyBhIHN0cmluZy4gWW91IGNhbiBnZXQgdGhpcyB1c2luZyBqUXVlcnkncyBkZWZhdWx0CgkgKiBgLmFqYXhgIGZ1bmN0aW9uIG9yIHVzaW5nIGEgYmFyZSBYTUxIdHRwUmVxdWVzdCB3aXRoIHRoZSBgLnJlc3BvbnNlYCBwcm9wZXJ0eQoJICogaG9sZGluZyBhbiBYTUwgRE9NLgoJICoKCSAqIFRoZSBvdXRwdXQgaXMgYSBKYXZhU2NyaXB0IG9iamVjdCBvZiBHZW9KU09OIGRhdGEuIFlvdSBjYW4gY29udmVydCBpdCB0byBhIHN0cmluZwoJICogd2l0aCBbSlNPTi5zdHJpbmdpZnldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vc3RyaW5naWZ5KQoJICogb3IgdXNlIGl0IGRpcmVjdGx5IGluIGxpYnJhcmllcy4KCSAqLwoJZnVuY3Rpb24ga21sKG5vZGUsIG9wdGlvbnMgPSB7CgkgICAgc2tpcE51bGxHZW9tZXRyeTogZmFsc2UsCgl9KSB7CgkgICAgcmV0dXJuIHsKCSAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKCSAgICAgICAgZmVhdHVyZXM6IEFycmF5LmZyb20oa21sR2VuKG5vZGUsIG9wdGlvbnMpKSwKCSAgICB9OwoJfQoKCXZhciB0b0dlb0pzb24gPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7CgkJX19wcm90b19fOiBudWxsLAoJCWdweDogZ3B4LAoJCWdweEdlbjogZ3B4R2VuLAoJCWttbDoga21sLAoJCWttbEdlbjoga21sR2VuLAoJCWttbFdpdGhGb2xkZXJzOiBrbWxXaXRoRm9sZGVycywKCQl0Y3g6IHRjeCwKCQl0Y3hHZW46IHRjeEdlbgoJfSk7CgoJdmFyIHBvbHlsaW5lID0ge2V4cG9ydHM6IHt9fTsKCgkoZnVuY3Rpb24gKG1vZHVsZSkgewoKCQkvKioKCQkgKiBCYXNlZCBvZmYgb2YgW3RoZSBvZmZpY2FsIEdvb2dsZSBkb2N1bWVudF0oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL3V0aWxpdGllcy9wb2x5bGluZWFsZ29yaXRobSkKCQkgKgoJCSAqIFNvbWUgcGFydHMgZnJvbSBbdGhpcyBpbXBsZW1lbnRhdGlvbl0oaHR0cDovL2ZhY3N0YWZmLnVuY2EuZWR1L21jbWNjbHVyL0dvb2dsZU1hcHMvRW5jb2RlUG9seWxpbmUvUG9seWxpbmVFbmNvZGVyLmpzKQoJCSAqIGJ5IFtNYXJrIE1jQ2x1cmVdKGh0dHA6Ly9mYWNzdGFmZi51bmNhLmVkdS9tY21jY2x1ci8pCgkJICoKCQkgKiBAbW9kdWxlIHBvbHlsaW5lCgkJICovCgoJCXZhciBwb2x5bGluZSA9IHt9OwoKCQlmdW5jdGlvbiBweTJfcm91bmQodmFsdWUpIHsKCQkgICAgLy8gR29vZ2xlJ3MgcG9seWxpbmUgYWxnb3JpdGhtIHVzZXMgdGhlIHNhbWUgcm91bmRpbmcgc3RyYXRlZ3kgYXMgUHl0aG9uIDIsIHdoaWNoIGlzIGRpZmZlcmVudCBmcm9tIEpTIGZvciBuZWdhdGl2ZSB2YWx1ZXMKCQkgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5hYnModmFsdWUpICsgMC41KSAqICh2YWx1ZSA+PSAwID8gMSA6IC0xKTsKCQl9CgoJCWZ1bmN0aW9uIGVuY29kZShjdXJyZW50LCBwcmV2aW91cywgZmFjdG9yKSB7CgkJICAgIGN1cnJlbnQgPSBweTJfcm91bmQoY3VycmVudCAqIGZhY3Rvcik7CgkJICAgIHByZXZpb3VzID0gcHkyX3JvdW5kKHByZXZpb3VzICogZmFjdG9yKTsKCQkgICAgdmFyIGNvb3JkaW5hdGUgPSAoY3VycmVudCAtIHByZXZpb3VzKSAqIDI7CgkJICAgIGlmIChjb29yZGluYXRlIDwgMCkgewoJCSAgICAgICAgY29vcmRpbmF0ZSA9IC1jb29yZGluYXRlIC0gMTsKCQkgICAgfQoJCSAgICB2YXIgb3V0cHV0ID0gJyc7CgkJICAgIHdoaWxlIChjb29yZGluYXRlID49IDB4MjApIHsKCQkgICAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgweDIwIHwgKGNvb3JkaW5hdGUgJiAweDFmKSkgKyA2Myk7CgkJICAgICAgICBjb29yZGluYXRlIC89IDMyOwoJCSAgICB9CgkJICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb29yZGluYXRlIHwgMCkgKyA2Myk7CgkJICAgIHJldHVybiBvdXRwdXQ7CgkJfQoKCQkvKioKCQkgKiBEZWNvZGVzIHRvIGEgW2xhdGl0dWRlLCBsb25naXR1ZGVdIGNvb3JkaW5hdGVzIGFycmF5LgoJCSAqCgkJICogVGhpcyBpcyBhZGFwdGVkIGZyb20gdGhlIGltcGxlbWVudGF0aW9uIGluIFByb2plY3QtT1NSTS4KCQkgKgoJCSAqIEBwYXJhbSB7U3RyaW5nfSBzdHIKCQkgKiBAcGFyYW0ge051bWJlcn0gcHJlY2lzaW9uCgkJICogQHJldHVybnMge0FycmF5fQoJCSAqCgkJICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vUHJvamVjdC1PU1JNL29zcm0tZnJvbnRlbmQvYmxvYi9tYXN0ZXIvV2ViQ29udGVudC9yb3V0aW5nL09TUk0uUm91dGluZ0dlb21ldHJ5LmpzCgkJICovCgkJcG9seWxpbmUuZGVjb2RlID0gZnVuY3Rpb24oc3RyLCBwcmVjaXNpb24pIHsKCQkgICAgdmFyIGluZGV4ID0gMCwKCQkgICAgICAgIGxhdCA9IDAsCgkJICAgICAgICBsbmcgPSAwLAoJCSAgICAgICAgY29vcmRpbmF0ZXMgPSBbXSwKCQkgICAgICAgIHNoaWZ0ID0gMCwKCQkgICAgICAgIHJlc3VsdCA9IDAsCgkJICAgICAgICBieXRlID0gbnVsbCwKCQkgICAgICAgIGxhdGl0dWRlX2NoYW5nZSwKCQkgICAgICAgIGxvbmdpdHVkZV9jaGFuZ2UsCgkJICAgICAgICBmYWN0b3IgPSBNYXRoLnBvdygxMCwgTnVtYmVyLmlzSW50ZWdlcihwcmVjaXNpb24pID8gcHJlY2lzaW9uIDogNSk7CgoJCSAgICAvLyBDb29yZGluYXRlcyBoYXZlIHZhcmlhYmxlIGxlbmd0aCB3aGVuIGVuY29kZWQsIHNvIGp1c3Qga2VlcAoJCSAgICAvLyB0cmFjayBvZiB3aGV0aGVyIHdlJ3ZlIGhpdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuIEluIGVhY2gKCQkgICAgLy8gbG9vcCBpdGVyYXRpb24sIGEgc2luZ2xlIGNvb3JkaW5hdGUgaXMgZGVjb2RlZC4KCQkgICAgd2hpbGUgKGluZGV4IDwgc3RyLmxlbmd0aCkgewoKCQkgICAgICAgIC8vIFJlc2V0IHNoaWZ0LCByZXN1bHQsIGFuZCBieXRlCgkJICAgICAgICBieXRlID0gbnVsbDsKCQkgICAgICAgIHNoaWZ0ID0gMTsKCQkgICAgICAgIHJlc3VsdCA9IDA7CgoJCSAgICAgICAgZG8gewoJCSAgICAgICAgICAgIGJ5dGUgPSBzdHIuY2hhckNvZGVBdChpbmRleCsrKSAtIDYzOwoJCSAgICAgICAgICAgIHJlc3VsdCArPSAoYnl0ZSAmIDB4MWYpICogc2hpZnQ7CgkJICAgICAgICAgICAgc2hpZnQgKj0gMzI7CgkJICAgICAgICB9IHdoaWxlIChieXRlID49IDB4MjApOwoKCQkgICAgICAgIGxhdGl0dWRlX2NoYW5nZSA9IChyZXN1bHQgJiAxKSA/ICgoLXJlc3VsdCAtIDEpIC8gMikgOiAocmVzdWx0IC8gMik7CgoJCSAgICAgICAgc2hpZnQgPSAxOwoJCSAgICAgICAgcmVzdWx0ID0gMDsKCgkJICAgICAgICBkbyB7CgkJICAgICAgICAgICAgYnl0ZSA9IHN0ci5jaGFyQ29kZUF0KGluZGV4KyspIC0gNjM7CgkJICAgICAgICAgICAgcmVzdWx0ICs9IChieXRlICYgMHgxZikgKiBzaGlmdDsKCQkgICAgICAgICAgICBzaGlmdCAqPSAzMjsKCQkgICAgICAgIH0gd2hpbGUgKGJ5dGUgPj0gMHgyMCk7CgoJCSAgICAgICAgbG9uZ2l0dWRlX2NoYW5nZSA9IChyZXN1bHQgJiAxKSA/ICgoLXJlc3VsdCAtIDEpIC8gMikgOiAocmVzdWx0IC8gMik7CgoJCSAgICAgICAgbGF0ICs9IGxhdGl0dWRlX2NoYW5nZTsKCQkgICAgICAgIGxuZyArPSBsb25naXR1ZGVfY2hhbmdlOwoKCQkgICAgICAgIGNvb3JkaW5hdGVzLnB1c2goW2xhdCAvIGZhY3RvciwgbG5nIC8gZmFjdG9yXSk7CgkJICAgIH0KCgkJICAgIHJldHVybiBjb29yZGluYXRlczsKCQl9OwoKCQkvKioKCQkgKiBFbmNvZGVzIHRoZSBnaXZlbiBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gY29vcmRpbmF0ZXMgYXJyYXkuCgkJICoKCQkgKiBAcGFyYW0ge0FycmF5LjxBcnJheS48TnVtYmVyPj59IGNvb3JkaW5hdGVzCgkJICogQHBhcmFtIHtOdW1iZXJ9IHByZWNpc2lvbgoJCSAqIEByZXR1cm5zIHtTdHJpbmd9CgkJICovCgkJcG9seWxpbmUuZW5jb2RlID0gZnVuY3Rpb24oY29vcmRpbmF0ZXMsIHByZWNpc2lvbikgewoJCSAgICBpZiAoIWNvb3JkaW5hdGVzLmxlbmd0aCkgeyByZXR1cm4gJyc7IH0KCgkJICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgTnVtYmVyLmlzSW50ZWdlcihwcmVjaXNpb24pID8gcHJlY2lzaW9uIDogNSksCgkJICAgICAgICBvdXRwdXQgPSBlbmNvZGUoY29vcmRpbmF0ZXNbMF1bMF0sIDAsIGZhY3RvcikgKyBlbmNvZGUoY29vcmRpbmF0ZXNbMF1bMV0sIDAsIGZhY3Rvcik7CgoJCSAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7CgkJICAgICAgICB2YXIgYSA9IGNvb3JkaW5hdGVzW2ldLCBiID0gY29vcmRpbmF0ZXNbaSAtIDFdOwoJCSAgICAgICAgb3V0cHV0ICs9IGVuY29kZShhWzBdLCBiWzBdLCBmYWN0b3IpOwoJCSAgICAgICAgb3V0cHV0ICs9IGVuY29kZShhWzFdLCBiWzFdLCBmYWN0b3IpOwoJCSAgICB9CgoJCSAgICByZXR1cm4gb3V0cHV0OwoJCX07CgoJCWZ1bmN0aW9uIGZsaXBwZWQoY29vcmRzKSB7CgkJICAgIHZhciBmbGlwcGVkID0gW107CgkJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7CgkJICAgICAgICB2YXIgY29vcmQgPSBjb29yZHNbaV0uc2xpY2UoKTsKCQkgICAgICAgIGZsaXBwZWQucHVzaChbY29vcmRbMV0sIGNvb3JkWzBdXSk7CgkJICAgIH0KCQkgICAgcmV0dXJuIGZsaXBwZWQ7CgkJfQoKCQkvKioKCQkgKiBFbmNvZGVzIGEgR2VvSlNPTiBMaW5lU3RyaW5nIGZlYXR1cmUvZ2VvbWV0cnkuCgkJICoKCQkgKiBAcGFyYW0ge09iamVjdH0gZ2VvanNvbgoJCSAqIEBwYXJhbSB7TnVtYmVyfSBwcmVjaXNpb24KCQkgKiBAcmV0dXJucyB7U3RyaW5nfQoJCSAqLwoJCXBvbHlsaW5lLmZyb21HZW9KU09OID0gZnVuY3Rpb24oZ2VvanNvbiwgcHJlY2lzaW9uKSB7CgkJICAgIGlmIChnZW9qc29uICYmIGdlb2pzb24udHlwZSA9PT0gJ0ZlYXR1cmUnKSB7CgkJICAgICAgICBnZW9qc29uID0gZ2VvanNvbi5nZW9tZXRyeTsKCQkgICAgfQoJCSAgICBpZiAoIWdlb2pzb24gfHwgZ2VvanNvbi50eXBlICE9PSAnTGluZVN0cmluZycpIHsKCQkgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgbXVzdCBiZSBhIEdlb0pTT04gTGluZVN0cmluZycpOwoJCSAgICB9CgkJICAgIHJldHVybiBwb2x5bGluZS5lbmNvZGUoZmxpcHBlZChnZW9qc29uLmNvb3JkaW5hdGVzKSwgcHJlY2lzaW9uKTsKCQl9OwoKCQkvKioKCQkgKiBEZWNvZGVzIHRvIGEgR2VvSlNPTiBMaW5lU3RyaW5nIGdlb21ldHJ5LgoJCSAqCgkJICogQHBhcmFtIHtTdHJpbmd9IHN0cgoJCSAqIEBwYXJhbSB7TnVtYmVyfSBwcmVjaXNpb24KCQkgKiBAcmV0dXJucyB7T2JqZWN0fQoJCSAqLwoJCXBvbHlsaW5lLnRvR2VvSlNPTiA9IGZ1bmN0aW9uKHN0ciwgcHJlY2lzaW9uKSB7CgkJICAgIHZhciBjb29yZHMgPSBwb2x5bGluZS5kZWNvZGUoc3RyLCBwcmVjaXNpb24pOwoJCSAgICByZXR1cm4gewoJCSAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLAoJCSAgICAgICAgY29vcmRpbmF0ZXM6IGZsaXBwZWQoY29vcmRzKQoJCSAgICB9OwoJCX07CgoJCWlmIChtb2R1bGUuZXhwb3J0cykgewoJCSAgICBtb2R1bGUuZXhwb3J0cyA9IHBvbHlsaW5lOwoJCX0gCgl9IChwb2x5bGluZSkpOwoKCXZhciBwb2x5bGluZUV4cG9ydHMgPSBwb2x5bGluZS5leHBvcnRzOwoKCXZhciB1dGlscyA9ICgoKSA9PiB7CgoJICAgIGNvbnN0IHB1cmdlUHJvcHMgPSAob2JqLCBibGFja2xpc3QpID0+IHsKCSAgICAgICAgaWYgKG9iaikgewoJICAgICAgICAgICAgbGV0IHJzID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTsKCSAgICAgICAgICAgIGlmIChibGFja2xpc3QpIHsKCSAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9wIG9mIGJsYWNrbGlzdCkgewoJICAgICAgICAgICAgICAgICAgICBkZWxldGUgcnNbcHJvcF07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIHJzOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB7fTsKCSAgICB9OwoKCSAgICBjb25zdCBtZXJnZVByb3BzID0gKG9iajEsIG9iajIpID0+IHsKCSAgICAgICAgb2JqMSA9IG9iajEgPyBvYmoxIDoge307CgkgICAgICAgIG9iajIgPSBvYmoyID8gb2JqMiA6IHt9OwoJICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmoxLCBvYmoyKTsKCSAgICB9OwoKCSAgICBjb25zdCBmaXJzdCA9IGEgPT4gYVswXTsKCSAgICBjb25zdCBsYXN0ID0gYSA9PiBhW2EubGVuZ3RoIC0gMV07CgkgICAgY29uc3QgY29vcmRzVG9LZXkgPSBhID0+IGEuam9pbignLCcpOwoKCSAgICBjb25zdCBhZGRUb01hcCA9IChtLCBrLCB2KSA9PiB7CgkgICAgICAgIGxldCBhID0gbVtrXTsKCSAgICAgICAgaWYgKGEpIHsKCSAgICAgICAgICAgIGEucHVzaCh2KTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIG1ba10gPSBbdl07CgkgICAgICAgIH0KCSAgICB9OwoKCSAgICBjb25zdCByZW1vdmVGcm9tTWFwID0gKG0sIGssIHYpID0+IHsKCSAgICAgICAgbGV0IGEgPSBtW2tdOwoJICAgICAgICBsZXQgaWR4ID0gbnVsbDsKCSAgICAgICAgaWYgKGEgJiYgKGlkeCA9IGEuaW5kZXhPZih2KSkgPj0gMCkgewoJICAgICAgICAgICAgYS5zcGxpY2UoaWR4LCAxKTsKCSAgICAgICAgfQoJICAgIH07CgoJICAgIGNvbnN0IGdldEZpcnN0RnJvbU1hcCA9IChtLCBrKSA9PiB7CgkgICAgICAgIGxldCBhID0gbVtrXTsKCSAgICAgICAgaWYgKGEgJiYgYS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICByZXR1cm4gYVswXTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoKCSAgICAvLyBuZWVkIDMrIGRpZmZlcmVudCBwb2ludHMgdG8gZm9ybSBhIHJpbmcsIGhlcmUgdXNpbmcgPiAzIGlzICdjb3ogYSB0aGUgZmlyc3QgYW5kIHRoZSBsYXN0IHBvaW50cyBhcmUgYWN0dWFsbHkgdGhlIHNhbWUKCSAgICBjb25zdCBpc1JpbmcgPSBhID0+IGEubGVuZ3RoID4gMyAmJiBjb29yZHNUb0tleShmaXJzdChhKSkgPT09IGNvb3Jkc1RvS2V5KGxhc3QoYSkpOwoKCSAgICBjb25zdCByaW5nRGlyZWN0aW9uID0gKGEsIHhJZHgsIHlJZHgpID0+IHsKCSAgICAgICAgeElkeCA9IHhJZHggfHwgMCwgeUlkeCA9IHlJZHggfHwgMTsKCSAgICAgICAgLy8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgcG9pbnQgd2hpY2ggaGFzIHRoZSBtYXhpbXVtIHggdmFsdWUKCSAgICAgICAgbGV0IG0gPSBhLnJlZHVjZSgobWF4eElkeCwgdiwgaWR4KSA9PiBhW21heHhJZHhdW3hJZHhdID4gdlt4SWR4XSA/IG1heHhJZHggOiBpZHgsIDApOwoJICAgICAgICAvLyAnY296IHRoZSBmaXJzdCBwb2ludCBpcyB2aXJ0dWFsbHkgdGhlIHNhbWUgb25lIGFzIHRoZSBsYXN0IHBvaW50LCAKCSAgICAgICAgLy8gd2UgbmVlZCB0byBza2lwIGEubGVuZ3RoIC0gMSBmb3IgbGVmdCB3aGVuIG0gPSAwLAoJICAgICAgICAvLyBhbmQgc2tpcCAwIGZvciByaWdodCB3aGVuIG0gPSBhLmxlbmd0aCAtIDE7CgkgICAgICAgIGxldCBsID0gbSA8PSAwID8gYS5sZW5ndGggLSAyIDogbSAtIDEsIHIgPSBtID49IGEubGVuZ3RoIC0gMSA/IDEgOiBtICsgMTsKCSAgICAgICAgbGV0IHhhID0gYVtsXVt4SWR4XSwgeGIgPSBhW21dW3hJZHhdLCB4YyA9IGFbcl1beElkeF07CgkgICAgICAgIGxldCB5YSA9IGFbbF1beUlkeF0sIHliID0gYVttXVt5SWR4XSwgeWMgPSBhW3JdW3lJZHhdOwoJICAgICAgICBsZXQgZGV0ID0gKHhiIC0geGEpICogKHljIC0geWEpIC0gKHhjIC0geGEpICogKHliIC0geWEpOwoJICAgICAgICByZXR1cm4gZGV0IDwgMCA/ICdjbG9ja3dpc2UnIDogJ2NvdW50ZXJjbG9ja3dpc2UnOwoJICAgIH07CgoJICAgIGNvbnN0IHB0SW5zaWRlUG9seWdvbiA9IChwdCwgcG9seWdvbiwgeElkeCwgeUlkeCkgPT4gewoJICAgICAgICB4SWR4ID0geElkeCB8fCAwLCB5SWR4ID0geUlkeCB8fCAxOwoJICAgICAgICBsZXQgcmVzdWx0ID0gZmFsc2U7CgkgICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gcG9seWdvbi5sZW5ndGggLSAxOyBpIDwgcG9seWdvbi5sZW5ndGg7IGogPSBpKyspIHsKCSAgICAgICAgICAgIGlmICgocG9seWdvbltpXVt4SWR4XSA8PSBwdFt4SWR4XSAmJiBwdFt4SWR4XSA8IHBvbHlnb25bal1beElkeF0gfHwKCSAgICAgICAgICAgICAgICBwb2x5Z29uW2pdW3hJZHhdIDw9IHB0W3hJZHhdICYmIHB0W3hJZHhdIDwgcG9seWdvbltpXVt4SWR4XSkgJiYKCSAgICAgICAgICAgICAgICBwdFt5SWR4XSA8IChwb2x5Z29uW2pdW3lJZHhdIC0gcG9seWdvbltpXVt5SWR4XSkgKiAocHRbeElkeF0gLSBwb2x5Z29uW2ldW3hJZHhdKSAvIChwb2x5Z29uW2pdW3hJZHhdIC0gcG9seWdvbltpXVt4SWR4XSkgKyBwb2x5Z29uW2ldW3lJZHhdKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gIXJlc3VsdDsKCSAgICAgICAgICAgIH0KCgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoKCSAgICBjb25zdCBzdHJUb0Zsb2F0ID0gZWwgPT4gZWwgaW5zdGFuY2VvZiBBcnJheSA/IGVsLm1hcChzdHJUb0Zsb2F0KSA6IHBhcnNlRmxvYXQoZWwpOwoKCSAgICBjbGFzcyBSZWZFbGVtZW50cyBleHRlbmRzIE1hcCB7CgkgICAgICAgIGNvbnN0cnVjdG9yKCkgewoJICAgICAgICAgICAgc3VwZXIoKTsKCSAgICAgICAgICAgIHRoaXMuYmluZGVycyA9IFtdOwoJICAgICAgICB9CgoJICAgICAgICBhZGQoaywgdikgewoJICAgICAgICAgICAgaWYgKCF0aGlzLmhhcyhrKSkgewoJICAgICAgICAgICAgICAgIHRoaXMuc2V0KGssIHYpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gc3VwcHJlc3MgZHVwbGNhdGVkIGtleSBlcnJvcgoJICAgICAgICAgICAgLy8gZWxzZQoJICAgICAgICAgICAgLy8gdGhyb3cgYEVycm9yOiBhZGRpbmcgZHVwbGljYXRlZCBrZXkgJyR7a30nIHRvIFJlZkVsZW1lbnRzYDsKCSAgICAgICAgfQoKCSAgICAgICAgYWRkQmluZGVyKGJpbmRlcikgewoJICAgICAgICAgICAgdGhpcy5iaW5kZXJzLnB1c2goYmluZGVyKTsKCSAgICAgICAgfQoKCSAgICAgICAgYmluZEFsbCgpIHsKCSAgICAgICAgICAgIHRoaXMuYmluZGVycy5mb3JFYWNoKGJpbmRlciA9PiBiaW5kZXIuYmluZCgpKTsKCSAgICAgICAgfQoJICAgIH0KCgkgICAgY2xhc3MgTGF0ZUJpbmRlciB7CgkgICAgICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgdmFsdWVGdW5jLCBjdHgsIGFyZ3MpIHsKCSAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyOwoJICAgICAgICAgICAgdGhpcy52YWx1ZUZ1bmMgPSB2YWx1ZUZ1bmM7CgkgICAgICAgICAgICB0aGlzLmN0eCA9IGN0eDsKCSAgICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7CgkgICAgICAgIH0KCgkgICAgICAgIGJpbmQoKSB7CgkgICAgICAgICAgICBsZXQgdiA9IHRoaXMudmFsdWVGdW5jLmFwcGx5KHRoaXMuY3R4LCB0aGlzLmFyZ3MpOwoJICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyIGluc3RhbmNlb2YgQXJyYXkpIHsKCSAgICAgICAgICAgICAgICBsZXQgaWR4ID0gdGhpcy5jb250YWluZXIuaW5kZXhPZih0aGlzKTsKCSAgICAgICAgICAgICAgICBpZiAoaWR4ID49IDApIHsKCSAgICAgICAgICAgICAgICAgICAgbGV0IGFyZ3MgPSBbaWR4LCAxXTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh2KTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBbXS5zcGxpY2UuYXBwbHkodGhpcy5jb250YWluZXIsIGFyZ3MpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuY29udGFpbmVyID09PSAnb2JqZWN0JykgewoJICAgICAgICAgICAgICAgIGxldCBrID0gT2JqZWN0LmtleXModGhpcy5jb250YWluZXIpLmZpbmQodiA9PiB0aGlzLmNvbnRhaW5lclt2XSA9PT0gdGhpcyk7CgkgICAgICAgICAgICAgICAgaWYgKGspIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyW2tdID0gdjsKCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbnRhaW5lcltrXTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCgkgICAgY2xhc3MgV2F5Q29sbGVjdGlvbiBleHRlbmRzIEFycmF5IHsKCSAgICAgICAgY29uc3RydWN0b3IoKSB7CgkgICAgICAgICAgICBzdXBlcigpOwoJICAgICAgICAgICAgdGhpcy5maXJzdE1hcCA9IHt9OwoJICAgICAgICAgICAgdGhpcy5sYXN0TWFwID0ge307CgkgICAgICAgIH0KCgkgICAgICAgIGFkZFdheSh3YXkpIHsKCSAgICAgICAgICAgIHdheSA9IHdheS50b0Nvb3Jkc0FycmF5KCk7CgkgICAgICAgICAgICBpZiAod2F5Lmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgICAgICB0aGlzLnB1c2god2F5KTsKCSAgICAgICAgICAgICAgICBhZGRUb01hcCh0aGlzLmZpcnN0TWFwLCBjb29yZHNUb0tleShmaXJzdCh3YXkpKSwgd2F5KTsKCSAgICAgICAgICAgICAgICBhZGRUb01hcCh0aGlzLmxhc3RNYXAsIGNvb3Jkc1RvS2V5KGxhc3Qod2F5KSksIHdheSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAgIHRvU3RyaW5ncygpIHsKCSAgICAgICAgICAgIGxldCBzdHJpbmdzID0gW10sIHdheSA9IG51bGw7CgkgICAgICAgICAgICB3aGlsZSAod2F5ID0gdGhpcy5zaGlmdCgpKSB7CgkgICAgICAgICAgICAgICAgcmVtb3ZlRnJvbU1hcCh0aGlzLmZpcnN0TWFwLCBjb29yZHNUb0tleShmaXJzdCh3YXkpKSwgd2F5KTsKCSAgICAgICAgICAgICAgICByZW1vdmVGcm9tTWFwKHRoaXMubGFzdE1hcCwgY29vcmRzVG9LZXkobGFzdCh3YXkpKSwgd2F5KTsKCSAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHdheSwgbmV4dCA9IG51bGw7CgkgICAgICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgICAgICBsZXQga2V5ID0gY29vcmRzVG9LZXkobGFzdChjdXJyZW50KSksIHNob3VsZFJldmVyc2UgPSBmYWxzZTsKCgkgICAgICAgICAgICAgICAgICAgIG5leHQgPSBnZXRGaXJzdEZyb21NYXAodGhpcy5maXJzdE1hcCwga2V5KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gZ2V0Rmlyc3RGcm9tTWFwKHRoaXMubGFzdE1hcCwga2V5KTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFJldmVyc2UgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxpY2UodGhpcy5pbmRleE9mKG5leHQpLCAxKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZyb21NYXAodGhpcy5maXJzdE1hcCwgY29vcmRzVG9LZXkoZmlyc3QobmV4dCkpLCBuZXh0KTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZyb21NYXAodGhpcy5sYXN0TWFwLCBjb29yZHNUb0tleShsYXN0KG5leHQpKSwgbmV4dCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmV2ZXJzZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyByZXZlcnNlIHNob3J0ZXIgb25lIHRvIHNhdmUgdGltZQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Lmxlbmd0aCA+IGN1cnJlbnQubGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjdXJyZW50LCBuZXh0XSA9IFtuZXh0LCBjdXJyZW50XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5yZXZlcnNlKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuY29uY2F0KG5leHQuc2xpY2UoMSkpOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSB3aGlsZSAobmV4dCk7CgkgICAgICAgICAgICAgICAgc3RyaW5ncy5wdXNoKHN0clRvRmxvYXQoY3VycmVudCkpOwoJICAgICAgICAgICAgfQoKCSAgICAgICAgICAgIHJldHVybiBzdHJpbmdzOwoJICAgICAgICB9CgoJICAgICAgICB0b1JpbmdzKGRpcmVjdGlvbikgewoJICAgICAgICAgICAgbGV0IHN0cmluZ3MgPSB0aGlzLnRvU3RyaW5ncygpOwoJICAgICAgICAgICAgbGV0IHJpbmdzID0gW10sIHN0cmluZyA9IG51bGw7CgkgICAgICAgICAgICB3aGlsZSAoc3RyaW5nID0gc3RyaW5ncy5zaGlmdCgpKSB7CgkgICAgICAgICAgICAgICAgaWYgKGlzUmluZyhzdHJpbmcpKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyaW5nRGlyZWN0aW9uKHN0cmluZykgIT09IGRpcmVjdGlvbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nLnJldmVyc2UoKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByaW5ncy5wdXNoKHN0cmluZyk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIHJpbmdzOwoJICAgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4gewoJICAgICAgICBwdXJnZVByb3BzLCBtZXJnZVByb3BzLAoJICAgICAgICBmaXJzdCwgbGFzdCwgY29vcmRzVG9LZXksCgkgICAgICAgIGFkZFRvTWFwLCByZW1vdmVGcm9tTWFwLCBnZXRGaXJzdEZyb21NYXAsCgkgICAgICAgIGlzUmluZywgcmluZ0RpcmVjdGlvbiwgcHRJbnNpZGVQb2x5Z29uLCBzdHJUb0Zsb2F0LAoJICAgICAgICBSZWZFbGVtZW50cywgTGF0ZUJpbmRlciwgV2F5Q29sbGVjdGlvbgoJICAgIH07Cgl9KSgpOwoKCXZhciBidWlsZGluZyA9IHsKCX07Cgl2YXIgaGlnaHdheSA9IHsKCQl3aGl0ZWxpc3Q6IFsKCQkJInNlcnZpY2VzIiwKCQkJInJlc3RfYXJlYSIsCgkJCSJlc2NhcGUiLAoJCQkiZWxldmF0b3IiCgkJXQoJfTsKCXZhciBuYXR1cmFsID0gewoJCWJsYWNrbGlzdDogWwoJCQkiY29hc3RsaW5lIiwKCQkJImNsaWZmIiwKCQkJInJpZGdlIiwKCQkJImFyZXRlIiwKCQkJInRyZWVfcm93IgoJCV0KCX07Cgl2YXIgbGFuZHVzZSA9IHsKCX07Cgl2YXIgd2F0ZXJ3YXkgPSB7CgkJd2hpdGVsaXN0OiBbCgkJCSJyaXZlcmJhbmsiLAoJCQkiZG9jayIsCgkJCSJib2F0eWFyZCIsCgkJCSJkYW0iCgkJXQoJfTsKCXZhciBhbWVuaXR5ID0gewoJfTsKCXZhciBsZWlzdXJlID0gewoJfTsKCXZhciBiYXJyaWVyID0gewoJCXdoaXRlbGlzdDogWwoJCQkiY2l0eV93YWxsIiwKCQkJImRpdGNoIiwKCQkJImhlZGdlIiwKCQkJInJldGFpbmluZ193YWxsIiwKCQkJIndhbGwiLAoJCQkic3Bpa2VzIgoJCV0KCX07Cgl2YXIgcmFpbHdheSA9IHsKCQl3aGl0ZWxpc3Q6IFsKCQkJInN0YXRpb24iLAoJCQkidHVybnRhYmxlIiwKCQkJInJvdW5kaG91c2UiLAoJCQkicGxhdGZvcm0iCgkJXQoJfTsKCXZhciBhcmVhID0gewoJfTsKCXZhciBib3VuZGFyeSA9IHsKCX07Cgl2YXIgbWFuX21hZGUgPSB7CgkJYmxhY2tsaXN0OiBbCgkJCSJjdXRsaW5lIiwKCQkJImVtYmFua21lbnQiLAoJCQkicGlwZWxpbmUiCgkJXQoJfTsKCXZhciBwb3dlciA9IHsKCQl3aGl0ZWxpc3Q6IFsKCQkJInBsYW50IiwKCQkJInN1YnN0YXRpb24iLAoJCQkiZ2VuZXJhdG9yIiwKCQkJInRyYW5zZm9ybWVyIgoJCV0KCX07Cgl2YXIgcGxhY2UgPSB7Cgl9OwoJdmFyIHNob3AgPSB7Cgl9OwoJdmFyIGFlcm93YXkgPSB7CgkJYmxhY2tsaXN0OiBbCgkJCSJ0YXhpd2F5IgoJCV0KCX07Cgl2YXIgdG91cmlzbSA9IHsKCX07Cgl2YXIgaGlzdG9yaWMgPSB7Cgl9OwoJdmFyIHB1YmxpY190cmFuc3BvcnQgPSB7Cgl9OwoJdmFyIG9mZmljZSA9IHsKCX07Cgl2YXIgbWlsaXRhcnkgPSB7Cgl9OwoJdmFyIHJ1aW5zID0gewoJfTsKCXZhciBjcmFmdCA9IHsKCX07Cgl2YXIgZ29sZiA9IHsKCX07Cgl2YXIgaW5kb29yID0gewoJfTsKCXZhciByZXF1aXJlJCQxID0gewoJCWJ1aWxkaW5nOiBidWlsZGluZywKCQloaWdod2F5OiBoaWdod2F5LAoJCW5hdHVyYWw6IG5hdHVyYWwsCgkJbGFuZHVzZTogbGFuZHVzZSwKCQl3YXRlcndheTogd2F0ZXJ3YXksCgkJYW1lbml0eTogYW1lbml0eSwKCQlsZWlzdXJlOiBsZWlzdXJlLAoJCWJhcnJpZXI6IGJhcnJpZXIsCgkJcmFpbHdheTogcmFpbHdheSwKCQlhcmVhOiBhcmVhLAoJCWJvdW5kYXJ5OiBib3VuZGFyeSwKCQltYW5fbWFkZTogbWFuX21hZGUsCgkJcG93ZXI6IHBvd2VyLAoJCXBsYWNlOiBwbGFjZSwKCQlzaG9wOiBzaG9wLAoJCWFlcm93YXk6IGFlcm93YXksCgkJdG91cmlzbTogdG91cmlzbSwKCQloaXN0b3JpYzogaGlzdG9yaWMsCgkJcHVibGljX3RyYW5zcG9ydDogcHVibGljX3RyYW5zcG9ydCwKCQlvZmZpY2U6IG9mZmljZSwKCQkiYnVpbGRpbmc6cGFydCI6IHsKCX0sCgkJbWlsaXRhcnk6IG1pbGl0YXJ5LAoJCXJ1aW5zOiBydWlucywKCQkiYXJlYTpoaWdod2F5IjogewoJfSwKCQljcmFmdDogY3JhZnQsCgkJZ29sZjogZ29sZiwKCQlpbmRvb3I6IGluZG9vcgoJfTsKCgl2YXIgb3Ntb2JqcyA9ICgoKSA9PiB7CgoJICAgIGNvbnN0IHsgZmlyc3QsIGxhc3QsIGNvb3Jkc1RvS2V5LAoJICAgICAgICBhZGRUb01hcCwgcmVtb3ZlRnJvbU1hcCwgZ2V0Rmlyc3RGcm9tTWFwLAoJICAgICAgICBpc1JpbmcsIHJpbmdEaXJlY3Rpb24sIHB0SW5zaWRlUG9seWdvbiwgc3RyVG9GbG9hdCwKCSAgICAgICAgTGF0ZUJpbmRlciwgV2F5Q29sbGVjdGlvbiB9ID0gdXRpbHMsCgkgICAgICAgIHBvbHlnb25UYWdzID0gcmVxdWlyZSQkMTsKCgkgICAgY2xhc3MgT3NtT2JqZWN0IHsKCSAgICAgICAgY29uc3RydWN0b3IodHlwZSwgaWQsIHJlZkVsZW1zKSB7CgkgICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwoJICAgICAgICAgICAgdGhpcy5pZCA9IGlkOwoJICAgICAgICAgICAgdGhpcy5yZWZFbGVtcyA9IHJlZkVsZW1zOwoJICAgICAgICAgICAgdGhpcy50YWdzID0ge307CgkgICAgICAgICAgICB0aGlzLnByb3BzID0geyBpZDogdGhpcy5nZXRDb21wb3NpdGVJZCgpIH07CgkgICAgICAgICAgICB0aGlzLnJlZkNvdW50ID0gMDsKCSAgICAgICAgICAgIHRoaXMuaGFzVGFnID0gZmFsc2U7CgkgICAgICAgICAgICBpZiAocmVmRWxlbXMpIHsKCSAgICAgICAgICAgICAgICByZWZFbGVtcy5hZGQodGhpcy5nZXRDb21wb3NpdGVJZCgpLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgYWRkVGFncyh0YWdzKSB7CgkgICAgICAgICAgICB0aGlzLnRhZ3MgPSBPYmplY3QuYXNzaWduKHRoaXMudGFncywgdGFncyk7CgkgICAgICAgICAgICB0aGlzLmhhc1RhZyA9IHRhZ3MgPyB0cnVlIDogZmFsc2U7CgkgICAgICAgIH0KCgkgICAgICAgIGFkZFRhZyhrLCB2KSB7CgkgICAgICAgICAgICB0aGlzLnRhZ3Nba10gPSB2OwoJICAgICAgICAgICAgdGhpcy5oYXNUYWcgPSBrID8gdHJ1ZSA6IGZhbHNlOwoJICAgICAgICB9CgoJICAgICAgICBhZGRQcm9wKGssIHYpIHsKCSAgICAgICAgICAgIHRoaXMucHJvcHNba10gPSB2OwoJICAgICAgICB9CgoJICAgICAgICBhZGRQcm9wcyhwcm9wcykgewoJICAgICAgICAgICAgdGhpcy5wcm9wcyA9IE9iamVjdC5hc3NpZ24odGhpcy5wcm9wcywgcHJvcHMpOwoJICAgICAgICB9CgoJICAgICAgICBnZXRDb21wb3NpdGVJZCgpIHsKCSAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnR5cGV9LyR7dGhpcy5pZH1gOwoJICAgICAgICB9CgoJICAgICAgICBnZXRQcm9wcygpIHsKCSAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRoaXMucHJvcHMsIHRoaXMudGFncyk7CgkgICAgICAgIH0KCgkgICAgICAgIHRvRmVhdHVyZUFycmF5KCkgewoJICAgICAgICAgICAgcmV0dXJuIFtdOwoJICAgICAgICB9CgkgICAgfQoKCSAgICBjbGFzcyBOb2RlIGV4dGVuZHMgT3NtT2JqZWN0IHsKCSAgICAgICAgY29uc3RydWN0b3IoaWQsIHJlZkVsZW1zKSB7CgkgICAgICAgICAgICBzdXBlcignbm9kZScsIGlkLCByZWZFbGVtcyk7CgkgICAgICAgICAgICB0aGlzLmxhdExuZyA9IG51bGw7CgkgICAgICAgIH0KCgkgICAgICAgIHNldExhdExuZyhsYXRMbmcpIHsKCSAgICAgICAgICAgIHRoaXMubGF0TG5nID0gbGF0TG5nOwoJICAgICAgICB9CgoJICAgICAgICB0b0ZlYXR1cmVBcnJheSgpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLmxhdExuZykgewoJICAgICAgICAgICAgICAgIHJldHVybiBbewoJICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCgkgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdldENvbXBvc2l0ZUlkKCksCgkgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHRoaXMuZ2V0UHJvcHMoKSwKCSAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCgkgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogc3RyVG9GbG9hdChbdGhpcy5sYXRMbmcubG9uLCB0aGlzLmxhdExuZy5sYXRdKQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfV07CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgcmV0dXJuIFtdOwoJICAgICAgICB9CgoJICAgICAgICBnZXRMYXRMbmcoKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sYXRMbmc7CgkgICAgICAgIH0KCSAgICB9CgoJICAgIGNsYXNzIFdheSBleHRlbmRzIE9zbU9iamVjdCB7CgkgICAgICAgIGNvbnN0cnVjdG9yKGlkLCByZWZFbGVtcykgewoJICAgICAgICAgICAgc3VwZXIoJ3dheScsIGlkLCByZWZFbGVtcyk7CgkgICAgICAgICAgICB0aGlzLmxhdExuZ0FycmF5ID0gW107CgkgICAgICAgICAgICB0aGlzLmlzUG9seWdvbiA9IGZhbHNlOwoJICAgICAgICB9CgoJICAgICAgICBhZGRMYXRMbmcobGF0TG5nKSB7CgkgICAgICAgICAgICB0aGlzLmxhdExuZ0FycmF5LnB1c2gobGF0TG5nKTsKCSAgICAgICAgfQoKCSAgICAgICAgc2V0TGF0TG5nQXJyYXkobGF0TG5nQXJyYXkpIHsKCSAgICAgICAgICAgIHRoaXMubGF0TG5nQXJyYXkgPSBsYXRMbmdBcnJheTsKCSAgICAgICAgfQoKCSAgICAgICAgYWRkTm9kZVJlZihyZWYpIHsKCSAgICAgICAgICAgIGxldCBiaW5kZXIgPSBuZXcgTGF0ZUJpbmRlcih0aGlzLmxhdExuZ0FycmF5LCBmdW5jdGlvbiAoaWQpIHsKCSAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMucmVmRWxlbXMuZ2V0KGBub2RlLyR7aWR9YCk7CgkgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgbm9kZS5yZWZDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRMYXRMbmcoKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9LCB0aGlzLCBbcmVmXSk7CgoJICAgICAgICAgICAgdGhpcy5sYXRMbmdBcnJheS5wdXNoKGJpbmRlcik7CgkgICAgICAgICAgICB0aGlzLnJlZkVsZW1zLmFkZEJpbmRlcihiaW5kZXIpOwoJICAgICAgICB9CgoJICAgICAgICBhbmFseXplR2VvbWV0cnlUeXBlKGssIHYpIHsKCSAgICAgICAgICAgIGxldCBvID0gcG9seWdvblRhZ3Nba107CgkgICAgICAgICAgICBpZiAobykgewoJICAgICAgICAgICAgICAgIHRoaXMuaXNQb2x5Z29uID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICBpZiAoby53aGl0ZWxpc3QpIHsKCSAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BvbHlnb24gPSBvLndoaXRlbGlzdC5pbmRleE9mKHYpID49IDAgPyB0cnVlIDogZmFsc2U7CgkgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvLmJsYWNrbGlzdCkgewoJICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUG9seWdvbiA9IG8uYmxhY2tsaXN0LmluZGV4T2YodikgPj0gMCA/IGZhbHNlIDogdHJ1ZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAgIGFkZFRhZ3ModGFncykgewoJICAgICAgICAgICAgc3VwZXIuYWRkVGFncyh0YWdzKTsKCSAgICAgICAgICAgIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWdzKSkgewoJICAgICAgICAgICAgICAgIHRoaXMuYW5hbHl6ZUdlb21ldHJ5VHlwZShrLCB2KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgYWRkVGFnKGssIHYpIHsKCSAgICAgICAgICAgIHN1cGVyLmFkZFRhZyhrLCB2KTsKCSAgICAgICAgICAgIHRoaXMuYW5hbHl6ZUdlb21ldHJ5VHlwZShrLCB2KTsKCSAgICAgICAgfQoKCSAgICAgICAgdG9Db29yZHNBcnJheSgpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmxhdExuZ0FycmF5Lm1hcChsYXRMbmcgPT4gW2xhdExuZy5sb24sIGxhdExuZy5sYXRdKTsKCSAgICAgICAgfQoKCSAgICAgICAgdG9GZWF0dXJlQXJyYXkoKSB7CgkgICAgICAgICAgICBsZXQgY29vcmRzQXJyYXkgPSB0aGlzLnRvQ29vcmRzQXJyYXkoKTsKCSAgICAgICAgICAgIGlmIChjb29yZHNBcnJheS5sZW5ndGggPiAxKSB7CgkgICAgICAgICAgICAgICAgY29vcmRzQXJyYXkgPSBzdHJUb0Zsb2F0KGNvb3Jkc0FycmF5KTsKCSAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZSA9IHsKCSAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLAoJICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5nZXRDb21wb3NpdGVJZCgpLAoJICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLmdldFByb3BzKCksCgkgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnTGluZVN0cmluZycsCgkgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogY29vcmRzQXJyYXkKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH07CgoJICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUG9seWdvbiAmJiBpc1JpbmcoY29vcmRzQXJyYXkpKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyaW5nRGlyZWN0aW9uKGNvb3Jkc0FycmF5KSAhPT0gJ2NvdW50ZXJjbG9ja3dpc2UnKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjb29yZHNBcnJheS5yZXZlcnNlKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZ2VvbWV0cnkgPSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUG9seWdvbicsCgkgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW2Nvb3Jkc0FycmF5XQoJICAgICAgICAgICAgICAgICAgICB9OwoKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmZWF0dXJlXTsKCSAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgIHJldHVybiBbZmVhdHVyZV07CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgcmV0dXJuIFtdOwoJICAgICAgICB9CgkgICAgfQoKCSAgICBjbGFzcyBSZWxhdGlvbiBleHRlbmRzIE9zbU9iamVjdCB7CgkgICAgICAgIGNvbnN0cnVjdG9yKGlkLCByZWZFbGVtcykgewoJICAgICAgICAgICAgc3VwZXIoJ3JlbGF0aW9uJywgaWQsIHJlZkVsZW1zKTsKCSAgICAgICAgICAgIHRoaXMucmVsYXRpb25zID0gW107CgkgICAgICAgICAgICB0aGlzLm5vZGVzID0gW107CgkgICAgICAgICAgICB0aGlzLmJvdW5kcyA9IG51bGw7CgkgICAgICAgIH0KCgkgICAgICAgIHNldEJvdW5kcyhib3VuZHMpIHsKCSAgICAgICAgICAgIHRoaXMuYm91bmRzID0gYm91bmRzOwoJICAgICAgICB9CgoJICAgICAgICBhZGRNZW1iZXIobWVtYmVyKSB7CgkgICAgICAgICAgICBzd2l0Y2ggKG1lbWJlci50eXBlKSB7CgkgICAgICAgICAgICAgICAgLy8gc3VwZXIgcmVsYXRpb24sIG5lZWQgdG8gZG8gY29tYmluYXRpb24KCSAgICAgICAgICAgICAgICBjYXNlICdyZWxhdGlvbic6CgkgICAgICAgICAgICAgICAgICAgIGxldCBiaW5kZXIgPSBuZXcgTGF0ZUJpbmRlcih0aGlzLnJlbGF0aW9ucywgZnVuY3Rpb24gKGlkKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVsYXRpb24gPSB0aGlzLnJlZkVsZW1zLmdldChgcmVsYXRpb24vJHtpZH1gKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGlvbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLnJlZkNvdW50Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbGF0aW9uOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLCBbbWVtYmVyLnJlZl0pOwoJICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGF0aW9ucy5wdXNoKGJpbmRlcik7CgkgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmRWxlbXMuYWRkQmluZGVyKGJpbmRlcik7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKCSAgICAgICAgICAgICAgICBjYXNlICd3YXknOgoJICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbWJlci5yb2xlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXIucm9sZSA9ICcnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGxldCB3YXlzID0gdGhpc1ttZW1iZXIucm9sZV07CgkgICAgICAgICAgICAgICAgICAgIGlmICghd2F5cykgewoJICAgICAgICAgICAgICAgICAgICAgICAgd2F5cyA9IHRoaXNbbWVtYmVyLnJvbGVdID0gW107CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgaWYgKG1lbWJlci5nZW9tZXRyeSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdheSA9IG5ldyBXYXkobWVtYmVyLnJlZiwgdGhpcy5yZWZFbGVtcyk7CgkgICAgICAgICAgICAgICAgICAgICAgICB3YXkuc2V0TGF0TG5nQXJyYXkobWVtYmVyLmdlb21ldHJ5KTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdheS5yZWZDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgd2F5cy5wdXNoKHdheSk7CgkgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVtYmVyLm5vZGVzKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2F5ID0gbmV3IFdheShtZW1iZXIucmVmLCB0aGlzLnJlZkVsZW1zKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG5pZCBvZiBtZW1iZXIubm9kZXMpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXkuYWRkTm9kZVJlZihuaWQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgd2F5LnJlZkNvdW50Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICB3YXlzLnB1c2god2F5KTsKCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiaW5kZXIgPSBuZXcgTGF0ZUJpbmRlcih3YXlzLCBmdW5jdGlvbiAoaWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2F5ID0gdGhpcy5yZWZFbGVtcy5nZXQoYHdheS8ke2lkfWApOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F5LnJlZkNvdW50Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YXk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcywgW21lbWJlci5yZWZdKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdheXMucHVzaChiaW5kZXIpOwoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZFbGVtcy5hZGRCaW5kZXIoYmluZGVyKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCgkgICAgICAgICAgICAgICAgY2FzZSAnbm9kZSc6CgkgICAgICAgICAgICAgICAgICAgIGxldCBub2RlID0gbnVsbDsKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1lbWJlci5sYXQgJiYgbWVtYmVyLmxvbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBOb2RlKG1lbWJlci5yZWYsIHRoaXMucmVmRWxlbXMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRMYXRMbmcoeyBsb246IG1lbWJlci5sb24sIGxhdDogbWVtYmVyLmxhdCB9KTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZW1iZXIudGFncykgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkVGFncyhtZW1iZXIudGFncyk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMobWVtYmVyKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbJ2lkJywgJ3R5cGUnLCAnbGF0JywgJ2xvbiddLmluZGV4T2YoaykgPCAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkUHJvcChrLCB2KTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZWZDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5vZGUpOwoJICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJpbmRlciA9IG5ldyBMYXRlQmluZGVyKHRoaXMubm9kZXMsIGZ1bmN0aW9uIChpZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy5yZWZFbGVtcy5nZXQoYG5vZGUvJHtpZH1gKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlZkNvdW50Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMsIFttZW1iZXIucmVmXSk7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2goYmluZGVyKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmRWxlbXMuYWRkQmluZGVyKGJpbmRlcik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAgIHRvRmVhdHVyZUFycmF5KCkgewoJICAgICAgICAgICAgY29uc3QgY29uc3RydWN0U3RyaW5nR2VvbWV0cnkgPSAod3MpID0+IHsKCSAgICAgICAgICAgICAgICBsZXQgc3RyaW5ncyA9IHdzID8gd3MudG9TdHJpbmdzKCkgOiBbXTsKCSAgICAgICAgICAgICAgICBpZiAoc3RyaW5ncy5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmdzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJywKCSAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBzdHJpbmdzWzBdCgkgICAgICAgICAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnTXVsdGlMaW5lU3RyaW5nJywKCSAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBzdHJpbmdzCgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgICAgICB9OwoKCSAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdFBvbHlnb25HZW9tZXRyeSA9IChvd3MsIGl3cykgPT4gewoJICAgICAgICAgICAgICAgIGxldCBvdXRlclJpbmdzID0gb3dzID8gb3dzLnRvUmluZ3MoJ2NvdW50ZXJjbG9ja3dpc2UnKSA6IFtdLAoJICAgICAgICAgICAgICAgICAgICBpbm5lclJpbmdzID0gaXdzID8gaXdzLnRvUmluZ3MoJ2Nsb2Nrd2lzZScpIDogW107CgoJICAgICAgICAgICAgICAgIGlmIChvdXRlclJpbmdzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgICAgICAgICAgbGV0IGNvbXBvc2l0UG9seW9ucyA9IFtdOwoKCSAgICAgICAgICAgICAgICAgICAgbGV0IHJpbmcgPSBudWxsOwoJICAgICAgICAgICAgICAgICAgICBmb3IgKHJpbmcgb2Ygb3V0ZXJSaW5ncykKCSAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0UG9seW9ucy5wdXNoKFtyaW5nXSk7CgoJICAgICAgICAgICAgICAgICAgICAvLyBsaW5rIGlubmVyIHBvbHlnb25zIHRvIG91dGVyIGNvbnRhaW5lcnMKCSAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJpbmcgPSBpbm5lclJpbmdzLnNoaWZ0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGlkeCBpbiBvdXRlclJpbmdzKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHB0SW5zaWRlUG9seWdvbihmaXJzdChyaW5nKSwgb3V0ZXJSaW5nc1tpZHhdKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb3NpdFBvbHlvbnNbaWR4XS5wdXNoKHJpbmcpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0cnVjdCB0aGUgUG9seWdvbi9NdWx0aVBvbHlnb24gZ2VvbWV0cnkKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBvc2l0UG9seW9ucy5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BvbHlnb24nLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb21wb3NpdFBvbHlvbnNbMF0KCSAgICAgICAgICAgICAgICAgICAgICAgIH07CgkgICAgICAgICAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnTXVsdGlQb2x5Z29uJywKCSAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb21wb3NpdFBvbHlvbnMKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgICAgICB9OwoKCSAgICAgICAgICAgIGxldCBwb2x5Z29uRmVhdHVyZXMgPSBbXSwgc3RyaW5nRmVhdHVyZXMgPSBbXSwgcG9pbnRGZWF0dXJlcyA9IFtdOwoJICAgICAgICAgICAgY29uc3Qgd2F5c0ZpZWxkTmFtZXMgPSBbJ291dGVyJywgJ2lubmVyJywgJyddOwoJICAgICAgICAgICAgLy8gbmVlZCB0byBkbyBjb21iaW5hdGlvbiB3aGVuIHRoZXJlJ3JlIG5lc3RlZCByZWxhdGlvbnMKCSAgICAgICAgICAgIGZvciAobGV0IHJlbGF0aW9uIG9mIHRoaXMucmVsYXRpb25zKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlbGF0aW9uKSB7CgkgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGZpZWxkTmFtZSBvZiB3YXlzRmllbGROYW1lcykgewoJICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdheXMgPSByZWxhdGlvbltmaWVsZE5hbWVdOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdheXMpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc1dheXMgPSB0aGlzW2ZpZWxkTmFtZV07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNXYXlzKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtdLnNwbGljZS5hcHBseSh0aGlzV2F5cywgW3RoaXNXYXlzLmxlbmd0aCwgMF0uY29uY2F0KHdheXMpKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2ZpZWxkTmFtZV0gPSB3YXlzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICBmb3IgKGxldCBmaWVsZE5hbWUgb2Ygd2F5c0ZpZWxkTmFtZXMpIHsKCSAgICAgICAgICAgICAgICBsZXQgd2F5cyA9IHRoaXNbZmllbGROYW1lXTsKCSAgICAgICAgICAgICAgICBpZiAod2F5cykgewoJICAgICAgICAgICAgICAgICAgICB0aGlzW2ZpZWxkTmFtZV0gPSBuZXcgV2F5Q29sbGVjdGlvbigpOwoJICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB3YXkgb2Ygd2F5cykgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tmaWVsZE5hbWVdLmFkZFdheSh3YXkpOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoKCSAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IG51bGw7CgoJICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSB7CgkgICAgICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLAoJICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdldENvbXBvc2l0ZUlkKCksCgkgICAgICAgICAgICAgICAgYmJveDogdGhpcy5ib3VuZHMsCgkgICAgICAgICAgICAgICAgcHJvcGVydGllczogdGhpcy5nZXRQcm9wcygpCgkgICAgICAgICAgICB9OwoKCSAgICAgICAgICAgIGlmICghdGhpcy5ib3VuZHMpIHsKCSAgICAgICAgICAgICAgICBkZWxldGUgZmVhdHVyZS5iYm94OwoJICAgICAgICAgICAgfQoKCSAgICAgICAgICAgIGlmICh0aGlzLm91dGVyKSB7CgkgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBjb25zdHJ1Y3RQb2x5Z29uR2VvbWV0cnkodGhpcy5vdXRlciwgdGhpcy5pbm5lcik7CgkgICAgICAgICAgICAgICAgaWYgKGdlb21ldHJ5KSB7CgkgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZ2VvbWV0cnkgPSBnZW9tZXRyeTsKCSAgICAgICAgICAgICAgICAgICAgcG9seWdvbkZlYXR1cmVzLnB1c2goZmVhdHVyZSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAodGhpc1snJ10pIHsKCSAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IGNvbnN0cnVjdFN0cmluZ0dlb21ldHJ5KHRoaXNbJyddKTsKCSAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnkpIHsKCSAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5nZW9tZXRyeSA9IGdlb21ldHJ5OwoJICAgICAgICAgICAgICAgICAgICBzdHJpbmdGZWF0dXJlcy5wdXNoKGZlYXR1cmUpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIHRoaXMubm9kZXMpIHsKCSAgICAgICAgICAgICAgICBwb2ludEZlYXR1cmVzID0gcG9pbnRGZWF0dXJlcy5jb25jYXQobm9kZS50b0ZlYXR1cmVBcnJheSgpKTsKCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICByZXR1cm4gcG9seWdvbkZlYXR1cmVzLmNvbmNhdChzdHJpbmdGZWF0dXJlcykuY29uY2F0KHBvaW50RmVhdHVyZXMpOwoJICAgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4geyBOb2RlLCBXYXksIFJlbGF0aW9uIH07Cgl9KSgpOwoKCXZhciB4bWxwYXJzZXIgPSAoKCkgPT4gewoKCSAgICBmdW5jdGlvbiBjb25kaXRpb25lZChldnQpIHsKCSAgICAgICAgcmV0dXJuIGV2dC5tYXRjaCgvXiguKz8pXFsoLis/KVxdPiQvZykgIT0gbnVsbDsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIHBhcnNlRXZlbnQoZXZ0KSB7CgkgICAgICAgIGxldCBtYXRjaCA9IC9eKC4rPylcWyguKz8pXF0+JC9nLmV4ZWMoZXZ0KTsKCSAgICAgICAgaWYgKG1hdGNoKSB7CgkgICAgICAgICAgICByZXR1cm4geyBldnQ6IG1hdGNoWzFdICsgJz4nLCBleHA6IG1hdGNoWzJdIH07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHsgZXZ0OiBldnQgfTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGdlbkNvbmRpdGlvbkZ1bmMoY29uZCkgewoJICAgICAgICBsZXQgYm9keSA9ICdyZXR1cm4gJyArIGNvbmQucmVwbGFjZSgvKFwkLis/KSg/PVs9IS5dKS9nLCAnbm9kZS4kJicpICsgJzsnOwoJICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdub2RlJywgYm9keSk7CgkgICAgfQoKCSAgICByZXR1cm4gY2xhc3MgewoJICAgICAgICBjb25zdHJ1Y3RvcihvcHRzKSB7CgkgICAgICAgICAgICBpZiAob3B0cykgewoJICAgICAgICAgICAgICAgIHRoaXMucXVlcnlQYXJlbnQgPSBvcHRzLnF1ZXJ5UGFyZW50ID8gdHJ1ZSA6IGZhbHNlOwoJICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NpdmUgPSBvcHRzLnByb2dyZXNzaXZlOwoJICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5UGFyZW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50TWFwID0gbmV3IFdlYWtNYXAoKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aGlzLmV2dExpc3RlbmVycyA9IHt9OwoJICAgICAgICB9CgoJICAgICAgICBwYXJzZSh4bWwsIHBhcmVudCwgZGlyKSB7CgkgICAgICAgICAgICBkaXIgPSBkaXIgPyBkaXIgKyAnLicgOiAnJzsKCSAgICAgICAgICAgIGxldCBub2RlUmVnRXggPSAvPChbXiA+XC9dKykoLio/KT4vbWcsIG5vZGVNYXRjaCA9IG51bGwsIG5vZGVzID0gW107CgkgICAgICAgICAgICB3aGlsZSAobm9kZU1hdGNoID0gbm9kZVJlZ0V4LmV4ZWMoeG1sKSkgewoJICAgICAgICAgICAgICAgIGxldCB0YWcgPSBub2RlTWF0Y2hbMV0sIG5vZGUgPSB7ICR0YWc6IHRhZyB9LCBmdWxsVGFnID0gZGlyICsgdGFnOwoKCSAgICAgICAgICAgICAgICBsZXQgYXR0clRleHQgPSBub2RlTWF0Y2hbMl0udHJpbSgpLCBjbG9zZWQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICBpZiAoYXR0clRleHQuZW5kc1dpdGgoJy8nKSB8fCB0YWcuc3RhcnRzV2l0aCgnPycpIHx8IHRhZy5zdGFydHNXaXRoKCchJykpIHsKCSAgICAgICAgICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgIGxldCBhdHRSZWdFeDEgPSAvKFteIF0rPyk9IiguKz8pIi9nLCBhdHRSZWdFeDIgPSAvKFteIF0rPyk9JyguKz8pJy9nOwoJICAgICAgICAgICAgICAgIGxldCBhdHRNYXRjaCA9IG51bGwsIGhhc0F0dHJzID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgd2hpbGUgKGF0dE1hdGNoID0gYXR0UmVnRXgxLmV4ZWMoYXR0clRleHQpKSB7CgkgICAgICAgICAgICAgICAgICAgIGhhc0F0dHJzID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgbm9kZVthdHRNYXRjaFsxXV0gPSBhdHRNYXRjaFsyXTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFoYXNBdHRycykKCSAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGF0dE1hdGNoID0gYXR0UmVnRXgyLmV4ZWMoYXR0clRleHQpKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBoYXNBdHRycyA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICBub2RlW2F0dE1hdGNoWzFdXSA9IGF0dE1hdGNoWzJdOwoJICAgICAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgIGlmICghaGFzQXR0cnMgJiYgYXR0clRleHQgIT09ICcnKSB7CgkgICAgICAgICAgICAgICAgICAgIG5vZGUudGV4dCA9IGF0dHJUZXh0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9ncmVzc2l2ZSkgewoJICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoYDwke2Z1bGxUYWd9PmAsIG5vZGUsIHBhcmVudCk7CgkgICAgICAgICAgICAgICAgfQoKCSAgICAgICAgICAgICAgICBpZiAoIWNsb3NlZCkgewoJICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXJSZWdFeCA9IG5ldyBSZWdFeHAoYChbXl0rPyk8XC8ke3RhZ30+YCwgJ2cnKTsKCSAgICAgICAgICAgICAgICAgICAgaW5uZXJSZWdFeC5sYXN0SW5kZXggPSBub2RlUmVnRXgubGFzdEluZGV4OwoJICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXJNYXRjaCA9IGlubmVyUmVnRXguZXhlYyh4bWwpOwoJICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJNYXRjaCAmJiBpbm5lck1hdGNoWzFdKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBub2RlUmVnRXgubGFzdEluZGV4ID0gaW5uZXJSZWdFeC5sYXN0SW5kZXg7CgkgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXJOb2RlcyA9IHRoaXMucGFyc2UoaW5uZXJNYXRjaFsxXSwgbm9kZSwgZnVsbFRhZyk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJOb2Rlcy5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS4kaW5uZXJOb2RlcyA9IGlubmVyTm9kZXM7CgkgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuJGlubmVyVGV4dCA9IGlubmVyTWF0Y2hbMV07CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlcnlQYXJlbnQgJiYgcGFyZW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50TWFwLnNldChub2RlLCBwYXJlbnQpOwoJICAgICAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NpdmUpIHsKCSAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KGA8LyR7ZnVsbFRhZ30+YCwgbm9kZSwgcGFyZW50KTsKCSAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgcmV0dXJuIG5vZGVzOwoJICAgICAgICB9CgoJICAgICAgICBnZXRQYXJlbnQobm9kZSkgewoJICAgICAgICAgICAgaWYgKHRoaXMucXVlcnlQYXJlbnQpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRNYXAuZ2V0KG5vZGUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCgkgICAgICAgICNhZGRMaXN0ZW5lcihldnQsIGZ1bmMpIHsKCSAgICAgICAgICAgIGxldCBmdW5jcyA9IHRoaXMuZXZ0TGlzdGVuZXJzW2V2dF07CgkgICAgICAgICAgICBpZiAoZnVuY3MpIHsKCSAgICAgICAgICAgICAgICBmdW5jcy5wdXNoKGZ1bmMpOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmV2dExpc3RlbmVyc1tldnRdID0gW2Z1bmNdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgoJICAgICAgICAvLyBzdXBwb3J0IGphdmFzY3JpcHQgY29uZGl0aW9uIGZvciB0aGUgbGFzdCB0YWcKCSAgICAgICAgYWRkTGlzdGVuZXIoZXZ0LCBmdW5jKSB7CgkgICAgICAgICAgICBpZiAoY29uZGl0aW9uZWQoZXZ0KSkgewoJICAgICAgICAgICAgICAgIC8vIGZ1bmMucHJvdG90eXBlID0gZXZ0OwoJICAgICAgICAgICAgICAgIGV2dCA9IHBhcnNlRXZlbnQoZXZ0KTsKCSAgICAgICAgICAgICAgICBmdW5jLmNvbmRpdGlvbiA9IGdlbkNvbmRpdGlvbkZ1bmMoZXZ0LmV4cCk7CgkgICAgICAgICAgICAgICAgZXZ0ID0gZXZ0LmV2dDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHRoaXMuI2FkZExpc3RlbmVyKGV2dCwgZnVuYyk7CgkgICAgICAgIH0KCgkgICAgICAgICNyZW1vdmVMaXN0ZW5lcihldnQsIGZ1bmMpIHsKCSAgICAgICAgICAgIGxldCBmdW5jcyA9IHRoaXMuZXZ0TGlzdGVuZXJzW2V2dF07CgkgICAgICAgICAgICBsZXQgaWR4ID0gbnVsbDsKCSAgICAgICAgICAgIGlmIChmdW5jcyAmJiAoaWR4ID0gZnVuY3MuaW5kZXhPZihmdW5jKSkgPj0gMCkgewoJICAgICAgICAgICAgICAgIGZ1bmNzLnNwbGljZShpZHgsIDEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgoJICAgICAgICByZW1vdmVMaXN0ZW5lcihldnQsIGZ1bmMpIHsKCSAgICAgICAgICAgIGlmIChjb25kaXRpb25lZChldnQpKSB7CgkgICAgICAgICAgICAgICAgZXZ0ID0gcGFyc2VFdmVudChldnQpOwoJICAgICAgICAgICAgICAgIGV2dCA9IGV2dC5ldnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aGlzLiNyZW1vdmVMaXN0ZW5lcihldnQsIGZ1bmMpOwoJICAgICAgICB9CgoJICAgICAgICBlbWl0KGV2dCwgLi4uYXJncykgewoJICAgICAgICAgICAgbGV0IGZ1bmNzID0gdGhpcy5ldnRMaXN0ZW5lcnNbZXZ0XTsKCSAgICAgICAgICAgIGlmIChmdW5jcykgewoJICAgICAgICAgICAgICAgIGZvciAobGV0IGZ1bmMgb2YgZnVuY3MpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmMuY29uZGl0aW9uKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnVuYy5jb25kaXRpb24uYXBwbHkobnVsbCwgYXJncykgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBseShudWxsLCBhcmdzKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgb24oZXZ0LCBmdW5jKSB7CgkgICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKGV2dCwgZnVuYyk7CgkgICAgICAgIH0KCgkgICAgICAgIG9mZihldnQsIGZ1bmMpIHsKCSAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZ0LCBmdW5jKTsKCSAgICAgICAgfQoJICAgIH07Cgl9KSgpOwoKCWNvbnN0IHsgTm9kZSwgV2F5LCBSZWxhdGlvbiB9ID0gb3Ntb2JqcywKCSAgICB7IHB1cmdlUHJvcHMsIFJlZkVsZW1lbnRzIH0gPSB1dGlscywKCSAgICBYbWxQYXJzZXIgPSB4bWxwYXJzZXI7CgoJdmFyIGxpYiA9IChvc20sIG9wdHMpID0+IHsKCSAgICBsZXQgY29tcGxldGVGZWF0dXJlID0gZmFsc2UsIHJlbmRlclRhZ2dlZCA9IGZhbHNlLCBleGNsdWRlV2F5ID0gdHJ1ZTsKCgkgICAgY29uc3QgcGFyc2VPcHRzID0gb3B0cyA9PiB7CgkgICAgICAgIGlmIChvcHRzKSB7CgkgICAgICAgICAgICBjb21wbGV0ZUZlYXR1cmUgPSBvcHRzLmNvbXBsZXRlRmVhdHVyZSB8fCBvcHRzLmFsbEZlYXR1cmVzID8gdHJ1ZSA6IGZhbHNlOwoJICAgICAgICAgICAgcmVuZGVyVGFnZ2VkID0gb3B0cy5yZW5kZXJUYWdnZWQgPyB0cnVlIDogZmFsc2U7CgkgICAgICAgICAgICBsZXQgd2F5T3B0ID0gb3B0cy5zdXBwcmVzc1dheSB8fCBvcHRzLmV4Y2x1ZGVXYXk7CgkgICAgICAgICAgICBpZiAod2F5T3B0ICE9PSB1bmRlZmluZWQgJiYgIXdheU9wdCkgewoJICAgICAgICAgICAgICAgIGV4Y2x1ZGVXYXkgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgoJICAgIHBhcnNlT3B0cyhvcHRzKTsKCgkgICAgY29uc3QgZGV0ZWN0Rm9ybWF0ID0gb3NtID0+IHsKCSAgICAgICAgaWYgKG9zbS5lbGVtZW50cykgewoJICAgICAgICAgICAgcmV0dXJuICdqc29uJzsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3NtLmluZGV4T2YoJzxvc20nKSA+PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gJ3htbCc7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG9zbS50cmltKCkuc3RhcnRzV2l0aCgneycpKSB7CgkgICAgICAgICAgICByZXR1cm4gJ2pzb24tcmF3JzsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gJ2ludmFsaWQnOwoJICAgIH07CgoJICAgIGxldCBmb3JtYXQgPSBkZXRlY3RGb3JtYXQob3NtKTsKCgkgICAgbGV0IHJlZkVsZW1lbnRzID0gbmV3IFJlZkVsZW1lbnRzKCksIGZlYXR1cmVBcnJheSA9IFtdOwoKCSAgICBjb25zdCBhbmFseXplRmVhdHVyZXNGcm9tSnNvbiA9IG9zbSA9PiB7CgkgICAgICAgIGZvciAobGV0IGVsZW0gb2Ygb3NtLmVsZW1lbnRzKSB7CgkgICAgICAgICAgICBzd2l0Y2ggKGVsZW0udHlwZSkgewoJICAgICAgICAgICAgICAgIGNhc2UgJ25vZGUnOgoJICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IG5ldyBOb2RlKGVsZW0uaWQsIHJlZkVsZW1lbnRzKTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0udGFncykgewoJICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5hZGRUYWdzKGVsZW0udGFncyk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgbm9kZS5hZGRQcm9wcyhwdXJnZVByb3BzKGVsZW0sIFsnaWQnLCAndHlwZScsICd0YWdzJywgJ2xhdCcsICdsb24nXSkpOwoJICAgICAgICAgICAgICAgICAgICBub2RlLnNldExhdExuZyhlbGVtKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgoJICAgICAgICAgICAgICAgIGNhc2UgJ3dheSc6CgkgICAgICAgICAgICAgICAgICAgIGxldCB3YXkgPSBuZXcgV2F5KGVsZW0uaWQsIHJlZkVsZW1lbnRzKTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0udGFncykgewoJICAgICAgICAgICAgICAgICAgICAgICAgd2F5LmFkZFRhZ3MoZWxlbS50YWdzKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB3YXkuYWRkUHJvcHMocHVyZ2VQcm9wcyhlbGVtLCBbJ2lkJywgJ3R5cGUnLCAndGFncycsICdub2RlcycsICdnZW9tZXRyeSddKSk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLm5vZGVzKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBuIG9mIGVsZW0ubm9kZXMpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXkuYWRkTm9kZVJlZihuKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtLmdlb21ldHJ5KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB3YXkuc2V0TGF0TG5nQXJyYXkoZWxlbS5nZW9tZXRyeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgoJICAgICAgICAgICAgICAgIGNhc2UgJ3JlbGF0aW9uJzoKCSAgICAgICAgICAgICAgICAgICAgbGV0IHJlbGF0aW9uID0gbmV3IFJlbGF0aW9uKGVsZW0uaWQsIHJlZkVsZW1lbnRzKTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uYm91bmRzKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbi5zZXRCb3VuZHMoW3BhcnNlRmxvYXQoZWxlbS5ib3VuZHMubWlubG9uKSwgcGFyc2VGbG9hdChlbGVtLmJvdW5kcy5taW5sYXQpLCBwYXJzZUZsb2F0KGVsZW0uYm91bmRzLm1heGxvbiksIHBhcnNlRmxvYXQoZWxlbS5ib3VuZHMubWF4bGF0KV0pOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLnRhZ3MpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLmFkZFRhZ3MoZWxlbS50YWdzKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByZWxhdGlvbi5hZGRQcm9wcyhwdXJnZVByb3BzKGVsZW0sIFsnaWQnLCAndHlwZScsICd0YWdzJywgJ2JvdW5kcycsICdtZW1iZXJzJ10pKTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0ubWVtYmVycykgewoJICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbWVtYmVyIG9mIGVsZW0ubWVtYmVycykgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLmFkZE1lbWJlcihtZW1iZXIpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCgkgICAgY29uc3QgYW5hbHl6ZUZlYXR1cmVzRnJvbVhtbCA9IG9zbSA9PiB7CgkgICAgICAgIGNvbnN0IHhtbFBhcnNlciA9IG5ldyBYbWxQYXJzZXIoeyBwcm9ncmVzc2l2ZTogdHJ1ZSB9KTsKCgkgICAgICAgIHhtbFBhcnNlci5vbignPC9vc20ubm9kZT4nLCBub2RlID0+IHsKCSAgICAgICAgICAgIGxldCBuZCA9IG5ldyBOb2RlKG5vZGUuaWQsIHJlZkVsZW1lbnRzKTsKCSAgICAgICAgICAgIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhub2RlKSkKCSAgICAgICAgICAgICAgICBpZiAoIWsuc3RhcnRzV2l0aCgnJCcpICYmIFsnaWQnLCAnbG9uJywgJ2xhdCddLmluZGV4T2YoaykgPCAwKSB7CgkgICAgICAgICAgICAgICAgICAgIG5kLmFkZFByb3Aoaywgdik7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmQuc2V0TGF0TG5nKG5vZGUpOwoJICAgICAgICAgICAgaWYgKG5vZGUuJGlubmVyTm9kZXMpIHsKCSAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmQgb2Ygbm9kZS4kaW5uZXJOb2RlcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW5kLiR0YWcgPT09ICd0YWcnKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBuZC5hZGRUYWcoaW5kLmssIGluZC52KTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfSk7CgoJICAgICAgICB4bWxQYXJzZXIub24oJzwvb3NtLndheT4nLCBub2RlID0+IHsKCSAgICAgICAgICAgIGxldCB3YXkgPSBuZXcgV2F5KG5vZGUuaWQsIHJlZkVsZW1lbnRzKTsKCSAgICAgICAgICAgIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhub2RlKSkgewoJICAgICAgICAgICAgICAgIGlmICghay5zdGFydHNXaXRoKCckJykgJiYgWydpZCddLmluZGV4T2YoaykgPCAwKSB7CgkgICAgICAgICAgICAgICAgICAgIHdheS5hZGRQcm9wKGssIHYpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChub2RlLiRpbm5lck5vZGVzKSB7CgkgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kIG9mIG5vZGUuJGlubmVyTm9kZXMpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGluZC4kdGFnID09PSAnbmQnKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kLmxvbiAmJiBpbmQubGF0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F5LmFkZExhdExuZyhpbmQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmQucmVmKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F5LmFkZE5vZGVSZWYoaW5kLnJlZik7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5kLiR0YWcgPT09ICd0YWcnKQoJICAgICAgICAgICAgICAgICAgICAgICAgd2F5LmFkZFRhZyhpbmQuaywgaW5kLnYpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfSk7CgoJICAgICAgICB4bWxQYXJzZXIub24oJzxvc20ucmVsYXRpb24+Jywgbm9kZSA9PiB7CgkgICAgICAgICAgICBuZXcgUmVsYXRpb24obm9kZS5pZCwgcmVmRWxlbWVudHMpOwoJICAgICAgICB9KTsKCgkgICAgICAgIHhtbFBhcnNlci5vbignPC9vc20ucmVsYXRpb24ubWVtYmVyPicsIChub2RlLCBwYXJlbnQpID0+IHsKCSAgICAgICAgICAgIGxldCByZWxhdGlvbiA9IHJlZkVsZW1lbnRzLmdldChgcmVsYXRpb24vJHtwYXJlbnQuaWR9YCk7CgkgICAgICAgICAgICBsZXQgbWVtYmVyID0gewoJICAgICAgICAgICAgICAgIHR5cGU6IG5vZGUudHlwZSwKCSAgICAgICAgICAgICAgICByb2xlOiBub2RlLnJvbGUgPyBub2RlLnJvbGUgOiAnJywKCSAgICAgICAgICAgICAgICByZWY6IG5vZGUucmVmCgkgICAgICAgICAgICB9OwoJICAgICAgICAgICAgaWYgKG5vZGUubGF0ICYmIG5vZGUubG9uKSB7CgkgICAgICAgICAgICAgICAgbWVtYmVyLmxhdCA9IG5vZGUubGF0LCBtZW1iZXIubG9uID0gbm9kZS5sb24sIG1lbWJlci50YWdzID0ge307CgkgICAgICAgICAgICAgICAgZm9yIChsZXQgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKG5vZGUpKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICghay5zdGFydHNXaXRoKCckJykgJiYgWyd0eXBlJywgJ2xhdCcsICdsb24nXS5pbmRleE9mKGspIDwgMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyW2tdID0gdjsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChub2RlLiRpbm5lck5vZGVzKSB7CgkgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gW107CgkgICAgICAgICAgICAgICAgbGV0IG5vZGVzID0gW107CgkgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kIG9mIG5vZGUuJGlubmVyTm9kZXMpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGluZC5sYXQgJiYgaW5kLmxvbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkucHVzaChpbmQpOwoJICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChpbmQucmVmKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnkubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICBtZW1iZXIuZ2VvbWV0cnkgPSBnZW9tZXRyeTsKCSAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgICAgICAgICAgbWVtYmVyLm5vZGVzID0gbm9kZXM7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVsYXRpb24uYWRkTWVtYmVyKG1lbWJlcik7CgkgICAgICAgIH0pOwoKCSAgICAgICAgeG1sUGFyc2VyLm9uKCc8L29zbS5yZWxhdGlvbi5ib3VuZHM+JywgKG5vZGUsIHBhcmVudCkgPT4gewoJICAgICAgICAgICAgcmVmRWxlbWVudHMuZ2V0KGByZWxhdGlvbi8ke3BhcmVudC5pZH1gKS5zZXRCb3VuZHMoW3BhcnNlRmxvYXQobm9kZS5taW5sb24pLCBwYXJzZUZsb2F0KG5vZGUubWlubGF0KSwgcGFyc2VGbG9hdChub2RlLm1heGxvbiksIHBhcnNlRmxvYXQobm9kZS5tYXhsYXQpXSk7CgkgICAgICAgIH0pOwoKCSAgICAgICAgeG1sUGFyc2VyLm9uKCc8L29zbS5yZWxhdGlvbi50YWc+JywgKG5vZGUsIHBhcmVudCkgPT4gewoJICAgICAgICAgICAgcmVmRWxlbWVudHMuZ2V0KGByZWxhdGlvbi8ke3BhcmVudC5pZH1gKS5hZGRUYWcobm9kZS5rLCBub2RlLnYpOwoJICAgICAgICB9KTsKCgkgICAgICAgIHhtbFBhcnNlci5wYXJzZShvc20pOwoJICAgIH07CgoJICAgIGlmIChmb3JtYXQgPT09ICdqc29uLXJhdycpIHsKCSAgICAgICAgb3NtID0gSlNPTi5wYXJzZShvc20pOwoJICAgICAgICBpZiAob3NtLmVsZW1lbnRzKSB7CgkgICAgICAgICAgICBmb3JtYXQgPSAnanNvbic7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBmb3JtYXQgPSAnaW52YWxpZCc7CgkgICAgICAgIH0KCSAgICB9CgoJICAgIGlmIChmb3JtYXQgPT09ICdqc29uJykgewoJICAgICAgICBhbmFseXplRmVhdHVyZXNGcm9tSnNvbihvc20pOwoJICAgIH0gZWxzZSBpZiAoZm9ybWF0ID09PSAneG1sJykgewoJICAgICAgICBhbmFseXplRmVhdHVyZXNGcm9tWG1sKG9zbSk7CgkgICAgfQoKCSAgICByZWZFbGVtZW50cy5iaW5kQWxsKCk7CgoJICAgIGZvciAobGV0IHYgb2YgcmVmRWxlbWVudHMudmFsdWVzKCkpIHsKCSAgICAgICAgaWYgKHYucmVmQ291bnQgPD0gMCB8fCAodi5oYXNUYWcgJiYgcmVuZGVyVGFnZ2VkICYmICEodiBpbnN0YW5jZW9mIFdheSAmJiBleGNsdWRlV2F5KSkpIHsKCSAgICAgICAgICAgIGxldCBmZWF0dXJlcyA9IHYudG9GZWF0dXJlQXJyYXkoKTsKCSAgICAgICAgICAgIC8vIHJldHVybiB0aGUgZmlyc3QgZ2VvbWV0cnkgb2YgdGhlIGZpcnN0IHJlbGF0aW9uIGVsZW1lbnQKCSAgICAgICAgICAgIGlmICh2IGluc3RhbmNlb2YgUmVsYXRpb24gJiYgIWNvbXBsZXRlRmVhdHVyZSAmJiBmZWF0dXJlcy5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzWzBdLmdlb21ldHJ5OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmVhdHVyZUFycmF5ID0gZmVhdHVyZUFycmF5LmNvbmNhdChmZWF0dXJlcyk7CgkgICAgICAgIH0KCSAgICB9CgoJICAgIHJldHVybiB7IHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsIGZlYXR1cmVzOiBmZWF0dXJlQXJyYXkgfTsKCX07CgoJdmFyIG9zbTJnZW9qc29uID0gLypAX19QVVJFX18qL2dldERlZmF1bHRFeHBvcnRGcm9tQ2pzKGxpYik7CgoJY2xhc3MgQ29udmVydGVyIHsKCSAgICBjb25zdHJ1Y3Rvcihmb3JtYXQsIGRhdGEsIG9wdGlvbnMgPSB7fSkgewoJICAgICAgICAvKioKCSAgICAgICAgICogQ3JlYXRlcyBhIGJsYW5rIEdlb0pTT04gZmVhdHVyZSBjb2xsZWN0aW9uLgoJICAgICAgICAgKiBAcmV0dXJucyBBIG5ldyBHZW9KU09OIGZlYXR1cmUgY29sbGVjdGlvbiB3aXRoIG5vIGZlYXR1cmVzLgoJICAgICAgICAgKi8KCSAgICAgICAgdGhpcy5ibGFua0dlb0pTT04gPSAoKSA9PiAoewoJICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKCSAgICAgICAgICAgIGZlYXR1cmVzOiBbXSwKCSAgICAgICAgfSk7CgkgICAgICAgIHRoaXMuX3Jhd0RhdGEgPSBkYXRhOwoJICAgICAgICB0aGlzLl9mb3JtYXQgPSBmb3JtYXQ7CgkgICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zOwoJICAgICAgICBjb25zdCBjb252ZXJ0ZXJzID0gewoJICAgICAgICAgICAgJ3RvcG9qc29uJzogdGhpcy5sb2FkVG9wb0pzb24sCgkgICAgICAgICAgICAnb3NtJzogdGhpcy5sb2FkT3NtLAoJICAgICAgICAgICAgJ2ttbCc6IHRoaXMubG9hZFhtbCwKCSAgICAgICAgICAgICdncHgnOiB0aGlzLmxvYWRYbWwsCgkgICAgICAgICAgICAndGN4JzogdGhpcy5sb2FkWG1sLAoJICAgICAgICAgICAgJ2Nzdic6IHRoaXMubG9hZENzdiwKCSAgICAgICAgICAgICd0c3YnOiB0aGlzLmxvYWRDc3YsCgkgICAgICAgICAgICAncG9seWxpbmUnOiB0aGlzLmxvYWRQb2x5bGluZQoJICAgICAgICB9OwoJICAgICAgICB0aGlzLl9jb252ZXJzaW9uRm4gPSBjb252ZXJ0ZXJzW2Zvcm1hdF07CgkgICAgfQoJICAgIGFzeW5jIGNvbnZlcnQoKSB7CgkgICAgICAgIGlmICghdGhpcy5fY29udmVyc2lvbkZuKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlaikgPT4gcmVqKGBObyBjb252ZXJ0ZXIgZXhpc3RzIGZvciAke3RoaXMuX2Zvcm1hdH1gKSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVyc2lvbkZuKCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogTG9hZCB0aGUgWE1MIGRhdGEgYXMgR2VvSlNPTgoJICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYSBHZW9KU09OIEZlYXR1cmVDb2xsZWN0aW9uCgkgICAgICovCgkgICAgYXN5bmMgbG9hZFhtbCgpIHsKCSAgICAgICAgLy8gVXNlIHRoZSBhcHByb3ByaWF0ZSBwYXJzZXIgYmFzZWQgb24gdGhlIGZvcm1hdAoJICAgICAgICBjb25zdCBnZW9qc29uID0gdG9HZW9Kc29uW3RoaXMuX2Zvcm1hdF0obmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0aGlzLl9yYXdEYXRhLCAidGV4dC94bWwiKSk7CgkgICAgICAgIHJldHVybiBnZW9qc29uOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBMb2FkcyBhbmQgcGFyc2VzIENTViBkYXRhIGludG8gYSBHZW9KU09OIEZlYXR1cmVDb2xsZWN0aW9uLgoJICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIEdlb0pTT04gRmVhdHVyZUNvbGxlY3Rpb24uCgkgICAgICovCgkgICAgYXN5bmMgbG9hZENzdigpIHsKCSAgICAgICAgLy8gRGVmaW5lIG9wdGlvbnMgZm9yIHRoZSBjc3YyZ2VvanNvbiBsaWJyYXJ5CgkgICAgICAgIGxldCBvcHRpb25zID0gdGhpcy5fb3B0aW9ucy5jc3ZPcHRpb25zIHx8IHt9OyAvLyBUT0RPIGFsbG93IENTViBvcHRpb25zCgkgICAgICAgIGlmICh0aGlzLl9mb3JtYXQgPT09ICd0c3YnKSB7CgkgICAgICAgICAgICBvcHRpb25zLmRlbGltaXRlciA9ICdcdCc7CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIHRoZSBjc3YyZ2VvanNvbiBsaWJyYXJ5IHRvIGNvbnZlcnQgdGhlIENTViB0byBHZW9KU09OCgkgICAgICAgIGNvbnN0IGdlb2pzb24gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkgICAgICAgICAgICBjc3YyZ2VvanNvbl8xLmNzdjJnZW9qc29uKHRoaXMuX3Jhd0RhdGEsIG9wdGlvbnMsIChlcnIsIGRhdGEpID0+IHsKCSAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CgkgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9KTsKCSAgICAgICAgfSk7CgkgICAgICAgIHJldHVybiBnZW9qc29uOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBMb2FkcyBUb3BvSlNPTiBkYXRhIGFuZCBjb252ZXJ0cyBpdCBpbnRvIGEgR2VvSlNPTiBGZWF0dXJlQ29sbGVjdGlvbgoJICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIEdlb0pTT04gRmVhdHVyZUNvbGxlY3Rpb24uCgkgICAgICovCgkgICAgYXN5bmMgbG9hZFRvcG9Kc29uKCkgewoJICAgICAgICBsZXQgdG9wb0pzb25EYXRhID0ge307CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB0b3BvSnNvbkRhdGEgPSBKU09OLnBhcnNlKHRoaXMuX3Jhd0RhdGEpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlKSB7CgkgICAgICAgICAgICB0aHJvdyAiSW52YWxpZCBUb3BvSnNvbiI7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udmVydCB0aGUgZGF0YQoJICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5ibGFua0dlb0pTT04oKTsKCSAgICAgICAgaWYgKHRvcG9Kc29uRGF0YS50eXBlID09PSAiVG9wb2xvZ3kiICYmIHRvcG9Kc29uRGF0YS5vYmplY3RzICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJlc3VsdCA9IHsKCSAgICAgICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAoJICAgICAgICAgICAgICAgIGZlYXR1cmVzOiByZXN1bHQuZmVhdHVyZXMgPSBPYmplY3Qua2V5cyh0b3BvSnNvbkRhdGEub2JqZWN0cykubWFwKGtleSA9PiB0b3BvanNvbkZlYXR1cmUodG9wb0pzb25EYXRhLCBrZXkpKS5yZWR1Y2UoKGEsIHYpID0+IFsuLi5hLCAuLi52LmZlYXR1cmVzXSwgW10pCgkgICAgICAgICAgICB9OwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfQoJICAgIDsKCSAgICAvKioKCSAgICAgKiBMb2FkcyBPU00gZGF0YSBhbmQgY29udmVydHMgaXQgaW50byBhIEdlb0pTT04gRmVhdHVyZUNvbGxlY3Rpb24KCSAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBHZW9KU09OIEZlYXR1cmVDb2xsZWN0aW9uLgoJICAgICAqLwoJICAgIGFzeW5jIGxvYWRPc20oKSB7CgkgICAgICAgIHJldHVybiBvc20yZ2VvanNvbih0aGlzLl9yYXdEYXRhKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogTG9hZHMgYW5kIHBhcnNlcyBQb2x5bGluZSBkYXRhIGludG8gYSBHZW9KU09OIEZlYXR1cmVDb2xsZWN0aW9uLgoJICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIEdlb0pTT04gRmVhdHVyZUNvbGxlY3Rpb24uCgkgICAgICovCgkgICAgYXN5bmMgbG9hZFBvbHlsaW5lKCkgewoJICAgICAgICBsZXQgb3B0aW9ucyA9IHRoaXMuX29wdGlvbnMucG9seWxpbmVPcHRpb25zIHx8IHt9OwoJICAgICAgICAvLyBVc2UgdGhlIEBtYXBib3gvcG9seWxpbmUgbGlicmFyeSB0byBjb252ZXJ0IHRoZSBwb2x5bGluZSB0byBHZW9KU09OCgkgICAgICAgIGNvbnN0IGdlb2pzb24gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVTdHJpbmcgPSBwb2x5bGluZUV4cG9ydHMudG9HZW9KU09OKHRoaXMuX3Jhd0RhdGEsIG9wdGlvbnMucHJlY2lzaW9uKTsKCSAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnkgPSBsaW5lU3RyaW5nOwoJICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnR5cGUgPT09ICdwb2ludCcpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVTdHJpbmcuY29vcmRpbmF0ZXMubGVuZ3RoID09PSAxKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGl0IGEgcG9pbnQKCSAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ1BvaW50JywKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29vcmRpbmF0ZXMnOiBsaW5lU3RyaW5nLmNvb3JkaW5hdGVzWzBdCgkgICAgICAgICAgICAgICAgICAgICAgICB9OwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdDYW5ub3QgY29udmVydCBwb2x5bGluZSB0byAnICsgb3B0aW9ucy50eXBlKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnR5cGUgPT09ICdwb2x5Z29uJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAobGluZVN0cmluZy5jb29yZGluYXRlc1swXVswXSA9PT0gbGluZVN0cmluZy5jb29yZGluYXRlc1tsaW5lU3RyaW5nLmNvb3JkaW5hdGVzLmxlbmd0aCAtIDFdWzBdICYmCgkgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3RyaW5nLmNvb3JkaW5hdGVzWzBdWzFdID09PSBsaW5lU3RyaW5nLmNvb3JkaW5hdGVzW2xpbmVTdHJpbmcuY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV1bMV0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgaXQgYSBwb2x5Z29uCgkgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdQb2x5Z29uJywKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29vcmRpbmF0ZXMnOiBbbGluZVN0cmluZy5jb29yZGluYXRlc10KCSAgICAgICAgICAgICAgICAgICAgICAgIH07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Nhbm5vdCBjb252ZXJ0IHBvbHlsaW5lIHRvICcgKyBvcHRpb25zLnR5cGUpOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHJlc29sdmUoewoJICAgICAgICAgICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAoJICAgICAgICAgICAgICAgICAgICBmZWF0dXJlczogW3sKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJGZWF0dXJlIiwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2VvbWV0cnkiOiBnZW9tZXRyeSwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6IG9wdGlvbnMucHJvcGVydGllcyB8fCB7fQoJICAgICAgICAgICAgICAgICAgICAgICAgfV0KCSAgICAgICAgICAgICAgICB9KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKCSAgICAgICAgICAgICAgICByZWplY3QoZXJyKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSk7CgkgICAgICAgIHJldHVybiBnZW9qc29uOwoJICAgIH0KCX0KCgljb25zdCBsaWJyYXJpZXMgPSB7CgkgICAgJ0NvbnZlcnRlcic6IENvbnZlcnRlcgoJfTsKCWxldCBzdWJDbGFzczsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGUgPT4gewoJICAgIGNvbnN0IGRhdGEgPSAoZS5kYXRhIHx8IGUpOwoJICAgIGNvbnN0IHBvc3QgPSAoaWQsIGVyciwgcmVzLCB0eXBlKSA9PiB7CgkgICAgICAgIHBvc3RNZXNzYWdlKHsKCSAgICAgICAgICAgIHR5cGU6IHR5cGUgPyB0eXBlIDogKGVyciA/ICdlcnJvcicgOiAncmVzcG9uc2UnKSwKCSAgICAgICAgICAgIGlkOiBpZCwKCSAgICAgICAgICAgIG1lc3NhZ2U6IHJlcywKCSAgICAgICAgICAgIGVycm9yOiBlcnIKCSAgICAgICAgfSk7CgkgICAgfTsKCSAgICBjb25zdCBjb21tYW5kcyA9IHsKCSAgICAgICAgJ2luaXQnOiAobXNnKSA9PiB7CgkgICAgICAgICAgICBjb25zdCB7IGlkLCBjb21tYW5kLCBtZXNzYWdlIH0gPSBtc2c7CgkgICAgICAgICAgICBzdWJDbGFzcyA9IG5ldyBsaWJyYXJpZXNbY29tbWFuZF0obWVzc2FnZVswXSwgbWVzc2FnZVsxXSk7CgkgICAgICAgICAgICAvLyByZXR1cm4gdGhlIGNsYXNzJyBtZXRob2RzCgkgICAgICAgICAgICBjb25zdCBmbnMgPSBbCgkgICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGlicmFyaWVzW2NvbW1hbmRdLnByb3RvdHlwZSksCgkgICAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXMoc3ViQ2xhc3MpCgkgICAgICAgICAgICBdLm1hcChrZXkgPT4gW2tleSwgdHlwZW9mIGxpYnJhcmllc1tjb21tYW5kXS5wcm90b3R5cGVba2V5XV0pCgkgICAgICAgICAgICAgICAgLnJlZHVjZSgoYSwgYykgPT4gKHsgLi4uYSwgLi4ueyBbY1swXV06IGNbMV0gfSB9KSwge30pOwoJICAgICAgICAgICAgcG9zdChpZCwgdW5kZWZpbmVkLCBmbnMsICdpbml0X3Jlc3BvbnNlJyk7CgkgICAgICAgIH0sCgkgICAgICAgICdnZXQnOiBmdW5jdGlvbiAobXNnKSB7CgkgICAgICAgICAgICBjb25zdCB7IGlkLCBjb21tYW5kIH0gPSBtc2c7CgkgICAgICAgICAgICBpZiAoc3ViQ2xhc3MgJiYgc3ViQ2xhc3NbY29tbWFuZF0pIHsKCSAgICAgICAgICAgICAgICBwb3N0KGlkLCB1bmRlZmluZWQsIHN1YkNsYXNzW2NvbW1hbmRdKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgIHBvc3QoaWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwKCSAgICAgICAgJ2V4ZWMnOiBmdW5jdGlvbiAobXNnKSB7CgkgICAgICAgICAgICBjb25zdCB7IGlkLCBjb21tYW5kLCBtZXNzYWdlIH0gPSBtc2c7CgkgICAgICAgICAgICBpZiAoc3ViQ2xhc3MgJiYgc3ViQ2xhc3NbY29tbWFuZF0gJiYgdHlwZW9mIHN1YkNsYXNzW2NvbW1hbmRdID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICAgICAgICAgICAgY29uc3QgY21kID0gc3ViQ2xhc3NbY29tbWFuZF0KCSAgICAgICAgICAgICAgICAgICAgLmFwcGx5KHN1YkNsYXNzLCBtZXNzYWdlKTsKCSAgICAgICAgICAgICAgICBpZiAoISFjbWQgJiYgdHlwZW9mIGNtZC50aGVuID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgYSBwcm9taXNlLCBzbyB3YWl0IGZvciBpdAoJICAgICAgICAgICAgICAgICAgICBjbWQKCSAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiBwb3N0KGlkLCB1bmRlZmluZWQsIHJlcykpCgkgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiBwb3N0KGlkLCBlKSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAvLyBOb3QgYSBwcm9taXNlLCBqdXN0IHJldHVybiBpdAoJICAgICAgICAgICAgICAgICAgICBwb3N0KGlkLCB1bmRlZmluZWQsIGNtZCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gRXJyb3IKCSAgICAgICAgICAgICAgICBwb3N0KGlkLCBuZXcgRXJyb3IoYGNvbW1hbmQgIiR7Y29tbWFuZH0iIG5vdCBmb3VuZGApKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgaWYgKGNvbW1hbmRzW2RhdGEudHlwZV0pIHsKCSAgICAgICAgY29tbWFuZHNbZGF0YS50eXBlXShkYXRhKTsKCSAgICB9Cgl9KTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtlci5qcy5tYXAKCg==",vo?dn(es):function(ht,pt,At){var St;return function(_t){return St=St||pn(ht),new Worker(St,_t)}}(es));let is=()=>Math.random().toString(36).substring(2);class Jn{constructor(pt,At){this.initId=is()+"-"+pt,this.worker=new Or,this.handlers=new Map,this.worker.onmessage=St=>{let _t=St.data,zt=this.handlers.get(_t.id),ee=this;if(zt){if(_t.type==="response"&&zt.resolve(_t.message),_t.type==="error"){let be=_t.error||new Error(`Unknown error with ${pt}`);zt.reject(be)}_t.type==="init_response"&&(this._=Object.keys(_t.message).map(be=>{let Ie=typeof _t.message[be]=="function";return[be,function(){return Ie?ee.exec(be)(...arguments):ee.get(be)}]}).reduce((be,Ie)=>({...be,[Ie[0]]:Ie[1]}),{}),zt.resolve(this._))}},this.worker.postMessage({type:"init",id:this.initId,command:pt,message:At})}onLoad(){return new Promise(pt=>{this._===void 0?this.handlers.set(this.initId,{resolve:pt,reject:pt}):pt(this._)})}exec(pt){let At=this;return function(...St){return new Promise((_t,zt)=>{let ee=is()+"-"+pt;At.handlers.set(ee,{resolve:_t,reject:zt}),At.worker.postMessage({type:"exec",id:ee,command:pt,message:[...St]})})}}get(pt){return new Promise((At,St)=>{let _t=is()+"-"+pt;this.handlers.set(_t,{resolve:At,reject:St}),this.worker.postMessage({type:"get",id:_t,command:pt,message:[]})})}}let $i=new URL("test://http://example.com").href!=="test://http://example.com";async function io(ht,pt,At){let St=await fetch(ht,At?{signal:At.signal}:void 0),_t={},zt=new URL(ht,window.location.href);if(zt.hash.length){let ee=zt.hash,be=decodeURIComponent(ee.slice(1));try{_t=JSON.parse(be)}catch(Ie){console.warn("Error parsing or reading URL:",Ie)}}if(St.status==200){let ee=await St.text(),be;return["kml","tcx","gpx"].includes(pt)||!(()=>{let Ie=!1;try{Ie=typeof window.Worker=="function"}catch{Ie=!1}return Ie})()?be=new jr(pt,ee,_t).convert():be=new Jn("Converter",[pt,ee,_t]).exec("convert")(),await be}throw new Error(`Data fetch error: ${St.statusText}`)}let wn=ht=>{let pt=ht.split("://")[0],At=ht.replace(new RegExp(`^${pt}://`),""),St=$i?(_t=>{let zt=new RegExp("^(https?)(//)");return _t.replace(zt,"$1:$2")})(At):At;return{prefix:pt,url:St}},Wo=(ht,pt)=>pt instanceof AbortController?(async(At,St)=>{let{prefix:_t,url:zt}=wn(At.url);if(!zt)throw new Error("Invalid URL: "+At.url);try{return{data:await io(zt,_t,St)}}catch(ee){throw new Error(ee||"Unknown Error")}})(ht,pt):((At,St)=>{let _t=new AbortController,{prefix:zt,url:ee}=wn(At.url);return ee&&io(ee,zt,_t).then(be=>St(null,be)).catch(be=>St(be)),{cancel:()=>{_t.abort()}}})(ht,pt),Bn=Fr;n.VectorTextProtocol=Wo,n.addOptions=(ht,pt)=>{try{let At=new URL(ht);return At.hash=`#${encodeURIComponent(JSON.stringify(pt))}`,At.toString()}catch(At){return console.error("Error parsing or updating URL:",At),ht}},n.addProtocols=ht=>{Fr.forEach(pt=>{ht.addProtocol(pt,Wo)})},n.processData=io,n.vectorFormats=Bn})});var oC=ua((uO,Eb)=>{Eb.exports=n3;var r3=Object.prototype.hasOwnProperty;function n3(){for(var n={},e=0;e<arguments.length;e++){var r=arguments[e];for(var o in r)r3.call(r,o)&&(n[o]=r[o])}return n}});var Qb=ua((Tb,Ub)=>{(function(){var n=this,e={};typeof Tb<"u"?Ub.exports=e:n.fuzzy=e,e.simpleFilter=function(r,o){return o.filter(function(l){return e.test(r,l)})},e.test=function(r,o){return e.match(r,o)!==null},e.match=function(r,o,l){l=l||{};var s=0,p=[],m=o.length,I=0,w=0,_=l.pre||"",E=l.post||"",U=l.caseSensitive&&o||o.toLowerCase(),F;r=l.caseSensitive&&r||r.toLowerCase();for(var V=0;V<m;V++)F=o[V],U[V]===r[s]?(F=_+F+E,s+=1,w+=1+w):w=0,I+=w,p[p.length]=F;return s===r.length?(I=U===r?1/0:I,{rendered:p.join(""),score:I}):null},e.filter=function(r,o,l){return!o||o.length===0?[]:typeof r!="string"?o:(l=l||{},o.reduce(function(s,p,m,I){var w=p;l.extract&&(w=l.extract(p));var _=e.match(r,w,l);return _!=null&&(s[s.length]={string:_.rendered,score:_.score,index:m,original:p}),s},[]).sort(function(s,p){var m=p.score-s.score;return m||s.index-p.index}))}})()});var Gb=ua((hO,Rb)=>{"use strict";var Vo=function(n){return this.component=n,this.items=[],this.active=n.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,n.el.parentNode.insertBefore(this.wrapper,n.el.nextSibling),this};Vo.prototype.show=function(){this.element.style.display="block"};Vo.prototype.hide=function(){this.element.style.display="none"};Vo.prototype.add=function(n){this.items.push(n)};Vo.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0};Vo.prototype.isEmpty=function(){return!this.items.length};Vo.prototype.isVisible=function(){return this.element.style.display==="block"};Vo.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var n=0;n<this.items.length;n++)this.drawItem(this.items[n],this.active===n);this.show()};Vo.prototype.drawItem=function(n,e){var r=document.createElement("li"),o=document.createElement("a");e&&(r.className+=" active"),o.innerHTML=n.string,r.appendChild(o),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,n)}.bind(this))};Vo.prototype.handleMouseUp=function(n){this.selectingListItem=!1,this.component.value(n.original),this.clear(),this.draw()};Vo.prototype.move=function(n){this.active=n,this.draw()};Vo.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)};Vo.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)};Vo.prototype.drawError=function(n){var e=document.createElement("li");e.innerHTML=n,this.element.appendChild(e),this.show()};Rb.exports=Vo});var Pb=ua((gO,Zb)=>{"use strict";var s3=oC(),o3=Qb(),a3=Gb(),Xs=function(n,e,r){return r=r||{},this.options=s3({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},r),this.el=n,this.data=e||[],this.list=new a3(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(o){this.handleKeyUp(o.keyCode,o)}.bind(this),!1),this.el.addEventListener("keydown",function(o){this.handleKeyDown(o)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(o){this.handlePaste(o)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Xs.prototype.handleKeyUp=function(n,e){if(!(n===40||n===38||n===27||n===9)){if(n===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),e.stopPropagation());return}this.handleInputChange(this.el.value)}};Xs.prototype.handleKeyDown=function(n){switch(n.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&n.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Xs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Xs.prototype.handlePaste=function(n){if(n.clipboardData)this.handleInputChange(n.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(n.target.value)},100)}};Xs.prototype.handleInputChange=function(n){if(this.query=this.normalize(n),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(e){for(var r=0;r<e.length&&(this.list.add(e[r]),r!==this.options.limit-1);r++);this.list.draw()}.bind(this))};Xs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Xs.prototype.update=function(n){this.data=n,this.handleKeyUp()};Xs.prototype.clear=function(){this.data=[],this.list.clear()};Xs.prototype.normalize=function(n){return n=n.toLowerCase(),n};Xs.prototype.match=function(n,e){return n.indexOf(e)>-1};Xs.prototype.value=function(n){if(this.selected=n,this.el.value=this.getItemValue(n||{place_name:this.query}),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};Xs.prototype.getCandidates=function(n){var e={pre:"<strong>",post:"</strong>",extract:function(o){return this.getItemValue(o)}.bind(this)},r;this.options.filter?(r=o3.filter(this.query,this.data,e),r=r.map(function(o){return{original:o.original,string:this.render(o.original,o.string)}}.bind(this))):r=this.data.map(function(o){var l=this.render(o);return{original:o,string:l}}.bind(this)),n(r)};Xs.prototype.getItemValue=function(n){return n};Xs.prototype.render=function(n,e){if(e)return e;for(var r=n.original?this.getItemValue(n.original):this.getItemValue(n),o=this.normalize(r),l=o.lastIndexOf(this.query);l>-1;){var s=l+this.query.length;r=r.slice(0,l)+"<strong>"+r.slice(l,s)+"</strong>"+r.slice(s),l=o.slice(0,l).lastIndexOf(this.query)}return r};Xs.prototype.renderError=function(n){this.list.drawError(n)};Zb.exports=Xs});var Nb=ua((dO,Mb)=>{"use strict";var Hb=Pb();Mb.exports=Hb;typeof window<"u"&&(window.Suggestions=Hb)});var Ob=ua((pO,Kb)=>{var A3="Expected a function",Vb=NaN,l3="[object Symbol]",c3=/^\s+|\s+$/g,u3=/^[-+]0x[0-9a-f]+$/i,h3=/^0b[01]+$/i,g3=/^0o[0-7]+$/i,d3=parseInt,p3=typeof global=="object"&&global&&global.Object===Object&&global,f3=typeof self=="object"&&self&&self.Object===Object&&self,m3=p3||f3||Function("return this")(),C3=Object.prototype,I3=C3.toString,y3=Math.max,b3=Math.min,aC=function(){return m3.Date.now()};function v3(n,e,r){var o,l,s,p,m,I,w=0,_=!1,E=!1,U=!0;if(typeof n!="function")throw new TypeError(A3);e=Db(e)||0,AC(r)&&(_=!!r.leading,E="maxWait"in r,s=E?y3(Db(r.maxWait)||0,e):s,U="trailing"in r?!!r.trailing:U);function F(Lt){var vt=o,ft=l;return o=l=void 0,w=Lt,p=n.apply(ft,vt),p}function V(Lt){return w=Lt,m=setTimeout(D,e),_?F(Lt):p}function H(Lt){var vt=Lt-I,ft=Lt-w,Mt=e-vt;return E?b3(Mt,s-ft):Mt}function Y(Lt){var vt=Lt-I,ft=Lt-w;return I===void 0||vt>=e||vt<0||E&&ft>=s}function D(){var Lt=aC();if(Y(Lt))return tt(Lt);m=setTimeout(D,H(Lt))}function tt(Lt){return m=void 0,U&&o?F(Lt):(o=l=void 0,p)}function ot(){m!==void 0&&clearTimeout(m),w=0,o=I=l=m=void 0}function bt(){return m===void 0?p:tt(aC())}function kt(){var Lt=aC(),vt=Y(Lt);if(o=arguments,l=this,I=Lt,vt){if(m===void 0)return V(I);if(E)return m=setTimeout(D,e),F(I)}return m===void 0&&(m=setTimeout(D,e)),p}return kt.cancel=ot,kt.flush=bt,kt}function AC(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function w3(n){return!!n&&typeof n=="object"}function B3(n){return typeof n=="symbol"||w3(n)&&I3.call(n)==l3}function Db(n){if(typeof n=="number")return n;if(B3(n))return Vb;if(AC(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=AC(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(c3,"");var r=h3.test(n);return r||g3.test(n)?d3(n.slice(2),r?2:8):u3.test(n)?Vb:+n}Kb.exports=v3});var iv=ua((fO,lC)=>{"use strict";var Hu=typeof Reflect=="object"?Reflect:null,zb=Hu&&typeof Hu.apply=="function"?Hu.apply:function(e,r,o){return Function.prototype.apply.call(e,r,o)},kd;Hu&&typeof Hu.ownKeys=="function"?kd=Hu.ownKeys:Object.getOwnPropertySymbols?kd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:kd=function(e){return Object.getOwnPropertyNames(e)};function _3(n){console&&console.warn&&console.warn(n)}var Jb=Number.isNaN||function(e){return e!==e};function Jr(){Jr.init.call(this)}lC.exports=Jr;lC.exports.once=k3;Jr.EventEmitter=Jr;Jr.prototype._events=void 0;Jr.prototype._eventsCount=0;Jr.prototype._maxListeners=void 0;var Wb=10;function Ld(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(Jr,"defaultMaxListeners",{enumerable:!0,get:function(){return Wb},set:function(n){if(typeof n!="number"||n<0||Jb(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Wb=n}});Jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Jr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Jb(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Xb(n){return n._maxListeners===void 0?Jr.defaultMaxListeners:n._maxListeners}Jr.prototype.getMaxListeners=function(){return Xb(this)};Jr.prototype.emit=function(e){for(var r=[],o=1;o<arguments.length;o++)r.push(arguments[o]);var l=e==="error",s=this._events;if(s!==void 0)l=l&&s.error===void 0;else if(!l)return!1;if(l){var p;if(r.length>0&&(p=r[0]),p instanceof Error)throw p;var m=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw m.context=p,m}var I=s[e];if(I===void 0)return!1;if(typeof I=="function")zb(I,this,r);else for(var w=I.length,_=tv(I,w),o=0;o<w;++o)zb(_[o],this,r);return!0};function Yb(n,e,r,o){var l,s,p;if(Ld(r),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,r.listener?r.listener:r),s=n._events),p=s[e]),p===void 0)p=s[e]=r,++n._eventsCount;else if(typeof p=="function"?p=s[e]=o?[r,p]:[p,r]:o?p.unshift(r):p.push(r),l=Xb(n),l>0&&p.length>l&&!p.warned){p.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=n,m.type=e,m.count=p.length,_3(m)}return n}Jr.prototype.addListener=function(e,r){return Yb(this,e,r,!1)};Jr.prototype.on=Jr.prototype.addListener;Jr.prototype.prependListener=function(e,r){return Yb(this,e,r,!0)};function x3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jb(n,e,r){var o={fired:!1,wrapFn:void 0,target:n,type:e,listener:r},l=x3.bind(o);return l.listener=r,o.wrapFn=l,l}Jr.prototype.once=function(e,r){return Ld(r),this.on(e,jb(this,e,r)),this};Jr.prototype.prependOnceListener=function(e,r){return Ld(r),this.prependListener(e,jb(this,e,r)),this};Jr.prototype.removeListener=function(e,r){var o,l,s,p,m;if(Ld(r),l=this._events,l===void 0)return this;if(o=l[e],o===void 0)return this;if(o===r||o.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,o.listener||r));else if(typeof o!="function"){for(s=-1,p=o.length-1;p>=0;p--)if(o[p]===r||o[p].listener===r){m=o[p].listener,s=p;break}if(s<0)return this;s===0?o.shift():S3(o,s),o.length===1&&(l[e]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",e,m||r)}return this};Jr.prototype.off=Jr.prototype.removeListener;Jr.prototype.removeAllListeners=function(e){var r,o,l;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var s=Object.keys(o),p;for(l=0;l<s.length;++l)p=s[l],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=o[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(l=r.length-1;l>=0;l--)this.removeListener(e,r[l]);return this};function qb(n,e,r){var o=n._events;if(o===void 0)return[];var l=o[e];return l===void 0?[]:typeof l=="function"?r?[l.listener||l]:[l]:r?F3(l):tv(l,l.length)}Jr.prototype.listeners=function(e){return qb(this,e,!0)};Jr.prototype.rawListeners=function(e){return qb(this,e,!1)};Jr.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):$b.call(n,e)};Jr.prototype.listenerCount=$b;function $b(n){var e=this._events;if(e!==void 0){var r=e[n];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Jr.prototype.eventNames=function(){return this._eventsCount>0?kd(this._events):[]};function tv(n,e){for(var r=new Array(e),o=0;o<e;++o)r[o]=n[o];return r}function S3(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function F3(n){for(var e=new Array(n.length),r=0;r<e.length;++r)e[r]=n[r].listener||n[r];return e}function k3(n,e){return new Promise(function(r,o){function l(p){n.removeListener(e,s),o(p)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",l),r([].slice.call(arguments))}ev(n,e,s,{once:!0}),e!=="error"&&L3(n,l,{once:!0})})}function L3(n,e,r){typeof n.on=="function"&&ev(n,"error",e,r)}function ev(n,e,r,o){if(typeof n.on=="function")o.once?n.once(e,r):n.on(e,r);else if(typeof n.addEventListener=="function")n.addEventListener(e,function l(s){o.once&&n.removeEventListener(e,l),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}});var nv=ua((mO,rv)=>{rv.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}});var ov=ua((CO,sv)=>{"use strict";var E3={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"};sv.exports={placeholder:E3}});var Av=ua((av,Ed)=>{(function(n,e,r){typeof Ed<"u"&&Ed.exports?Ed.exports=r():n[e]=r()})(av,"subtag",function(){var n="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(m){return m.match(e)||[]}function o(m){return r(m).filter(function(I,w){return I&&w})}function l(m){return m=r(m),{language:m[1]||n,extlang:m[2]||n,script:m[3]||n,region:m[4]||n}}function s(m,I,w){Object.defineProperty(m,I,{value:w,enumerable:!0})}function p(m,I,w){function _(E){return r(E)[m]||n}s(_,"pattern",I),s(l,w,_)}return p(1,/^[a-zA-Z]{2,3}$/,"language"),p(2,/^[a-zA-Z]{3}$/,"extlang"),p(3,/^[a-zA-Z]{4}$/,"script"),p(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(l,"split",o),l})});var hv=ua((IO,uv)=>{"use strict";var T3=Nb(),U3=Ob(),ha=oC(),Q3=iv().EventEmitter,lv=nv(),R3=ov(),G3=Av();function cv(n,e){this._eventEmitter=new Q3,this.options=ha({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=n}cv.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(n){return n.text!==void 0?n.text:n.place_name},render:function(n){if(n.geometry){var m=n.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+m[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+m.splice(1,m.length).join(",")+"</div></div></div>"}else{var e=n.text,r=e.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,l=e.substring(0,r),s=e.substring(r,r+o),p=e.substring(r+o);return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+l+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+s+"</span>"+p+"</div></div></div>"}},popupRender:function(n){var e=n.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},addTo:function(n){function e(o,l){if(!document.body.contains(l))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var s=o.onAdd();l.appendChild(s)}if(n._controlContainer)n.addControl(this);else if(n instanceof HTMLElement)e(this,n);else if(typeof n=="string"){var r=document.querySelectorAll(n);if(r.length===0)throw new Error("Element ",n,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,r[0])}else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(n){if(n&&typeof n!="string"&&(this._map=n),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",U3(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var o=document.createElement("div");o.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var l=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(l),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),o.appendChild(this._clearEl),o.appendChild(this._loadingEl),e.appendChild(r),e.appendChild(this._inputEl),e.appendChild(o),this._typeahead=new T3(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),e},createIcon:function(n,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+n+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+n),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),"innerHTML"in r)r.innerHTML=e;else{var o=document.createElement("div");o.innerHTML="<svg>"+e.valueOf().toString()+"</svg>";var l=o.firstChild,s=l.firstChild;r.appendChild(s)}return r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(n){var e=(n.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e)},_onKeyDown:function(n){var e=27,r=9;if(n.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(n),this._inputEl.blur();var o=n.target&&n.target.shadowRoot?n.target.shadowRoot.activeElement:n.target,l=o?o.value:"";if(!l)return this.fresh=!0,n.keyCode!==r&&this.clear(n),this._clearEl.style.display="none";if(!(n.metaKey||[r,e,37,39,38,40].indexOf(n.keyCode)!==-1)){if(n.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o.value)}},_showButton:function(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(n){this.options.clearOnBlur&&this._clearOnBlur(n),this.options.collapsed&&this._collapse()},_onChange:function(){var n=this._typeahead.selected;if(n&&!n.geometry)n.placeId?this._geocode(n.placeId,!0,!0):this._geocode(n.text,!0);else if(n&&JSON.stringify(n)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){var e;if(this._removeResultMarkers(),n.properties&&lv[n.properties.short_code])e=ha({},this.options.flyTo),this._map&&this._map.fitBounds(lv[n.properties.short_code].bbox,e);else if(n.bbox){var r=n.bbox;e=ha({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],e)}else{var o={zoom:this.options.zoom};e=ha({},o,this.options.flyTo),n.center?e.center=n.center:n.geometry&&n.geometry.type&&n.geometry.type==="Point"&&n.geometry.coordinates&&(e.center=n.geometry.coordinates),this._map&&this._map.flyTo(e)}}this.options.marker&&this._maplibregl&&this._handleMarker(n),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(n),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:n})}},_getConfigForRequest:function(){var n=["bbox","limit","proximity","countries","types","language","reverseMode"],e=this,r=n.reduce(function(o,l){return e.options[l]&&(["countries","types","language"].indexOf(l)>-1?o[l]=e.options[l].split(/[\s,]+/):o[l]=e.options[l],l==="proximity"&&e.options[l]&&typeof e.options[l].longitude=="number"&&typeof e.options[l].latitude=="number"&&(o[l]=[e.options[l].longitude,e.options[l].latitude])),o},{});return r},_geocode:function(n,e,r){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:n}),this.inputString=n;var o=null,l=this._getConfigForRequest(),s;if(this.options.localGeocoderOnly)s=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(n)){var p=n.split(/[\s(,)?]+/).map(function(w){return parseFloat(w,10)}).reverse();l.types&&l.types[0],l=ha(l,{query:p,limit:1}),"proximity"in l&&delete l.proximity,s=this.geocoderApi.reverseGeocode(l)}else l=ha(l,{query:n}),this.geocoderApi.getSuggestions?e?this.geocoderApi.searchByPlaceId&&r?s=this.geocoderApi.searchByPlaceId(l):s=this.geocoderApi.forwardGeocode(l):s=this.geocoderApi.getSuggestions(l):s=this.geocoderApi.forwardGeocode(l);var m=[];this.options.localGeocoder&&(m=this.options.localGeocoder(n),m||(m=[]));var I=[];return s.catch(function(w){o=w}.bind(this)).then(function(w){this._loadingEl.style.display="none";var _={};return w?_=w:_={type:"FeatureCollection",features:[]},_.config=l,this.fresh&&(this.fresh=!1),_.features=_.features?m.concat(_.features):m,this.options.externalGeocoder?(I=this.options.externalGeocoder(n,_.features,l)||[],I.then(function(E){return _.features=_.features?E.concat(_.features):E,_},function(){return _})):_}.bind(this)).then(function(w){if(o)throw o;this.options.filter&&w.features.length&&(w.features=w.features.filter(this.options.filter));var _=[];w.suggestions?_=w.suggestions:w.place?_=[w.place]:_=w.features,_.length?(this._clearEl.style.display="block",this._typeahead.update(_),(!this.options.showResultsWhileTyping||e)&&this.options.showResultMarkers&&(w.features.length>0||w.place)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",w)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",w))}.bind(this)).catch(function(w){this._loadingEl.style.display="none",m.length&&this.options.localGeocoder||I.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(m)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:m}),this._eventEmitter.emit("error",{error:w})}.bind(this)),s},_clear:function(n){n&&n.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(n){this._clear(n),this._inputEl.focus()},_clearOnBlur:function(n){var e=this;n.relatedTarget&&e._clear(n)},_onQueryResult:function(n){var e=n;if(!!e.features.length){var r=e.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!!this._map)if(this._map.getZoom()>9){var n=this._map.getCenter().wrap();this.setProximity({longitude:n.lng,latitude:n.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(n){return this._geocode(n).then(this._onQueryResult),this},_renderError:function(){var n="<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(n)},_renderNoResults:function(){var n="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>";this._renderMessage(n)},_renderMessage:function(n){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(n)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var n=this.options.language.split(",")[0],e=G3.language(n),r=R3.placeholder[e];if(r)return r}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var n=this._typeahead.data.filter(function(l){return typeof l!="string"}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var e={padding:100},r=ha({},e,this.options.flyTo),o=new this._maplibregl.LngLatBounds;n.forEach(function(l){o.extend(l.geometry.coordinates)}),this._map.fitBounds(o.toArray(),r)}return n.length>0&&this._maplibregl&&this._handleResultMarkers(n),this}},setInput:function(n){return this._inputEl.value=n,this._typeahead.selected=null,this._typeahead.clear(),n.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(n),this},setProximity:function(n){return this.options.proximity=n,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(n){return n&&typeof n=="function"&&(this._typeahead.render=n),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(n){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=n||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(n){return this.options.zoom=n,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(n){return this.options.flyTo=n,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(n){return this.placeholder=n||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(n){return this.options.bbox=n,this},getCountries:function(){return this.options.countries},setCountries:function(n){return this.options.countries=n,this},getTypes:function(){return this.options.types},setTypes:function(n){return this.options.types=n,this},getMinLength:function(){return this.options.minLength},setMinLength:function(n){return this.options.minLength=n,this._typeahead&&(this._typeahead.options.minLength=n),this},getLimit:function(){return this.options.limit},setLimit:function(n){return this.options.limit=n,this._typeahead&&(this._typeahead.options.limit=n),this},getFilter:function(){return this.options.filter},setFilter:function(n){return this.options.filter=n,this},setGeocoderApi:function(n){return this.geocoderApi=n,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(n){if(!!this._map){this._removeMarker();var e={color:"#4668F2"},r=ha({},e,this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);var o;if(this.options.popup){var l={},s=ha({},l,this.options.popup);o=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(n))}return n.center?(this.mapMarker.setLngLat(n.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)):n.geometry&&n.geometry.type&&n.geometry.type==="Point"&&n.geometry.coordinates&&(this.mapMarker.setLngLat(n.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(n){if(!!this._map){this._removeResultMarkers();var e={color:"#4668F2"},r=ha({},e,this.options.showResultMarkers);return n.forEach(function(o){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var l=this.options.showResultMarkers.element.cloneNode(!0);r=ha(r,{element:l})}var s=new this._maplibregl.Marker(ha({},r,{element:l})),p;if(this.options.popup){var m={},I=ha({},m,this.options.popup);p=new this._maplibregl.Popup(I).setHTML(this.options.popupRender(o))}o.center?(s.setLngLat(o.center).addTo(this._map),this.options.popup&&s.setPopup(p)):o.geometry&&o.geometry.type&&o.geometry.type==="Point"&&o.geometry.coordinates&&(s.setLngLat(o.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(p)),this.resultMarkers.push(s)}.bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(n){n.remove()}),this.resultMarkers=[])},on:function(n,e){return this._eventEmitter.on(n,e),this},off:function(n,e){return this._eventEmitter.removeListener(n,e),this}};uv.exports=cv});var f2={};iC(f2,{default:()=>sU});function Ya(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LC(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function po(n,e,r,o){function l(s){return s instanceof r?s:new r(function(p){p(s)})}return new(r||(r=Promise))(function(s,p){function m(_){try{w(o.next(_))}catch(E){p(E)}}function I(_){try{w(o.throw(_))}catch(E){p(E)}}function w(_){_.done?s(_.value):l(_.value).then(m,I)}w((o=o.apply(n,e||[])).next())})}function Ys(n,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,l,s,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(w){return function(_){return I([w,_])}}function I(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,l&&(s=w[0]&2?l.return:w[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,w[1])).done)return s;switch(l=0,s&&(w=[w[0]&2,s.value]),w[0]){case 0:case 1:s=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,l=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!s||w[1]>s[0]&&w[1]<s[3])){r.label=w[1];break}if(w[0]===6&&r.label<s[1]){r.label=s[1],s=w;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(w);break}s[2]&&r.ops.pop(),r.trys.pop();continue}w=e.call(n,r)}catch(_){w=[6,_],l=0}finally{o=s=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function Td(n,e,r){if(r||arguments.length===2)for(var o=0,l=e.length,s;o<l;o++)(s||!(o in e))&&(s||(s=Array.prototype.slice.call(e,0,o)),s[o]=e[o]);return n.concat(s||e)}function mC(n,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-n)*r*6+n:r<1/2?e:r<2/3?(e-n)*6*(2/3-r)+n:n}function Zk(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!Kw[n.name])}var LC,EC,Sl,cp,Z3,up,Sn,gv,P3,Yh,dv,sg,jh,H3,M3,N3,Xc,$C,cC,V3,gw,D3,uC,K3,O3,z3,W3,J3,X3,Y3,j3,pv,q3,$3,t4,fv,e4,qh,i4,mv,r4,dw,pw,n4,s4,Cv,fw,Iv,uc,TC,yv,UC,o4,og,QC,Ud,$h,a4,bv,RC,tg,hC,Mu,ga,ag,Ag,Nu,A4,Ju,l4,Qd,Rd,GC,ZC,PC,mg,HC,Yd,jd,gC,mw,c4,u4,Cw,go,Gd,MC,Bl,NC,Iw,vv,h4,wv,g4,d4,dC,Bv,p4,f4,m4,C4,I4,y4,yg,_v,tp,xv,hg,b4,v4,Zd,eg,w4,B4,_4,Pd,Hd,ig,x4,Do,S4,F4,k4,L4,E4,T4,U4,Q4,Md,R4,Sv,G4,Z4,Fv,pC,Wc,P4,H4,M4,Cg,N4,V4,D4,K4,O4,z4,DA,yw,bw,vw,W4,J4,X4,ww,Bw,_w,Y4,j4,fo,q4,Vu,$4,tk,ek,ik,Nd,ep,kv,rk,cc,Vd,fC,nk,sk,ok,ak,Ak,lk,ck,uk,hk,gk,dk,pk,Dd,fk,mk,Ck,Ik,yk,bk,vk,wk,VC,xw,Sw,bg,qu,Xr,Bk,DC,Fw,ju,KA,_k,fc,On,kw,Fs,t0,hc,lg,sn,Lw,Ew,Tw,Uw,hp,Qw,Rw,_a,dc,pc,hs,gc,Lv,Ev,Tv,xk,gg,xl,Sk,Fk,gp,Uv,kk,Lk,Xa,Qv,Ek,Tk,Kd,Uk,Gw,Zw,Pw,Hw,Mw,Nw,Vw,Dw,Qk,Od,Rk,Gk,e0,Kw,Pk,Hk,Mk,Nk,Vk,Yu,Dk,Kk,dp,Ok,zk,Wk,Jk,pp,Xk,Yk,jk,qk,fp,$k,tL,eL,iL,mp,rL,nL,sL,oL,aL,AL,lL,cL,uL,hL,ip,gL,dL,Rv,pL,fL,KC,Cp,mL,CL,IL,yL,bL,vL,Ip,wL,BL,_L,xL,SL,FL,kL,LL,EL,TL,UL,QL,Gv,RL,GL,ZL,dg,PL,HL,Ow,ML,NL,VL,DL,KL,OL,zL,WL,ts,JL,XL,YL,jL,qL,Zv,$L,tE,eE,iE,rE,nE,Pv,yi,sE,oE,OC,OA,aE,Hv,cg,rg,AE,lE,cE,Yc,i0,CC,uE,zw,hE,IC,gE,dE,pE,fE,mE,CE,IE,yE,Mv,bE,vE,wE,Nv,BE,ng,_E,yC,bC,Vv,Dv,xE,Kv,vC,wC,Ov,zv,Wv,Jv,BC,SE,FE,kE,Jc,Xv,LE,EE,TE,UE,QE,RE,GE,ZE,PE,Yv,HE,zC,jv,Ss,pg,ME,NE,qv,r0,VE,DE,KE,OE,zE,WE,JE,XE,Ww,Jw,Xw,Yw,WC,YE,jE,qE,$E,rp,np,tT,$v,n0,jw,qw,$w,eT,qd,t2,e2,iT,rT,i2,Xu,JC,$d,nT,sT,oT,aT,r2,s0,n2,tw,XC,s2,ew,AT,sp,op,o2,iw,lT,rw,nw,cT,uT,Du,a2,xn,zc,zu,Ac,lc,ug,_l,sw,ow,aw,_C,Ig,A2,Aw,fg,hT,gT,dT,pT,fT,xC,mT,CT,IT,yT,bT,YC,jC,lw,vT,wT,l2,BT,_T,xT,ST,FT,SC,kT,FC,LT,di,Ku,zd,Ba,ET,Nr,hn,ap,TT,Ap,UT,Wd,QT,RT,c2,GT,cw,ZT,u2,h2,qC,g2,PT,uw,HT,MT,NT,Jd,xa,d2,lp,VT,DT,kC,Ou,Xd,KT,Wu,OT,zT,hw,WT,p2,JT,XT,YT,jT,qT,$T,tU,eU,iU,rU,nU,sU,oU,aU,m2=_d(()=>{LC=function(n,e){return LC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},LC(n,e)};EC=function(){return EC=Object.assign||function(n){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(n[l]=e[l])}return n},EC.apply(this,arguments)};Sl=function(){function n(e,r,o,l){this.left=e,this.top=r,this.width=o,this.height=l}return n.prototype.add=function(e,r,o,l){return new n(this.left+e,this.top+r,this.width+o,this.height+l)},n.fromClientRect=function(e,r){return new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},n.fromDOMRectList=function(e,r){var o=Array.from(r).find(function(l){return l.width!==0});return o?new n(o.left+e.windowBounds.left,o.top+e.windowBounds.top,o.width,o.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),cp=function(n,e){return Sl.fromClientRect(n,e.getBoundingClientRect())},Z3=function(n){var e=n.body,r=n.documentElement;if(!e||!r)throw new Error("Unable to get document size");var o=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),l=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Sl(0,0,o,l)},up=function(n){for(var e=[],r=0,o=n.length;r<o;){var l=n.charCodeAt(r++);if(l>=55296&&l<=56319&&r<o){var s=n.charCodeAt(r++);(s&64512)===56320?e.push(((l&1023)<<10)+(s&1023)+65536):(e.push(l),r--)}else e.push(l)}return e},Sn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var r=n.length;if(!r)return"";for(var o=[],l=-1,s="";++l<r;){var p=n[l];p<=65535?o.push(p):(p-=65536,o.push((p>>10)+55296,p%1024+56320)),(l+1===r||o.length>16384)&&(s+=String.fromCharCode.apply(String,o),o.length=0)}return s},gv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Yh=0;Yh<gv.length;Yh++)P3[gv.charCodeAt(Yh)]=Yh;dv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(jh=0;jh<dv.length;jh++)sg[dv.charCodeAt(jh)]=jh;H3=function(n){var e=n.length*.75,r=n.length,o,l=0,s,p,m,I;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var w=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),_=Array.isArray(w)?w:new Uint8Array(w);for(o=0;o<r;o+=4)s=sg[n.charCodeAt(o)],p=sg[n.charCodeAt(o+1)],m=sg[n.charCodeAt(o+2)],I=sg[n.charCodeAt(o+3)],_[l++]=s<<2|p>>4,_[l++]=(p&15)<<4|m>>2,_[l++]=(m&3)<<6|I&63;return w},M3=function(n){for(var e=n.length,r=[],o=0;o<e;o+=2)r.push(n[o+1]<<8|n[o]);return r},N3=function(n){for(var e=n.length,r=[],o=0;o<e;o+=4)r.push(n[o+3]<<24|n[o+2]<<16|n[o+1]<<8|n[o]);return r},Xc=5,$C=11,cC=2,V3=$C-Xc,gw=65536>>Xc,D3=1<<Xc,uC=D3-1,K3=1024>>Xc,O3=gw+K3,z3=O3,W3=32,J3=z3+W3,X3=65536>>$C,Y3=1<<V3,j3=Y3-1,pv=function(n,e,r){return n.slice?n.slice(e,r):new Uint16Array(Array.prototype.slice.call(n,e,r))},q3=function(n,e,r){return n.slice?n.slice(e,r):new Uint32Array(Array.prototype.slice.call(n,e,r))},$3=function(n,e){var r=H3(n),o=Array.isArray(r)?N3(r):new Uint32Array(r),l=Array.isArray(r)?M3(r):new Uint16Array(r),s=24,p=pv(l,s/2,o[4]/2),m=o[5]===2?pv(l,(s+o[4])/2):q3(o,Math.ceil((s+o[4])/4));return new t4(o[0],o[1],o[2],o[3],p,m)},t4=function(){function n(e,r,o,l,s,p){this.initialValue=e,this.errorValue=r,this.highStart=o,this.highValueIndex=l,this.index=s,this.data=p}return n.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Xc],r=(r<<cC)+(e&uC),this.data[r];if(e<=65535)return r=this.index[gw+(e-55296>>Xc)],r=(r<<cC)+(e&uC),this.data[r];if(e<this.highStart)return r=J3-X3+(e>>$C),r=this.index[r],r+=e>>Xc&j3,r=this.index[r],r=(r<<cC)+(e&uC),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e4=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(qh=0;qh<fv.length;qh++)e4[fv.charCodeAt(qh)]=qh;i4="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",mv=50,r4=1,dw=2,pw=3,n4=4,s4=5,Cv=7,fw=8,Iv=9,uc=10,TC=11,yv=12,UC=13,o4=14,og=15,QC=16,Ud=17,$h=18,a4=19,bv=20,RC=21,tg=22,hC=23,Mu=24,ga=25,ag=26,Ag=27,Nu=28,A4=29,Ju=30,l4=31,Qd=32,Rd=33,GC=34,ZC=35,PC=36,mg=37,HC=38,Yd=39,jd=40,gC=41,mw=42,c4=43,u4=[9001,65288],Cw="!",go="\xD7",Gd="\xF7",MC=$3(i4),Bl=[Ju,PC],NC=[r4,dw,pw,s4],Iw=[uc,fw],vv=[Ag,ag],h4=NC.concat(Iw),wv=[HC,Yd,jd,GC,ZC],g4=[og,UC],d4=function(n,e){e===void 0&&(e="strict");var r=[],o=[],l=[];return n.forEach(function(s,p){var m=MC.get(s);if(m>mv?(l.push(!0),m-=mv):l.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return o.push(p),r.push(QC);if(m===n4||m===TC){if(p===0)return o.push(p),r.push(Ju);var I=r[p-1];return h4.indexOf(I)===-1?(o.push(o[p-1]),r.push(I)):(o.push(p),r.push(Ju))}if(o.push(p),m===l4)return r.push(e==="strict"?RC:mg);if(m===mw||m===A4)return r.push(Ju);if(m===c4)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(mg):r.push(Ju);r.push(m)}),[o,r,l]},dC=function(n,e,r,o){var l=o[r];if(Array.isArray(n)?n.indexOf(l)!==-1:n===l)for(var s=r;s<=o.length;){s++;var p=o[s];if(p===e)return!0;if(p!==uc)break}if(l===uc)for(var s=r;s>0;){s--;var m=o[s];if(Array.isArray(n)?n.indexOf(m)!==-1:n===m)for(var I=r;I<=o.length;){I++;var p=o[I];if(p===e)return!0;if(p!==uc)break}if(m!==uc)break}return!1},Bv=function(n,e){for(var r=n;r>=0;){var o=e[r];if(o===uc)r--;else return o}return 0},p4=function(n,e,r,o,l){if(r[o]===0)return go;var s=o-1;if(Array.isArray(l)&&l[s]===!0)return go;var p=s-1,m=s+1,I=e[s],w=p>=0?e[p]:0,_=e[m];if(I===dw&&_===pw)return go;if(NC.indexOf(I)!==-1)return Cw;if(NC.indexOf(_)!==-1||Iw.indexOf(_)!==-1)return go;if(Bv(s,e)===fw)return Gd;if(MC.get(n[s])===TC||(I===Qd||I===Rd)&&MC.get(n[m])===TC||I===Cv||_===Cv||I===Iv||[uc,UC,og].indexOf(I)===-1&&_===Iv||[Ud,$h,a4,Mu,Nu].indexOf(_)!==-1||Bv(s,e)===tg||dC(hC,tg,s,e)||dC([Ud,$h],RC,s,e)||dC(yv,yv,s,e))return go;if(I===uc)return Gd;if(I===hC||_===hC)return go;if(_===QC||I===QC)return Gd;if([UC,og,RC].indexOf(_)!==-1||I===o4||w===PC&&g4.indexOf(I)!==-1||I===Nu&&_===PC||_===bv||Bl.indexOf(_)!==-1&&I===ga||Bl.indexOf(I)!==-1&&_===ga||I===Ag&&[mg,Qd,Rd].indexOf(_)!==-1||[mg,Qd,Rd].indexOf(I)!==-1&&_===ag||Bl.indexOf(I)!==-1&&vv.indexOf(_)!==-1||vv.indexOf(I)!==-1&&Bl.indexOf(_)!==-1||[Ag,ag].indexOf(I)!==-1&&(_===ga||[tg,og].indexOf(_)!==-1&&e[m+1]===ga)||[tg,og].indexOf(I)!==-1&&_===ga||I===ga&&[ga,Nu,Mu].indexOf(_)!==-1)return go;if([ga,Nu,Mu,Ud,$h].indexOf(_)!==-1)for(var E=s;E>=0;){var U=e[E];if(U===ga)return go;if([Nu,Mu].indexOf(U)!==-1)E--;else break}if([Ag,ag].indexOf(_)!==-1)for(var E=[Ud,$h].indexOf(I)!==-1?p:s;E>=0;){var U=e[E];if(U===ga)return go;if([Nu,Mu].indexOf(U)!==-1)E--;else break}if(HC===I&&[HC,Yd,GC,ZC].indexOf(_)!==-1||[Yd,GC].indexOf(I)!==-1&&[Yd,jd].indexOf(_)!==-1||[jd,ZC].indexOf(I)!==-1&&_===jd||wv.indexOf(I)!==-1&&[bv,ag].indexOf(_)!==-1||wv.indexOf(_)!==-1&&I===Ag||Bl.indexOf(I)!==-1&&Bl.indexOf(_)!==-1||I===Mu&&Bl.indexOf(_)!==-1||Bl.concat(ga).indexOf(I)!==-1&&_===tg&&u4.indexOf(n[m])===-1||Bl.concat(ga).indexOf(_)!==-1&&I===$h)return go;if(I===gC&&_===gC){for(var F=r[s],V=1;F>0&&(F--,e[F]===gC);)V++;if(V%2!==0)return go}return I===Qd&&_===Rd?go:Gd},f4=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=d4(n,e.lineBreak),o=r[0],l=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(l=l.map(function(m){return[ga,Ju,mw].indexOf(m)!==-1?mg:m}));var p=e.wordBreak==="keep-all"?s.map(function(m,I){return m&&n[I]>=19968&&n[I]<=40959}):void 0;return[o,l,p]},m4=function(){function n(e,r,o,l){this.codePoints=e,this.required=r===Cw,this.start=o,this.end=l}return n.prototype.slice=function(){return Sn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),C4=function(n,e){var r=up(n),o=f4(r,e),l=o[0],s=o[1],p=o[2],m=r.length,I=0,w=0;return{next:function(){if(w>=m)return{done:!0,value:null};for(var _=go;w<m&&(_=p4(r,s,l,++w,p))===go;);if(_!==go||w===m){var E=new m4(r,_,I,w);return I=w,{value:E,done:!1}}return{done:!0,value:null}}}},I4=1,y4=2,yg=4,_v=8,tp=10,xv=47,hg=92,b4=9,v4=32,Zd=34,eg=61,w4=35,B4=36,_4=37,Pd=39,Hd=40,ig=41,x4=95,Do=45,S4=33,F4=60,k4=62,L4=64,E4=91,T4=93,U4=61,Q4=123,Md=63,R4=125,Sv=124,G4=126,Z4=128,Fv=65533,pC=42,Wc=43,P4=44,H4=58,M4=59,Cg=46,N4=0,V4=8,D4=11,K4=14,O4=31,z4=127,DA=-1,yw=48,bw=97,vw=101,W4=102,J4=117,X4=122,ww=65,Bw=69,_w=70,Y4=85,j4=90,fo=function(n){return n>=yw&&n<=57},q4=function(n){return n>=55296&&n<=57343},Vu=function(n){return fo(n)||n>=ww&&n<=_w||n>=bw&&n<=W4},$4=function(n){return n>=bw&&n<=X4},tk=function(n){return n>=ww&&n<=j4},ek=function(n){return $4(n)||tk(n)},ik=function(n){return n>=Z4},Nd=function(n){return n===tp||n===b4||n===v4},ep=function(n){return ek(n)||ik(n)||n===x4},kv=function(n){return ep(n)||fo(n)||n===Do},rk=function(n){return n>=N4&&n<=V4||n===D4||n>=K4&&n<=O4||n===z4},cc=function(n,e){return n!==hg?!1:e!==tp},Vd=function(n,e,r){return n===Do?ep(e)||cc(e,r):ep(n)?!0:!!(n===hg&&cc(n,e))},fC=function(n,e,r){return n===Wc||n===Do?fo(e)?!0:e===Cg&&fo(r):fo(n===Cg?e:n)},nk=function(n){var e=0,r=1;(n[e]===Wc||n[e]===Do)&&(n[e]===Do&&(r=-1),e++);for(var o=[];fo(n[e]);)o.push(n[e++]);var l=o.length?parseInt(Sn.apply(void 0,o),10):0;n[e]===Cg&&e++;for(var s=[];fo(n[e]);)s.push(n[e++]);var p=s.length,m=p?parseInt(Sn.apply(void 0,s),10):0;(n[e]===Bw||n[e]===vw)&&e++;var I=1;(n[e]===Wc||n[e]===Do)&&(n[e]===Do&&(I=-1),e++);for(var w=[];fo(n[e]);)w.push(n[e++]);var _=w.length?parseInt(Sn.apply(void 0,w),10):0;return r*(l+m*Math.pow(10,-p))*Math.pow(10,I*_)},sk={type:2},ok={type:3},ak={type:4},Ak={type:13},lk={type:8},ck={type:21},uk={type:9},hk={type:10},gk={type:11},dk={type:12},pk={type:14},Dd={type:23},fk={type:1},mk={type:25},Ck={type:24},Ik={type:26},yk={type:27},bk={type:28},vk={type:29},wk={type:31},VC={type:32},xw=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(up(e))},n.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==VC;)e.push(r),r=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Zd:return this.consumeStringToken(Zd);case w4:var r=this.peekCodePoint(0),o=this.peekCodePoint(1),l=this.peekCodePoint(2);if(kv(r)||cc(o,l)){var s=Vd(r,o,l)?y4:I4,p=this.consumeName();return{type:5,value:p,flags:s}}break;case B4:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),Ak;break;case Pd:return this.consumeStringToken(Pd);case Hd:return sk;case ig:return ok;case pC:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),pk;break;case Wc:if(fC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case P4:return ak;case Do:var m=e,I=this.peekCodePoint(0),w=this.peekCodePoint(1);if(fC(m,I,w))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Vd(m,I,w))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(I===Do&&w===k4)return this.consumeCodePoint(),this.consumeCodePoint(),Ck;break;case Cg:if(fC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case xv:if(this.peekCodePoint(0)===pC)for(this.consumeCodePoint();;){var _=this.consumeCodePoint();if(_===pC&&(_=this.consumeCodePoint(),_===xv))return this.consumeToken();if(_===DA)return this.consumeToken()}break;case H4:return Ik;case M4:return yk;case F4:if(this.peekCodePoint(0)===S4&&this.peekCodePoint(1)===Do&&this.peekCodePoint(2)===Do)return this.consumeCodePoint(),this.consumeCodePoint(),mk;break;case L4:var E=this.peekCodePoint(0),U=this.peekCodePoint(1),F=this.peekCodePoint(2);if(Vd(E,U,F)){var p=this.consumeName();return{type:7,value:p}}break;case E4:return bk;case hg:if(cc(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case T4:return vk;case U4:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),lk;break;case Q4:return gk;case R4:return dk;case J4:case Y4:var V=this.peekCodePoint(0),H=this.peekCodePoint(1);return V===Wc&&(Vu(H)||H===Md)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Sv:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),uk;if(this.peekCodePoint(0)===Sv)return this.consumeCodePoint(),ck;break;case G4:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),hk;break;case DA:return VC}return Nd(e)?(this.consumeWhiteSpace(),wk):fo(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):ep(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Sn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Vu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var o=!1;r===Md&&e.length<6;)e.push(r),r=this.consumeCodePoint(),o=!0;if(o){var l=parseInt(Sn.apply(void 0,e.map(function(I){return I===Md?yw:I})),16),s=parseInt(Sn.apply(void 0,e.map(function(I){return I===Md?_w:I})),16);return{type:30,start:l,end:s}}var p=parseInt(Sn.apply(void 0,e),16);if(this.peekCodePoint(0)===Do&&Vu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var m=[];Vu(r)&&m.length<6;)m.push(r),r=this.consumeCodePoint();var s=parseInt(Sn.apply(void 0,m),16);return{type:30,start:p,end:s}}else return{type:30,start:p,end:p}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Hd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Hd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===DA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Pd||r===Zd){var o=this.consumeStringToken(this.consumeCodePoint());return o.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===DA||this.peekCodePoint(0)===ig)?(this.consumeCodePoint(),{type:22,value:o.value}):(this.consumeBadUrlRemnants(),Dd)}for(;;){var l=this.consumeCodePoint();if(l===DA||l===ig)return{type:22,value:Sn.apply(void 0,e)};if(Nd(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===DA||this.peekCodePoint(0)===ig?(this.consumeCodePoint(),{type:22,value:Sn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Dd);if(l===Zd||l===Pd||l===Hd||rk(l))return this.consumeBadUrlRemnants(),Dd;if(l===hg)if(cc(l,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Dd;else e.push(l)}},n.prototype.consumeWhiteSpace=function(){for(;Nd(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ig||e===DA)return;cc(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var r=5e4,o="";e>0;){var l=Math.min(r,e);o+=Sn.apply(void 0,this._value.splice(0,l)),e-=l}return this._value.shift(),o},n.prototype.consumeStringToken=function(e){var r="",o=0;do{var l=this._value[o];if(l===DA||l===void 0||l===e)return r+=this.consumeStringSlice(o),{type:0,value:r};if(l===tp)return this._value.splice(0,o),fk;if(l===hg){var s=this._value[o+1];s!==DA&&s!==void 0&&(s===tp?(r+=this.consumeStringSlice(o),o=-1,this._value.shift()):cc(l,s)&&(r+=this.consumeStringSlice(o),r+=Sn(this.consumeEscapedCodePoint()),o=-1))}o++}while(!0)},n.prototype.consumeNumber=function(){var e=[],r=yg,o=this.peekCodePoint(0);for((o===Wc||o===Do)&&e.push(this.consumeCodePoint());fo(this.peekCodePoint(0));)e.push(this.consumeCodePoint());o=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(o===Cg&&fo(l))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=_v;fo(this.peekCodePoint(0));)e.push(this.consumeCodePoint());o=this.peekCodePoint(0),l=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((o===Bw||o===vw)&&((l===Wc||l===Do)&&fo(s)||fo(l)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=_v;fo(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[nk(e),r]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],o=e[1],l=this.peekCodePoint(0),s=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Vd(l,s,p)){var m=this.consumeName();return{type:15,number:r,flags:o,unit:m}}return l===_4?(this.consumeCodePoint(),{type:16,number:r,flags:o}):{type:17,number:r,flags:o}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Vu(e)){for(var r=Sn(e);Vu(this.peekCodePoint(0))&&r.length<6;)r+=Sn(this.consumeCodePoint());Nd(this.peekCodePoint(0))&&this.consumeCodePoint();var o=parseInt(r,16);return o===0||q4(o)||o>1114111?Fv:o}return e===DA?Fv:e},n.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(kv(r))e+=Sn(r);else if(cc(r,this.peekCodePoint(0)))e+=Sn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},n}(),Sw=function(){function n(e){this._tokens=e}return n.create=function(e){var r=new xw;return r.write(e),new n(r.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},o=this.consumeToken();;){if(o.type===32||_k(o,e))return r;this.reconsumeToken(o),r.values.push(this.consumeComponentValue()),o=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var o=this.consumeToken();if(o.type===32||o.type===3)return r;this.reconsumeToken(o),r.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?VC:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),bg=function(n){return n.type===15},qu=function(n){return n.type===17},Xr=function(n){return n.type===20},Bk=function(n){return n.type===0},DC=function(n,e){return Xr(n)&&n.value===e},Fw=function(n){return n.type!==31},ju=function(n){return n.type!==31&&n.type!==4},KA=function(n){var e=[],r=[];return n.forEach(function(o){if(o.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}o.type!==31&&r.push(o)}),r.length&&e.push(r),e},_k=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},fc=function(n){return n.type===17||n.type===15},On=function(n){return n.type===16||fc(n)},kw=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Fs={type:17,number:0,flags:yg},t0={type:16,number:50,flags:yg},hc={type:16,number:100,flags:yg},lg=function(n,e,r){var o=n[0],l=n[1];return[sn(o,e),sn(typeof l<"u"?l:o,r)]},sn=function(n,e){if(n.type===16)return n.number/100*e;if(bg(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},Lw="deg",Ew="grad",Tw="rad",Uw="turn",hp={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case Lw:return Math.PI*e.number/180;case Ew:return Math.PI/200*e.number;case Tw:return e.number;case Uw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Qw=function(n){return n.type===15&&(n.unit===Lw||n.unit===Ew||n.unit===Tw||n.unit===Uw)},Rw=function(n){var e=n.filter(Xr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Fs,Fs];case"to top":case"bottom":return _a(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Fs,hc];case"to right":case"left":return _a(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[hc,hc];case"to bottom":case"top":return _a(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[hc,Fs];case"to left":case"right":return _a(270)}return 0},_a=function(n){return Math.PI*n/180},dc={name:"color",parse:function(n,e){if(e.type===18){var r=xk[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(n,e.values)}if(e.type===5){if(e.value.length===3){var o=e.value.substring(0,1),l=e.value.substring(1,2),s=e.value.substring(2,3);return gc(parseInt(o+o,16),parseInt(l+l,16),parseInt(s+s,16),1)}if(e.value.length===4){var o=e.value.substring(0,1),l=e.value.substring(1,2),s=e.value.substring(2,3),p=e.value.substring(3,4);return gc(parseInt(o+o,16),parseInt(l+l,16),parseInt(s+s,16),parseInt(p+p,16)/255)}if(e.value.length===6){var o=e.value.substring(0,2),l=e.value.substring(2,4),s=e.value.substring(4,6);return gc(parseInt(o,16),parseInt(l,16),parseInt(s,16),1)}if(e.value.length===8){var o=e.value.substring(0,2),l=e.value.substring(2,4),s=e.value.substring(4,6),p=e.value.substring(6,8);return gc(parseInt(o,16),parseInt(l,16),parseInt(s,16),parseInt(p,16)/255)}}if(e.type===20){var m=xl[e.value.toUpperCase()];if(typeof m<"u")return m}return xl.TRANSPARENT}},pc=function(n){return(255&n)===0},hs=function(n){var e=255&n,r=255&n>>8,o=255&n>>16,l=255&n>>24;return e<255?"rgba("+l+","+o+","+r+","+e/255+")":"rgb("+l+","+o+","+r+")"},gc=function(n,e,r,o){return(n<<24|e<<16|r<<8|Math.round(o*255)<<0)>>>0},Lv=function(n,e){if(n.type===17)return n.number;if(n.type===16){var r=e===3?1:255;return e===3?n.number/100*r:Math.round(n.number/100*r)}return 0},Ev=function(n,e){var r=e.filter(ju);if(r.length===3){var o=r.map(Lv),l=o[0],s=o[1],p=o[2];return gc(l,s,p,1)}if(r.length===4){var m=r.map(Lv),l=m[0],s=m[1],p=m[2],I=m[3];return gc(l,s,p,I)}return 0};Tv=function(n,e){var r=e.filter(ju),o=r[0],l=r[1],s=r[2],p=r[3],m=(o.type===17?_a(o.number):hp.parse(n,o))/(Math.PI*2),I=On(l)?l.number/100:0,w=On(s)?s.number/100:0,_=typeof p<"u"&&On(p)?sn(p,1):1;if(I===0)return gc(w*255,w*255,w*255,1);var E=w<=.5?w*(I+1):w+I-w*I,U=w*2-E,F=mC(U,E,m+1/3),V=mC(U,E,m),H=mC(U,E,m-1/3);return gc(F*255,V*255,H*255,_)},xk={hsl:Tv,hsla:Tv,rgb:Ev,rgba:Ev},gg=function(n,e){return dc.parse(n,Sw.create(e).parseComponentValue())},xl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Sk={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(r){if(Xr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Fk={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gp=function(n,e){var r=dc.parse(n,e[0]),o=e[1];return o&&On(o)?{color:r,stop:o}:{color:r,stop:null}},Uv=function(n,e){var r=n[0],o=n[n.length-1];r.stop===null&&(r.stop=Fs),o.stop===null&&(o.stop=hc);for(var l=[],s=0,p=0;p<n.length;p++){var m=n[p].stop;if(m!==null){var I=sn(m,e);I>s?l.push(I):l.push(s),s=I}else l.push(null)}for(var w=null,p=0;p<l.length;p++){var _=l[p];if(_===null)w===null&&(w=p);else if(w!==null){for(var E=p-w,U=l[w-1],F=(_-U)/(E+1),V=1;V<=E;V++)l[w+V-1]=F*V;w=null}}return n.map(function(H,Y){var D=H.color;return{color:D,stop:Math.max(Math.min(1,l[Y]/e),0)}})},kk=function(n,e,r){var o=e/2,l=r/2,s=sn(n[0],e)-o,p=l-sn(n[1],r);return(Math.atan2(p,s)+Math.PI*2)%(Math.PI*2)},Lk=function(n,e,r){var o=typeof n=="number"?n:kk(n,e,r),l=Math.abs(e*Math.sin(o))+Math.abs(r*Math.cos(o)),s=e/2,p=r/2,m=l/2,I=Math.sin(o-Math.PI/2)*m,w=Math.cos(o-Math.PI/2)*m;return[l,s-w,s+w,p-I,p+I]},Xa=function(n,e){return Math.sqrt(n*n+e*e)},Qv=function(n,e,r,o,l){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(p,m){var I=m[0],w=m[1],_=Xa(r-I,o-w);return(l?_<p.optimumDistance:_>p.optimumDistance)?{optimumCorner:m,optimumDistance:_}:p},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},Ek=function(n,e,r,o,l){var s=0,p=0;switch(n.size){case 0:n.shape===0?s=p=Math.min(Math.abs(e),Math.abs(e-o),Math.abs(r),Math.abs(r-l)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-o)),p=Math.min(Math.abs(r),Math.abs(r-l)));break;case 2:if(n.shape===0)s=p=Math.min(Xa(e,r),Xa(e,r-l),Xa(e-o,r),Xa(e-o,r-l));else if(n.shape===1){var m=Math.min(Math.abs(r),Math.abs(r-l))/Math.min(Math.abs(e),Math.abs(e-o)),I=Qv(o,l,e,r,!0),w=I[0],_=I[1];s=Xa(w-e,(_-r)/m),p=m*s}break;case 1:n.shape===0?s=p=Math.max(Math.abs(e),Math.abs(e-o),Math.abs(r),Math.abs(r-l)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-o)),p=Math.max(Math.abs(r),Math.abs(r-l)));break;case 3:if(n.shape===0)s=p=Math.max(Xa(e,r),Xa(e,r-l),Xa(e-o,r),Xa(e-o,r-l));else if(n.shape===1){var m=Math.max(Math.abs(r),Math.abs(r-l))/Math.max(Math.abs(e),Math.abs(e-o)),E=Qv(o,l,e,r,!1),w=E[0],_=E[1];s=Xa(w-e,(_-r)/m),p=m*s}break}return Array.isArray(n.size)&&(s=sn(n.size[0],o),p=n.size.length===2?sn(n.size[1],l):s),[s,p]},Tk=function(n,e){var r=_a(180),o=[];return KA(e).forEach(function(l,s){if(s===0){var p=l[0];if(p.type===20&&p.value==="to"){r=Rw(l);return}else if(Qw(p)){r=hp.parse(n,p);return}}var m=gp(n,l);o.push(m)}),{angle:r,stops:o,type:1}},Kd=function(n,e){var r=_a(180),o=[];return KA(e).forEach(function(l,s){if(s===0){var p=l[0];if(p.type===20&&["top","left","right","bottom"].indexOf(p.value)!==-1){r=Rw(l);return}else if(Qw(p)){r=(hp.parse(n,p)+_a(270))%_a(360);return}}var m=gp(n,l);o.push(m)}),{angle:r,stops:o,type:1}},Uk=function(n,e){var r=_a(180),o=[],l=1,s=0,p=3,m=[];return KA(e).forEach(function(I,w){var _=I[0];if(w===0){if(Xr(_)&&_.value==="linear"){l=1;return}else if(Xr(_)&&_.value==="radial"){l=2;return}}if(_.type===18){if(_.name==="from"){var E=dc.parse(n,_.values[0]);o.push({stop:Fs,color:E})}else if(_.name==="to"){var E=dc.parse(n,_.values[0]);o.push({stop:hc,color:E})}else if(_.name==="color-stop"){var U=_.values.filter(ju);if(U.length===2){var E=dc.parse(n,U[1]),F=U[0];qu(F)&&o.push({stop:{type:16,number:F.number*100,flags:F.flags},color:E})}}}}),l===1?{angle:(r+_a(180))%_a(360),stops:o,type:l}:{size:p,shape:s,stops:o,position:m,type:l}},Gw="closest-side",Zw="farthest-side",Pw="closest-corner",Hw="farthest-corner",Mw="circle",Nw="ellipse",Vw="cover",Dw="contain",Qk=function(n,e){var r=0,o=3,l=[],s=[];return KA(e).forEach(function(p,m){var I=!0;if(m===0){var w=!1;I=p.reduce(function(E,U){if(w)if(Xr(U))switch(U.value){case"center":return s.push(t0),E;case"top":case"left":return s.push(Fs),E;case"right":case"bottom":return s.push(hc),E}else(On(U)||fc(U))&&s.push(U);else if(Xr(U))switch(U.value){case Mw:return r=0,!1;case Nw:return r=1,!1;case"at":return w=!0,!1;case Gw:return o=0,!1;case Vw:case Zw:return o=1,!1;case Dw:case Pw:return o=2,!1;case Hw:return o=3,!1}else if(fc(U)||On(U))return Array.isArray(o)||(o=[]),o.push(U),!1;return E},I)}if(I){var _=gp(n,p);l.push(_)}}),{size:o,shape:r,stops:l,position:s,type:2}},Od=function(n,e){var r=0,o=3,l=[],s=[];return KA(e).forEach(function(p,m){var I=!0;if(m===0?I=p.reduce(function(_,E){if(Xr(E))switch(E.value){case"center":return s.push(t0),!1;case"top":case"left":return s.push(Fs),!1;case"right":case"bottom":return s.push(hc),!1}else if(On(E)||fc(E))return s.push(E),!1;return _},I):m===1&&(I=p.reduce(function(_,E){if(Xr(E))switch(E.value){case Mw:return r=0,!1;case Nw:return r=1,!1;case Dw:case Gw:return o=0,!1;case Zw:return o=1,!1;case Pw:return o=2,!1;case Vw:case Hw:return o=3,!1}else if(fc(E)||On(E))return Array.isArray(o)||(o=[]),o.push(E),!1;return _},I)),I){var w=gp(n,p);l.push(w)}}),{size:o,shape:r,stops:l,position:s,type:2}},Rk=function(n){return n.type===1},Gk=function(n){return n.type===2},e0={name:"image",parse:function(n,e){if(e.type===22){var r={url:e.value,type:0};return n.cache.addImage(e.value),r}if(e.type===18){var o=Kw[e.name];if(typeof o>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return o(n,e.values)}throw new Error("Unsupported image type "+e.type)}};Kw={"linear-gradient":Tk,"-moz-linear-gradient":Kd,"-ms-linear-gradient":Kd,"-o-linear-gradient":Kd,"-webkit-linear-gradient":Kd,"radial-gradient":Qk,"-moz-radial-gradient":Od,"-ms-radial-gradient":Od,"-o-radial-gradient":Od,"-webkit-radial-gradient":Od,"-webkit-gradient":Uk},Pk={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(o){return ju(o)&&Zk(o)}).map(function(o){return e0.parse(n,o)})}},Hk={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(r){if(Xr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Mk={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return KA(e).map(function(r){return r.filter(On)}).map(kw)}},Nk={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return KA(e).map(function(r){return r.filter(Xr).map(function(o){return o.value}).join(" ")}).map(Vk)}},Vk=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}};(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Yu||(Yu={}));Dk={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return KA(e).map(function(r){return r.filter(Kk)})}},Kk=function(n){return Xr(n)||On(n)},dp=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ok=dp("top"),zk=dp("right"),Wk=dp("bottom"),Jk=dp("left"),pp=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return kw(r.filter(On))}}},Xk=pp("top-left"),Yk=pp("top-right"),jk=pp("bottom-right"),qk=pp("bottom-left"),fp=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},$k=fp("top"),tL=fp("right"),eL=fp("bottom"),iL=fp("left"),mp=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return bg(r)?r.number:0}}},rL=mp("top"),nL=mp("right"),sL=mp("bottom"),oL=mp("left"),aL={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},AL={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},lL={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Xr).reduce(function(r,o){return r|cL(o.value)},0)}},cL=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},uL={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},hL={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}};(function(n){n.NORMAL="normal",n.STRICT="strict"})(ip||(ip={}));gL={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return ip.STRICT;case"normal":default:return ip.NORMAL}}},dL={name:"line-height",initialValue:"normal",prefix:!1,type:4},Rv=function(n,e){return Xr(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:On(n)?sn(n,e):e},pL={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:e0.parse(n,e)}},fL={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},KC={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Cp=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},mL=Cp("top"),CL=Cp("right"),IL=Cp("bottom"),yL=Cp("left"),bL={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Xr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},vL={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ip=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},wL=Ip("top"),BL=Ip("right"),_L=Ip("bottom"),xL=Ip("left"),SL={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FL={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},kL={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&DC(e[0],"none")?[]:KA(e).map(function(r){for(var o={color:xl.TRANSPARENT,offsetX:Fs,offsetY:Fs,blur:Fs},l=0,s=0;s<r.length;s++){var p=r[s];fc(p)?(l===0?o.offsetX=p:l===1?o.offsetY=p:o.blur=p,l++):o.color=dc.parse(n,p)}return o})}},LL={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},EL={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=QL[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},TL=function(n){var e=n.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},UL=function(n){var e=n.filter(function(I){return I.type===17}).map(function(I){return I.number}),r=e[0],o=e[1];e[2],e[3];var l=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var p=e[12],m=e[13];return e[14],e[15],e.length===16?[r,o,l,s,p,m]:null},QL={matrix:TL,matrix3d:UL},Gv={type:16,number:50,flags:yg},RL=[Gv,Gv],GL={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var r=e.filter(On);return r.length!==2?RL:[r[0],r[1]]}},ZL={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}};(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(dg||(dg={}));PL={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return dg.BREAK_ALL;case"keep-all":return dg.KEEP_ALL;case"normal":default:return dg.NORMAL}}},HL={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(qu(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Ow={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},ML={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return qu(e)?e.number:1}},NL={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},VL={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Xr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},DL={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var r=[],o=[];return e.forEach(function(l){switch(l.type){case 20:case 0:r.push(l.value);break;case 17:r.push(l.number.toString());break;case 4:o.push(r.join(" ")),r.length=0;break}}),r.length&&o.push(r.join(" ")),o.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},KL={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},OL={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(qu(e))return e.number;if(Xr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},zL={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Xr).map(function(r){return r.value})}},WL={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ts=function(n,e){return(n&e)!==0},JL={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},XL={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var o=[],l=e.filter(Fw),s=0;s<l.length;s++){var p=l[s],m=l[s+1];if(p.type===20){var I=m&&qu(m)?m.number:1;o.push({counter:p.value,increment:I})}}return o}},YL={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var r=[],o=e.filter(Fw),l=0;l<o.length;l++){var s=o[l],p=o[l+1];if(Xr(s)&&s.value!=="none"){var m=p&&qu(p)?p.number:0;r.push({counter:s.value,reset:m})}}return r}},jL={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(bg).map(function(r){return Ow.parse(n,r)})}},qL={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var o=[],l=e.filter(Bk);if(l.length%2!==0)return null;for(var s=0;s<l.length;s+=2){var p=l[s].value,m=l[s+1].value;o.push({open:p,close:m})}return o}},Zv=function(n,e,r){if(!n)return"";var o=n[Math.min(e,n.length-1)];return o?r?o.open:o.close:""},$L={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&DC(e[0],"none")?[]:KA(e).map(function(r){for(var o={color:255,offsetX:Fs,offsetY:Fs,blur:Fs,spread:Fs,inset:!1},l=0,s=0;s<r.length;s++){var p=r[s];DC(p,"inset")?o.inset=!0:fc(p)?(l===0?o.offsetX=p:l===1?o.offsetY=p:l===2?o.blur=p:o.spread=p,l++):o.color=dc.parse(n,p)}return o})}},tE={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var r=[0,1,2],o=[];return e.filter(Xr).forEach(function(l){switch(l.value){case"stroke":o.push(1);break;case"fill":o.push(0);break;case"markers":o.push(2);break}}),r.forEach(function(l){o.indexOf(l)===-1&&o.push(l)}),o}},eE={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},iE={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return bg(e)?e.number:0}},rE=function(){function n(e,r){var o,l;this.animationDuration=yi(e,jL,r.animationDuration),this.backgroundClip=yi(e,Sk,r.backgroundClip),this.backgroundColor=yi(e,Fk,r.backgroundColor),this.backgroundImage=yi(e,Pk,r.backgroundImage),this.backgroundOrigin=yi(e,Hk,r.backgroundOrigin),this.backgroundPosition=yi(e,Mk,r.backgroundPosition),this.backgroundRepeat=yi(e,Nk,r.backgroundRepeat),this.backgroundSize=yi(e,Dk,r.backgroundSize),this.borderTopColor=yi(e,Ok,r.borderTopColor),this.borderRightColor=yi(e,zk,r.borderRightColor),this.borderBottomColor=yi(e,Wk,r.borderBottomColor),this.borderLeftColor=yi(e,Jk,r.borderLeftColor),this.borderTopLeftRadius=yi(e,Xk,r.borderTopLeftRadius),this.borderTopRightRadius=yi(e,Yk,r.borderTopRightRadius),this.borderBottomRightRadius=yi(e,jk,r.borderBottomRightRadius),this.borderBottomLeftRadius=yi(e,qk,r.borderBottomLeftRadius),this.borderTopStyle=yi(e,$k,r.borderTopStyle),this.borderRightStyle=yi(e,tL,r.borderRightStyle),this.borderBottomStyle=yi(e,eL,r.borderBottomStyle),this.borderLeftStyle=yi(e,iL,r.borderLeftStyle),this.borderTopWidth=yi(e,rL,r.borderTopWidth),this.borderRightWidth=yi(e,nL,r.borderRightWidth),this.borderBottomWidth=yi(e,sL,r.borderBottomWidth),this.borderLeftWidth=yi(e,oL,r.borderLeftWidth),this.boxShadow=yi(e,$L,r.boxShadow),this.color=yi(e,aL,r.color),this.direction=yi(e,AL,r.direction),this.display=yi(e,lL,r.display),this.float=yi(e,uL,r.cssFloat),this.fontFamily=yi(e,DL,r.fontFamily),this.fontSize=yi(e,KL,r.fontSize),this.fontStyle=yi(e,WL,r.fontStyle),this.fontVariant=yi(e,zL,r.fontVariant),this.fontWeight=yi(e,OL,r.fontWeight),this.letterSpacing=yi(e,hL,r.letterSpacing),this.lineBreak=yi(e,gL,r.lineBreak),this.lineHeight=yi(e,dL,r.lineHeight),this.listStyleImage=yi(e,pL,r.listStyleImage),this.listStylePosition=yi(e,fL,r.listStylePosition),this.listStyleType=yi(e,KC,r.listStyleType),this.marginTop=yi(e,mL,r.marginTop),this.marginRight=yi(e,CL,r.marginRight),this.marginBottom=yi(e,IL,r.marginBottom),this.marginLeft=yi(e,yL,r.marginLeft),this.opacity=yi(e,ML,r.opacity);var s=yi(e,bL,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=yi(e,vL,r.overflowWrap),this.paddingTop=yi(e,wL,r.paddingTop),this.paddingRight=yi(e,BL,r.paddingRight),this.paddingBottom=yi(e,_L,r.paddingBottom),this.paddingLeft=yi(e,xL,r.paddingLeft),this.paintOrder=yi(e,tE,r.paintOrder),this.position=yi(e,FL,r.position),this.textAlign=yi(e,SL,r.textAlign),this.textDecorationColor=yi(e,NL,(o=r.textDecorationColor)!==null&&o!==void 0?o:r.color),this.textDecorationLine=yi(e,VL,(l=r.textDecorationLine)!==null&&l!==void 0?l:r.textDecoration),this.textShadow=yi(e,kL,r.textShadow),this.textTransform=yi(e,LL,r.textTransform),this.transform=yi(e,EL,r.transform),this.transformOrigin=yi(e,GL,r.transformOrigin),this.visibility=yi(e,ZL,r.visibility),this.webkitTextStrokeColor=yi(e,eE,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=yi(e,iE,r.webkitTextStrokeWidth),this.wordBreak=yi(e,PL,r.wordBreak),this.zIndex=yi(e,HL,r.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return pc(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return ts(this.display,4)||ts(this.display,33554432)||ts(this.display,268435456)||ts(this.display,536870912)||ts(this.display,67108864)||ts(this.display,134217728)},n}(),nE=function(){function n(e,r){this.content=yi(e,JL,r.content),this.quotes=yi(e,qL,r.quotes)}return n}(),Pv=function(){function n(e,r){this.counterIncrement=yi(e,XL,r.counterIncrement),this.counterReset=yi(e,YL,r.counterReset)}return n}(),yi=function(n,e,r){var o=new xw,l=r!==null&&typeof r<"u"?r.toString():e.initialValue;o.write(l);var s=new Sw(o.read());switch(e.type){case 2:var p=s.parseComponentValue();return e.parse(n,Xr(p)?p.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return hp.parse(n,s.parseComponentValue());case"color":return dc.parse(n,s.parseComponentValue());case"image":return e0.parse(n,s.parseComponentValue());case"length":var m=s.parseComponentValue();return fc(m)?m:Fs;case"length-percentage":var I=s.parseComponentValue();return On(I)?I:Fs;case"time":return Ow.parse(n,s.parseComponentValue())}break}},sE="data-html2canvas-debug",oE=function(n){var e=n.getAttribute(sE);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},OC=function(n,e){var r=oE(n);return r===1||e===r},OA=function(){function n(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,OC(r,3))debugger;this.styles=new rE(e,window.getComputedStyle(r,null)),JC(r)&&(this.styles.animationDuration.some(function(o){return o>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=cp(this.context,r),OC(r,4)&&(this.flags|=16)}return n}(),aE="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Hv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(rg=0;rg<Hv.length;rg++)cg[Hv.charCodeAt(rg)]=rg;AE=function(n){var e=n.length*.75,r=n.length,o,l=0,s,p,m,I;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var w=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),_=Array.isArray(w)?w:new Uint8Array(w);for(o=0;o<r;o+=4)s=cg[n.charCodeAt(o)],p=cg[n.charCodeAt(o+1)],m=cg[n.charCodeAt(o+2)],I=cg[n.charCodeAt(o+3)],_[l++]=s<<2|p>>4,_[l++]=(p&15)<<4|m>>2,_[l++]=(m&3)<<6|I&63;return w},lE=function(n){for(var e=n.length,r=[],o=0;o<e;o+=2)r.push(n[o+1]<<8|n[o]);return r},cE=function(n){for(var e=n.length,r=[],o=0;o<e;o+=4)r.push(n[o+3]<<24|n[o+2]<<16|n[o+1]<<8|n[o]);return r},Yc=5,i0=11,CC=2,uE=i0-Yc,zw=65536>>Yc,hE=1<<Yc,IC=hE-1,gE=1024>>Yc,dE=zw+gE,pE=dE,fE=32,mE=pE+fE,CE=65536>>i0,IE=1<<uE,yE=IE-1,Mv=function(n,e,r){return n.slice?n.slice(e,r):new Uint16Array(Array.prototype.slice.call(n,e,r))},bE=function(n,e,r){return n.slice?n.slice(e,r):new Uint32Array(Array.prototype.slice.call(n,e,r))},vE=function(n,e){var r=AE(n),o=Array.isArray(r)?cE(r):new Uint32Array(r),l=Array.isArray(r)?lE(r):new Uint16Array(r),s=24,p=Mv(l,s/2,o[4]/2),m=o[5]===2?Mv(l,(s+o[4])/2):bE(o,Math.ceil((s+o[4])/4));return new wE(o[0],o[1],o[2],o[3],p,m)},wE=function(){function n(e,r,o,l,s,p){this.initialValue=e,this.errorValue=r,this.highStart=o,this.highValueIndex=l,this.index=s,this.data=p}return n.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Yc],r=(r<<CC)+(e&IC),this.data[r];if(e<=65535)return r=this.index[zw+(e-55296>>Yc)],r=(r<<CC)+(e&IC),this.data[r];if(e<this.highStart)return r=mE-CE+(e>>i0),r=this.index[r],r+=e>>Yc&yE,r=this.index[r],r=(r<<CC)+(e&IC),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Nv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ng=0;ng<Nv.length;ng++)BE[Nv.charCodeAt(ng)]=ng;_E=1,yC=2,bC=3,Vv=4,Dv=5,xE=7,Kv=8,vC=9,wC=10,Ov=11,zv=12,Wv=13,Jv=14,BC=15,SE=function(n){for(var e=[],r=0,o=n.length;r<o;){var l=n.charCodeAt(r++);if(l>=55296&&l<=56319&&r<o){var s=n.charCodeAt(r++);(s&64512)===56320?e.push(((l&1023)<<10)+(s&1023)+65536):(e.push(l),r--)}else e.push(l)}return e},FE=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var r=n.length;if(!r)return"";for(var o=[],l=-1,s="";++l<r;){var p=n[l];p<=65535?o.push(p):(p-=65536,o.push((p>>10)+55296,p%1024+56320)),(l+1===r||o.length>16384)&&(s+=String.fromCharCode.apply(String,o),o.length=0)}return s},kE=vE(aE),Jc="\xD7",Xv="\xF7",LE=function(n){return kE.get(n)},EE=function(n,e,r){var o=r-2,l=e[o],s=e[r-1],p=e[r];if(s===yC&&p===bC)return Jc;if(s===yC||s===bC||s===Vv||p===yC||p===bC||p===Vv)return Xv;if(s===Kv&&[Kv,vC,Ov,zv].indexOf(p)!==-1||(s===Ov||s===vC)&&(p===vC||p===wC)||(s===zv||s===wC)&&p===wC||p===Wv||p===Dv||p===xE||s===_E)return Jc;if(s===Wv&&p===Jv){for(;l===Dv;)l=e[--o];if(l===Jv)return Jc}if(s===BC&&p===BC){for(var m=0;l===BC;)m++,l=e[--o];if(m%2===0)return Jc}return Xv},TE=function(n){var e=SE(n),r=e.length,o=0,l=0,s=e.map(LE);return{next:function(){if(o>=r)return{done:!0,value:null};for(var p=Jc;o<r&&(p=EE(e,s,++o))===Jc;);if(p!==Jc||o===r){var m=FE.apply(null,e.slice(l,o));return l=o,{value:m,done:!1}}return{done:!0,value:null}}}},UE=function(n){for(var e=TE(n),r=[],o;!(o=e.next()).done;)o.value&&r.push(o.value.slice());return r},QE=function(n){var e=123;if(n.createRange){var r=n.createRange();if(r.getBoundingClientRect){var o=n.createElement("boundtest");o.style.height=e+"px",o.style.display="block",n.body.appendChild(o),r.selectNode(o);var l=r.getBoundingClientRect(),s=Math.round(l.height);if(n.body.removeChild(o),s===e)return!0}}return!1},RE=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var r=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var o=e.firstChild,l=up(o.data).map(function(I){return Sn(I)}),s=0,p={},m=l.every(function(I,w){r.setStart(o,s),r.setEnd(o,s+I.length);var _=r.getBoundingClientRect();s+=I.length;var E=_.x>p.x||_.y>p.y;return p=_,w===0?!0:E});return n.body.removeChild(e),m},GE=function(){return typeof new Image().crossOrigin<"u"},ZE=function(){return typeof new XMLHttpRequest().responseType=="string"},PE=function(n){var e=new Image,r=n.createElement("canvas"),o=r.getContext("2d");if(!o)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{o.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},Yv=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},HE=function(n){var e=n.createElement("canvas"),r=100;e.width=r,e.height=r;var o=e.getContext("2d");if(!o)return Promise.reject(!1);o.fillStyle="rgb(0, 255, 0)",o.fillRect(0,0,r,r);var l=new Image,s=e.toDataURL();l.src=s;var p=zC(r,r,0,0,l);return o.fillStyle="red",o.fillRect(0,0,r,r),jv(p).then(function(m){o.drawImage(m,0,0);var I=o.getImageData(0,0,r,r).data;o.fillStyle="red",o.fillRect(0,0,r,r);var w=n.createElement("div");return w.style.backgroundImage="url("+s+")",w.style.height=r+"px",Yv(I)?jv(zC(r,r,0,0,w)):Promise.reject(!1)}).then(function(m){return o.drawImage(m,0,0),Yv(o.getImageData(0,0,r,r).data)}).catch(function(){return!1})},zC=function(n,e,r,o,l){var s="http://www.w3.org/2000/svg",p=document.createElementNS(s,"svg"),m=document.createElementNS(s,"foreignObject");return p.setAttributeNS(null,"width",n.toString()),p.setAttributeNS(null,"height",e.toString()),m.setAttributeNS(null,"width","100%"),m.setAttributeNS(null,"height","100%"),m.setAttributeNS(null,"x",r.toString()),m.setAttributeNS(null,"y",o.toString()),m.setAttributeNS(null,"externalResourcesRequired","true"),p.appendChild(m),m.appendChild(l),p},jv=function(n){return new Promise(function(e,r){var o=new Image;o.onload=function(){return e(o)},o.onerror=r,o.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Ss={get SUPPORT_RANGE_BOUNDS(){var n=QE(document);return Object.defineProperty(Ss,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Ss.SUPPORT_RANGE_BOUNDS&&RE(document);return Object.defineProperty(Ss,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=PE(document);return Object.defineProperty(Ss,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?HE(document):Promise.resolve(!1);return Object.defineProperty(Ss,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=GE();return Object.defineProperty(Ss,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=ZE();return Object.defineProperty(Ss,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ss,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ss,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},pg=function(){function n(e,r){this.text=e,this.bounds=r}return n}(),ME=function(n,e,r,o){var l=DE(e,r),s=[],p=0;return l.forEach(function(m){if(r.textDecorationLine.length||m.trim().length>0)if(Ss.SUPPORT_RANGE_BOUNDS){var I=qv(o,p,m.length).getClientRects();if(I.length>1){var w=r0(m),_=0;w.forEach(function(U){s.push(new pg(U,Sl.fromDOMRectList(n,qv(o,_+p,U.length).getClientRects()))),_+=U.length})}else s.push(new pg(m,Sl.fromDOMRectList(n,I)))}else{var E=o.splitText(m.length);s.push(new pg(m,NE(n,o))),o=E}else Ss.SUPPORT_RANGE_BOUNDS||(o=o.splitText(m.length));p+=m.length}),s},NE=function(n,e){var r=e.ownerDocument;if(r){var o=r.createElement("html2canvaswrapper");o.appendChild(e.cloneNode(!0));var l=e.parentNode;if(l){l.replaceChild(o,e);var s=cp(n,o);return o.firstChild&&l.replaceChild(o.firstChild,o),s}}return Sl.EMPTY},qv=function(n,e,r){var o=n.ownerDocument;if(!o)throw new Error("Node has no owner document");var l=o.createRange();return l.setStart(n,e),l.setEnd(n,e+r),l},r0=function(n){if(Ss.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(r){return r.segment})}return UE(n)},VE=function(n,e){if(Ss.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(n)).map(function(o){return o.segment})}return OE(n,e)},DE=function(n,e){return e.letterSpacing!==0?r0(n):VE(n,e)},KE=[32,160,4961,65792,65793,4153,4241],OE=function(n,e){for(var r=C4(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),o=[],l,s=function(){if(l.value){var p=l.value.slice(),m=up(p),I="";m.forEach(function(w){KE.indexOf(w)===-1?I+=Sn(w):(I.length&&o.push(I),o.push(Sn(w)),I="")}),I.length&&o.push(I)}};!(l=r.next()).done;)s();return o},zE=function(){function n(e,r,o){this.text=WE(r.data,o.textTransform),this.textBounds=ME(e,this.text,o,r)}return n}(),WE=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(JE,XE);case 2:return n.toUpperCase();default:return n}},JE=/(^|\s|:|-|\(|\))([a-z])/g,XE=function(n,e,r){return n.length>0?e+r.toUpperCase():n},Ww=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.src=o.currentSrc||o.src,l.intrinsicWidth=o.naturalWidth,l.intrinsicHeight=o.naturalHeight,l.context.cache.addImage(l.src),l}return e}(OA),Jw=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.canvas=o,l.intrinsicWidth=o.width,l.intrinsicHeight=o.height,l}return e}(OA),Xw=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this,s=new XMLSerializer,p=cp(r,o);return o.setAttribute("width",p.width+"px"),o.setAttribute("height",p.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(o)),l.intrinsicWidth=o.width.baseVal.value,l.intrinsicHeight=o.height.baseVal.value,l.context.cache.addImage(l.svg),l}return e}(OA),Yw=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.value=o.value,l}return e}(OA),WC=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.start=o.start,l.reversed=typeof o.reversed=="boolean"&&o.reversed===!0,l}return e}(OA),YE=[{type:15,flags:0,unit:"px",number:3}],jE=[{type:16,flags:0,number:50}],qE=function(n){return n.width>n.height?new Sl(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new Sl(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},$E=function(n){var e=n.type===tT?new Array(n.value.length+1).join("\u2022"):n.value;return e.length===0?n.placeholder||"":e},rp="checkbox",np="radio",tT="password",$v=707406591,n0=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;switch(l.type=o.type.toLowerCase(),l.checked=o.checked,l.value=$E(o),(l.type===rp||l.type===np)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=qE(l.bounds)),l.type){case rp:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=YE;break;case np:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=jE;break}return l}return e}(OA),jw=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this,s=o.options[o.selectedIndex||0];return l.value=s&&s.text||"",l}return e}(OA),qw=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.value=o.value,l}return e}(OA),$w=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;l.src=o.src,l.width=parseInt(o.width,10)||0,l.height=parseInt(o.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(o.contentWindow&&o.contentWindow.document&&o.contentWindow.document.documentElement){l.tree=e2(r,o.contentWindow.document.documentElement);var s=o.contentWindow.document.documentElement?gg(r,getComputedStyle(o.contentWindow.document.documentElement).backgroundColor):xl.TRANSPARENT,p=o.contentWindow.document.body?gg(r,getComputedStyle(o.contentWindow.document.body).backgroundColor):xl.TRANSPARENT;l.backgroundColor=pc(s)?pc(p)?l.styles.backgroundColor:p:s}}catch{}return l}return e}(OA),eT=["OL","UL","MENU"],qd=function(n,e,r,o){for(var l=e.firstChild,s=void 0;l;l=s)if(s=l.nextSibling,i2(l)&&l.data.trim().length>0)r.textNodes.push(new zE(n,l,r.styles));else if(Xu(l))if(o2(l)&&l.assignedNodes)l.assignedNodes().forEach(function(m){return qd(n,m,r,o)});else{var p=t2(n,l);p.styles.isVisible()&&(iT(l,p,o)?p.flags|=4:rT(p.styles)&&(p.flags|=2),eT.indexOf(l.tagName)!==-1&&(p.flags|=8),r.elements.push(p),l.slot,l.shadowRoot?qd(n,l.shadowRoot,p,o):!sp(l)&&!r2(l)&&!op(l)&&qd(n,l,p,o))}},t2=function(n,e){return XC(e)?new Ww(n,e):n2(e)?new Jw(n,e):r2(e)?new Xw(n,e):nT(e)?new Yw(n,e):sT(e)?new WC(n,e):oT(e)?new n0(n,e):op(e)?new jw(n,e):sp(e)?new qw(n,e):s2(e)?new $w(n,e):new OA(n,e)},e2=function(n,e){var r=t2(n,e);return r.flags|=4,qd(n,e,r,r),r},iT=function(n,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||s0(n)&&r.styles.isTransparent()},rT=function(n){return n.isPositioned()||n.isFloating()},i2=function(n){return n.nodeType===Node.TEXT_NODE},Xu=function(n){return n.nodeType===Node.ELEMENT_NODE},JC=function(n){return Xu(n)&&typeof n.style<"u"&&!$d(n)},$d=function(n){return typeof n.className=="object"},nT=function(n){return n.tagName==="LI"},sT=function(n){return n.tagName==="OL"},oT=function(n){return n.tagName==="INPUT"},aT=function(n){return n.tagName==="HTML"},r2=function(n){return n.tagName==="svg"},s0=function(n){return n.tagName==="BODY"},n2=function(n){return n.tagName==="CANVAS"},tw=function(n){return n.tagName==="VIDEO"},XC=function(n){return n.tagName==="IMG"},s2=function(n){return n.tagName==="IFRAME"},ew=function(n){return n.tagName==="STYLE"},AT=function(n){return n.tagName==="SCRIPT"},sp=function(n){return n.tagName==="TEXTAREA"},op=function(n){return n.tagName==="SELECT"},o2=function(n){return n.tagName==="SLOT"},iw=function(n){return n.tagName.indexOf("-")>0},lT=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},n.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},n.prototype.pop=function(e){var r=this;e.forEach(function(o){return r.counters[o].pop()})},n.prototype.parse=function(e){var r=this,o=e.counterIncrement,l=e.counterReset,s=!0;o!==null&&o.forEach(function(m){var I=r.counters[m.counter];I&&m.increment!==0&&(s=!1,I.length||I.push(1),I[Math.max(0,I.length-1)]+=m.increment)});var p=[];return s&&l.forEach(function(m){var I=r.counters[m.counter];p.push(m.counter),I||(I=r.counters[m.counter]=[]),I.push(m.reset)}),p},n}(),rw={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},nw={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},cT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},uT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},Du=function(n,e,r,o,l,s){return n<e||n>r?Ig(n,l,s.length>0):o.integers.reduce(function(p,m,I){for(;n>=m;)n-=m,p+=o.values[I];return p},"")+s},a2=function(n,e,r,o){var l="";do r||n--,l=o(n)+l,n/=e;while(n*e>=e);return l},xn=function(n,e,r,o,l){var s=r-e+1;return(n<0?"-":"")+(a2(Math.abs(n),s,o,function(p){return Sn(Math.floor(p%s)+e)})+l)},zc=function(n,e,r){r===void 0&&(r=". ");var o=e.length;return a2(Math.abs(n),o,!1,function(l){return e[Math.floor(l%o)]})+r},zu=1,Ac=2,lc=4,ug=8,_l=function(n,e,r,o,l,s){if(n<-9999||n>9999)return Ig(n,4,l.length>0);var p=Math.abs(n),m=l;if(p===0)return e[0]+m;for(var I=0;p>0&&I<=4;I++){var w=p%10;w===0&&ts(s,zu)&&m!==""?m=e[w]+m:w>1||w===1&&I===0||w===1&&I===1&&ts(s,Ac)||w===1&&I===1&&ts(s,lc)&&n>100||w===1&&I>1&&ts(s,ug)?m=e[w]+(I>0?r[I-1]:"")+m:w===1&&I>0&&(m=r[I-1]+m),p=Math.floor(p/10)}return(n<0?o:"")+m},sw="\u5341\u767E\u5343\u842C",ow="\u62FE\u4F70\u4EDF\u842C",aw="\u30DE\u30A4\u30CA\u30B9",_C="\uB9C8\uC774\uB108\uC2A4",Ig=function(n,e,r){var o=r?". ":"",l=r?"\u3001":"",s=r?", ":"",p=r?" ":"";switch(e){case 0:return"\u2022"+p;case 1:return"\u25E6"+p;case 2:return"\u25FE"+p;case 5:var m=xn(n,48,57,!0,o);return m.length<4?"0"+m:m;case 4:return zc(n,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",l);case 6:return Du(n,1,3999,rw,3,o).toLowerCase();case 7:return Du(n,1,3999,rw,3,o);case 8:return xn(n,945,969,!1,o);case 9:return xn(n,97,122,!1,o);case 10:return xn(n,65,90,!1,o);case 11:return xn(n,1632,1641,!0,o);case 12:case 49:return Du(n,1,9999,nw,3,o);case 35:return Du(n,1,9999,nw,3,o).toLowerCase();case 13:return xn(n,2534,2543,!0,o);case 14:case 30:return xn(n,6112,6121,!0,o);case 15:return zc(n,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",l);case 16:return zc(n,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",l);case 17:case 48:return _l(n,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",sw,"\u8CA0",l,Ac|lc|ug);case 47:return _l(n,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",ow,"\u8CA0",l,zu|Ac|lc|ug);case 42:return _l(n,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",sw,"\u8D1F",l,Ac|lc|ug);case 41:return _l(n,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",ow,"\u8D1F",l,zu|Ac|lc|ug);case 26:return _l(n,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",aw,l,0);case 25:return _l(n,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",aw,l,zu|Ac|lc);case 31:return _l(n,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",_C,s,zu|Ac|lc);case 33:return _l(n,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",_C,s,0);case 32:return _l(n,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",_C,s,zu|Ac|lc);case 18:return xn(n,2406,2415,!0,o);case 20:return Du(n,1,19999,uT,3,o);case 21:return xn(n,2790,2799,!0,o);case 22:return xn(n,2662,2671,!0,o);case 22:return Du(n,1,10999,cT,3,o);case 23:return zc(n,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case 24:return zc(n,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case 27:return xn(n,3302,3311,!0,o);case 28:return zc(n,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",l);case 29:return zc(n,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",l);case 34:return xn(n,3792,3801,!0,o);case 37:return xn(n,6160,6169,!0,o);case 38:return xn(n,4160,4169,!0,o);case 39:return xn(n,2918,2927,!0,o);case 40:return xn(n,1776,1785,!0,o);case 43:return xn(n,3046,3055,!0,o);case 44:return xn(n,3174,3183,!0,o);case 45:return xn(n,3664,3673,!0,o);case 46:return xn(n,3872,3881,!0,o);case 3:default:return xn(n,48,57,!0,o)}},A2="data-html2canvas-ignore",Aw=function(){function n(e,r,o){if(this.context=e,this.options=o,this.scrolledElements=[],this.referenceElement=r,this.counters=new lT,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,r){var o=this,l=hT(e,r);if(!l.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,p=e.defaultView.pageYOffset,m=l.contentWindow,I=m.document,w=pT(l).then(function(){return po(o,void 0,void 0,function(){var _,E;return Ys(this,function(U){switch(U.label){case 0:return this.scrolledElements.forEach(IT),m&&(m.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(m.scrollY!==r.top||m.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(m.scrollX-r.left,m.scrollY-r.top,0,0))),_=this.options.onclone,E=this.clonedReferenceElement,typeof E>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:I.fonts&&I.fonts.ready?[4,I.fonts.ready]:[3,2];case 1:U.sent(),U.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,dT(I)]:[3,4];case 3:U.sent(),U.label=4;case 4:return typeof _=="function"?[2,Promise.resolve().then(function(){return _(I,E)}).then(function(){return l})]:[2,l]}})})});return I.open(),I.write(mT(document.doctype)+"<html></html>"),CT(this.referenceElement.ownerDocument,s,p),I.replaceChild(I.adoptNode(this.documentElement),I.documentElement),I.close(),w},n.prototype.createElementClone=function(e){if(OC(e,2))debugger;if(n2(e))return this.createCanvasClone(e);if(tw(e))return this.createVideoClone(e);if(ew(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return XC(r)&&(XC(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),iw(r)?this.createCustomElementClone(r):r},n.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return xC(e.style,r),r},n.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var o=[].slice.call(r.cssRules,0).reduce(function(s,p){return p&&typeof p.cssText=="string"?s+p.cssText:s},""),l=e.cloneNode(!1);return l.textContent=o,l}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var o=e.ownerDocument.createElement("img");try{return o.src=e.toDataURL(),o}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var l=e.cloneNode(!1);try{l.width=e.width,l.height=e.height;var s=e.getContext("2d"),p=l.getContext("2d");if(p)if(!this.options.allowTaint&&s)p.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var m=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(m){var I=m.getContextAttributes();I?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}p.drawImage(e,0,0)}return l}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return l},n.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var o=r.getContext("2d");try{return o&&(o.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||o.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var l=e.ownerDocument.createElement("canvas");return l.width=e.offsetWidth,l.height=e.offsetHeight,l},n.prototype.appendChildNode=function(e,r,o){(!Xu(r)||!AT(r)&&!r.hasAttribute(A2)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Xu(r)||!ew(r))&&e.appendChild(this.cloneNode(r,o))},n.prototype.cloneChildNodes=function(e,r,o){for(var l=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Xu(s)&&o2(s)&&typeof s.assignedNodes=="function"){var p=s.assignedNodes();p.length&&p.forEach(function(m){return l.appendChildNode(r,m,o)})}else this.appendChildNode(r,s,o)},n.prototype.cloneNode=function(e,r){if(i2(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var o=e.ownerDocument.defaultView;if(o&&Xu(e)&&(JC(e)||$d(e))){var l=this.createElementClone(e);l.style.transitionProperty="none";var s=o.getComputedStyle(e),p=o.getComputedStyle(e,":before"),m=o.getComputedStyle(e,":after");this.referenceElement===e&&JC(l)&&(this.clonedReferenceElement=l),s0(l)&&vT(l);var I=this.counters.parse(new Pv(this.context,s)),w=this.resolvePseudoContent(e,l,p,fg.BEFORE);iw(e)&&(r=!0),tw(e)||this.cloneChildNodes(e,l,r),w&&l.insertBefore(w,l.firstChild);var _=this.resolvePseudoContent(e,l,m,fg.AFTER);return _&&l.appendChild(_),this.counters.pop(I),(s&&(this.options.copyStyles||$d(e))&&!s2(e)||r)&&xC(s,l),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([l,e.scrollLeft,e.scrollTop]),(sp(e)||op(e))&&(sp(l)||op(l))&&(l.value=e.value),l}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,r,o,l){var s=this;if(o){var p=o.content,m=r.ownerDocument;if(!(!m||!p||p==="none"||p==="-moz-alt-content"||o.display==="none")){this.counters.parse(new Pv(this.context,o));var I=new nE(this.context,o),w=m.createElement("html2canvaspseudoelement");xC(o,w),I.content.forEach(function(E){if(E.type===0)w.appendChild(m.createTextNode(E.value));else if(E.type===22){var U=m.createElement("img");U.src=E.value,U.style.opacity="1",w.appendChild(U)}else if(E.type===18){if(E.name==="attr"){var F=E.values.filter(Xr);F.length&&w.appendChild(m.createTextNode(e.getAttribute(F[0].value)||""))}else if(E.name==="counter"){var V=E.values.filter(ju),H=V[0],Y=V[1];if(H&&Xr(H)){var D=s.counters.getCounterValue(H.value),tt=Y&&Xr(Y)?KC.parse(s.context,Y.value):3;w.appendChild(m.createTextNode(Ig(D,tt,!1)))}}else if(E.name==="counters"){var ot=E.values.filter(ju),H=ot[0],bt=ot[1],Y=ot[2];if(H&&Xr(H)){var kt=s.counters.getCounterValues(H.value),Lt=Y&&Xr(Y)?KC.parse(s.context,Y.value):3,vt=bt&&bt.type===0?bt.value:"",ft=kt.map(function(at){return Ig(at,Lt,!1)}).join(vt);w.appendChild(m.createTextNode(ft))}}}else if(E.type===20)switch(E.value){case"open-quote":w.appendChild(m.createTextNode(Zv(I.quotes,s.quoteDepth++,!0)));break;case"close-quote":w.appendChild(m.createTextNode(Zv(I.quotes,--s.quoteDepth,!1)));break;default:w.appendChild(m.createTextNode(E.value))}}),w.className=YC+" "+jC;var _=l===fg.BEFORE?" "+YC:" "+jC;return $d(r)?r.className.baseValue+=_:r.className+=_,w}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}();(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(fg||(fg={}));hT=function(n,e){var r=n.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(A2,"true"),n.body.appendChild(r),r},gT=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},dT=function(n){return Promise.all([].slice.call(n.images,0).map(gT))},pT=function(n){return new Promise(function(e,r){var o=n.contentWindow;if(!o)return r("No window assigned for iframe");var l=o.document;o.onload=n.onload=function(){o.onload=n.onload=null;var s=setInterval(function(){l.body.childNodes.length>0&&l.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},fT=["all","d","content"],xC=function(n,e){for(var r=n.length-1;r>=0;r--){var o=n.item(r);fT.indexOf(o)===-1&&e.style.setProperty(o,n.getPropertyValue(o))}return e},mT=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'+n.publicId+'"'),n.systemId&&(e+='"'+n.systemId+'"'),e+=">"),e},CT=function(n,e,r){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||r!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,r)},IT=function(n){var e=n[0],r=n[1],o=n[2];e.scrollLeft=r,e.scrollTop=o},yT=":before",bT=":after",YC="___html2canvas___pseudoelement_before",jC="___html2canvas___pseudoelement_after",lw=`{
    content: "" !important;
    display: none !important;
}`,vT=function(n){wT(n,"."+YC+yT+lw+`
         .`+jC+bT+lw)},wT=function(n,e){var r=n.ownerDocument;if(r){var o=r.createElement("style");o.textContent=e,n.appendChild(o)}},l2=function(){function n(){}return n.getOrigin=function(e){var r=n._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),BT=function(){function n(e,r){this.context=e,this._options=r,this._cache={}}return n.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(FC(e)||FT(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return po(this,void 0,void 0,function(){var r,o,l,s,p=this;return Ys(this,function(m){switch(m.label){case 0:return r=l2.isSameOrigin(e),o=!SC(e)&&this._options.useCORS===!0&&Ss.SUPPORT_CORS_IMAGES&&!r,l=!SC(e)&&!r&&!FC(e)&&typeof this._options.proxy=="string"&&Ss.SUPPORT_CORS_XHR&&!o,!r&&this._options.allowTaint===!1&&!SC(e)&&!FC(e)&&!l&&!o?[2]:(s=e,l?[4,this.proxy(s)]:[3,2]);case 1:s=m.sent(),m.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(I,w){var _=new Image;_.onload=function(){return I(_)},_.onerror=w,(kT(s)||o)&&(_.crossOrigin="anonymous"),_.src=s,_.complete===!0&&setTimeout(function(){return I(_)},500),p._options.imageTimeout>0&&setTimeout(function(){return w("Timed out ("+p._options.imageTimeout+"ms) loading image")},p._options.imageTimeout)})];case 3:return[2,m.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var r=this,o=this._options.proxy;if(!o)throw new Error("No proxy defined");var l=e.substring(0,256);return new Promise(function(s,p){var m=Ss.SUPPORT_RESPONSE_TYPE?"blob":"text",I=new XMLHttpRequest;I.onload=function(){if(I.status===200)if(m==="text")s(I.response);else{var E=new FileReader;E.addEventListener("load",function(){return s(E.result)},!1),E.addEventListener("error",function(U){return p(U)},!1),E.readAsDataURL(I.response)}else p("Failed to proxy resource "+l+" with status code "+I.status)},I.onerror=p;var w=o.indexOf("?")>-1?"&":"?";if(I.open("GET",""+o+w+"url="+encodeURIComponent(e)+"&responseType="+m),m!=="text"&&I instanceof XMLHttpRequest&&(I.responseType=m),r._options.imageTimeout){var _=r._options.imageTimeout;I.timeout=_,I.ontimeout=function(){return p("Timed out ("+_+"ms) proxying "+l)}}I.send()})},n}(),_T=/^data:image\/svg\+xml/i,xT=/^data:image\/.*;base64,/i,ST=/^data:image\/.*/i,FT=function(n){return Ss.SUPPORT_SVG_DRAWING||!LT(n)},SC=function(n){return ST.test(n)},kT=function(n){return xT.test(n)},FC=function(n){return n.substr(0,4)==="blob"},LT=function(n){return n.substr(-3).toLowerCase()==="svg"||_T.test(n)},di=function(){function n(e,r){this.type=0,this.x=e,this.y=r}return n.prototype.add=function(e,r){return new n(this.x+e,this.y+r)},n}(),Ku=function(n,e,r){return new di(n.x+(e.x-n.x)*r,n.y+(e.y-n.y)*r)},zd=function(){function n(e,r,o,l){this.type=1,this.start=e,this.startControl=r,this.endControl=o,this.end=l}return n.prototype.subdivide=function(e,r){var o=Ku(this.start,this.startControl,e),l=Ku(this.startControl,this.endControl,e),s=Ku(this.endControl,this.end,e),p=Ku(o,l,e),m=Ku(l,s,e),I=Ku(p,m,e);return r?new n(this.start,o,p,I):new n(I,m,s,this.end)},n.prototype.add=function(e,r){return new n(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Ba=function(n){return n.type===1},ET=function(){function n(e){var r=e.styles,o=e.bounds,l=lg(r.borderTopLeftRadius,o.width,o.height),s=l[0],p=l[1],m=lg(r.borderTopRightRadius,o.width,o.height),I=m[0],w=m[1],_=lg(r.borderBottomRightRadius,o.width,o.height),E=_[0],U=_[1],F=lg(r.borderBottomLeftRadius,o.width,o.height),V=F[0],H=F[1],Y=[];Y.push((s+I)/o.width),Y.push((V+E)/o.width),Y.push((p+H)/o.height),Y.push((w+U)/o.height);var D=Math.max.apply(Math,Y);D>1&&(s/=D,p/=D,I/=D,w/=D,E/=D,U/=D,V/=D,H/=D);var tt=o.width-I,ot=o.height-U,bt=o.width-E,kt=o.height-H,Lt=r.borderTopWidth,vt=r.borderRightWidth,ft=r.borderBottomWidth,Mt=r.borderLeftWidth,qt=sn(r.paddingTop,e.bounds.width),at=sn(r.paddingRight,e.bounds.width),st=sn(r.paddingBottom,e.bounds.width),wt=sn(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||p>0?hn(o.left+Mt/3,o.top+Lt/3,s-Mt/3,p-Lt/3,Nr.TOP_LEFT):new di(o.left+Mt/3,o.top+Lt/3),this.topRightBorderDoubleOuterBox=s>0||p>0?hn(o.left+tt,o.top+Lt/3,I-vt/3,w-Lt/3,Nr.TOP_RIGHT):new di(o.left+o.width-vt/3,o.top+Lt/3),this.bottomRightBorderDoubleOuterBox=E>0||U>0?hn(o.left+bt,o.top+ot,E-vt/3,U-ft/3,Nr.BOTTOM_RIGHT):new di(o.left+o.width-vt/3,o.top+o.height-ft/3),this.bottomLeftBorderDoubleOuterBox=V>0||H>0?hn(o.left+Mt/3,o.top+kt,V-Mt/3,H-ft/3,Nr.BOTTOM_LEFT):new di(o.left+Mt/3,o.top+o.height-ft/3),this.topLeftBorderDoubleInnerBox=s>0||p>0?hn(o.left+Mt*2/3,o.top+Lt*2/3,s-Mt*2/3,p-Lt*2/3,Nr.TOP_LEFT):new di(o.left+Mt*2/3,o.top+Lt*2/3),this.topRightBorderDoubleInnerBox=s>0||p>0?hn(o.left+tt,o.top+Lt*2/3,I-vt*2/3,w-Lt*2/3,Nr.TOP_RIGHT):new di(o.left+o.width-vt*2/3,o.top+Lt*2/3),this.bottomRightBorderDoubleInnerBox=E>0||U>0?hn(o.left+bt,o.top+ot,E-vt*2/3,U-ft*2/3,Nr.BOTTOM_RIGHT):new di(o.left+o.width-vt*2/3,o.top+o.height-ft*2/3),this.bottomLeftBorderDoubleInnerBox=V>0||H>0?hn(o.left+Mt*2/3,o.top+kt,V-Mt*2/3,H-ft*2/3,Nr.BOTTOM_LEFT):new di(o.left+Mt*2/3,o.top+o.height-ft*2/3),this.topLeftBorderStroke=s>0||p>0?hn(o.left+Mt/2,o.top+Lt/2,s-Mt/2,p-Lt/2,Nr.TOP_LEFT):new di(o.left+Mt/2,o.top+Lt/2),this.topRightBorderStroke=s>0||p>0?hn(o.left+tt,o.top+Lt/2,I-vt/2,w-Lt/2,Nr.TOP_RIGHT):new di(o.left+o.width-vt/2,o.top+Lt/2),this.bottomRightBorderStroke=E>0||U>0?hn(o.left+bt,o.top+ot,E-vt/2,U-ft/2,Nr.BOTTOM_RIGHT):new di(o.left+o.width-vt/2,o.top+o.height-ft/2),this.bottomLeftBorderStroke=V>0||H>0?hn(o.left+Mt/2,o.top+kt,V-Mt/2,H-ft/2,Nr.BOTTOM_LEFT):new di(o.left+Mt/2,o.top+o.height-ft/2),this.topLeftBorderBox=s>0||p>0?hn(o.left,o.top,s,p,Nr.TOP_LEFT):new di(o.left,o.top),this.topRightBorderBox=I>0||w>0?hn(o.left+tt,o.top,I,w,Nr.TOP_RIGHT):new di(o.left+o.width,o.top),this.bottomRightBorderBox=E>0||U>0?hn(o.left+bt,o.top+ot,E,U,Nr.BOTTOM_RIGHT):new di(o.left+o.width,o.top+o.height),this.bottomLeftBorderBox=V>0||H>0?hn(o.left,o.top+kt,V,H,Nr.BOTTOM_LEFT):new di(o.left,o.top+o.height),this.topLeftPaddingBox=s>0||p>0?hn(o.left+Mt,o.top+Lt,Math.max(0,s-Mt),Math.max(0,p-Lt),Nr.TOP_LEFT):new di(o.left+Mt,o.top+Lt),this.topRightPaddingBox=I>0||w>0?hn(o.left+Math.min(tt,o.width-vt),o.top+Lt,tt>o.width+vt?0:Math.max(0,I-vt),Math.max(0,w-Lt),Nr.TOP_RIGHT):new di(o.left+o.width-vt,o.top+Lt),this.bottomRightPaddingBox=E>0||U>0?hn(o.left+Math.min(bt,o.width-Mt),o.top+Math.min(ot,o.height-ft),Math.max(0,E-vt),Math.max(0,U-ft),Nr.BOTTOM_RIGHT):new di(o.left+o.width-vt,o.top+o.height-ft),this.bottomLeftPaddingBox=V>0||H>0?hn(o.left+Mt,o.top+Math.min(kt,o.height-ft),Math.max(0,V-Mt),Math.max(0,H-ft),Nr.BOTTOM_LEFT):new di(o.left+Mt,o.top+o.height-ft),this.topLeftContentBox=s>0||p>0?hn(o.left+Mt+wt,o.top+Lt+qt,Math.max(0,s-(Mt+wt)),Math.max(0,p-(Lt+qt)),Nr.TOP_LEFT):new di(o.left+Mt+wt,o.top+Lt+qt),this.topRightContentBox=I>0||w>0?hn(o.left+Math.min(tt,o.width+Mt+wt),o.top+Lt+qt,tt>o.width+Mt+wt?0:I-Mt+wt,w-(Lt+qt),Nr.TOP_RIGHT):new di(o.left+o.width-(vt+at),o.top+Lt+qt),this.bottomRightContentBox=E>0||U>0?hn(o.left+Math.min(bt,o.width-(Mt+wt)),o.top+Math.min(ot,o.height+Lt+qt),Math.max(0,E-(vt+at)),U-(ft+st),Nr.BOTTOM_RIGHT):new di(o.left+o.width-(vt+at),o.top+o.height-(ft+st)),this.bottomLeftContentBox=V>0||H>0?hn(o.left+Mt+wt,o.top+kt,Math.max(0,V-(Mt+wt)),H-(ft+st),Nr.BOTTOM_LEFT):new di(o.left+Mt+wt,o.top+o.height-(ft+st))}return n}();(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Nr||(Nr={}));hn=function(n,e,r,o,l){var s=4*((Math.sqrt(2)-1)/3),p=r*s,m=o*s,I=n+r,w=e+o;switch(l){case Nr.TOP_LEFT:return new zd(new di(n,w),new di(n,w-m),new di(I-p,e),new di(I,e));case Nr.TOP_RIGHT:return new zd(new di(n,e),new di(n+p,e),new di(I,w-m),new di(I,w));case Nr.BOTTOM_RIGHT:return new zd(new di(I,e),new di(I,e+m),new di(n+p,w),new di(n,w));case Nr.BOTTOM_LEFT:default:return new zd(new di(I,w),new di(I-p,w),new di(n,e+m),new di(n,e))}},ap=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},TT=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Ap=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},UT=function(){function n(e,r,o){this.offsetX=e,this.offsetY=r,this.matrix=o,this.type=0,this.target=6}return n}(),Wd=function(){function n(e,r){this.path=e,this.target=r,this.type=1}return n}(),QT=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),RT=function(n){return n.type===0},c2=function(n){return n.type===1},GT=function(n){return n.type===2},cw=function(n,e){return n.length===e.length?n.some(function(r,o){return r===e[o]}):!1},ZT=function(n,e,r,o,l){return n.map(function(s,p){switch(p){case 0:return s.add(e,r);case 1:return s.add(e+o,r);case 2:return s.add(e+o,r+l);case 3:return s.add(e,r+l)}return s})},u2=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),h2=function(){function n(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new ET(this.container),this.container.styles.opacity<1&&this.effects.push(new QT(this.container.styles.opacity)),this.container.styles.transform!==null){var o=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new UT(o,l,s))}if(this.container.styles.overflowX!==0){var p=ap(this.curves),m=Ap(this.curves);cw(p,m)?this.effects.push(new Wd(p,6)):(this.effects.push(new Wd(p,2)),this.effects.push(new Wd(m,4)))}}return n.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,o=this.parent,l=this.effects.slice(0);o;){var s=o.effects.filter(function(I){return!c2(I)});if(r||o.container.styles.position!==0||!o.parent){if(l.unshift.apply(l,s),r=[2,3].indexOf(o.container.styles.position)===-1,o.container.styles.overflowX!==0){var p=ap(o.curves),m=Ap(o.curves);cw(p,m)||l.unshift(new Wd(m,6))}}else l.unshift.apply(l,s);o=o.parent}return l.filter(function(I){return ts(I.target,e)})},n}(),qC=function(n,e,r,o){n.container.elements.forEach(function(l){var s=ts(l.flags,4),p=ts(l.flags,2),m=new h2(l,n);ts(l.styles.display,2048)&&o.push(m);var I=ts(l.flags,8)?[]:o;if(s||p){var w=s||l.styles.isPositioned()?r:e,_=new u2(m);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var E=l.styles.zIndex.order;if(E<0){var U=0;w.negativeZIndex.some(function(V,H){return E>V.element.container.styles.zIndex.order?(U=H,!1):U>0}),w.negativeZIndex.splice(U,0,_)}else if(E>0){var F=0;w.positiveZIndex.some(function(V,H){return E>=V.element.container.styles.zIndex.order?(F=H+1,!1):F>0}),w.positiveZIndex.splice(F,0,_)}else w.zeroOrAutoZIndexOrTransformedOrOpacity.push(_)}else l.styles.isFloating()?w.nonPositionedFloats.push(_):w.nonPositionedInlineLevel.push(_);qC(m,_,s?_:r,I)}else l.styles.isInlineLevel()?e.inlineLevel.push(m):e.nonInlineLevel.push(m),qC(m,e,r,I);ts(l.flags,8)&&g2(l,I)})},g2=function(n,e){for(var r=n instanceof WC?n.start:1,o=n instanceof WC?n.reversed:!1,l=0;l<e.length;l++){var s=e[l];s.container instanceof Yw&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Ig(r,s.container.styles.listStyleType,!0),r+=o?-1:1}},PT=function(n){var e=new h2(n,null),r=new u2(e),o=[];return qC(e,r,r,o),g2(e.container,o),r},uw=function(n,e){switch(e){case 0:return xa(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return xa(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return xa(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return xa(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},HT=function(n,e){switch(e){case 0:return xa(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return xa(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return xa(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return xa(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},MT=function(n,e){switch(e){case 0:return xa(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return xa(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return xa(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return xa(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},NT=function(n,e){switch(e){case 0:return Jd(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Jd(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Jd(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Jd(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Jd=function(n,e){var r=[];return Ba(n)?r.push(n.subdivide(.5,!1)):r.push(n),Ba(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},xa=function(n,e,r,o){var l=[];return Ba(n)?l.push(n.subdivide(.5,!1)):l.push(n),Ba(r)?l.push(r.subdivide(.5,!0)):l.push(r),Ba(o)?l.push(o.subdivide(.5,!0).reverse()):l.push(o),Ba(e)?l.push(e.subdivide(.5,!1).reverse()):l.push(e),l},d2=function(n){var e=n.bounds,r=n.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},lp=function(n){var e=n.styles,r=n.bounds,o=sn(e.paddingLeft,r.width),l=sn(e.paddingRight,r.width),s=sn(e.paddingTop,r.width),p=sn(e.paddingBottom,r.width);return r.add(o+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+o+l),-(e.borderTopWidth+e.borderBottomWidth+s+p))},VT=function(n,e){return n===0?e.bounds:n===2?lp(e):d2(e)},DT=function(n,e){return n===0?e.bounds:n===2?lp(e):d2(e)},kC=function(n,e,r){var o=VT(Wu(n.styles.backgroundOrigin,e),n),l=DT(Wu(n.styles.backgroundClip,e),n),s=KT(Wu(n.styles.backgroundSize,e),r,o),p=s[0],m=s[1],I=lg(Wu(n.styles.backgroundPosition,e),o.width-p,o.height-m),w=OT(Wu(n.styles.backgroundRepeat,e),I,s,o,l),_=Math.round(o.left+I[0]),E=Math.round(o.top+I[1]);return[w,_,E,p,m]},Ou=function(n){return Xr(n)&&n.value===Yu.AUTO},Xd=function(n){return typeof n=="number"},KT=function(n,e,r){var o=e[0],l=e[1],s=e[2],p=n[0],m=n[1];if(!p)return[0,0];if(On(p)&&m&&On(m))return[sn(p,r.width),sn(m,r.height)];var I=Xd(s);if(Xr(p)&&(p.value===Yu.CONTAIN||p.value===Yu.COVER)){if(Xd(s)){var w=r.width/r.height;return w<s!=(p.value===Yu.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var _=Xd(o),E=Xd(l),U=_||E;if(Ou(p)&&(!m||Ou(m))){if(_&&E)return[o,l];if(!I&&!U)return[r.width,r.height];if(U&&I){var F=_?o:l*s,V=E?l:o/s;return[F,V]}var H=_?o:r.width,Y=E?l:r.height;return[H,Y]}if(I){var D=0,tt=0;return On(p)?D=sn(p,r.width):On(m)&&(tt=sn(m,r.height)),Ou(p)?D=tt*s:(!m||Ou(m))&&(tt=D/s),[D,tt]}var ot=null,bt=null;if(On(p)?ot=sn(p,r.width):m&&On(m)&&(bt=sn(m,r.height)),ot!==null&&(!m||Ou(m))&&(bt=_&&E?ot/o*l:r.height),bt!==null&&Ou(p)&&(ot=_&&E?bt/l*o:r.width),ot!==null&&bt!==null)return[ot,bt];throw new Error("Unable to calculate background-size for element")},Wu=function(n,e){var r=n[e];return typeof r>"u"?n[0]:r},OT=function(n,e,r,o,l){var s=e[0],p=e[1],m=r[0],I=r[1];switch(n){case 2:return[new di(Math.round(o.left),Math.round(o.top+p)),new di(Math.round(o.left+o.width),Math.round(o.top+p)),new di(Math.round(o.left+o.width),Math.round(I+o.top+p)),new di(Math.round(o.left),Math.round(I+o.top+p))];case 3:return[new di(Math.round(o.left+s),Math.round(o.top)),new di(Math.round(o.left+s+m),Math.round(o.top)),new di(Math.round(o.left+s+m),Math.round(o.height+o.top)),new di(Math.round(o.left+s),Math.round(o.height+o.top))];case 1:return[new di(Math.round(o.left+s),Math.round(o.top+p)),new di(Math.round(o.left+s+m),Math.round(o.top+p)),new di(Math.round(o.left+s+m),Math.round(o.top+p+I)),new di(Math.round(o.left+s),Math.round(o.top+p+I))];default:return[new di(Math.round(l.left),Math.round(l.top)),new di(Math.round(l.left+l.width),Math.round(l.top)),new di(Math.round(l.left+l.width),Math.round(l.height+l.top)),new di(Math.round(l.left),Math.round(l.height+l.top))]}},zT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",hw="Hidden Text",WT=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,r){var o=this._document.createElement("div"),l=this._document.createElement("img"),s=this._document.createElement("span"),p=this._document.body;o.style.visibility="hidden",o.style.fontFamily=e,o.style.fontSize=r,o.style.margin="0",o.style.padding="0",o.style.whiteSpace="nowrap",p.appendChild(o),l.src=zT,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(hw)),o.appendChild(s),o.appendChild(l);var m=l.offsetTop-s.offsetTop+2;o.removeChild(s),o.appendChild(this._document.createTextNode(hw)),o.style.lineHeight="normal",l.style.verticalAlign="super";var I=l.offsetTop-o.offsetTop+2;return p.removeChild(o),{baseline:m,middle:I}},n.prototype.getMetrics=function(e,r){var o=e+" "+r;return typeof this._data[o]>"u"&&(this._data[o]=this.parseMetrics(e,r)),this._data[o]},n}(),p2=function(){function n(e,r){this.context=e,this.options=r}return n}(),JT=1e4,XT=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l._activeEffects=[],l.canvas=o.canvas?o.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),o.canvas||(l.canvas.width=Math.floor(o.width*o.scale),l.canvas.height=Math.floor(o.height*o.scale),l.canvas.style.width=o.width+"px",l.canvas.style.height=o.height+"px"),l.fontMetrics=new WT(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-o.x,-o.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+o.width+"x"+o.height+") with scale "+o.scale),l}return e.prototype.applyEffects=function(r){for(var o=this;this._activeEffects.length;)this.popEffect();r.forEach(function(l){return o.applyEffect(l)})},e.prototype.applyEffect=function(r){this.ctx.save(),GT(r)&&(this.ctx.globalAlpha=r.opacity),RT(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),c2(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return po(this,void 0,void 0,function(){var o;return Ys(this,function(l){switch(l.label){case 0:return o=r.element.container.styles,o.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return po(this,void 0,void 0,function(){return Ys(this,function(o){switch(o.label){case 0:if(ts(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return o.sent(),[4,this.renderNodeContent(r)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,o,l){var s=this;if(o===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+l);else{var p=r0(r.text);p.reduce(function(m,I){return s.ctx.fillText(I,m,r.bounds.top+l),m+s.ctx.measureText(I).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var o=r.fontVariant.filter(function(p){return p==="normal"||p==="small-caps"}).join(""),l=tU(r.fontFamily).join(", "),s=bg(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,o,r.fontWeight,s,l].join(" "),l,s]},e.prototype.renderTextNode=function(r,o){return po(this,void 0,void 0,function(){var l,s,p,m,I,w,_,E,U=this;return Ys(this,function(F){return l=this.createFontStyle(o),s=l[0],p=l[1],m=l[2],this.ctx.font=s,this.ctx.direction=o.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",I=this.fontMetrics.getMetrics(p,m),w=I.baseline,_=I.middle,E=o.paintOrder,r.textBounds.forEach(function(V){E.forEach(function(H){switch(H){case 0:U.ctx.fillStyle=hs(o.color),U.renderTextWithLetterSpacing(V,o.letterSpacing,w);var Y=o.textShadow;Y.length&&V.text.trim().length&&(Y.slice(0).reverse().forEach(function(D){U.ctx.shadowColor=hs(D.color),U.ctx.shadowOffsetX=D.offsetX.number*U.options.scale,U.ctx.shadowOffsetY=D.offsetY.number*U.options.scale,U.ctx.shadowBlur=D.blur.number,U.renderTextWithLetterSpacing(V,o.letterSpacing,w)}),U.ctx.shadowColor="",U.ctx.shadowOffsetX=0,U.ctx.shadowOffsetY=0,U.ctx.shadowBlur=0),o.textDecorationLine.length&&(U.ctx.fillStyle=hs(o.textDecorationColor||o.color),o.textDecorationLine.forEach(function(D){switch(D){case 1:U.ctx.fillRect(V.bounds.left,Math.round(V.bounds.top+w),V.bounds.width,1);break;case 2:U.ctx.fillRect(V.bounds.left,Math.round(V.bounds.top),V.bounds.width,1);break;case 3:U.ctx.fillRect(V.bounds.left,Math.ceil(V.bounds.top+_),V.bounds.width,1);break}}));break;case 1:o.webkitTextStrokeWidth&&V.text.trim().length&&(U.ctx.strokeStyle=hs(o.webkitTextStrokeColor),U.ctx.lineWidth=o.webkitTextStrokeWidth,U.ctx.lineJoin=window.chrome?"miter":"round",U.ctx.strokeText(V.text,V.bounds.left,V.bounds.top+w)),U.ctx.strokeStyle="",U.ctx.lineWidth=0,U.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,o,l){if(l&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=lp(r),p=Ap(o);this.path(p),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return po(this,void 0,void 0,function(){var o,l,s,p,m,I,tt,tt,w,_,E,U,bt,F,V,kt,H,Y,D,tt,ot,bt,kt;return Ys(this,function(Lt){switch(Lt.label){case 0:this.applyEffects(r.getEffects(4)),o=r.container,l=r.curves,s=o.styles,p=0,m=o.textNodes,Lt.label=1;case 1:return p<m.length?(I=m[p],[4,this.renderTextNode(I,s)]):[3,4];case 2:Lt.sent(),Lt.label=3;case 3:return p++,[3,1];case 4:if(!(o instanceof Ww))return[3,8];Lt.label=5;case 5:return Lt.trys.push([5,7,,8]),[4,this.context.cache.match(o.src)];case 6:return tt=Lt.sent(),this.renderReplacedElement(o,l,tt),[3,8];case 7:return Lt.sent(),this.context.logger.error("Error loading image "+o.src),[3,8];case 8:if(o instanceof Jw&&this.renderReplacedElement(o,l,o.canvas),!(o instanceof Xw))return[3,12];Lt.label=9;case 9:return Lt.trys.push([9,11,,12]),[4,this.context.cache.match(o.svg)];case 10:return tt=Lt.sent(),this.renderReplacedElement(o,l,tt),[3,12];case 11:return Lt.sent(),this.context.logger.error("Error loading svg "+o.svg.substring(0,255)),[3,12];case 12:return o instanceof $w&&o.tree?(w=new e(this.context,{scale:this.options.scale,backgroundColor:o.backgroundColor,x:0,y:0,width:o.width,height:o.height}),[4,w.render(o.tree)]):[3,14];case 13:_=Lt.sent(),o.width&&o.height&&this.ctx.drawImage(_,0,0,o.width,o.height,o.bounds.left,o.bounds.top,o.bounds.width,o.bounds.height),Lt.label=14;case 14:if(o instanceof n0&&(E=Math.min(o.bounds.width,o.bounds.height),o.type===rp?o.checked&&(this.ctx.save(),this.path([new di(o.bounds.left+E*.39363,o.bounds.top+E*.79),new di(o.bounds.left+E*.16,o.bounds.top+E*.5549),new di(o.bounds.left+E*.27347,o.bounds.top+E*.44071),new di(o.bounds.left+E*.39694,o.bounds.top+E*.5649),new di(o.bounds.left+E*.72983,o.bounds.top+E*.23),new di(o.bounds.left+E*.84,o.bounds.top+E*.34085),new di(o.bounds.left+E*.39363,o.bounds.top+E*.79)]),this.ctx.fillStyle=hs($v),this.ctx.fill(),this.ctx.restore()):o.type===np&&o.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(o.bounds.left+E/2,o.bounds.top+E/2,E/4,0,Math.PI*2,!0),this.ctx.fillStyle=hs($v),this.ctx.fill(),this.ctx.restore())),YT(o)&&o.value.length){switch(U=this.createFontStyle(s),bt=U[0],F=U[1],V=this.fontMetrics.getMetrics(bt,F).baseline,this.ctx.font=bt,this.ctx.fillStyle=hs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qT(o.styles.textAlign),kt=lp(o),H=0,o.styles.textAlign){case 1:H+=kt.width/2;break;case 2:H+=kt.width;break}Y=kt.add(H,0,0,-kt.height/2+1),this.ctx.save(),this.path([new di(kt.left,kt.top),new di(kt.left+kt.width,kt.top),new di(kt.left+kt.width,kt.top+kt.height),new di(kt.left,kt.top+kt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new pg(o.value,Y),s.letterSpacing,V),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ts(o.styles.display,2048))return[3,20];if(o.styles.listStyleImage===null)return[3,19];if(D=o.styles.listStyleImage,D.type!==0)return[3,18];tt=void 0,ot=D.url,Lt.label=15;case 15:return Lt.trys.push([15,17,,18]),[4,this.context.cache.match(ot)];case 16:return tt=Lt.sent(),this.ctx.drawImage(tt,o.bounds.left-(tt.width+10),o.bounds.top),[3,18];case 17:return Lt.sent(),this.context.logger.error("Error loading list-style-image "+ot),[3,18];case 18:return[3,20];case 19:r.listValue&&o.styles.listStyleType!==-1&&(bt=this.createFontStyle(s)[0],this.ctx.font=bt,this.ctx.fillStyle=hs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",kt=new Sl(o.bounds.left,o.bounds.top+sn(o.styles.paddingTop,o.bounds.width),o.bounds.width,Rv(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new pg(r.listValue,kt),s.letterSpacing,Rv(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Lt.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return po(this,void 0,void 0,function(){var o,l,D,s,p,D,m,I,D,w,_,D,E,U,D,F,V,D,H,Y,D;return Ys(this,function(tt){switch(tt.label){case 0:if(ts(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:tt.sent(),o=0,l=r.negativeZIndex,tt.label=2;case 2:return o<l.length?(D=l[o],[4,this.renderStack(D)]):[3,5];case 3:tt.sent(),tt.label=4;case 4:return o++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:tt.sent(),s=0,p=r.nonInlineLevel,tt.label=7;case 7:return s<p.length?(D=p[s],[4,this.renderNode(D)]):[3,10];case 8:tt.sent(),tt.label=9;case 9:return s++,[3,7];case 10:m=0,I=r.nonPositionedFloats,tt.label=11;case 11:return m<I.length?(D=I[m],[4,this.renderStack(D)]):[3,14];case 12:tt.sent(),tt.label=13;case 13:return m++,[3,11];case 14:w=0,_=r.nonPositionedInlineLevel,tt.label=15;case 15:return w<_.length?(D=_[w],[4,this.renderStack(D)]):[3,18];case 16:tt.sent(),tt.label=17;case 17:return w++,[3,15];case 18:E=0,U=r.inlineLevel,tt.label=19;case 19:return E<U.length?(D=U[E],[4,this.renderNode(D)]):[3,22];case 20:tt.sent(),tt.label=21;case 21:return E++,[3,19];case 22:F=0,V=r.zeroOrAutoZIndexOrTransformedOrOpacity,tt.label=23;case 23:return F<V.length?(D=V[F],[4,this.renderStack(D)]):[3,26];case 24:tt.sent(),tt.label=25;case 25:return F++,[3,23];case 26:H=0,Y=r.positiveZIndex,tt.label=27;case 27:return H<Y.length?(D=Y[H],[4,this.renderStack(D)]):[3,30];case 28:tt.sent(),tt.label=29;case 29:return H++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var o=this;r.forEach(function(l,s){var p=Ba(l)?l.start:l;s===0?o.ctx.moveTo(p.x,p.y):o.ctx.lineTo(p.x,p.y),Ba(l)&&o.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},e.prototype.renderRepeat=function(r,o,l,s){this.path(r),this.ctx.fillStyle=o,this.ctx.translate(l,s),this.ctx.fill(),this.ctx.translate(-l,-s)},e.prototype.resizeImage=function(r,o,l){var s;if(r.width===o&&r.height===l)return r;var p=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,m=p.createElement("canvas");m.width=Math.max(1,o),m.height=Math.max(1,l);var I=m.getContext("2d");return I.drawImage(r,0,0,r.width,r.height,0,0,o,l),m},e.prototype.renderBackgroundImage=function(r){return po(this,void 0,void 0,function(){var o,l,s,p,m,I;return Ys(this,function(w){switch(w.label){case 0:o=r.styles.backgroundImage.length-1,l=function(_){var E,U,F,qt,jt,Xt,wt,yt,ft,V,qt,jt,Xt,wt,yt,H,Y,D,tt,ot,bt,kt,Lt,vt,ft,Mt,qt,at,st,wt,yt,te,jt,Xt,Wt,Ct,Et,ue,J,dt,mt,Ut;return Ys(this,function(Pt){switch(Pt.label){case 0:if(_.type!==0)return[3,5];E=void 0,U=_.url,Pt.label=1;case 1:return Pt.trys.push([1,3,,4]),[4,s.context.cache.match(U)];case 2:return E=Pt.sent(),[3,4];case 3:return Pt.sent(),s.context.logger.error("Error loading background-image "+U),[3,4];case 4:return E&&(F=kC(r,o,[E.width,E.height,E.width/E.height]),qt=F[0],jt=F[1],Xt=F[2],wt=F[3],yt=F[4],ft=s.ctx.createPattern(s.resizeImage(E,wt,yt),"repeat"),s.renderRepeat(qt,ft,jt,Xt)),[3,6];case 5:Rk(_)?(V=kC(r,o,[null,null,null]),qt=V[0],jt=V[1],Xt=V[2],wt=V[3],yt=V[4],H=Lk(_.angle,wt,yt),Y=H[0],D=H[1],tt=H[2],ot=H[3],bt=H[4],kt=document.createElement("canvas"),kt.width=wt,kt.height=yt,Lt=kt.getContext("2d"),vt=Lt.createLinearGradient(D,ot,tt,bt),Uv(_.stops,Y).forEach(function(ie){return vt.addColorStop(ie.stop,hs(ie.color))}),Lt.fillStyle=vt,Lt.fillRect(0,0,wt,yt),wt>0&&yt>0&&(ft=s.ctx.createPattern(kt,"repeat"),s.renderRepeat(qt,ft,jt,Xt))):Gk(_)&&(Mt=kC(r,o,[null,null,null]),qt=Mt[0],at=Mt[1],st=Mt[2],wt=Mt[3],yt=Mt[4],te=_.position.length===0?[t0]:_.position,jt=sn(te[0],wt),Xt=sn(te[te.length-1],yt),Wt=Ek(_,jt,Xt,wt,yt),Ct=Wt[0],Et=Wt[1],Ct>0&&Et>0&&(ue=s.ctx.createRadialGradient(at+jt,st+Xt,0,at+jt,st+Xt,Ct),Uv(_.stops,Ct*2).forEach(function(ie){return ue.addColorStop(ie.stop,hs(ie.color))}),s.path(qt),s.ctx.fillStyle=ue,Ct!==Et?(J=r.bounds.left+.5*r.bounds.width,dt=r.bounds.top+.5*r.bounds.height,mt=Et/Ct,Ut=1/mt,s.ctx.save(),s.ctx.translate(J,dt),s.ctx.transform(1,0,0,mt,0,0),s.ctx.translate(-J,-dt),s.ctx.fillRect(at,Ut*(st-dt)+dt,wt,yt*Ut),s.ctx.restore()):s.ctx.fill())),Pt.label=6;case 6:return o--,[2]}})},s=this,p=0,m=r.styles.backgroundImage.slice(0).reverse(),w.label=1;case 1:return p<m.length?(I=m[p],[5,l(I)]):[3,4];case 2:w.sent(),w.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,o,l){return po(this,void 0,void 0,function(){return Ys(this,function(s){return this.path(uw(l,o)),this.ctx.fillStyle=hs(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,o,l,s){return po(this,void 0,void 0,function(){var p,m;return Ys(this,function(I){switch(I.label){case 0:return o<3?[4,this.renderSolidBorder(r,l,s)]:[3,2];case 1:return I.sent(),[2];case 2:return p=HT(s,l),this.path(p),this.ctx.fillStyle=hs(r),this.ctx.fill(),m=MT(s,l),this.path(m),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return po(this,void 0,void 0,function(){var o,l,s,p,m,I,w,_,E=this;return Ys(this,function(U){switch(U.label){case 0:return this.applyEffects(r.getEffects(2)),o=r.container.styles,l=!pc(o.backgroundColor)||o.backgroundImage.length,s=[{style:o.borderTopStyle,color:o.borderTopColor,width:o.borderTopWidth},{style:o.borderRightStyle,color:o.borderRightColor,width:o.borderRightWidth},{style:o.borderBottomStyle,color:o.borderBottomColor,width:o.borderBottomWidth},{style:o.borderLeftStyle,color:o.borderLeftColor,width:o.borderLeftWidth}],p=jT(Wu(o.backgroundClip,0),r.curves),l||o.boxShadow.length?(this.ctx.save(),this.path(p),this.ctx.clip(),pc(o.backgroundColor)||(this.ctx.fillStyle=hs(o.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:U.sent(),this.ctx.restore(),o.boxShadow.slice(0).reverse().forEach(function(F){E.ctx.save();var V=ap(r.curves),H=F.inset?0:JT,Y=ZT(V,-H+(F.inset?1:-1)*F.spread.number,(F.inset?1:-1)*F.spread.number,F.spread.number*(F.inset?-2:2),F.spread.number*(F.inset?-2:2));F.inset?(E.path(V),E.ctx.clip(),E.mask(Y)):(E.mask(V),E.ctx.clip(),E.path(Y)),E.ctx.shadowOffsetX=F.offsetX.number+H,E.ctx.shadowOffsetY=F.offsetY.number,E.ctx.shadowColor=hs(F.color),E.ctx.shadowBlur=F.blur.number,E.ctx.fillStyle=F.inset?hs(F.color):"rgba(0,0,0,1)",E.ctx.fill(),E.ctx.restore()}),U.label=2;case 2:m=0,I=0,w=s,U.label=3;case 3:return I<w.length?(_=w[I],_.style!==0&&!pc(_.color)&&_.width>0?_.style!==2?[3,5]:[4,this.renderDashedDottedBorder(_.color,_.width,m,r.curves,2)]:[3,11]):[3,13];case 4:return U.sent(),[3,11];case 5:return _.style!==3?[3,7]:[4,this.renderDashedDottedBorder(_.color,_.width,m,r.curves,3)];case 6:return U.sent(),[3,11];case 7:return _.style!==4?[3,9]:[4,this.renderDoubleBorder(_.color,_.width,m,r.curves)];case 8:return U.sent(),[3,11];case 9:return[4,this.renderSolidBorder(_.color,m,r.curves)];case 10:U.sent(),U.label=11;case 11:m++,U.label=12;case 12:return I++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,o,l,s,p){return po(this,void 0,void 0,function(){var m,I,w,_,E,U,F,V,H,Y,D,tt,ot,bt,kt,Lt,kt,Lt;return Ys(this,function(vt){return this.ctx.save(),m=NT(s,l),I=uw(s,l),p===2&&(this.path(I),this.ctx.clip()),Ba(I[0])?(w=I[0].start.x,_=I[0].start.y):(w=I[0].x,_=I[0].y),Ba(I[1])?(E=I[1].end.x,U=I[1].end.y):(E=I[1].x,U=I[1].y),l===0||l===2?F=Math.abs(w-E):F=Math.abs(_-U),this.ctx.beginPath(),p===3?this.formatPath(m):this.formatPath(I.slice(0,2)),V=o<3?o*3:o*2,H=o<3?o*2:o,p===3&&(V=o,H=o),Y=!0,F<=V*2?Y=!1:F<=V*2+H?(D=F/(2*V+H),V*=D,H*=D):(tt=Math.floor((F+H)/(V+H)),ot=(F-tt*V)/(tt-1),bt=(F-(tt+1)*V)/tt,H=bt<=0||Math.abs(H-ot)<Math.abs(H-bt)?ot:bt),Y&&(p===3?this.ctx.setLineDash([0,V+H]):this.ctx.setLineDash([V,H])),p===3?(this.ctx.lineCap="round",this.ctx.lineWidth=o):this.ctx.lineWidth=o*2+1.1,this.ctx.strokeStyle=hs(r),this.ctx.stroke(),this.ctx.setLineDash([]),p===2&&(Ba(I[0])&&(kt=I[3],Lt=I[0],this.ctx.beginPath(),this.formatPath([new di(kt.end.x,kt.end.y),new di(Lt.start.x,Lt.start.y)]),this.ctx.stroke()),Ba(I[1])&&(kt=I[1],Lt=I[2],this.ctx.beginPath(),this.formatPath([new di(kt.end.x,kt.end.y),new di(Lt.start.x,Lt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return po(this,void 0,void 0,function(){var o;return Ys(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=hs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),o=PT(r),[4,this.renderStack(o)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(p2),YT=function(n){return n instanceof qw||n instanceof jw?!0:n instanceof n0&&n.type!==np&&n.type!==rp},jT=function(n,e){switch(n){case 0:return ap(e);case 2:return TT(e);case 1:default:return Ap(e)}},qT=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},$T=["-apple-system","system-ui"],tU=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return $T.indexOf(e)===-1}):n},eU=function(n){Ya(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.canvas=o.canvas?o.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=o,l.canvas.width=Math.floor(o.width*o.scale),l.canvas.height=Math.floor(o.height*o.scale),l.canvas.style.width=o.width+"px",l.canvas.style.height=o.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-o.x,-o.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+o.width+"x"+o.height+" at "+o.x+","+o.y+") with scale "+o.scale),l}return e.prototype.render=function(r){return po(this,void 0,void 0,function(){var o,l;return Ys(this,function(s){switch(s.label){case 0:return o=zC(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,iU(o)];case 1:return l=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=hs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(p2),iU=function(n){return new Promise(function(e,r){var o=new Image;o.onload=function(){e(o)},o.onerror=r,o.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},rU=function(){function n(e){var r=e.id,o=e.enabled;this.id=r,this.enabled=o,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Td([this.id,this.getTime()+"ms"],e))},n.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.instances={},n}(),nU=function(){function n(e,r){var o;this.windowBounds=r,this.instanceName="#"+n.instanceCount++,this.logger=new rU({id:this.instanceName,enabled:e.logging}),this.cache=(o=e.cache)!==null&&o!==void 0?o:new BT(this,e)}return n.instanceCount=1,n}(),sU=function(n,e){return e===void 0&&(e={}),oU(n,e)};typeof window<"u"&&l2.setContext(window);oU=function(n,e){return po(void 0,void 0,void 0,function(){var r,o,l,s,p,m,I,w,_,E,U,F,V,H,Y,D,tt,ot,bt,kt,vt,Lt,vt,ft,Mt,qt,at,st,wt,yt,te,jt,Xt,Wt,Ct,Et,ue,J,dt,mt;return Ys(this,function(Ut){switch(Ut.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=n.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(o=r.defaultView,!o)throw new Error("Document is not attached to a Window");return l={allowTaint:(ft=e.allowTaint)!==null&&ft!==void 0?ft:!1,imageTimeout:(Mt=e.imageTimeout)!==null&&Mt!==void 0?Mt:15e3,proxy:e.proxy,useCORS:(qt=e.useCORS)!==null&&qt!==void 0?qt:!1},s=EC({logging:(at=e.logging)!==null&&at!==void 0?at:!0,cache:e.cache},l),p={windowWidth:(st=e.windowWidth)!==null&&st!==void 0?st:o.innerWidth,windowHeight:(wt=e.windowHeight)!==null&&wt!==void 0?wt:o.innerHeight,scrollX:(yt=e.scrollX)!==null&&yt!==void 0?yt:o.pageXOffset,scrollY:(te=e.scrollY)!==null&&te!==void 0?te:o.pageYOffset},m=new Sl(p.scrollX,p.scrollY,p.windowWidth,p.windowHeight),I=new nU(s,m),w=(jt=e.foreignObjectRendering)!==null&&jt!==void 0?jt:!1,_={allowTaint:(Xt=e.allowTaint)!==null&&Xt!==void 0?Xt:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:w,copyStyles:w},I.logger.debug("Starting document clone with size "+m.width+"x"+m.height+" scrolled to "+-m.left+","+-m.top),E=new Aw(I,n,_),U=E.clonedReferenceElement,U?[4,E.toIFrame(r,m)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return F=Ut.sent(),V=s0(U)||aT(U)?Z3(U.ownerDocument):cp(I,U),H=V.width,Y=V.height,D=V.left,tt=V.top,ot=aU(I,U,e.backgroundColor),bt={canvas:e.canvas,backgroundColor:ot,scale:(Ct=(Wt=e.scale)!==null&&Wt!==void 0?Wt:o.devicePixelRatio)!==null&&Ct!==void 0?Ct:1,x:((Et=e.x)!==null&&Et!==void 0?Et:0)+D,y:((ue=e.y)!==null&&ue!==void 0?ue:0)+tt,width:(J=e.width)!==null&&J!==void 0?J:Math.ceil(H),height:(dt=e.height)!==null&&dt!==void 0?dt:Math.ceil(Y)},w?(I.logger.debug("Document cloned, using foreign object rendering"),vt=new eU(I,bt),[4,vt.render(U)]):[3,3];case 2:return kt=Ut.sent(),[3,5];case 3:return I.logger.debug("Document cloned, element located at "+D+","+tt+" with size "+H+"x"+Y+" using computed rendering"),I.logger.debug("Starting DOM parsing"),Lt=e2(I,U),ot===Lt.styles.backgroundColor&&(Lt.styles.backgroundColor=xl.TRANSPARENT),I.logger.debug("Starting renderer for element at "+bt.x+","+bt.y+" with size "+bt.width+"x"+bt.height),vt=new XT(I,bt),[4,vt.render(Lt)];case 4:kt=Ut.sent(),Ut.label=5;case 5:return(!((mt=e.removeContainer)!==null&&mt!==void 0)||mt)&&(Aw.destroy(F)||I.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),I.logger.debug("Finished rendering"),[2,kt]}})})},aU=function(n,e,r){var o=e.ownerDocument,l=o.documentElement?gg(n,getComputedStyle(o.documentElement).backgroundColor):xl.TRANSPARENT,s=o.body?gg(n,getComputedStyle(o.body).backgroundColor):xl.TRANSPARENT,p=typeof r=="string"?gg(n,r):r===null?xl.TRANSPARENT:4294967295;return e===o.documentElement?pc(l)?pc(s)?p:s:l:p}});var x2={};iC(x2,{default:()=>GU});function mc(n){return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(n)}function h0(n,e){return h0=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},h0(n,e)}function AU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vp(n,e,r){return AU()?vp=Reflect.construct:vp=function(o,l,s){var p=[null];p.push.apply(p,l);var m=Function.bind.apply(o,p),I=new m;return s&&h0(I,s.prototype),I},vp.apply(null,arguments)}function qa(n){return lU(n)||cU(n)||uU(n)||hU()}function lU(n){if(Array.isArray(n))return g0(n)}function cU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function uU(n,e){if(n){if(typeof n=="string")return g0(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g0(n,e)}}function g0(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=n[r];return o}function hU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sa(n){return function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];return Bp(n,e,o)}}function vU(n){return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return d0(n,r)}}function dr(n,e,r){var o;r=(o=r)!==null&&o!==void 0?o:wp,C2&&C2(n,null);for(var l=e.length;l--;){var s=e[l];if(typeof s=="string"){var p=r(s);p!==s&&(dU(e)||(e[l]=p),s=p)}n[s]=!0}return n}function jc(n){var e=mU(null),r;for(r in n)Bp(gU,n,[r])===!0&&(e[r]=n[r]);return e}function yp(n,e){for(;n!==null;){var r=fU(n,e);if(r){if(r.get)return Sa(r.get);if(typeof r.value=="function")return Sa(r.value)}n=pU(n)}function o(l){return console.warn("fallback value for",l),null}return o}function _2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QU(),e=function(Zt){return _2(Zt)};if(e.version="2.4.7",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var r=n.document,o=n.document,l=n.DocumentFragment,s=n.HTMLTemplateElement,p=n.Node,m=n.Element,I=n.NodeFilter,w=n.NamedNodeMap,_=w===void 0?n.NamedNodeMap||n.MozNamedAttrMap:w,E=n.HTMLFormElement,U=n.DOMParser,F=n.trustedTypes,V=m.prototype,H=yp(V,"cloneNode"),Y=yp(V,"nextSibling"),D=yp(V,"childNodes"),tt=yp(V,"parentNode");if(typeof s=="function"){var ot=o.createElement("template");ot.content&&ot.content.ownerDocument&&(o=ot.content.ownerDocument)}var bt=RU(F,r),kt=bt?bt.createHTML(""):"",Lt=o,vt=Lt.implementation,ft=Lt.createNodeIterator,Mt=Lt.createDocumentFragment,qt=Lt.getElementsByTagName,at=r.importNode,st={};try{st=jc(o).documentMode?o.documentMode:{}}catch{}var wt={};e.isSupported=typeof tt=="function"&&vt&&vt.createHTMLDocument!==void 0&&st!==9;var yt=_U,te=xU,jt=SU,Xt=FU,Wt=kU,Ct=EU,Et=TU,ue=LU,J=null,dt=dr({},[].concat(qa(y2),qa(A0),qa(l0),qa(c0),qa(b2))),mt=null,Ut=dr({},[].concat(qa(v2),qa(u0),qa(w2),qa(bp))),Pt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ie=null,le=null,ce=!0,Qe=!0,Ee=!1,We=!0,Je=!1,Dt=!1,de=!1,Tt=!1,Xe=!1,Oe=!1,Le=!1,He=!0,Ke=!1,ze="user-content-",ti=!0,ci=!1,Si={},he=null,Zi=dr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Hi=null,pi=dr({},["audio","video","img","source","image","track"]),Ei=null,ne=dr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ui="http://www.w3.org/1998/Math/MathML",Ve="http://www.w3.org/2000/svg",rr="http://www.w3.org/1999/xhtml",Ni=rr,$e=!1,wr=null,zi=dr({},[ui,Ve,rr],o0),_r,nr=["application/xhtml+xml","text/html"],It="text/html",K,z=null,it=o.createElement("form"),gt=function(Zt){return Zt instanceof RegExp||Zt instanceof Function},Ht=function(Zt){z&&z===Zt||((!Zt||mc(Zt)!=="object")&&(Zt={}),Zt=jc(Zt),_r=nr.indexOf(Zt.PARSER_MEDIA_TYPE)===-1?_r=It:_r=Zt.PARSER_MEDIA_TYPE,K=_r==="application/xhtml+xml"?o0:wp,J="ALLOWED_TAGS"in Zt?dr({},Zt.ALLOWED_TAGS,K):dt,mt="ALLOWED_ATTR"in Zt?dr({},Zt.ALLOWED_ATTR,K):Ut,wr="ALLOWED_NAMESPACES"in Zt?dr({},Zt.ALLOWED_NAMESPACES,o0):zi,Ei="ADD_URI_SAFE_ATTR"in Zt?dr(jc(ne),Zt.ADD_URI_SAFE_ATTR,K):ne,Hi="ADD_DATA_URI_TAGS"in Zt?dr(jc(pi),Zt.ADD_DATA_URI_TAGS,K):pi,he="FORBID_CONTENTS"in Zt?dr({},Zt.FORBID_CONTENTS,K):Zi,ie="FORBID_TAGS"in Zt?dr({},Zt.FORBID_TAGS,K):{},le="FORBID_ATTR"in Zt?dr({},Zt.FORBID_ATTR,K):{},Si="USE_PROFILES"in Zt?Zt.USE_PROFILES:!1,ce=Zt.ALLOW_ARIA_ATTR!==!1,Qe=Zt.ALLOW_DATA_ATTR!==!1,Ee=Zt.ALLOW_UNKNOWN_PROTOCOLS||!1,We=Zt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Je=Zt.SAFE_FOR_TEMPLATES||!1,Dt=Zt.WHOLE_DOCUMENT||!1,Xe=Zt.RETURN_DOM||!1,Oe=Zt.RETURN_DOM_FRAGMENT||!1,Le=Zt.RETURN_TRUSTED_TYPE||!1,Tt=Zt.FORCE_BODY||!1,He=Zt.SANITIZE_DOM!==!1,Ke=Zt.SANITIZE_NAMED_PROPS||!1,ti=Zt.KEEP_CONTENT!==!1,ci=Zt.IN_PLACE||!1,ue=Zt.ALLOWED_URI_REGEXP||ue,Ni=Zt.NAMESPACE||rr,Pt=Zt.CUSTOM_ELEMENT_HANDLING||{},Zt.CUSTOM_ELEMENT_HANDLING&&gt(Zt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pt.tagNameCheck=Zt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Zt.CUSTOM_ELEMENT_HANDLING&&gt(Zt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pt.attributeNameCheck=Zt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Zt.CUSTOM_ELEMENT_HANDLING&&typeof Zt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Pt.allowCustomizedBuiltInElements=Zt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Je&&(Qe=!1),Oe&&(Xe=!0),Si&&(J=dr({},qa(b2)),mt=[],Si.html===!0&&(dr(J,y2),dr(mt,v2)),Si.svg===!0&&(dr(J,A0),dr(mt,u0),dr(mt,bp)),Si.svgFilters===!0&&(dr(J,l0),dr(mt,u0),dr(mt,bp)),Si.mathMl===!0&&(dr(J,c0),dr(mt,w2),dr(mt,bp))),Zt.ADD_TAGS&&(J===dt&&(J=jc(J)),dr(J,Zt.ADD_TAGS,K)),Zt.ADD_ATTR&&(mt===Ut&&(mt=jc(mt)),dr(mt,Zt.ADD_ATTR,K)),Zt.ADD_URI_SAFE_ATTR&&dr(Ei,Zt.ADD_URI_SAFE_ATTR,K),Zt.FORBID_CONTENTS&&(he===Zi&&(he=jc(he)),dr(he,Zt.FORBID_CONTENTS,K)),ti&&(J["#text"]=!0),Dt&&dr(J,["html","head","body"]),J.table&&(dr(J,["tbody"]),delete ie.tbody),Co&&Co(Zt),z=Zt)},Nt=dr({},["mi","mo","mn","ms","mtext"]),Jt=dr({},["foreignobject","desc","title","annotation-xml"]),Rt=dr({},["title","style","font","a","script"]),Ot=dr({},A0);dr(Ot,l0),dr(Ot,wU);var me=dr({},c0);dr(me,BU);var Ae=function(Zt){var Ne=tt(Zt);(!Ne||!Ne.tagName)&&(Ne={namespaceURI:Ni,tagName:"template"});var ke=wp(Zt.tagName),Wi=wp(Ne.tagName);return wr[Zt.namespaceURI]?Zt.namespaceURI===Ve?Ne.namespaceURI===rr?ke==="svg":Ne.namespaceURI===ui?ke==="svg"&&(Wi==="annotation-xml"||Nt[Wi]):!!Ot[ke]:Zt.namespaceURI===ui?Ne.namespaceURI===rr?ke==="math":Ne.namespaceURI===Ve?ke==="math"&&Jt[Wi]:!!me[ke]:Zt.namespaceURI===rr?Ne.namespaceURI===Ve&&!Jt[Wi]||Ne.namespaceURI===ui&&!Nt[Wi]?!1:!me[ke]&&(Rt[ke]||!Ot[ke]):!!(_r==="application/xhtml+xml"&&wr[Zt.namespaceURI]):!1},Se=function(Zt){vg(e.removed,{element:Zt});try{Zt.parentNode.removeChild(Zt)}catch{try{Zt.outerHTML=kt}catch{Zt.remove()}}},Ye=function(Zt,Ne){try{vg(e.removed,{attribute:Ne.getAttributeNode(Zt),from:Ne})}catch{vg(e.removed,{attribute:null,from:Ne})}if(Ne.removeAttribute(Zt),Zt==="is"&&!mt[Zt])if(Xe||Oe)try{Se(Ne)}catch{}else try{Ne.setAttribute(Zt,"")}catch{}},je=function(Zt){var Ne,ke;if(Tt)Zt="<remove></remove>"+Zt;else{var Wi=IU(Zt,/^[\r\n\t ]+/);ke=Wi&&Wi[0]}_r==="application/xhtml+xml"&&Ni===rr&&(Zt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Zt+"</body></html>");var Fi=bt?bt.createHTML(Zt):Zt;if(Ni===rr)try{Ne=new U().parseFromString(Fi,_r)}catch{}if(!Ne||!Ne.documentElement){Ne=vt.createDocument(Ni,"template",null);try{Ne.documentElement.innerHTML=$e?kt:Fi}catch{}}var rn=Ne.body||Ne.documentElement;return Zt&&ke&&rn.insertBefore(o.createTextNode(ke),rn.childNodes[0]||null),Ni===rr?qt.call(Ne,Dt?"html":"body")[0]:Dt?Ne.documentElement:rn},Mi=function(Zt){return ft.call(Zt.ownerDocument||Zt,Zt,I.SHOW_ELEMENT|I.SHOW_COMMENT|I.SHOW_TEXT,null,!1)},Ti=function(Zt){return Zt instanceof E&&(typeof Zt.nodeName!="string"||typeof Zt.textContent!="string"||typeof Zt.removeChild!="function"||!(Zt.attributes instanceof _)||typeof Zt.removeAttribute!="function"||typeof Zt.setAttribute!="function"||typeof Zt.namespaceURI!="string"||typeof Zt.insertBefore!="function"||typeof Zt.hasChildNodes!="function")},Vi=function(Zt){return mc(p)==="object"?Zt instanceof p:Zt&&mc(Zt)==="object"&&typeof Zt.nodeType=="number"&&typeof Zt.nodeName=="string"},vi=function(Zt,Ne,ke){wt[Zt]&&CU(wt[Zt],function(Wi){Wi.call(e,Ne,ke,z)})},pr=function(Zt){var Ne;if(vi("beforeSanitizeElements",Zt,null),Ti(Zt)||mo(/[\u0080-\uFFFF]/,Zt.nodeName))return Se(Zt),!0;var ke=K(Zt.nodeName);if(vi("uponSanitizeElement",Zt,{tagName:ke,allowedTags:J}),Zt.hasChildNodes()&&!Vi(Zt.firstElementChild)&&(!Vi(Zt.content)||!Vi(Zt.content.firstElementChild))&&mo(/<[/\w]/g,Zt.innerHTML)&&mo(/<[/\w]/g,Zt.textContent)||ke==="select"&&mo(/<template/i,Zt.innerHTML))return Se(Zt),!0;if(!J[ke]||ie[ke]){if(!ie[ke]&&Qi(ke)&&(Pt.tagNameCheck instanceof RegExp&&mo(Pt.tagNameCheck,ke)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(ke)))return!1;if(ti&&!he[ke]){var Wi=tt(Zt)||Zt.parentNode,Fi=D(Zt)||Zt.childNodes;if(Fi&&Wi)for(var rn=Fi.length,Fr=rn-1;Fr>=0;--Fr)Wi.insertBefore(H(Fi[Fr],!0),Y(Zt))}return Se(Zt),!0}return Zt instanceof m&&!Ae(Zt)||(ke==="noscript"||ke==="noembed"||ke==="noframes")&&mo(/<\/no(script|embed|frames)/i,Zt.innerHTML)?(Se(Zt),!0):(Je&&Zt.nodeType===3&&(Ne=Zt.textContent,Ne=ja(Ne,yt," "),Ne=ja(Ne,te," "),Ne=ja(Ne,jt," "),Zt.textContent!==Ne&&(vg(e.removed,{element:Zt.cloneNode()}),Zt.textContent=Ne)),vi("afterSanitizeElements",Zt,null),!1)},ur=function(Zt,Ne,ke){if(He&&(Ne==="id"||Ne==="name")&&(ke in o||ke in it))return!1;if(!(Qe&&!le[Ne]&&mo(Xt,Ne))&&!(ce&&mo(Wt,Ne))){if(!mt[Ne]||le[Ne]){if(!(Qi(Zt)&&(Pt.tagNameCheck instanceof RegExp&&mo(Pt.tagNameCheck,Zt)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(Zt))&&(Pt.attributeNameCheck instanceof RegExp&&mo(Pt.attributeNameCheck,Ne)||Pt.attributeNameCheck instanceof Function&&Pt.attributeNameCheck(Ne))||Ne==="is"&&Pt.allowCustomizedBuiltInElements&&(Pt.tagNameCheck instanceof RegExp&&mo(Pt.tagNameCheck,ke)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(ke))))return!1}else if(!Ei[Ne]&&!mo(ue,ja(ke,Et,""))&&!((Ne==="src"||Ne==="xlink:href"||Ne==="href")&&Zt!=="script"&&yU(ke,"data:")===0&&Hi[Zt])&&!(Ee&&!mo(Ct,ja(ke,Et,"")))&&ke)return!1}return!0},Qi=function(Zt){return Zt.indexOf("-")>0},Oi=function(Zt){var Ne,ke,Wi,Fi;vi("beforeSanitizeAttributes",Zt,null);var rn=Zt.attributes;if(rn){var Fr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:mt};for(Fi=rn.length;Fi--;){Ne=rn[Fi];var jr=Ne,br=jr.name,on=jr.namespaceURI;if(ke=br==="value"?Ne.value:bU(Ne.value),Wi=K(br),Fr.attrName=Wi,Fr.attrValue=ke,Fr.keepAttr=!0,Fr.forceKeepAttr=void 0,vi("uponSanitizeAttribute",Zt,Fr),ke=Fr.attrValue,!Fr.forceKeepAttr&&(Ye(br,Zt),!!Fr.keepAttr)){if(!We&&mo(/\/>/i,ke)){Ye(br,Zt);continue}Je&&(ke=ja(ke,yt," "),ke=ja(ke,te," "),ke=ja(ke,jt," "));var dn=K(Zt.nodeName);if(ur(dn,Wi,ke)){if(Ke&&(Wi==="id"||Wi==="name")&&(Ye(br,Zt),ke=ze+ke),bt&&mc(F)==="object"&&typeof F.getAttributeType=="function"&&!on)switch(F.getAttributeType(dn,Wi)){case"TrustedHTML":{ke=bt.createHTML(ke);break}case"TrustedScriptURL":{ke=bt.createScriptURL(ke);break}}try{on?Zt.setAttributeNS(on,br,ke):Zt.setAttribute(br,ke),I2(e.removed)}catch{}}}}vi("afterSanitizeAttributes",Zt,null)}},sr=function Zt(Ne){var ke,Wi=Mi(Ne);for(vi("beforeSanitizeShadowDOM",Ne,null);ke=Wi.nextNode();)vi("uponSanitizeShadowNode",ke,null),!pr(ke)&&(ke.content instanceof l&&Zt(ke.content),Oi(ke));vi("afterSanitizeShadowDOM",Ne,null)};return e.sanitize=function(Zt){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke,Wi,Fi,rn,Fr;if($e=!Zt,$e&&(Zt="<!-->"),typeof Zt!="string"&&!Vi(Zt))if(typeof Zt.toString=="function"){if(Zt=Zt.toString(),typeof Zt!="string")throw a0("dirty is not a string, aborting")}else throw a0("toString is not a function");if(!e.isSupported){if(mc(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Zt=="string")return n.toStaticHTML(Zt);if(Vi(Zt))return n.toStaticHTML(Zt.outerHTML)}return Zt}if(de||Ht(Ne),e.removed=[],typeof Zt=="string"&&(ci=!1),ci){if(Zt.nodeName){var jr=K(Zt.nodeName);if(!J[jr]||ie[jr])throw a0("root node is forbidden and cannot be sanitized in-place")}}else if(Zt instanceof p)ke=je("<!---->"),Wi=ke.ownerDocument.importNode(Zt,!0),Wi.nodeType===1&&Wi.nodeName==="BODY"||Wi.nodeName==="HTML"?ke=Wi:ke.appendChild(Wi);else{if(!Xe&&!Je&&!Dt&&Zt.indexOf("<")===-1)return bt&&Le?bt.createHTML(Zt):Zt;if(ke=je(Zt),!ke)return Xe?null:Le?kt:""}ke&&Tt&&Se(ke.firstChild);for(var br=Mi(ci?Zt:ke);Fi=br.nextNode();)Fi.nodeType===3&&Fi===rn||pr(Fi)||(Fi.content instanceof l&&sr(Fi.content),Oi(Fi),rn=Fi);if(rn=null,ci)return Zt;if(Xe){if(Oe)for(Fr=Mt.call(ke.ownerDocument);ke.firstChild;)Fr.appendChild(ke.firstChild);else Fr=ke;return(mt.shadowroot||mt.shadowrootmod)&&(Fr=at.call(r,Fr,!0)),Fr}var on=Dt?ke.outerHTML:ke.innerHTML;return Dt&&J["!doctype"]&&ke.ownerDocument&&ke.ownerDocument.doctype&&ke.ownerDocument.doctype.name&&mo(UU,ke.ownerDocument.doctype.name)&&(on="<!DOCTYPE "+ke.ownerDocument.doctype.name+`>
`+on),Je&&(on=ja(on,yt," "),on=ja(on,te," "),on=ja(on,jt," ")),bt&&Le?bt.createHTML(on):on},e.setConfig=function(Zt){Ht(Zt),de=!0},e.clearConfig=function(){z=null,de=!1},e.isValidAttribute=function(Zt,Ne,ke){z||Ht({});var Wi=K(Zt),Fi=K(Ne);return ur(Wi,Fi,ke)},e.addHook=function(Zt,Ne){typeof Ne=="function"&&(wt[Zt]=wt[Zt]||[],vg(wt[Zt],Ne))},e.removeHook=function(Zt){if(wt[Zt])return I2(wt[Zt])},e.removeHooks=function(Zt){wt[Zt]&&(wt[Zt]=[])},e.removeAllHooks=function(){wt={}},e}var gU,C2,dU,pU,fU,Co,$a,mU,B2,Bp,d0,CU,I2,vg,wp,o0,IU,ja,yU,bU,mo,a0,y2,A0,l0,wU,c0,BU,b2,v2,u0,w2,bp,_U,xU,SU,FU,kU,LU,EU,TU,UU,QU,RU,GU,S2=_d(()=>{gU=Object.hasOwnProperty,C2=Object.setPrototypeOf,dU=Object.isFrozen,pU=Object.getPrototypeOf,fU=Object.getOwnPropertyDescriptor,Co=Object.freeze,$a=Object.seal,mU=Object.create,B2=typeof Reflect<"u"&&Reflect,Bp=B2.apply,d0=B2.construct;Bp||(Bp=function(n,e,r){return n.apply(e,r)});Co||(Co=function(n){return n});$a||($a=function(n){return n});d0||(d0=function(n,e){return vp(n,qa(e))});CU=Sa(Array.prototype.forEach),I2=Sa(Array.prototype.pop),vg=Sa(Array.prototype.push),wp=Sa(String.prototype.toLowerCase),o0=Sa(String.prototype.toString),IU=Sa(String.prototype.match),ja=Sa(String.prototype.replace),yU=Sa(String.prototype.indexOf),bU=Sa(String.prototype.trim),mo=Sa(RegExp.prototype.test),a0=vU(TypeError);y2=Co(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),A0=Co(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),l0=Co(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wU=Co(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),c0=Co(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),BU=Co(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),b2=Co(["#text"]),v2=Co(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),u0=Co(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),w2=Co(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bp=Co(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_U=$a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xU=$a(/<%[\w\W]*|[\w\W]*%>/gm),SU=$a(/\${[\w\W]*}/gm),FU=$a(/^data-[\-\w.\u00B7-\uFFFF]/),kU=$a(/^aria-[\-\w]+$/),LU=$a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),EU=$a(/^(?:\w+script|data):/i),TU=$a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),UU=$a(/^html$/i),QU=function(){return typeof window>"u"?null:window},RU=function(n,e){if(mc(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,o="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(o)&&(r=e.currentScript.getAttribute(o));var l="dompurify"+(r?"#"+r:"");try{return n.createPolicy(l,{createHTML:function(s){return s},createScriptURL:function(s){return s}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};GU=_2()});var y5={};iC(y5,{AElement:()=>xf,AnimateColorElement:()=>yf,AnimateElement:()=>ph,AnimateTransformElement:()=>bf,BoundingBox:()=>Oo,CB1:()=>HI,CB2:()=>MI,CB3:()=>NI,CB4:()=>VI,Canvg:()=>yc,CircleElement:()=>cf,ClipPathElement:()=>Tf,DefsElement:()=>ff,DescElement:()=>Pf,Document:()=>nA,Element:()=>Yr,EllipseElement:()=>uf,FeColorMatrixElement:()=>Dg,FeCompositeElement:()=>Rf,FeDropShadowElement:()=>Uf,FeGaussianBlurElement:()=>Gf,FeMorphologyElement:()=>Qf,FilterElement:()=>Au,Font:()=>gs,FontElement:()=>vf,FontFaceElement:()=>wf,GElement:()=>dh,GlyphElement:()=>Pg,GradientElement:()=>Ng,ImageElement:()=>Ff,LineElement:()=>hf,LinearGradientElement:()=>mf,MarkerElement:()=>pf,MaskElement:()=>au,Matrix:()=>Gg,MissingGlyphElement:()=>Bf,Mouse:()=>rf,PSEUDO_ZERO:()=>ru,Parser:()=>ch,PathElement:()=>Ur,PathParser:()=>ir,PatternElement:()=>df,Point:()=>gn,PolygonElement:()=>gf,PolylineElement:()=>Mg,Property:()=>Pi,QB1:()=>DI,QB2:()=>KI,QB3:()=>OI,RadialGradientElement:()=>Cf,RectElement:()=>Hg,RenderedElement:()=>WA,Rotate:()=>sf,SVGElement:()=>vc,SVGFontLoader:()=>Lf,Scale:()=>of,Screen:()=>su,Skew:()=>Zg,SkewX:()=>af,SkewY:()=>Af,StopElement:()=>If,StyleElement:()=>Vg,SymbolElement:()=>kf,TRefElement:()=>_f,TSpanElement:()=>ou,TextElement:()=>sA,TextPathElement:()=>Sf,TitleElement:()=>Zf,Transform:()=>zA,Translate:()=>nf,UnknownElement:()=>lf,UseElement:()=>Ef,ViewPort:()=>ef,compressSpaces:()=>gu,default:()=>yc,getSelectorSpecificity:()=>m5,normalizeAttributeName:()=>p5,normalizeColor:()=>f5,parseExternalUrl:()=>Ly,presets:()=>n6,toNumbers:()=>Ko,trimLeft:()=>g5,trimRight:()=>d5,vectorMagnitude:()=>ZI,vectorsAngle:()=>PI,vectorsRatio:()=>tf});function U_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function LB(n,e,r,o,l,s,p){try{var m=n[s](p),I=m.value}catch(w){r(w);return}m.done?e(I):Promise.resolve(I).then(o,l)}function El(n){return function(){var e=this,r=arguments;return new Promise(function(o,l){var s=n.apply(e,r);function p(I){LB(s,o,l,p,m,"next",I)}function m(I){LB(s,o,l,p,m,"throw",I)}p(void 0)})}}function C9(n,e){if(Sr(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var o=r.call(n,e||"default");if(Sr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function I9(n){var e=C9(n,"string");return Sr(e)=="symbol"?e:String(e)}function Fy(n,e,r){return e=I9(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function l5(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}A5(n,e),n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function QD(n){var e="";Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var o=n[r];if(o.type===Me.CLOSE_PATH)e+="z";else if(o.type===Me.HORIZ_LINE_TO)e+=(o.relative?"h":"H")+o.x;else if(o.type===Me.VERT_LINE_TO)e+=(o.relative?"v":"V")+o.y;else if(o.type===Me.MOVE_TO)e+=(o.relative?"m":"M")+o.x+" "+o.y;else if(o.type===Me.LINE_TO)e+=(o.relative?"l":"L")+o.x+" "+o.y;else if(o.type===Me.CURVE_TO)e+=(o.relative?"c":"C")+o.x1+" "+o.y1+" "+o.x2+" "+o.y2+" "+o.x+" "+o.y;else if(o.type===Me.SMOOTH_CURVE_TO)e+=(o.relative?"s":"S")+o.x2+" "+o.y2+" "+o.x+" "+o.y;else if(o.type===Me.QUAD_TO)e+=(o.relative?"q":"Q")+o.x1+" "+o.y1+" "+o.x+" "+o.y;else if(o.type===Me.SMOOTH_QUAD_TO)e+=(o.relative?"t":"T")+o.x+" "+o.y;else{if(o.type!==Me.ARC)throw new Error('Unexpected command type "'+o.type+'" at index '+r+".");e+=(o.relative?"a":"A")+o.rX+" "+o.rY+" "+o.xRot+" "+ +o.lArcFlag+" "+ +o.sweepFlag+" "+o.x+" "+o.y}}return e}function GI(n,e){var r=n[0],o=n[1];return[r*Math.cos(e)-o*Math.sin(e),r*Math.sin(e)+o*Math.cos(e)]}function iA(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var r=0;r<n.length;r++)if(typeof n[r]!="number")throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof n[r]+" == typeof "+n[r]);return!0}function AI(n,e,r){n.lArcFlag=n.lArcFlag===0?0:1,n.sweepFlag=n.sweepFlag===0?0:1;var o=n.rX,l=n.rY,s=n.x,p=n.y;o=Math.abs(n.rX),l=Math.abs(n.rY);var m=GI([(e-s)/2,(r-p)/2],-n.xRot/180*Ic),I=m[0],w=m[1],_=Math.pow(I,2)/Math.pow(o,2)+Math.pow(w,2)/Math.pow(l,2);1<_&&(o*=Math.sqrt(_),l*=Math.sqrt(_)),n.rX=o,n.rY=l;var E=Math.pow(o,2)*Math.pow(w,2)+Math.pow(l,2)*Math.pow(I,2),U=(n.lArcFlag!==n.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(o,2)*Math.pow(l,2)-E)/E)),F=o*w/l*U,V=-l*I/o*U,H=GI([F,V],n.xRot/180*Ic);n.cX=H[0]+(e+s)/2,n.cY=H[1]+(r+p)/2,n.phi1=Math.atan2((w-V)/l,(I-F)/o),n.phi2=Math.atan2((-w-V)/l,(-I-F)/o),n.sweepFlag===0&&n.phi2>n.phi1&&(n.phi2-=2*Ic),n.sweepFlag===1&&n.phi2<n.phi1&&(n.phi2+=2*Ic),n.phi1*=180/Ic,n.phi2*=180/Ic}function y_(n,e,r){iA(n,e,r);var o=n*n+e*e-r*r;if(0>o)return[];if(o===0)return[[n*r/(n*n+e*e),e*r/(n*n+e*e)]];var l=Math.sqrt(o);return[[(n*r+e*l)/(n*n+e*e),(e*r-n*l)/(n*n+e*e)],[(n*r-e*l)/(n*n+e*e),(e*r+n*l)/(n*n+e*e)]]}function b_(n,e,r){return(1-r)*n+r*e}function v_(n,e,r,o){return n+Math.cos(o/180*Ic)*e+Math.sin(o/180*Ic)*r}function w_(n,e,r,o){var l=1e-6,s=e-n,p=r-e,m=3*s+3*(o-r)-6*p,I=6*(p-s),w=3*s;return Math.abs(m)<l?[-w/I]:function(_,E,U){U===void 0&&(U=1e-6);var F=_*_/4-E;if(F<-U)return[];if(F<=U)return[-_/2];var V=Math.sqrt(F);return[-_/2-V,-_/2+V]}(I/m,w/m,l)}function B_(n,e,r,o,l){var s=1-l;return n*(s*s*s)+e*(3*s*s*l)+r*(3*s*l*l)+o*(l*l*l)}function Wp(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wp=function(e){return typeof e}:Wp=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(n)}function YD(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $D(n,e,r,o,l){if(typeof n=="string"&&(n=document.getElementById(n)),!n||Wp(n)!=="object"||!("getContext"in n))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=n.getContext("2d");try{return s.getImageData(e,r,o,l)}catch(p){throw new Error("unable to access image data: "+p)}}function t6(n,e,r,o,l,s){if(!(isNaN(s)||s<1)){s|=0;var p=$D(n,e,r,o,l);p=e6(p,e,r,o,l,s),n.getContext("2d").putImageData(p,e,r)}}function e6(n,e,r,o,l,s){for(var p=n.data,m=2*s+1,I=o-1,w=l-1,_=s+1,E=_*(_+1)/2,U=new F_,F=U,V,H=1;H<m;H++)F=F.next=new F_,H===_&&(V=F);F.next=U;for(var Y=null,D=null,tt=0,ot=0,bt=jD[s],kt=qD[s],Lt=0;Lt<l;Lt++){F=U;for(var vt=p[ot],ft=p[ot+1],Mt=p[ot+2],qt=p[ot+3],at=0;at<_;at++)F.r=vt,F.g=ft,F.b=Mt,F.a=qt,F=F.next;for(var st=0,wt=0,yt=0,te=0,jt=_*vt,Xt=_*ft,Wt=_*Mt,Ct=_*qt,Et=E*vt,ue=E*ft,J=E*Mt,dt=E*qt,mt=1;mt<_;mt++){var Ut=ot+((I<mt?I:mt)<<2),Pt=p[Ut],ie=p[Ut+1],le=p[Ut+2],ce=p[Ut+3],Qe=_-mt;Et+=(F.r=Pt)*Qe,ue+=(F.g=ie)*Qe,J+=(F.b=le)*Qe,dt+=(F.a=ce)*Qe,st+=Pt,wt+=ie,yt+=le,te+=ce,F=F.next}Y=U,D=V;for(var Ee=0;Ee<o;Ee++){var We=dt*bt>>>kt;if(p[ot+3]=We,We!==0){var Je=255/We;p[ot]=(Et*bt>>>kt)*Je,p[ot+1]=(ue*bt>>>kt)*Je,p[ot+2]=(J*bt>>>kt)*Je}else p[ot]=p[ot+1]=p[ot+2]=0;Et-=jt,ue-=Xt,J-=Wt,dt-=Ct,jt-=Y.r,Xt-=Y.g,Wt-=Y.b,Ct-=Y.a;var Dt=Ee+s+1;Dt=tt+(Dt<I?Dt:I)<<2,st+=Y.r=p[Dt],wt+=Y.g=p[Dt+1],yt+=Y.b=p[Dt+2],te+=Y.a=p[Dt+3],Et+=st,ue+=wt,J+=yt,dt+=te,Y=Y.next;var de=D,Tt=de.r,Xe=de.g,Oe=de.b,Le=de.a;jt+=Tt,Xt+=Xe,Wt+=Oe,Ct+=Le,st-=Tt,wt-=Xe,yt-=Oe,te-=Le,D=D.next,ot+=4}tt+=o}for(var He=0;He<o;He++){ot=He<<2;var Ke=p[ot],ze=p[ot+1],ti=p[ot+2],ci=p[ot+3],Si=_*Ke,he=_*ze,Zi=_*ti,Hi=_*ci,pi=E*Ke,Ei=E*ze,ne=E*ti,ui=E*ci;F=U;for(var Ve=0;Ve<_;Ve++)F.r=Ke,F.g=ze,F.b=ti,F.a=ci,F=F.next;for(var rr=o,Ni=0,$e=0,wr=0,zi=0,_r=1;_r<=s;_r++){ot=rr+He<<2;var nr=_-_r;pi+=(F.r=Ke=p[ot])*nr,Ei+=(F.g=ze=p[ot+1])*nr,ne+=(F.b=ti=p[ot+2])*nr,ui+=(F.a=ci=p[ot+3])*nr,zi+=Ke,Ni+=ze,$e+=ti,wr+=ci,F=F.next,_r<w&&(rr+=o)}ot=He,Y=U,D=V;for(var It=0;It<l;It++){var K=ot<<2;p[K+3]=ci=ui*bt>>>kt,ci>0?(ci=255/ci,p[K]=(pi*bt>>>kt)*ci,p[K+1]=(Ei*bt>>>kt)*ci,p[K+2]=(ne*bt>>>kt)*ci):p[K]=p[K+1]=p[K+2]=0,pi-=Si,Ei-=he,ne-=Zi,ui-=Hi,Si-=Y.r,he-=Y.g,Zi-=Y.b,Hi-=Y.a,K=He+((K=It+_)<w?K:w)*o<<2,pi+=zi+=Y.r=p[K],Ei+=Ni+=Y.g=p[K+1],ne+=$e+=Y.b=p[K+2],ui+=wr+=Y.a=p[K+3],Y=Y.next,Si+=Ke=D.r,he+=ze=D.g,Zi+=ti=D.b,Hi+=ci=D.a,zi-=Ke,Ni-=ze,$e-=ti,wr-=ci,D=D.next,ot+=o}}return n}function i6(){var{DOMParser:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:n,createCanvas(r,o){return new OffscreenCanvas(r,o)},createImage(r){return El(function*(){var o=yield fetch(r),l=yield o.blob(),s=yield createImageBitmap(l);return s})()}};return(typeof DOMParser<"u"||typeof n>"u")&&Reflect.deleteProperty(e,"DOMParser"),e}function r6(n){var{DOMParser:e,canvas:r,fetch:o}=n;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:o,createCanvas:r.createCanvas,createImage:r.loadImage}}function gu(n){return n.replace(/(?!\u3000)\s+/gm," ")}function g5(n){return n.replace(/^[\n \t]+/,"")}function d5(n){return n.replace(/[\n \t]+$/,"")}function Ko(n){var e=(n||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}function p5(n){return s6.test(n)?n.toLowerCase():n}function Ly(n){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(n)||[];return e[2]||e[3]||e[4]}function f5(n){if(!n.startsWith("rgb"))return n;var e=3,r=n.replace(/\d+(\.\d+)?/g,(o,l)=>e--&&l?String(Math.round(parseFloat(o))):o);return r}function tu(n,e){var r=e.exec(n);return r?[n.replace(e," "),r.length]:[n,0]}function m5(n){var e=[0,0,0],r=n.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),o=0;return[r,o]=tu(r,o6),e[1]+=o,[r,o]=tu(r,a6),e[0]+=o,[r,o]=tu(r,A6),e[1]+=o,[r,o]=tu(r,l6),e[2]+=o,[r,o]=tu(r,c6),e[1]+=o,[r,o]=tu(r,u6),e[1]+=o,r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[r,o]=tu(r,h6),e[2]+=o,e.join("")}function ZI(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))}function tf(n,e){return(n[0]*e[0]+n[1]*e[1])/(ZI(n)*ZI(e))}function PI(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(tf(n,e))}function HI(n){return n*n*n}function MI(n){return 3*n*n*(1-n)}function NI(n){return 3*n*(1-n)*(1-n)}function VI(n){return(1-n)*(1-n)*(1-n)}function DI(n){return n*n}function KI(n){return 2*n*(1-n)}function OI(n){return(1-n)*(1-n)}function p6(n){return gu(n).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function f6(n){var[e,r]=n.split("(");return[e.trim(),r.trim().replace(")","")]}function m6(n){var e=n.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function C6(n){return typeof process>"u"?n:n.trim().split(",").map(m6).join(",")}function I6(n){if(!n)return"";var e=n.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function y6(n){if(!n)return"";var e=n.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}function k_(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,o)}return r}function Hp(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k_(Object(r),!0).forEach(function(o){Fy(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):k_(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}function Mp(n,e,r,o,l,s){return n[r*o*4+e*4+s]}function Np(n,e,r,o,l,s,p){n[r*o*4+e*4+s]=p}function zn(n,e,r){var o=n[e];return o*r}function kl(n,e,r,o){return e+Math.cos(n)*r+Math.sin(n)*o}function E_(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,o)}return r}function w6(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E_(Object(r),!0).forEach(function(o){Fy(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):E_(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}function B6(n,e){var r=document.createElement("canvas");return r.width=n,r.height=e,r}function _6(n){return WI.apply(this,arguments)}function WI(){return WI=El(function*(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=document.createElement("img");return e&&(r.crossOrigin="Anonymous"),new Promise((o,l)=>{r.onload=()=>{o(r)},r.onerror=(s,p,m,I,w)=>{l(w)},r.src=n})}),WI.apply(this,arguments)}function T_(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,o)}return r}function eu(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T_(Object(r),!0).forEach(function(o){Fy(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):T_(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}var nh,wg,Fn,Kg,kn,ZU,oA,PU,Hf,HU,_p,ks,Q_,R_,G_,MU,JI,Z_,P_,lI,NU,Ln,H_,VU,DU,lu,KU,OU,zU,p0,WU,M_,cu,JU,XU,JA,YU,jU,Og,f0,En,qU,XA,m0,$U,tQ,uu,eQ,Mf,Nf,N_,C0,F2,k2,L2,E2,rA,Jp,XI,T2,iQ,rQ,nQ,V_,sQ,D_,oQ,aQ,AQ,lQ,cQ,K_,uQ,Vf,hQ,gQ,dQ,Tl,pQ,fQ,fh,I0,y0,b0,mQ,CQ,O_,U2,IQ,YI,yQ,bQ,Q2,R2,jI,G2,qI,vQ,wQ,Df,BQ,_Q,xQ,aA,SQ,FQ,kQ,LQ,z_,EQ,TQ,Z2,UQ,QQ,RQ,sh,v0,GQ,ds,ZQ,P2,H2,PQ,HQ,MQ,NQ,VQ,DQ,KQ,OQ,W_,zQ,M2,cI,WQ,Kf,JQ,XQ,YQ,J_,jQ,qQ,$Q,tR,eR,iR,rR,nR,N2,Ul,sR,oR,X_,aR,AR,lR,js,cR,uR,hR,xp,V2,gR,w0,dR,B0,_0,x0,pR,fR,mR,zg,Y_,uI,CR,j_,IR,$I,yR,bR,Of,vR,wR,hI,BR,ty,_R,xR,D2,SR,FR,kR,K2,ey,iy,LR,q_,ER,TR,S0,F0,UR,QR,O2,gI,RR,Xp,Ug,Yp,GR,ZR,tA,qc,zf,ry,PR,HR,Sp,dI,MR,NR,$_,VR,DR,z2,Vp,KR,OR,zR,WR,JR,XR,tx,YR,jR,qR,$R,hu,ex,tG,eG,iG,rG,Wf,nG,sG,oG,aG,AG,lG,mh,cG,ny,uG,hG,gG,W2,ix,dG,k0,pG,fG,mG,J2,rx,sy,CG,IG,yG,nx,bG,vG,wG,BG,_G,xG,SG,X2,FG,kG,LG,EG,TG,UG,QG,Wg,RG,GG,ZG,PG,sx,Fp,HG,MG,NG,VG,DG,KG,Io,OG,zG,Jg,WG,JG,XG,YG,jG,qG,$G,tZ,eZ,iZ,rZ,nZ,ox,sZ,oZ,aZ,Y2,Jf,j2,AZ,lZ,cZ,uZ,hZ,gZ,q2,dZ,pZ,fZ,mZ,CZ,IZ,ax,yZ,bZ,vZ,Dp,wZ,BZ,_Z,xZ,SZ,oy,FZ,kZ,Ax,LZ,EZ,TZ,lx,cx,ay,UZ,QZ,Bg,ux,RZ,GZ,ZZ,PZ,HZ,$2,MZ,NZ,VZ,DZ,hx,KZ,gx,tB,eB,dx,OZ,zZ,Xf,iB,WZ,JZ,XZ,Ay,YZ,px,jZ,qZ,$Z,tP,eP,fx,da,iP,rP,rB,nP,mx,nB,sP,sB,oP,aP,AP,pI,fI,lP,L0,cP,oB,uP,E0,Eg,aB,Qg,$c,T0,U0,ly,Q0,AB,lB,Cx,cB,hP,gP,dP,Ix,yx,pP,fP,mP,CP,uh,IP,uB,R0,yP,bP,vP,wP,G0,hB,gB,dB,kp,mI,$u,Z0,P0,Lp,pB,_g,xg,BP,_P,cy,xP,Yf,bx,SP,FP,kP,LP,Tg,EP,TP,UP,QP,RP,GP,H0,ZP,CI,vx,PP,Xg,Ch,fB,HP,MP,NP,jp,bc,hh,mB,CB,VP,DP,KP,Kp,OP,zP,WP,wx,uy,JP,XP,YP,Bx,qp,hy,_x,jf,xx,jP,qP,M0,$P,rh,iu,Ep,Sx,II,gy,yI,tH,eH,Fx,iH,IB,kx,rH,dy,Lx,Tp,yB,nH,bB,Ex,Tx,Ux,Qx,sH,vB,oH,oh,Ah,bI,Yg,aH,AH,lH,cH,uH,hH,wB,gH,dH,pH,fH,Rx,mH,CH,IH,yH,bH,vH,wH,BH,BB,_H,xH,SH,FH,kH,LH,EH,TH,_B,UH,QH,xB,RH,Op,SB,Gx,GH,Zx,Px,FB,N0,ZH,PH,HH,MH,Hx,NH,VH,DH,KH,OH,zH,WH,JH,XH,vI,YH,jH,qH,kB,V0,$H,tM,eM,iM,rM,nM,sM,oM,aM,AM,lM,cM,uM,hM,gM,dM,pM,fM,mM,CM,YA,IM,Mx,py,yM,fy,my,bM,vM,Nx,Vx,wM,BM,_M,xM,SM,FM,kM,LM,EM,TM,UM,EB,QM,RM,GM,ZM,TB,UB,wI,BI,Dx,D0,Kx,QB,PM,Up,zp,Cy,HM,MM,NM,VM,DM,KM,OM,zM,ah,qf,WM,JM,XM,YM,jM,qM,$M,tN,eN,$p,_I,iN,rN,nN,K0,xI,Ox,SI,sN,Iy,oN,RB,GB,ZB,aN,PB,zx,AN,lN,O0,yy,by,cN,uN,hN,gN,HB,dN,MB,pN,fN,vy,NB,mN,CN,IN,yN,bN,wy,vN,wN,BN,_N,xN,z0,SN,FN,kN,VB,By,LN,EN,W0,TN,J0,UN,QN,RN,GN,DB,$f,ZN,PN,HN,MN,NN,VN,DN,th,KN,ON,zN,WN,JN,XN,FI,YN,jN,qN,X0,KB,OB,$N,tV,zB,eV,iV,rV,nV,sV,oV,aV,AV,_y,lV,cV,xy,uV,hV,gV,dV,WB,pV,fV,mV,CV,IV,Wx,yV,bV,vV,wV,kI,LI,BV,_V,xV,SV,FV,kV,LV,EV,JB,EI,TV,Jx,UV,QV,RV,XB,GV,ZV,TI,Xx,nu,Y0,j0,PV,Yx,HV,MV,NV,VV,DV,KV,OV,zV,WV,jx,JV,XV,YB,jB,YV,jV,q0,qV,$V,qx,t9,e9,qB,Qp,Sg,$B,Fg,t_,i9,r9,n9,s9,Sy,e_,$x,o9,a9,Rp,A9,t5,l9,c9,u9,i_,h9,g9,$0,r_,d9,n_,e5,p9,kg,s_,f9,m9,tI,eI,i5,Gp,y9,b9,v9,w9,o_,a_,A_,B9,_9,r5,x9,S9,F9,l_,k9,L9,E9,T9,U9,Q9,R9,c_,G9,Z9,P9,H9,M9,n5,N9,iI,s5,V9,D9,K9,O9,z9,W9,J9,u_,X9,h_,Y9,j9,eh,q9,$9,rI,nI,tD,g_,tm,Lg,eD,iD,Ll,Zp,lh,gh,Rg,ih,Pp,sI,Cc,d_,rD,oI,o5,nD,sD,oD,UI,p_,aD,AD,aI,lD,cD,uD,f_,m_,hD,gD,dD,pD,fD,QI,mD,CD,ID,yD,RI,a5,bD,vD,wD,BD,_D,C_,xD,SD,FD,kD,LD,ED,TD,UD,I_,A5,Ic,Wn,Fl,eA,c5,RD,__,GD,Me,ZD,PD,HD,MD,ND,x_,VD,DD,KD,OD,S_,zD,WD,ky,u5,h5,JD,XD,jD,qD,F_,n6,s6,o6,a6,A6,l6,c6,u6,h6,ru,Pi,ef,gn,rf,C5,I5,su,g6,d6,ch,nf,sf,of,Gg,Zg,af,Af,zA,Yr,lf,gs,Oo,ir,WA,Ur,Pg,sA,ou,zI,vc,Hg,cf,uf,hf,Mg,gf,df,pf,ff,dh,Ng,mf,Cf,If,ph,yf,bf,vf,wf,Bf,_f,xf,Sf,b6,Ff,kf,Lf,Vg,Ef,Dg,au,L_,Tf,Au,Uf,Qf,Rf,Gf,Zf,Pf,v6,nA,yc,b5=_d(()=>{Ey();nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};wg=function(n){return n&&n.Math===Math&&n},Fn=wg(typeof globalThis=="object"&&globalThis)||wg(typeof window=="object"&&window)||wg(typeof self=="object"&&self)||wg(typeof nh=="object"&&nh)||wg(typeof nh=="object"&&nh)||function(){return this}()||Function("return this")(),Kg={},kn=function(n){try{return!!n()}catch{return!0}},ZU=kn,oA=!ZU(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),PU=kn,Hf=!PU(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),HU=Hf,_p=Function.prototype.call,ks=HU?_p.bind(_p):function(){return _p.apply(_p,arguments)},Q_={},R_={}.propertyIsEnumerable,G_=Object.getOwnPropertyDescriptor,MU=G_&&!R_.call({1:2},1);Q_.f=MU?function(n){var e=G_(this,n);return!!e&&e.enumerable}:R_;JI=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},Z_=Hf,P_=Function.prototype,lI=P_.call,NU=Z_&&P_.bind.bind(lI,lI),Ln=Z_?NU:function(n){return function(){return lI.apply(n,arguments)}},H_=Ln,VU=H_({}.toString),DU=H_("".slice),lu=function(n){return DU(VU(n),8,-1)},KU=Ln,OU=kn,zU=lu,p0=Object,WU=KU("".split),M_=OU(function(){return!p0("z").propertyIsEnumerable(0)})?function(n){return zU(n)==="String"?WU(n,""):p0(n)}:p0,cu=function(n){return n==null},JU=cu,XU=TypeError,JA=function(n){if(JU(n))throw new XU("Can't call method on "+n);return n},YU=M_,jU=JA,Og=function(n){return YU(jU(n))},f0=typeof document=="object"&&document.all,En=typeof f0>"u"&&f0!==void 0?function(n){return typeof n=="function"||n===f0}:function(n){return typeof n=="function"},qU=En,XA=function(n){return typeof n=="object"?n!==null:qU(n)},m0=Fn,$U=En,tQ=function(n){return $U(n)?n:void 0},uu=function(n,e){return arguments.length<2?tQ(m0[n]):m0[n]&&m0[n][e]},eQ=Ln,Mf=eQ({}.isPrototypeOf),Nf=typeof navigator<"u"&&String(navigator.userAgent)||"",N_=Fn,C0=Nf,F2=N_.process,k2=N_.Deno,L2=F2&&F2.versions||k2&&k2.version,E2=L2&&L2.v8;E2&&(rA=E2.split("."),Jp=rA[0]>0&&rA[0]<4?1:+(rA[0]+rA[1]));!Jp&&C0&&(rA=C0.match(/Edge\/(\d+)/),(!rA||rA[1]>=74)&&(rA=C0.match(/Chrome\/(\d+)/),rA&&(Jp=+rA[1])));XI=Jp,T2=XI,iQ=kn,rQ=Fn,nQ=rQ.String,V_=!!Object.getOwnPropertySymbols&&!iQ(function(){var n=Symbol("symbol detection");return!nQ(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&T2&&T2<41}),sQ=V_,D_=sQ&&!Symbol.sham&&typeof Symbol.iterator=="symbol",oQ=uu,aQ=En,AQ=Mf,lQ=D_,cQ=Object,K_=lQ?function(n){return typeof n=="symbol"}:function(n){var e=oQ("Symbol");return aQ(e)&&AQ(e.prototype,cQ(n))},uQ=String,Vf=function(n){try{return uQ(n)}catch{return"Object"}},hQ=En,gQ=Vf,dQ=TypeError,Tl=function(n){if(hQ(n))return n;throw new dQ(gQ(n)+" is not a function")},pQ=Tl,fQ=cu,fh=function(n,e){var r=n[e];return fQ(r)?void 0:pQ(r)},I0=ks,y0=En,b0=XA,mQ=TypeError,CQ=function(n,e){var r,o;if(e==="string"&&y0(r=n.toString)&&!b0(o=I0(r,n))||y0(r=n.valueOf)&&!b0(o=I0(r,n))||e!=="string"&&y0(r=n.toString)&&!b0(o=I0(r,n)))return o;throw new mQ("Can't convert object to primitive value")},O_={exports:{}},U2=Fn,IQ=Object.defineProperty,YI=function(n,e){try{IQ(U2,n,{value:e,configurable:!0,writable:!0})}catch{U2[n]=e}return e},yQ=Fn,bQ=YI,Q2="__core-js_shared__",R2=O_.exports=yQ[Q2]||bQ(Q2,{});(R2.versions||(R2.versions=[])).push({version:"3.36.0",mode:"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"});jI=O_.exports,G2=jI,qI=function(n,e){return G2[n]||(G2[n]=e||{})},vQ=JA,wQ=Object,Df=function(n){return wQ(vQ(n))},BQ=Ln,_Q=Df,xQ=BQ({}.hasOwnProperty),aA=Object.hasOwn||function(n,e){return xQ(_Q(n),e)},SQ=Ln,FQ=0,kQ=Math.random(),LQ=SQ(1 .toString),z_=function(n){return"Symbol("+(n===void 0?"":n)+")_"+LQ(++FQ+kQ,36)},EQ=Fn,TQ=qI,Z2=aA,UQ=z_,QQ=V_,RQ=D_,sh=EQ.Symbol,v0=TQ("wks"),GQ=RQ?sh.for||sh:sh&&sh.withoutSetter||UQ,ds=function(n){return Z2(v0,n)||(v0[n]=QQ&&Z2(sh,n)?sh[n]:GQ("Symbol."+n)),v0[n]},ZQ=ks,P2=XA,H2=K_,PQ=fh,HQ=CQ,MQ=ds,NQ=TypeError,VQ=MQ("toPrimitive"),DQ=function(n,e){if(!P2(n)||H2(n))return n;var r=PQ(n,VQ),o;if(r){if(e===void 0&&(e="default"),o=ZQ(r,n,e),!P2(o)||H2(o))return o;throw new NQ("Can't convert object to primitive value")}return e===void 0&&(e="number"),HQ(n,e)},KQ=DQ,OQ=K_,W_=function(n){var e=KQ(n,"string");return OQ(e)?e:e+""},zQ=Fn,M2=XA,cI=zQ.document,WQ=M2(cI)&&M2(cI.createElement),Kf=function(n){return WQ?cI.createElement(n):{}},JQ=oA,XQ=kn,YQ=Kf,J_=!JQ&&!XQ(function(){return Object.defineProperty(YQ("div"),"a",{get:function(){return 7}}).a!==7}),jQ=oA,qQ=ks,$Q=Q_,tR=JI,eR=Og,iR=W_,rR=aA,nR=J_,N2=Object.getOwnPropertyDescriptor;Kg.f=jQ?N2:function(n,e){if(n=eR(n),e=iR(e),nR)try{return N2(n,e)}catch{}if(rR(n,e))return tR(!qQ($Q.f,n,e),n[e])};Ul={},sR=oA,oR=kn,X_=sR&&oR(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),aR=XA,AR=String,lR=TypeError,js=function(n){if(aR(n))return n;throw new lR(AR(n)+" is not an object")},cR=oA,uR=J_,hR=X_,xp=js,V2=W_,gR=TypeError,w0=Object.defineProperty,dR=Object.getOwnPropertyDescriptor,B0="enumerable",_0="configurable",x0="writable";Ul.f=cR?hR?function(n,e,r){if(xp(n),e=V2(e),xp(r),typeof n=="function"&&e==="prototype"&&"value"in r&&x0 in r&&!r[x0]){var o=dR(n,e);o&&o[x0]&&(n[e]=r.value,r={configurable:_0 in r?r[_0]:o[_0],enumerable:B0 in r?r[B0]:o[B0],writable:!1})}return w0(n,e,r)}:w0:function(n,e,r){if(xp(n),e=V2(e),xp(r),uR)try{return w0(n,e,r)}catch{}if("get"in r||"set"in r)throw new gR("Accessors not supported");return"value"in r&&(n[e]=r.value),n};pR=oA,fR=Ul,mR=JI,zg=pR?function(n,e,r){return fR.f(n,e,mR(1,r))}:function(n,e,r){return n[e]=r,n},Y_={exports:{}},uI=oA,CR=aA,j_=Function.prototype,IR=uI&&Object.getOwnPropertyDescriptor,$I=CR(j_,"name"),yR=$I&&function(){}.name==="something",bR=$I&&(!uI||uI&&IR(j_,"name").configurable),Of={EXISTS:$I,PROPER:yR,CONFIGURABLE:bR},vR=Ln,wR=En,hI=jI,BR=vR(Function.toString);wR(hI.inspectSource)||(hI.inspectSource=function(n){return BR(n)});ty=hI.inspectSource,_R=Fn,xR=En,D2=_R.WeakMap,SR=xR(D2)&&/native code/.test(String(D2)),FR=qI,kR=z_,K2=FR("keys"),ey=function(n){return K2[n]||(K2[n]=kR(n))},iy={},LR=SR,q_=Fn,ER=XA,TR=zg,S0=aA,F0=jI,UR=ey,QR=iy,O2="Object already initialized",gI=q_.TypeError,RR=q_.WeakMap,GR=function(n){return Yp(n)?Ug(n):Xp(n,{})},ZR=function(n){return function(e){var r;if(!ER(e)||(r=Ug(e)).type!==n)throw new gI("Incompatible receiver, "+n+" required");return r}};LR||F0.state?(tA=F0.state||(F0.state=new RR),tA.get=tA.get,tA.has=tA.has,tA.set=tA.set,Xp=function(n,e){if(tA.has(n))throw new gI(O2);return e.facade=n,tA.set(n,e),e},Ug=function(n){return tA.get(n)||{}},Yp=function(n){return tA.has(n)}):(qc=UR("state"),QR[qc]=!0,Xp=function(n,e){if(S0(n,qc))throw new gI(O2);return e.facade=n,TR(n,qc,e),e},Ug=function(n){return S0(n,qc)?n[qc]:{}},Yp=function(n){return S0(n,qc)});zf={set:Xp,get:Ug,has:Yp,enforce:GR,getterFor:ZR},ry=Ln,PR=kn,HR=En,Sp=aA,dI=oA,MR=Of.CONFIGURABLE,NR=ty,$_=zf,VR=$_.enforce,DR=$_.get,z2=String,Vp=Object.defineProperty,KR=ry("".slice),OR=ry("".replace),zR=ry([].join),WR=dI&&!PR(function(){return Vp(function(){},"length",{value:8}).length!==8}),JR=String(String).split("String"),XR=Y_.exports=function(n,e,r){KR(z2(e),0,7)==="Symbol("&&(e="["+OR(z2(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!Sp(n,"name")||MR&&n.name!==e)&&(dI?Vp(n,"name",{value:e,configurable:!0}):n.name=e),WR&&r&&Sp(r,"arity")&&n.length!==r.arity&&Vp(n,"length",{value:r.arity});try{r&&Sp(r,"constructor")&&r.constructor?dI&&Vp(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var o=VR(n);return Sp(o,"source")||(o.source=zR(JR,typeof e=="string"?e:"")),n};Function.prototype.toString=XR(function(){return HR(this)&&DR(this).source||NR(this)},"toString");tx=Y_.exports,YR=En,jR=Ul,qR=tx,$R=YI,hu=function(n,e,r,o){o||(o={});var l=o.enumerable,s=o.name!==void 0?o.name:e;if(YR(r)&&qR(r,s,o),o.global)l?n[e]=r:$R(e,r);else{try{o.unsafe?n[e]&&(l=!0):delete n[e]}catch{}l?n[e]=r:jR.f(n,e,{value:r,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return n},ex={},tG=Math.ceil,eG=Math.floor,iG=Math.trunc||function(n){var e=+n;return(e>0?eG:tG)(e)},rG=iG,Wf=function(n){var e=+n;return e!==e||e===0?0:rG(e)},nG=Wf,sG=Math.max,oG=Math.min,aG=function(n,e){var r=nG(n);return r<0?sG(r+e,0):oG(r,e)},AG=Wf,lG=Math.min,mh=function(n){var e=AG(n);return e>0?lG(e,9007199254740991):0},cG=mh,ny=function(n){return cG(n.length)},uG=Og,hG=aG,gG=ny,W2=function(n){return function(e,r,o){var l=uG(e),s=gG(l);if(s===0)return!n&&-1;var p=hG(o,s),m;if(n&&r!==r){for(;s>p;)if(m=l[p++],m!==m)return!0}else for(;s>p;p++)if((n||p in l)&&l[p]===r)return n||p||0;return!n&&-1}},ix={includes:W2(!0),indexOf:W2(!1)},dG=Ln,k0=aA,pG=Og,fG=ix.indexOf,mG=iy,J2=dG([].push),rx=function(n,e){var r=pG(n),o=0,l=[],s;for(s in r)!k0(mG,s)&&k0(r,s)&&J2(l,s);for(;e.length>o;)k0(r,s=e[o++])&&(~fG(l,s)||J2(l,s));return l},sy=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],CG=rx,IG=sy,yG=IG.concat("length","prototype");ex.f=Object.getOwnPropertyNames||function(n){return CG(n,yG)};nx={};nx.f=Object.getOwnPropertySymbols;bG=uu,vG=Ln,wG=ex,BG=nx,_G=js,xG=vG([].concat),SG=bG("Reflect","ownKeys")||function(n){var e=wG.f(_G(n)),r=BG.f;return r?xG(e,r(n)):e},X2=aA,FG=SG,kG=Kg,LG=Ul,EG=function(n,e,r){for(var o=FG(e),l=LG.f,s=kG.f,p=0;p<o.length;p++){var m=o[p];!X2(n,m)&&!(r&&X2(r,m))&&l(n,m,s(e,m))}},TG=kn,UG=En,QG=/#|\.prototype\./,Wg=function(n,e){var r=GG[RG(n)];return r===PG?!0:r===ZG?!1:UG(e)?TG(e):!!e},RG=Wg.normalize=function(n){return String(n).replace(QG,".").toLowerCase()},GG=Wg.data={},ZG=Wg.NATIVE="N",PG=Wg.POLYFILL="P",sx=Wg,Fp=Fn,HG=Kg.f,MG=zg,NG=hu,VG=YI,DG=EG,KG=sx,Io=function(n,e){var r=n.target,o=n.global,l=n.stat,s,p,m,I,w,_;if(o?p=Fp:l?p=Fp[r]||VG(r,{}):p=Fp[r]&&Fp[r].prototype,p)for(m in e){if(w=e[m],n.dontCallGetSet?(_=HG(p,m),I=_&&_.value):I=p[m],s=KG(o?m:r+(l?".":"#")+m,n.forced),!s&&I!==void 0){if(typeof w==typeof I)continue;DG(w,I)}(n.sham||I&&I.sham)&&MG(w,"sham",!0),NG(p,m,w,n)}},OG=Fn,zG=lu,Jg=zG(OG.process)==="process",WG=Ln,JG=Tl,XG=function(n,e,r){try{return WG(JG(Object.getOwnPropertyDescriptor(n,e)[r]))}catch{}},YG=XA,jG=function(n){return YG(n)||n===null},qG=jG,$G=String,tZ=TypeError,eZ=function(n){if(qG(n))return n;throw new tZ("Can't set "+$G(n)+" as a prototype")},iZ=XG,rZ=js,nZ=eZ,ox=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},r;try{r=iZ(Object.prototype,"__proto__","set"),r(e,[]),n=e instanceof Array}catch{}return function(o,l){return rZ(o),nZ(l),n?r(o,l):o.__proto__=l,o}}():void 0),sZ=Ul.f,oZ=aA,aZ=ds,Y2=aZ("toStringTag"),Jf=function(n,e,r){n&&!r&&(n=n.prototype),n&&!oZ(n,Y2)&&sZ(n,Y2,{configurable:!0,value:e})},j2=tx,AZ=Ul,lZ=function(n,e,r){return r.get&&j2(r.get,e,{getter:!0}),r.set&&j2(r.set,e,{setter:!0}),AZ.f(n,e,r)},cZ=uu,uZ=lZ,hZ=ds,gZ=oA,q2=hZ("species"),dZ=function(n){var e=cZ(n);gZ&&e&&!e[q2]&&uZ(e,q2,{configurable:!0,get:function(){return this}})},pZ=Mf,fZ=TypeError,mZ=function(n,e){if(pZ(e,n))return n;throw new fZ("Incorrect invocation")},CZ=ds,IZ=CZ("toStringTag"),ax={};ax[IZ]="z";yZ=String(ax)==="[object z]",bZ=yZ,vZ=En,Dp=lu,wZ=ds,BZ=wZ("toStringTag"),_Z=Object,xZ=Dp(function(){return arguments}())==="Arguments",SZ=function(n,e){try{return n[e]}catch{}},oy=bZ?Dp:function(n){var e,r,o;return n===void 0?"Undefined":n===null?"Null":typeof(r=SZ(e=_Z(n),BZ))=="string"?r:xZ?Dp(e):(o=Dp(e))==="Object"&&vZ(e.callee)?"Arguments":o},FZ=Ln,kZ=kn,Ax=En,LZ=oy,EZ=uu,TZ=ty,lx=function(){},cx=EZ("Reflect","construct"),ay=/^\s*(?:class|function)\b/,UZ=FZ(ay.exec),QZ=!ay.test(lx),Bg=function(n){if(!Ax(n))return!1;try{return cx(lx,[],n),!0}catch{return!1}},ux=function(n){if(!Ax(n))return!1;switch(LZ(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return QZ||!!UZ(ay,TZ(n))}catch{return!0}};ux.sham=!0;RZ=!cx||kZ(function(){var n;return Bg(Bg.call)||!Bg(Object)||!Bg(function(){n=!0})||n})?ux:Bg,GZ=RZ,ZZ=Vf,PZ=TypeError,HZ=function(n){if(GZ(n))return n;throw new PZ(ZZ(n)+" is not a constructor")},$2=js,MZ=HZ,NZ=cu,VZ=ds,DZ=VZ("species"),hx=function(n,e){var r=$2(n).constructor,o;return r===void 0||NZ(o=$2(r)[DZ])?e:MZ(o)},KZ=Hf,gx=Function.prototype,tB=gx.apply,eB=gx.call,dx=typeof Reflect=="object"&&Reflect.apply||(KZ?eB.bind(tB):function(){return eB.apply(tB,arguments)}),OZ=lu,zZ=Ln,Xf=function(n){if(OZ(n)==="Function")return zZ(n)},iB=Xf,WZ=Tl,JZ=Hf,XZ=iB(iB.bind),Ay=function(n,e){return WZ(n),e===void 0?n:JZ?XZ(n,e):function(){return n.apply(e,arguments)}},YZ=uu,px=YZ("document","documentElement"),jZ=Ln,qZ=jZ([].slice),$Z=TypeError,tP=function(n,e){if(n<e)throw new $Z("Not enough arguments");return n},eP=Nf,fx=/(?:ipad|iphone|ipod).*applewebkit/i.test(eP),da=Fn,iP=dx,rP=Ay,rB=En,nP=aA,mx=kn,nB=px,sP=qZ,sB=Kf,oP=tP,aP=fx,AP=Jg,pI=da.setImmediate,fI=da.clearImmediate,lP=da.process,L0=da.Dispatch,cP=da.Function,oB=da.MessageChannel,uP=da.String,E0=0,Eg={},aB="onreadystatechange";mx(function(){Qg=da.location});ly=function(n){if(nP(Eg,n)){var e=Eg[n];delete Eg[n],e()}},Q0=function(n){return function(){ly(n)}},AB=function(n){ly(n.data)},lB=function(n){da.postMessage(uP(n),Qg.protocol+"//"+Qg.host)};(!pI||!fI)&&(pI=function(n){oP(arguments.length,1);var e=rB(n)?n:cP(n),r=sP(arguments,1);return Eg[++E0]=function(){iP(e,void 0,r)},$c(E0),E0},fI=function(n){delete Eg[n]},AP?$c=function(n){lP.nextTick(Q0(n))}:L0&&L0.now?$c=function(n){L0.now(Q0(n))}:oB&&!aP?(T0=new oB,U0=T0.port2,T0.port1.onmessage=AB,$c=rP(U0.postMessage,U0)):da.addEventListener&&rB(da.postMessage)&&!da.importScripts&&Qg&&Qg.protocol!=="file:"&&!mx(lB)?($c=lB,da.addEventListener("message",AB,!1)):aB in sB("script")?$c=function(n){nB.appendChild(sB("script"))[aB]=function(){nB.removeChild(this),ly(n)}}:$c=function(n){setTimeout(Q0(n),0)});Cx={set:pI,clear:fI},cB=Fn,hP=oA,gP=Object.getOwnPropertyDescriptor,dP=function(n){if(!hP)return cB[n];var e=gP(cB,n);return e&&e.value},Ix=function(){this.head=null,this.tail=null};Ix.prototype={add:function(n){var e={item:n,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n){var e=this.head=n.next;return e===null&&(this.tail=null),n.item}}};yx=Ix,pP=Nf,fP=/ipad|iphone|ipod/i.test(pP)&&typeof Pebble<"u",mP=Nf,CP=/web0s(?!.*chrome)/i.test(mP),uh=Fn,IP=dP,uB=Ay,R0=Cx.set,yP=yx,bP=fx,vP=fP,wP=CP,G0=Jg,hB=uh.MutationObserver||uh.WebKitMutationObserver,gB=uh.document,dB=uh.process,kp=uh.Promise,mI=IP("queueMicrotask");mI||(_g=new yP,xg=function(){var n,e;for(G0&&(n=dB.domain)&&n.exit();e=_g.get();)try{e()}catch(r){throw _g.head&&$u(),r}n&&n.enter()},!bP&&!G0&&!wP&&hB&&gB?(Z0=!0,P0=gB.createTextNode(""),new hB(xg).observe(P0,{characterData:!0}),$u=function(){P0.data=Z0=!Z0}):!vP&&kp&&kp.resolve?(Lp=kp.resolve(void 0),Lp.constructor=kp,pB=uB(Lp.then,Lp),$u=function(){pB(xg)}):G0?$u=function(){dB.nextTick(xg)}:(R0=uB(R0,uh),$u=function(){R0(xg)}),mI=function(n){_g.head||$u(),_g.add(n)});BP=mI,_P=function(n,e){try{arguments.length===1?console.error(n):console.error(n,e)}catch{}},cy=function(n){try{return{error:!1,value:n()}}catch(e){return{error:!0,value:e}}},xP=Fn,Yf=xP.Promise,bx=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",SP=bx,FP=Jg,kP=!SP&&!FP&&typeof window=="object"&&typeof document=="object",LP=Fn,Tg=Yf,EP=En,TP=sx,UP=ty,QP=ds,RP=kP,GP=bx,H0=XI;Tg&&Tg.prototype;ZP=QP("species"),CI=!1,vx=EP(LP.PromiseRejectionEvent),PP=TP("Promise",function(){var n=UP(Tg),e=n!==String(Tg);if(!e&&H0===66)return!0;if(!H0||H0<51||!/native code/.test(n)){var r=new Tg(function(s){s(1)}),o=function(s){s(function(){},function(){})},l=r.constructor={};if(l[ZP]=o,CI=r.then(function(){})instanceof o,!CI)return!0}return!e&&(RP||GP)&&!vx}),Xg={CONSTRUCTOR:PP,REJECTION_EVENT:vx,SUBCLASSING:CI},Ch={},fB=Tl,HP=TypeError,MP=function(n){var e,r;this.promise=new n(function(o,l){if(e!==void 0||r!==void 0)throw new HP("Bad Promise constructor");e=o,r=l}),this.resolve=fB(e),this.reject=fB(r)};Ch.f=function(n){return new MP(n)};NP=Io,jp=Jg,bc=Fn,hh=ks,mB=hu,CB=ox,VP=Jf,DP=dZ,KP=Tl,Kp=En,OP=XA,zP=mZ,WP=hx,wx=Cx.set,uy=BP,JP=_P,XP=cy,YP=yx,Bx=zf,qp=Yf,hy=Xg,_x=Ch,jf="Promise",xx=hy.CONSTRUCTOR,jP=hy.REJECTION_EVENT,qP=hy.SUBCLASSING,M0=Bx.getterFor(jf),$P=Bx.set,rh=qp&&qp.prototype,iu=qp,Ep=rh,Sx=bc.TypeError,II=bc.document,gy=bc.process,yI=_x.f,tH=yI,eH=!!(II&&II.createEvent&&bc.dispatchEvent),Fx="unhandledrejection",iH="rejectionhandled",IB=0,kx=1,rH=2,dy=1,Lx=2,Ex=function(n){var e;return OP(n)&&Kp(e=n.then)?e:!1},Tx=function(n,e){var r=e.value,o=e.state===kx,l=o?n.ok:n.fail,s=n.resolve,p=n.reject,m=n.domain,I,w,_;try{l?(o||(e.rejection===Lx&&oH(e),e.rejection=dy),l===!0?I=r:(m&&m.enter(),I=l(r),m&&(m.exit(),_=!0)),I===n.promise?p(new Sx("Promise-chain cycle")):(w=Ex(I))?hh(w,I,s,p):s(I)):p(r)}catch(E){m&&!_&&m.exit(),p(E)}},Ux=function(n,e){n.notified||(n.notified=!0,uy(function(){for(var r=n.reactions,o;o=r.get();)Tx(o,n);n.notified=!1,e&&!n.rejection&&sH(n)}))},Qx=function(n,e,r){var o,l;eH?(o=II.createEvent("Event"),o.promise=e,o.reason=r,o.initEvent(n,!1,!0),bc.dispatchEvent(o)):o={promise:e,reason:r},!jP&&(l=bc["on"+n])?l(o):n===Fx&&JP("Unhandled promise rejection",r)},sH=function(n){hh(wx,bc,function(){var e=n.facade,r=n.value,o=vB(n),l;if(o&&(l=XP(function(){jp?gy.emit("unhandledRejection",r,e):Qx(Fx,e,r)}),n.rejection=jp||vB(n)?Lx:dy,l.error))throw l.value})},vB=function(n){return n.rejection!==dy&&!n.parent},oH=function(n){hh(wx,bc,function(){var e=n.facade;jp?gy.emit("rejectionHandled",e):Qx(iH,e,n.value)})},oh=function(n,e,r){return function(o){n(e,o,r)}},Ah=function(n,e,r){n.done||(n.done=!0,r&&(n=r),n.value=e,n.state=rH,Ux(n,!0))},bI=function(n,e,r){if(!n.done){n.done=!0,r&&(n=r);try{if(n.facade===e)throw new Sx("Promise can't be resolved itself");var o=Ex(e);o?uy(function(){var l={done:!1};try{hh(o,e,oh(bI,l,n),oh(Ah,l,n))}catch(s){Ah(l,s,n)}}):(n.value=e,n.state=kx,Ux(n,!1))}catch(l){Ah({done:!1},l,n)}}};if(xx&&(iu=function(n){zP(this,Ep),KP(n),hh(Tp,this);var e=M0(this);try{n(oh(bI,e),oh(Ah,e))}catch(r){Ah(e,r)}},Ep=iu.prototype,Tp=function(n){$P(this,{type:jf,done:!1,notified:!1,parent:!1,reactions:new YP,rejection:!1,state:IB,value:void 0})},Tp.prototype=mB(Ep,"then",function(n,e){var r=M0(this),o=yI(WP(this,iu));return r.parent=!0,o.ok=Kp(n)?n:!0,o.fail=Kp(e)&&e,o.domain=jp?gy.domain:void 0,r.state===IB?r.reactions.add(o):uy(function(){Tx(o,r)}),o.promise}),yB=function(){var n=new Tp,e=M0(n);this.promise=n,this.resolve=oh(bI,e),this.reject=oh(Ah,e)},_x.f=yI=function(n){return n===iu||n===nH?new yB(n):tH(n)},Kp(qp)&&rh!==Object.prototype)){bB=rh.then,qP||mB(rh,"then",function(n,e){var r=this;return new iu(function(o,l){hh(bB,r,o,l)}).then(n,e)},{unsafe:!0});try{delete rh.constructor}catch{}CB&&CB(rh,Ep)}NP({global:!0,constructor:!0,wrap:!0,forced:xx},{Promise:iu});VP(iu,jf,!1);DP(jf);Yg={},aH=ds,AH=Yg,lH=aH("iterator"),cH=Array.prototype,uH=function(n){return n!==void 0&&(AH.Array===n||cH[lH]===n)},hH=oy,wB=fh,gH=cu,dH=Yg,pH=ds,fH=pH("iterator"),Rx=function(n){if(!gH(n))return wB(n,fH)||wB(n,"@@iterator")||dH[hH(n)]},mH=ks,CH=Tl,IH=js,yH=Vf,bH=Rx,vH=TypeError,wH=function(n,e){var r=arguments.length<2?bH(n):e;if(CH(r))return IH(mH(r,n));throw new vH(yH(n)+" is not iterable")},BH=ks,BB=js,_H=fh,xH=function(n,e,r){var o,l;BB(n);try{if(o=_H(n,"return"),!o){if(e==="throw")throw r;return r}o=BH(o,n)}catch(s){l=!0,o=s}if(e==="throw")throw r;if(l)throw o;return BB(o),r},SH=Ay,FH=ks,kH=js,LH=Vf,EH=uH,TH=ny,_B=Mf,UH=wH,QH=Rx,xB=xH,RH=TypeError,Op=function(n,e){this.stopped=n,this.result=e},SB=Op.prototype,Gx=function(n,e,r){var o=r&&r.that,l=!!(r&&r.AS_ENTRIES),s=!!(r&&r.IS_RECORD),p=!!(r&&r.IS_ITERATOR),m=!!(r&&r.INTERRUPTED),I=SH(e,o),w,_,E,U,F,V,H,Y=function(tt){return w&&xB(w,"normal",tt),new Op(!0,tt)},D=function(tt){return l?(kH(tt),m?I(tt[0],tt[1],Y):I(tt[0],tt[1])):m?I(tt,Y):I(tt)};if(s)w=n.iterator;else if(p)w=n;else{if(_=QH(n),!_)throw new RH(LH(n)+" is not iterable");if(EH(_)){for(E=0,U=TH(n);U>E;E++)if(F=D(n[E]),F&&_B(SB,F))return F;return new Op(!1)}w=UH(n,_)}for(V=s?n.next:w.next;!(H=FH(V,w)).done;){try{F=D(H.value)}catch(tt){xB(w,"throw",tt)}if(typeof F=="object"&&F&&_B(SB,F))return F}return new Op(!1)},GH=ds,Zx=GH("iterator"),Px=!1;try{FB=0,N0={next:function(){return{done:!!FB++}},return:function(){Px=!0}},N0[Zx]=function(){return this},Array.from(N0,function(){throw 2})}catch{}ZH=function(n,e){try{if(!e&&!Px)return!1}catch{return!1}var r=!1;try{var o={};o[Zx]=function(){return{next:function(){return{done:r=!0}}}},n(o)}catch{}return r},PH=Yf,HH=ZH,MH=Xg.CONSTRUCTOR,Hx=MH||!HH(function(n){PH.all(n).then(void 0,function(){})}),NH=Io,VH=ks,DH=Tl,KH=Ch,OH=cy,zH=Gx,WH=Hx;NH({target:"Promise",stat:!0,forced:WH},{all:function(n){var e=this,r=KH.f(e),o=r.resolve,l=r.reject,s=OH(function(){var p=DH(e.resolve),m=[],I=0,w=1;zH(n,function(_){var E=I++,U=!1;w++,VH(p,e,_).then(function(F){U||(U=!0,m[E]=F,--w||o(m))},l)}),--w||o(m)});return s.error&&l(s.value),r.promise}});JH=Io,XH=Xg.CONSTRUCTOR,vI=Yf,YH=uu,jH=En,qH=hu,kB=vI&&vI.prototype;JH({target:"Promise",proto:!0,forced:XH,real:!0},{catch:function(n){return this.then(void 0,n)}});jH(vI)&&(V0=YH("Promise").prototype.catch,kB.catch!==V0&&qH(kB,"catch",V0,{unsafe:!0}));$H=Io,tM=ks,eM=Tl,iM=Ch,rM=cy,nM=Gx,sM=Hx;$H({target:"Promise",stat:!0,forced:sM},{race:function(n){var e=this,r=iM.f(e),o=r.reject,l=rM(function(){var s=eM(e.resolve);nM(n,function(p){tM(s,e,p).then(r.resolve,o)})});return l.error&&o(l.value),r.promise}});oM=Io,aM=Ch,AM=Xg.CONSTRUCTOR;oM({target:"Promise",stat:!0,forced:AM},{reject:function(n){var e=aM.f(this),r=e.reject;return r(n),e.promise}});lM=js,cM=XA,uM=Ch,hM=function(n,e){if(lM(n),cM(e)&&e.constructor===n)return e;var r=uM.f(n),o=r.resolve;return o(e),r.promise},gM=Io,dM=uu,pM=Xg.CONSTRUCTOR,fM=hM;dM("Promise");gM({target:"Promise",stat:!0,forced:pM},{resolve:function(n){return fM(this,n)}});mM=oy,CM=String,YA=function(n){if(mM(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return CM(n)},IM=js,Mx=function(){var n=IM(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},py=kn,yM=Fn,fy=yM.RegExp,my=py(function(){var n=fy("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),bM=my||py(function(){return!fy("a","y").sticky}),vM=my||py(function(){var n=fy("^r","gy");return n.lastIndex=2,n.exec("str")!==null}),Nx={BROKEN_CARET:vM,MISSED_STICKY:bM,UNSUPPORTED_Y:my},Vx={},wM=rx,BM=sy,_M=Object.keys||function(n){return wM(n,BM)},xM=oA,SM=X_,FM=Ul,kM=js,LM=Og,EM=_M;Vx.f=xM&&!SM?Object.defineProperties:function(n,e){kM(n);for(var r=LM(e),o=EM(e),l=o.length,s=0,p;l>s;)FM.f(n,p=o[s++],r[p]);return n};TM=js,UM=Vx,EB=sy,QM=iy,RM=px,GM=Kf,ZM=ey,TB=">",UB="<",wI="prototype",BI="script",Dx=ZM("IE_PROTO"),D0=function(){},Kx=function(n){return UB+BI+TB+n+UB+"/"+BI+TB},QB=function(n){n.write(Kx("")),n.close();var e=n.parentWindow.Object;return n=null,e},PM=function(){var n=GM("iframe"),e="java"+BI+":",r;return n.style.display="none",RM.appendChild(n),n.src=String(e),r=n.contentWindow.document,r.open(),r.write(Kx("document.F=Object")),r.close(),r.F},zp=function(){try{Up=new ActiveXObject("htmlfile")}catch{}zp=typeof document<"u"?document.domain&&Up?QB(Up):PM():QB(Up);for(var n=EB.length;n--;)delete zp[wI][EB[n]];return zp()};QM[Dx]=!0;Cy=Object.create||function(n,e){var r;return n!==null?(D0[wI]=TM(n),r=new D0,D0[wI]=null,r[Dx]=n):r=zp(),e===void 0?r:UM.f(r,e)},HM=kn,MM=Fn,NM=MM.RegExp,VM=HM(function(){var n=NM(".","s");return!(n.dotAll&&n.test(`
`)&&n.flags==="s")}),DM=kn,KM=Fn,OM=KM.RegExp,zM=DM(function(){var n=OM("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),ah=ks,qf=Ln,WM=YA,JM=Mx,XM=Nx,YM=qI,jM=Cy,qM=zf.get,$M=VM,tN=zM,eN=YM("native-string-replace",String.prototype.replace),$p=RegExp.prototype.exec,_I=$p,iN=qf("".charAt),rN=qf("".indexOf),nN=qf("".replace),K0=qf("".slice),xI=function(){var n=/a/,e=/b*/g;return ah($p,n,"a"),ah($p,e,"a"),n.lastIndex!==0||e.lastIndex!==0}(),Ox=XM.BROKEN_CARET,SI=/()??/.exec("")[1]!==void 0,sN=xI||SI||Ox||$M||tN;sN&&(_I=function(n){var e=this,r=qM(e),o=WM(n),l=r.raw,s,p,m,I,w,_,E;if(l)return l.lastIndex=e.lastIndex,s=ah(_I,l,o),e.lastIndex=l.lastIndex,s;var U=r.groups,F=Ox&&e.sticky,V=ah(JM,e),H=e.source,Y=0,D=o;if(F&&(V=nN(V,"y",""),rN(V,"g")===-1&&(V+="g"),D=K0(o,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&iN(o,e.lastIndex-1)!==`
`)&&(H="(?: "+H+")",D=" "+D,Y++),p=new RegExp("^(?:"+H+")",V)),SI&&(p=new RegExp("^"+H+"$(?!\\s)",V)),xI&&(m=e.lastIndex),I=ah($p,F?p:e,D),F?I?(I.input=K0(I.input,Y),I[0]=K0(I[0],Y),I.index=e.lastIndex,e.lastIndex+=I[0].length):e.lastIndex=0:xI&&I&&(e.lastIndex=e.global?I.index+I[0].length:m),SI&&I&&I.length>1&&ah(eN,I[0],p,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(I[w]=void 0)}),I&&U)for(I.groups=_=jM(null),w=0;w<U.length;w++)E=U[w],_[E[0]]=I[E[1]];return I});Iy=_I,oN=Io,RB=Iy;oN({target:"RegExp",proto:!0,forced:/./.exec!==RB},{exec:RB});GB=ks,ZB=hu,aN=Iy,PB=kn,zx=ds,AN=zg,lN=zx("species"),O0=RegExp.prototype,yy=function(n,e,r,o){var l=zx(n),s=!PB(function(){var w={};return w[l]=function(){return 7},""[n](w)!==7}),p=s&&!PB(function(){var w=!1,_=/a/;return n==="split"&&(_={},_.constructor={},_.constructor[lN]=function(){return _},_.flags="",_[l]=/./[l]),_.exec=function(){return w=!0,null},_[l](""),!w});if(!s||!p||r){var m=/./[l],I=e(l,""[n],function(w,_,E,U,F){var V=_.exec;return V===aN||V===O0.exec?s&&!F?{done:!0,value:GB(m,_,E,U)}:{done:!0,value:GB(w,E,_,U)}:{done:!1}});ZB(String.prototype,n,I[0]),ZB(O0,l,I[1])}o&&AN(O0[l],"sham",!0)},by=Ln,cN=Wf,uN=YA,hN=JA,gN=by("".charAt),HB=by("".charCodeAt),dN=by("".slice),MB=function(n){return function(e,r){var o=uN(hN(e)),l=cN(r),s=o.length,p,m;return l<0||l>=s?n?"":void 0:(p=HB(o,l),p<55296||p>56319||l+1===s||(m=HB(o,l+1))<56320||m>57343?n?gN(o,l):p:n?dN(o,l,l+2):(p-55296<<10)+(m-56320)+65536)}},pN={codeAt:MB(!1),charAt:MB(!0)},fN=pN.charAt,vy=function(n,e,r){return e+(r?fN(n,e).length:1)},NB=ks,mN=js,CN=En,IN=lu,yN=Iy,bN=TypeError,wy=function(n,e){var r=n.exec;if(CN(r)){var o=NB(r,n,e);return o!==null&&mN(o),o}if(IN(n)==="RegExp")return NB(yN,n,e);throw new bN("RegExp#exec called on incompatible receiver")},vN=ks,wN=yy,BN=js,_N=cu,xN=mh,z0=YA,SN=JA,FN=fh,kN=vy,VB=wy;wN("match",function(n,e,r){return[function(o){var l=SN(this),s=_N(o)?void 0:FN(o,n);return s?vN(s,o,l):new RegExp(o)[n](z0(l))},function(o){var l=BN(this),s=z0(o),p=r(e,l,s);if(p.done)return p.value;if(!l.global)return VB(l,s);var m=l.unicode;l.lastIndex=0;for(var I=[],w=0,_;(_=VB(l,s))!==null;){var E=z0(_[0]);I[w]=E,E===""&&(l.lastIndex=kN(s,xN(l.lastIndex),m)),w++}return w===0?null:I}]});By=Ln,LN=Df,EN=Math.floor,W0=By("".charAt),TN=By("".replace),J0=By("".slice),UN=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,QN=/\$([$&'`]|\d{1,2})/g,RN=function(n,e,r,o,l,s){var p=r+n.length,m=o.length,I=QN;return l!==void 0&&(l=LN(l),I=UN),TN(s,I,function(w,_){var E;switch(W0(_,0)){case"$":return"$";case"&":return n;case"`":return J0(e,0,r);case"'":return J0(e,p);case"<":E=l[J0(_,1,-1)];break;default:var U=+_;if(U===0)return w;if(U>m){var F=EN(U/10);return F===0?w:F<=m?o[F-1]===void 0?W0(_,1):o[F-1]+W0(_,1):w}E=o[U-1]}return E===void 0?"":E})},GN=dx,DB=ks,$f=Ln,ZN=yy,PN=kn,HN=js,MN=En,NN=cu,VN=Wf,DN=mh,th=YA,KN=JA,ON=vy,zN=fh,WN=RN,JN=wy,XN=ds,FI=XN("replace"),YN=Math.max,jN=Math.min,qN=$f([].concat),X0=$f([].push),KB=$f("".indexOf),OB=$f("".slice),$N=function(n){return n===void 0?n:String(n)},tV=function(){return"a".replace(/./,"$0")==="$0"}(),zB=function(){return/./[FI]?/./[FI]("a","$0")==="":!1}(),eV=!PN(function(){var n=/./;return n.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(n,"$<a>")!=="7"});ZN("replace",function(n,e,r){var o=zB?"$":"$0";return[function(l,s){var p=KN(this),m=NN(l)?void 0:zN(l,FI);return m?DB(m,l,p,s):DB(e,th(p),l,s)},function(l,s){var p=HN(this),m=th(l);if(typeof s=="string"&&KB(s,o)===-1&&KB(s,"$<")===-1){var I=r(e,p,m,s);if(I.done)return I.value}var w=MN(s);w||(s=th(s));var _=p.global,E;_&&(E=p.unicode,p.lastIndex=0);for(var U=[],F;F=JN(p,m),!(F===null||(X0(U,F),!_));){var V=th(F[0]);V===""&&(p.lastIndex=ON(m,DN(p.lastIndex),E))}for(var H="",Y=0,D=0;D<U.length;D++){F=U[D];for(var tt=th(F[0]),ot=YN(jN(VN(F.index),m.length),0),bt=[],kt,Lt=1;Lt<F.length;Lt++)X0(bt,$N(F[Lt]));var vt=F.groups;if(w){var ft=qN([tt],bt,ot,m);vt!==void 0&&X0(ft,vt),kt=th(GN(s,void 0,ft))}else kt=WN(tt,m,ot,bt,vt,s);ot>=Y&&(H+=OB(m,Y,ot)+kt,Y=ot+tt.length)}return H+OB(m,Y)}]},!eV||!tV||zB);iV=XA,rV=lu,nV=ds,sV=nV("match"),oV=function(n){var e;return iV(n)&&((e=n[sV])!==void 0?!!e:rV(n)==="RegExp")},aV=oV,AV=TypeError,_y=function(n){if(aV(n))throw new AV("The method doesn't accept regular expressions");return n},lV=ds,cV=lV("match"),xy=function(n){var e=/./;try{"/./"[n](e)}catch{try{return e[cV]=!1,"/./"[n](e)}catch{}}return!1},uV=Io,hV=Xf,gV=Kg.f,dV=mh,WB=YA,pV=_y,fV=JA,mV=xy,CV=hV("".slice),IV=Math.min,Wx=mV("startsWith"),yV=!Wx&&!!function(){var n=gV(String.prototype,"startsWith");return n&&!n.writable}();uV({target:"String",proto:!0,forced:!yV&&!Wx},{startsWith:function(n){var e=WB(fV(this));pV(n);var r=dV(IV(arguments.length>1?arguments[1]:void 0,e.length)),o=WB(n);return CV(e,r,r+o.length)===o}});bV=ds,vV=Cy,wV=Ul.f,kI=bV("unscopables"),LI=Array.prototype;LI[kI]===void 0&&wV(LI,kI,{configurable:!0,value:vV(null)});BV=function(n){LI[kI][n]=!0},_V=kn,xV=!_V(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),SV=aA,FV=En,kV=Df,LV=ey,EV=xV,JB=LV("IE_PROTO"),EI=Object,TV=EI.prototype,Jx=EV?EI.getPrototypeOf:function(n){var e=kV(n);if(SV(e,JB))return e[JB];var r=e.constructor;return FV(r)&&e instanceof r?r.prototype:e instanceof EI?TV:null},UV=kn,QV=En,RV=XA,XB=Jx,GV=hu,ZV=ds,TI=ZV("iterator"),Xx=!1;[].keys&&(j0=[].keys(),"next"in j0?(Y0=XB(XB(j0)),Y0!==Object.prototype&&(nu=Y0)):Xx=!0);PV=!RV(nu)||UV(function(){var n={};return nu[TI].call(n)!==n});PV&&(nu={});QV(nu[TI])||GV(nu,TI,function(){return this});Yx={IteratorPrototype:nu,BUGGY_SAFARI_ITERATORS:Xx},HV=Yx.IteratorPrototype,MV=Cy,NV=JI,VV=Jf,DV=Yg,KV=function(){return this},OV=function(n,e,r,o){var l=e+" Iterator";return n.prototype=MV(HV,{next:NV(+!o,r)}),VV(n,l,!1),DV[l]=KV,n},zV=Io,WV=ks,jx=Of,JV=En,XV=OV,YB=Jx,jB=ox,YV=Jf,jV=zg,q0=hu,qV=ds,$V=Yg,qx=Yx,t9=jx.PROPER,e9=jx.CONFIGURABLE,qB=qx.IteratorPrototype,Qp=qx.BUGGY_SAFARI_ITERATORS,Sg=qV("iterator"),$B="keys",Fg="values",t_="entries",i9=function(){return this},r9=function(n,e,r,o,l,s,p){XV(r,e,o);var m=function(D){if(D===l&&U)return U;if(!Qp&&D&&D in _)return _[D];switch(D){case $B:return function(){return new r(this,D)};case Fg:return function(){return new r(this,D)};case t_:return function(){return new r(this,D)}}return function(){return new r(this)}},I=e+" Iterator",w=!1,_=n.prototype,E=_[Sg]||_["@@iterator"]||l&&_[l],U=!Qp&&E||m(l),F=e==="Array"&&_.entries||E,V,H,Y;if(F&&(V=YB(F.call(new n)),V!==Object.prototype&&V.next&&(YB(V)!==qB&&(jB?jB(V,qB):JV(V[Sg])||q0(V,Sg,i9)),YV(V,I,!0))),t9&&l===Fg&&E&&E.name!==Fg&&(e9?jV(_,"name",Fg):(w=!0,U=function(){return WV(E,this)})),l)if(H={values:m(Fg),keys:s?U:m($B),entries:m(t_)},p)for(Y in H)(Qp||w||!(Y in _))&&q0(_,Y,H[Y]);else zV({target:e,proto:!0,forced:Qp||w},H);return _[Sg]!==U&&q0(_,Sg,U,{name:l}),$V[e]=U,H},n9=function(n,e){return{value:n,done:e}},s9=Og,Sy=BV,e_=Yg,$x=zf,o9=Ul.f,a9=r9,Rp=n9,A9=oA,t5="Array Iterator",l9=$x.set,c9=$x.getterFor(t5),u9=a9(Array,"Array",function(n,e){l9(this,{type:t5,target:s9(n),index:0,kind:e})},function(){var n=c9(this),e=n.target,r=n.index++;if(!e||r>=e.length)return n.target=void 0,Rp(void 0,!0);switch(n.kind){case"keys":return Rp(r,!1);case"values":return Rp(e[r],!1)}return Rp([r,e[r]],!1)},"values"),i_=e_.Arguments=e_.Array;Sy("keys");Sy("values");Sy("entries");if(A9&&i_.name!=="values")try{o9(i_,"name",{value:"values"})}catch{}h9={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},g9=Kf,$0=g9("span").classList,r_=$0&&$0.constructor&&$0.constructor.prototype,d9=r_===Object.prototype?void 0:r_,n_=Fn,e5=h9,p9=d9,kg=u9,s_=zg,f9=Jf,m9=ds,tI=m9("iterator"),eI=kg.values,i5=function(n,e){if(n){if(n[tI]!==eI)try{s_(n,tI,eI)}catch{n[tI]=eI}if(f9(n,e,!0),e5[e]){for(var r in kg)if(n[r]!==kg[r])try{s_(n,r,kg[r])}catch{n[r]=kg[r]}}}};for(Gp in e5)i5(n_[Gp]&&n_[Gp].prototype,Gp);i5(p9,"DOMTokenList");y9=Tl,b9=Df,v9=M_,w9=ny,o_=TypeError,a_="Reduce of empty array with no initial value",A_=function(n){return function(e,r,o,l){var s=b9(e),p=v9(s),m=w9(s);if(y9(r),m===0&&o<2)throw new o_(a_);var I=n?m-1:0,w=n?-1:1;if(o<2)for(;;){if(I in p){l=p[I],I+=w;break}if(I+=w,n?I<0:m<=I)throw new o_(a_)}for(;n?I>=0:m>I;I+=w)I in p&&(l=r(l,p[I],I,s));return l}},B9={left:A_(!1),right:A_(!0)},_9=kn,r5=function(n,e){var r=[][n];return!!r&&_9(function(){r.call(null,e||function(){return 1},1)})},x9=Io,S9=B9.left,F9=r5,l_=XI,k9=Jg,L9=!k9&&l_>79&&l_<83,E9=L9||!F9("reduce");x9({target:"Array",proto:!0,forced:E9},{reduce:function(n){var e=arguments.length;return S9(this,n,e,e>1?arguments[1]:void 0)}});T9=Io,U9=Xf,Q9=Kg.f,R9=mh,c_=YA,G9=_y,Z9=JA,P9=xy,H9=U9("".slice),M9=Math.min,n5=P9("endsWith"),N9=!n5&&!!function(){var n=Q9(String.prototype,"endsWith");return n&&!n.writable}();T9({target:"String",proto:!0,forced:!N9&&!n5},{endsWith:function(n){var e=c_(Z9(this));G9(n);var r=arguments.length>1?arguments[1]:void 0,o=e.length,l=r===void 0?o:M9(R9(r),o),s=c_(n);return H9(e,l-s.length,l)===s}});iI=ks,s5=Ln,V9=yy,D9=js,K9=cu,O9=JA,z9=hx,W9=vy,J9=mh,u_=YA,X9=fh,h_=wy,Y9=Nx,j9=kn,eh=Y9.UNSUPPORTED_Y,q9=4294967295,$9=Math.min,rI=s5([].push),nI=s5("".slice),tD=!j9(function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var r="ab".split(n);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),g_="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;V9("split",function(n,e,r){var o="0".split(void 0,0).length?function(l,s){return l===void 0&&s===0?[]:iI(e,this,l,s)}:e;return[function(l,s){var p=O9(this),m=K9(l)?void 0:X9(l,n);return m?iI(m,l,p,s):iI(o,u_(p),l,s)},function(l,s){var p=D9(this),m=u_(l);if(!g_){var I=r(o,p,m,s,o!==e);if(I.done)return I.value}var w=z9(p,RegExp),_=p.unicode,E=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(eh?"g":"y"),U=new w(eh?"^(?:"+p.source+")":p,E),F=s===void 0?q9:s>>>0;if(F===0)return[];if(m.length===0)return h_(U,m)===null?[m]:[];for(var V=0,H=0,Y=[];H<m.length;){U.lastIndex=eh?0:H;var D=h_(U,eh?nI(m,H):m),tt;if(D===null||(tt=$9(J9(U.lastIndex+(eh?H:0)),m.length))===V)H=W9(m,H,_);else{if(rI(Y,nI(m,V,H)),Y.length===F)return Y;for(var ot=1;ot<=D.length-1;ot++)if(rI(Y,D[ot]),Y.length===F)return Y;H=V=tt}}return rI(Y,nI(m,V)),Y}]},g_||!tD,eh);tm={exports:{}},Lg={exports:{}};(function(){var n,e,r,o,l,s;typeof performance<"u"&&performance!==null&&performance.now?Lg.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Lg.exports=function(){return(n()-l)/1e6},e=process.hrtime,n=function(){var p;return p=e(),p[0]*1e9+p[1]},o=n(),s=process.uptime()*1e9,l=o-s):Date.now?(Lg.exports=function(){return Date.now()-r},r=Date.now()):(Lg.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(nh);eD=Lg.exports,iD=eD,Ll=typeof window>"u"?nh:window,Zp=["moz","webkit"],lh="AnimationFrame",gh=Ll["request"+lh],Rg=Ll["cancel"+lh]||Ll["cancelRequest"+lh];for(ih=0;!gh&&ih<Zp.length;ih++)gh=Ll[Zp[ih]+"Request"+lh],Rg=Ll[Zp[ih]+"Cancel"+lh]||Ll[Zp[ih]+"CancelRequest"+lh];(!gh||!Rg)&&(Pp=0,sI=0,Cc=[],d_=1e3/60,gh=function(n){if(Cc.length===0){var e=iD(),r=Math.max(0,d_-(e-Pp));Pp=r+e,setTimeout(function(){var o=Cc.slice(0);Cc.length=0;for(var l=0;l<o.length;l++)if(!o[l].cancelled)try{o[l].callback(Pp)}catch(s){setTimeout(function(){throw s},0)}},Math.round(r))}return Cc.push({handle:++sI,callback:n,cancelled:!1}),sI},Rg=function(n){for(var e=0;e<Cc.length;e++)Cc[e].handle===n&&(Cc[e].cancelled=!0)});tm.exports=function(n){return gh.call(Ll,n)};tm.exports.cancel=function(){Rg.apply(Ll,arguments)};tm.exports.polyfill=function(n){n||(n=Ll),n.requestAnimationFrame=gh,n.cancelAnimationFrame=Rg};rD=tm.exports,oI=U_(rD),o5=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,nD=Ln,sD=JA,oD=YA,UI=o5,p_=nD("".replace),aD=RegExp("^["+UI+"]+"),AD=RegExp("(^|[^"+UI+"])["+UI+"]+$"),aI=function(n){return function(e){var r=oD(sD(e));return n&1&&(r=p_(r,aD,"")),n&2&&(r=p_(r,AD,"$1")),r}},lD={start:aI(1),end:aI(2),trim:aI(3)},cD=Of.PROPER,uD=kn,f_=o5,m_="\u200B\x85\u180E",hD=function(n){return uD(function(){return!!f_[n]()||m_[n]()!==m_||cD&&f_[n].name!==n})},gD=Io,dD=lD.trim,pD=hD;gD({target:"String",proto:!0,forced:pD("trim")},{trim:function(){return dD(this)}});fD=function(n){this.ok=!1,this.alpha=1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n=n.replace(/ /g,""),n=n.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};n=e[n]||n;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(I){return[parseInt(I[1]),parseInt(I[2]),parseInt(I[3]),parseFloat(I[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(I){return[parseInt(I[1]),parseInt(I[2]),parseInt(I[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(I){return[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(I){return[parseInt(I[1]+I[1],16),parseInt(I[2]+I[2],16),parseInt(I[3]+I[3],16)]}}],o=0;o<r.length;o++){var l=r[o].re,s=r[o].process,p=l.exec(n);if(p){var m=s(p);this.r=m[0],this.g=m[1],this.b=m[2],m.length>3&&(this.alpha=m[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var I=this.r.toString(16),w=this.g.toString(16),_=this.b.toString(16);return I.length==1&&(I="0"+I),w.length==1&&(w="0"+w),_.length==1&&(_="0"+_),"#"+I+w+_},this.getHelpXML=function(){for(var I=new Array,w=0;w<r.length;w++)for(var _=r[w].example,E=0;E<_.length;E++)I[I.length]=_[E];for(var U in e)I[I.length]=U;var F=document.createElement("ul");F.setAttribute("id","rgbcolor-examples");for(var w=0;w<I.length;w++)try{var V=document.createElement("li"),H=new RGBColor(I[w]),Y=document.createElement("div");Y.style.cssText="margin: 3px; border: 1px solid black; background:"+H.toHex()+"; color:"+H.toHex(),Y.appendChild(document.createTextNode("test"));var D=document.createTextNode(" "+I[w]+" -> "+H.toRGB()+" -> "+H.toHex());V.appendChild(Y),V.appendChild(D),F.appendChild(V)}catch{}return F}},QI=U_(fD),mD=Io,CD=Xf,ID=ix.indexOf,yD=r5,RI=CD([].indexOf),a5=!!RI&&1/RI([1],1,-0)<0,bD=a5||!yD("indexOf");mD({target:"Array",proto:!0,forced:bD},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return a5?RI(this,n,e)||0:ID(this,n,e)}});vD=Io,wD=Ln,BD=_y,_D=JA,C_=YA,xD=xy,SD=wD("".indexOf);vD({target:"String",proto:!0,forced:!xD("includes")},{includes:function(n){return!!~SD(C_(_D(this)),C_(BD(n)),arguments.length>1?arguments[1]:void 0)}});FD=lu,kD=Array.isArray||function(n){return FD(n)==="Array"},LD=Io,ED=Ln,TD=kD,UD=ED([].reverse),I_=[1,2];LD({target:"Array",proto:!0,forced:String(I_)===String(I_.reverse())},{reverse:function(){return TD(this)&&(this.length=this.length),UD(this)}});A5=function(n,e){return(A5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])})(n,e)};Ic=Math.PI;Fl=Math.PI/180;(function(n){function e(){return l(function(m,I,w){return m.relative&&(m.x1!==void 0&&(m.x1+=I),m.y1!==void 0&&(m.y1+=w),m.x2!==void 0&&(m.x2+=I),m.y2!==void 0&&(m.y2+=w),m.x!==void 0&&(m.x+=I),m.y!==void 0&&(m.y+=w),m.relative=!1),m})}function r(){var m=NaN,I=NaN,w=NaN,_=NaN;return l(function(E,U,F){return E.type&Me.SMOOTH_CURVE_TO&&(E.type=Me.CURVE_TO,m=isNaN(m)?U:m,I=isNaN(I)?F:I,E.x1=E.relative?U-m:2*U-m,E.y1=E.relative?F-I:2*F-I),E.type&Me.CURVE_TO?(m=E.relative?U+E.x2:E.x2,I=E.relative?F+E.y2:E.y2):(m=NaN,I=NaN),E.type&Me.SMOOTH_QUAD_TO&&(E.type=Me.QUAD_TO,w=isNaN(w)?U:w,_=isNaN(_)?F:_,E.x1=E.relative?U-w:2*U-w,E.y1=E.relative?F-_:2*F-_),E.type&Me.QUAD_TO?(w=E.relative?U+E.x1:E.x1,_=E.relative?F+E.y1:E.y1):(w=NaN,_=NaN),E})}function o(){var m=NaN,I=NaN;return l(function(w,_,E){if(w.type&Me.SMOOTH_QUAD_TO&&(w.type=Me.QUAD_TO,m=isNaN(m)?_:m,I=isNaN(I)?E:I,w.x1=w.relative?_-m:2*_-m,w.y1=w.relative?E-I:2*E-I),w.type&Me.QUAD_TO){m=w.relative?_+w.x1:w.x1,I=w.relative?E+w.y1:w.y1;var U=w.x1,F=w.y1;w.type=Me.CURVE_TO,w.x1=((w.relative?0:_)+2*U)/3,w.y1=((w.relative?0:E)+2*F)/3,w.x2=(w.x+2*U)/3,w.y2=(w.y+2*F)/3}else m=NaN,I=NaN;return w})}function l(m){var I=0,w=0,_=NaN,E=NaN;return function(U){if(isNaN(_)&&!(U.type&Me.MOVE_TO))throw new Error("path must start with moveto");var F=m(U,I,w,_,E);return U.type&Me.CLOSE_PATH&&(I=_,w=E),U.x!==void 0&&(I=U.relative?I+U.x:U.x),U.y!==void 0&&(w=U.relative?w+U.y:U.y),U.type&Me.MOVE_TO&&(_=I,E=w),F}}function s(m,I,w,_,E,U){return iA(m,I,w,_,E,U),l(function(F,V,H,Y){var D=F.x1,tt=F.x2,ot=F.relative&&!isNaN(Y),bt=F.x!==void 0?F.x:ot?0:V,kt=F.y!==void 0?F.y:ot?0:H;function Lt(J){return J*J}F.type&Me.HORIZ_LINE_TO&&I!==0&&(F.type=Me.LINE_TO,F.y=F.relative?0:H),F.type&Me.VERT_LINE_TO&&w!==0&&(F.type=Me.LINE_TO,F.x=F.relative?0:V),F.x!==void 0&&(F.x=F.x*m+kt*w+(ot?0:E)),F.y!==void 0&&(F.y=bt*I+F.y*_+(ot?0:U)),F.x1!==void 0&&(F.x1=F.x1*m+F.y1*w+(ot?0:E)),F.y1!==void 0&&(F.y1=D*I+F.y1*_+(ot?0:U)),F.x2!==void 0&&(F.x2=F.x2*m+F.y2*w+(ot?0:E)),F.y2!==void 0&&(F.y2=tt*I+F.y2*_+(ot?0:U));var vt=m*_-I*w;if(F.xRot!==void 0&&(m!==1||I!==0||w!==0||_!==1))if(vt===0)delete F.rX,delete F.rY,delete F.xRot,delete F.lArcFlag,delete F.sweepFlag,F.type=Me.LINE_TO;else{var ft=F.xRot*Math.PI/180,Mt=Math.sin(ft),qt=Math.cos(ft),at=1/Lt(F.rX),st=1/Lt(F.rY),wt=Lt(qt)*at+Lt(Mt)*st,yt=2*Mt*qt*(at-st),te=Lt(Mt)*at+Lt(qt)*st,jt=wt*_*_-yt*I*_+te*I*I,Xt=yt*(m*_+I*w)-2*(wt*w*_+te*m*I),Wt=wt*w*w-yt*m*w+te*m*m,Ct=(Math.atan2(Xt,jt-Wt)+Math.PI)%Math.PI/2,Et=Math.sin(Ct),ue=Math.cos(Ct);F.rX=Math.abs(vt)/Math.sqrt(jt*Lt(ue)+Xt*Et*ue+Wt*Lt(Et)),F.rY=Math.abs(vt)/Math.sqrt(jt*Lt(Et)-Xt*Et*ue+Wt*Lt(ue)),F.xRot=180*Ct/Math.PI}return F.sweepFlag!==void 0&&0>vt&&(F.sweepFlag=+!F.sweepFlag),F})}function p(){return function(m){var I={};for(var w in m)I[w]=m[w];return I}}n.ROUND=function(m){function I(w){return Math.round(w*m)/m}return m===void 0&&(m=1e13),iA(m),function(w){return w.x1!==void 0&&(w.x1=I(w.x1)),w.y1!==void 0&&(w.y1=I(w.y1)),w.x2!==void 0&&(w.x2=I(w.x2)),w.y2!==void 0&&(w.y2=I(w.y2)),w.x!==void 0&&(w.x=I(w.x)),w.y!==void 0&&(w.y=I(w.y)),w.rX!==void 0&&(w.rX=I(w.rX)),w.rY!==void 0&&(w.rY=I(w.rY)),w}},n.TO_ABS=e,n.TO_REL=function(){return l(function(m,I,w){return m.relative||(m.x1!==void 0&&(m.x1-=I),m.y1!==void 0&&(m.y1-=w),m.x2!==void 0&&(m.x2-=I),m.y2!==void 0&&(m.y2-=w),m.x!==void 0&&(m.x-=I),m.y!==void 0&&(m.y-=w),m.relative=!0),m})},n.NORMALIZE_HVZ=function(m,I,w){return m===void 0&&(m=!0),I===void 0&&(I=!0),w===void 0&&(w=!0),l(function(_,E,U,F,V){if(isNaN(F)&&!(_.type&Me.MOVE_TO))throw new Error("path must start with moveto");return I&&_.type&Me.HORIZ_LINE_TO&&(_.type=Me.LINE_TO,_.y=_.relative?0:U),w&&_.type&Me.VERT_LINE_TO&&(_.type=Me.LINE_TO,_.x=_.relative?0:E),m&&_.type&Me.CLOSE_PATH&&(_.type=Me.LINE_TO,_.x=_.relative?F-E:F,_.y=_.relative?V-U:V),_.type&Me.ARC&&(_.rX===0||_.rY===0)&&(_.type=Me.LINE_TO,delete _.rX,delete _.rY,delete _.xRot,delete _.lArcFlag,delete _.sweepFlag),_})},n.NORMALIZE_ST=r,n.QT_TO_C=o,n.INFO=l,n.SANITIZE=function(m){m===void 0&&(m=0),iA(m);var I=NaN,w=NaN,_=NaN,E=NaN;return l(function(U,F,V,H,Y){var D=Math.abs,tt=!1,ot=0,bt=0;if(U.type&Me.SMOOTH_CURVE_TO&&(ot=isNaN(I)?0:F-I,bt=isNaN(w)?0:V-w),U.type&(Me.CURVE_TO|Me.SMOOTH_CURVE_TO)?(I=U.relative?F+U.x2:U.x2,w=U.relative?V+U.y2:U.y2):(I=NaN,w=NaN),U.type&Me.SMOOTH_QUAD_TO?(_=isNaN(_)?F:2*F-_,E=isNaN(E)?V:2*V-E):U.type&Me.QUAD_TO?(_=U.relative?F+U.x1:U.x1,E=U.relative?V+U.y1:U.y2):(_=NaN,E=NaN),U.type&Me.LINE_COMMANDS||U.type&Me.ARC&&(U.rX===0||U.rY===0||!U.lArcFlag)||U.type&Me.CURVE_TO||U.type&Me.SMOOTH_CURVE_TO||U.type&Me.QUAD_TO||U.type&Me.SMOOTH_QUAD_TO){var kt=U.x===void 0?0:U.relative?U.x:U.x-F,Lt=U.y===void 0?0:U.relative?U.y:U.y-V;ot=isNaN(_)?U.x1===void 0?ot:U.relative?U.x:U.x1-F:_-F,bt=isNaN(E)?U.y1===void 0?bt:U.relative?U.y:U.y1-V:E-V;var vt=U.x2===void 0?0:U.relative?U.x:U.x2-F,ft=U.y2===void 0?0:U.relative?U.y:U.y2-V;D(kt)<=m&&D(Lt)<=m&&D(ot)<=m&&D(bt)<=m&&D(vt)<=m&&D(ft)<=m&&(tt=!0)}return U.type&Me.CLOSE_PATH&&D(F-H)<=m&&D(V-Y)<=m&&(tt=!0),tt?[]:U})},n.MATRIX=s,n.ROTATE=function(m,I,w){I===void 0&&(I=0),w===void 0&&(w=0),iA(m,I,w);var _=Math.sin(m),E=Math.cos(m);return s(E,_,-_,E,I-I*E+w*_,w-I*_-w*E)},n.TRANSLATE=function(m,I){return I===void 0&&(I=0),iA(m,I),s(1,0,0,1,m,I)},n.SCALE=function(m,I){return I===void 0&&(I=m),iA(m,I),s(m,0,0,I,0,0)},n.SKEW_X=function(m){return iA(m),s(1,0,Math.atan(m),1,0,0)},n.SKEW_Y=function(m){return iA(m),s(1,Math.atan(m),0,1,0,0)},n.X_AXIS_SYMMETRY=function(m){return m===void 0&&(m=0),iA(m),s(-1,0,0,1,m,0)},n.Y_AXIS_SYMMETRY=function(m){return m===void 0&&(m=0),iA(m),s(1,0,0,-1,0,m)},n.A_TO_C=function(){return l(function(m,I,w){return Me.ARC===m.type?function(_,E,U){var F,V,H,Y;_.cX||AI(_,E,U);for(var D=Math.min(_.phi1,_.phi2),tt=Math.max(_.phi1,_.phi2)-D,ot=Math.ceil(tt/90),bt=new Array(ot),kt=E,Lt=U,vt=0;vt<ot;vt++){var ft=b_(_.phi1,_.phi2,vt/ot),Mt=b_(_.phi1,_.phi2,(vt+1)/ot),qt=Mt-ft,at=4/3*Math.tan(qt*Fl/4),st=[Math.cos(ft*Fl)-at*Math.sin(ft*Fl),Math.sin(ft*Fl)+at*Math.cos(ft*Fl)],wt=st[0],yt=st[1],te=[Math.cos(Mt*Fl),Math.sin(Mt*Fl)],jt=te[0],Xt=te[1],Wt=[jt+at*Math.sin(Mt*Fl),Xt-at*Math.cos(Mt*Fl)],Ct=Wt[0],Et=Wt[1];bt[vt]={relative:_.relative,type:Me.CURVE_TO};var ue=function(J,dt){var mt=GI([J*_.rX,dt*_.rY],_.xRot),Ut=mt[0],Pt=mt[1];return[_.cX+Ut,_.cY+Pt]};F=ue(wt,yt),bt[vt].x1=F[0],bt[vt].y1=F[1],V=ue(Ct,Et),bt[vt].x2=V[0],bt[vt].y2=V[1],H=ue(jt,Xt),bt[vt].x=H[0],bt[vt].y=H[1],_.relative&&(bt[vt].x1-=kt,bt[vt].y1-=Lt,bt[vt].x2-=kt,bt[vt].y2-=Lt,bt[vt].x-=kt,bt[vt].y-=Lt),kt=(Y=[bt[vt].x,bt[vt].y])[0],Lt=Y[1]}return bt}(m,m.relative?0:I,m.relative?0:w):m})},n.ANNOTATE_ARCS=function(){return l(function(m,I,w){return m.relative&&(I=0,w=0),Me.ARC===m.type&&AI(m,I,w),m})},n.CLONE=p,n.CALCULATE_BOUNDS=function(){var m=function(U){var F={};for(var V in U)F[V]=U[V];return F},I=e(),w=o(),_=r(),E=l(function(U,F,V){var H=_(w(I(m(U))));function Y(Et){Et>E.maxX&&(E.maxX=Et),Et<E.minX&&(E.minX=Et)}function D(Et){Et>E.maxY&&(E.maxY=Et),Et<E.minY&&(E.minY=Et)}if(H.type&Me.DRAWING_COMMANDS&&(Y(F),D(V)),H.type&Me.HORIZ_LINE_TO&&Y(H.x),H.type&Me.VERT_LINE_TO&&D(H.y),H.type&Me.LINE_TO&&(Y(H.x),D(H.y)),H.type&Me.CURVE_TO){Y(H.x),D(H.y);for(var tt=0,ot=w_(F,H.x1,H.x2,H.x);tt<ot.length;tt++)0<(Ct=ot[tt])&&1>Ct&&Y(B_(F,H.x1,H.x2,H.x,Ct));for(var bt=0,kt=w_(V,H.y1,H.y2,H.y);bt<kt.length;bt++)0<(Ct=kt[bt])&&1>Ct&&D(B_(V,H.y1,H.y2,H.y,Ct))}if(H.type&Me.ARC){Y(H.x),D(H.y),AI(H,F,V);for(var Lt=H.xRot/180*Math.PI,vt=Math.cos(Lt)*H.rX,ft=Math.sin(Lt)*H.rX,Mt=-Math.sin(Lt)*H.rY,qt=Math.cos(Lt)*H.rY,at=H.phi1<H.phi2?[H.phi1,H.phi2]:-180>H.phi2?[H.phi2+360,H.phi1+360]:[H.phi2,H.phi1],st=at[0],wt=at[1],yt=function(Et){var ue=Et[0],J=Et[1],dt=180*Math.atan2(J,ue)/Math.PI;return dt<st?dt+360:dt},te=0,jt=y_(Mt,-vt,0).map(yt);te<jt.length;te++)(Ct=jt[te])>st&&Ct<wt&&Y(v_(H.cX,vt,Mt,Ct));for(var Xt=0,Wt=y_(qt,-ft,0).map(yt);Xt<Wt.length;Xt++){var Ct;(Ct=Wt[Xt])>st&&Ct<wt&&D(v_(H.cY,ft,qt,Ct))}}return U});return E.minX=1/0,E.maxX=-1/0,E.minY=1/0,E.maxY=-1/0,E}})(Wn||(Wn={}));c5=function(){function n(){}return n.prototype.round=function(e){return this.transform(Wn.ROUND(e))},n.prototype.toAbs=function(){return this.transform(Wn.TO_ABS())},n.prototype.toRel=function(){return this.transform(Wn.TO_REL())},n.prototype.normalizeHVZ=function(e,r,o){return this.transform(Wn.NORMALIZE_HVZ(e,r,o))},n.prototype.normalizeST=function(){return this.transform(Wn.NORMALIZE_ST())},n.prototype.qtToC=function(){return this.transform(Wn.QT_TO_C())},n.prototype.aToC=function(){return this.transform(Wn.A_TO_C())},n.prototype.sanitize=function(e){return this.transform(Wn.SANITIZE(e))},n.prototype.translate=function(e,r){return this.transform(Wn.TRANSLATE(e,r))},n.prototype.scale=function(e,r){return this.transform(Wn.SCALE(e,r))},n.prototype.rotate=function(e,r,o){return this.transform(Wn.ROTATE(e,r,o))},n.prototype.matrix=function(e,r,o,l,s,p){return this.transform(Wn.MATRIX(e,r,o,l,s,p))},n.prototype.skewX=function(e){return this.transform(Wn.SKEW_X(e))},n.prototype.skewY=function(e){return this.transform(Wn.SKEW_Y(e))},n.prototype.xSymmetry=function(e){return this.transform(Wn.X_AXIS_SYMMETRY(e))},n.prototype.ySymmetry=function(e){return this.transform(Wn.Y_AXIS_SYMMETRY(e))},n.prototype.annotateArcs=function(){return this.transform(Wn.ANNOTATE_ARCS())},n}(),RD=function(n){return n===" "||n==="	"||n==="\r"||n===`
`},__=function(n){return 48<=n.charCodeAt(0)&&n.charCodeAt(0)<=57},GD=function(n){function e(){var r=n.call(this)||this;return r.curNumber="",r.curCommandType=-1,r.curCommandRelative=!1,r.canParseCommandOrComma=!0,r.curNumberHasExp=!1,r.curNumberHasExpDigits=!1,r.curNumberHasDecimal=!1,r.curArgs=[],r}return l5(e,n),e.prototype.finish=function(r){if(r===void 0&&(r=[]),this.parse(" ",r),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return r},e.prototype.parse=function(r,o){var l=this;o===void 0&&(o=[]);for(var s=function(E){o.push(E),l.curArgs.length=0,l.canParseCommandOrComma=!0},p=0;p<r.length;p++){var m=r[p],I=!(this.curCommandType!==Me.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),w=__(m)&&(this.curNumber==="0"&&m==="0"||I);if(!__(m)||w)if(m!=="e"&&m!=="E")if(m!=="-"&&m!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(m!=="."||this.curNumberHasExp||this.curNumberHasDecimal||I){if(this.curNumber&&this.curCommandType!==-1){var _=Number(this.curNumber);if(isNaN(_))throw new SyntaxError("Invalid number ending at "+p);if(this.curCommandType===Me.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>_)throw new SyntaxError('Expected positive number, got "'+_+'" at index "'+p+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+p+'"')}this.curArgs.push(_),this.curArgs.length===ZD[this.curCommandType]&&(Me.HORIZ_LINE_TO===this.curCommandType?s({type:Me.HORIZ_LINE_TO,relative:this.curCommandRelative,x:_}):Me.VERT_LINE_TO===this.curCommandType?s({type:Me.VERT_LINE_TO,relative:this.curCommandRelative,y:_}):this.curCommandType===Me.MOVE_TO||this.curCommandType===Me.LINE_TO||this.curCommandType===Me.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Me.MOVE_TO===this.curCommandType&&(this.curCommandType=Me.LINE_TO)):this.curCommandType===Me.CURVE_TO?s({type:Me.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Me.SMOOTH_CURVE_TO?s({type:Me.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Me.QUAD_TO?s({type:Me.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Me.ARC&&s({type:Me.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!RD(m))if(m===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(m!=="+"&&m!=="-"&&m!==".")if(w)this.curNumber=m,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+p+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+m+'" at index '+p+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,m!=="z"&&m!=="Z")if(m==="h"||m==="H")this.curCommandType=Me.HORIZ_LINE_TO,this.curCommandRelative=m==="h";else if(m==="v"||m==="V")this.curCommandType=Me.VERT_LINE_TO,this.curCommandRelative=m==="v";else if(m==="m"||m==="M")this.curCommandType=Me.MOVE_TO,this.curCommandRelative=m==="m";else if(m==="l"||m==="L")this.curCommandType=Me.LINE_TO,this.curCommandRelative=m==="l";else if(m==="c"||m==="C")this.curCommandType=Me.CURVE_TO,this.curCommandRelative=m==="c";else if(m==="s"||m==="S")this.curCommandType=Me.SMOOTH_CURVE_TO,this.curCommandRelative=m==="s";else if(m==="q"||m==="Q")this.curCommandType=Me.QUAD_TO,this.curCommandRelative=m==="q";else if(m==="t"||m==="T")this.curCommandType=Me.SMOOTH_QUAD_TO,this.curCommandRelative=m==="t";else{if(m!=="a"&&m!=="A")throw new SyntaxError('Unexpected character "'+m+'" at index '+p+".");this.curCommandType=Me.ARC,this.curCommandRelative=m==="a"}else o.push({type:Me.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=m,this.curNumberHasDecimal=m==="."}else this.curNumber+=m,this.curNumberHasDecimal=!0;else this.curNumber+=m;else this.curNumber+=m,this.curNumberHasExp=!0;else this.curNumber+=m,this.curNumberHasExpDigits=this.curNumberHasExp}return o},e.prototype.transform=function(r){return Object.create(this,{parse:{value:function(o,l){l===void 0&&(l=[]);for(var s=0,p=Object.getPrototypeOf(this).parse.call(this,o);s<p.length;s++){var m=p[s],I=r(m);Array.isArray(I)?l.push.apply(l,I):l.push(I)}return l}}})},e}(c5),Me=function(n){function e(r){var o=n.call(this)||this;return o.commands=typeof r=="string"?e.parse(r):r,o}return l5(e,n),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var r=Wn.CALCULATE_BOUNDS();return this.transform(r),r},e.prototype.transform=function(r){for(var o=[],l=0,s=this.commands;l<s.length;l++){var p=r(s[l]);Array.isArray(p)?o.push.apply(o,p):o.push(p)}return this.commands=o,this},e.encode=function(r){return QD(r)},e.parse=function(r){var o=new GD,l=[];return o.parse(r,l),o.finish(l),l},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(c5),ZD=((eA={})[Me.MOVE_TO]=2,eA[Me.LINE_TO]=2,eA[Me.HORIZ_LINE_TO]=1,eA[Me.VERT_LINE_TO]=1,eA[Me.CLOSE_PATH]=0,eA[Me.QUAD_TO]=4,eA[Me.SMOOTH_QUAD_TO]=2,eA[Me.CURVE_TO]=6,eA[Me.SMOOTH_CURVE_TO]=4,eA[Me.ARC]=7,eA),PD=ks,HD=aA,MD=Mf,ND=Mx,x_=RegExp.prototype,VD=function(n){var e=n.flags;return e===void 0&&!("flags"in x_)&&!HD(n,"flags")&&MD(x_,n)?PD(ND,n):e},DD=Of.PROPER,KD=hu,OD=js,S_=YA,zD=kn,WD=VD,ky="toString",u5=RegExp.prototype,h5=u5[ky],JD=zD(function(){return h5.call({source:"a",flags:"b"})!=="/a/b"}),XD=DD&&h5.name!==ky;(JD||XD)&&KD(u5,ky,function(){var n=OD(this),e=S_(n.source),r=S_(WD(n));return"/"+e+"/"+r},{unsafe:!0});jD=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],qD=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];F_=function n(){YD(this,n),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};n6=Object.freeze({__proto__:null,offscreen:i6,node:r6});s6=/^[A-Z-]+$/;o6=/(\[[^\]]+\])/g,a6=/(#[^\s+>~.[:]+)/g,A6=/(\.[^\s+>~.[:]+)/g,l6=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,c6=/(:[\w-]+\([^)]*\))/gi,u6=/(:[^\s+>~.[:]+)/g,h6=/([^\s+>~.[:]+)/g;ru=1e-8;Pi=class{constructor(e,r,o){this.document=e,this.name=r,this.value=o,this.isNormalizedColor=!1}static empty(e){return new Pi(e,"EMPTY","")}split(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:r,name:o}=this;return gu(this.getString()).trim().split(e).map(l=>new Pi(r,o,l))}hasValue(e){var{value:r}=this;return r!==null&&r!==""&&(e||r!==0)&&typeof r<"u"}isString(e){var{value:r}=this,o=typeof r=="string";return!o||!e?o:e.test(r)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>"u"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>"u"?0:parseFloat(e);var{value:r}=this,o=parseFloat(r);return this.isString(/%$/)&&(o/=100),o}getString(e){return typeof e>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(e)}getColor(e){var r=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,r=f5(r),this.value=r),r}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[o,l]=typeof e=="boolean"?[void 0,e]:[e],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&l):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(o);default:{var p=this.getNumber();return r&&p<1?p*s.computeSize(o):p}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),r=/#([^)'"]+)/.exec(e);return r&&(r=r[1]),r||(r=e),this.document.definitions[r]}getFillStyleDefinition(e,r){var o=this.getDefinition();if(!o)return null;if(typeof o.createGradient=="function")return o.createGradient(this.document.ctx,e,r);if(typeof o.createPattern=="function"){if(o.getHrefAttribute().hasValue()){var l=o.getAttribute("patternTransform");o=o.getHrefAttribute().getDefinition(),l.hasValue()&&o.getAttribute("patternTransform",!0).setValue(l.value)}return o.createPattern(this.document.ctx,e,r)}return null}getTextBaseline(){return this.hasValue()?Pi.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var r=this.getColor(),o=r.length,l=0,s=0;s<o&&(r[s]===","&&l++,l!==3);s++);if(e.hasValue()&&this.isString()&&l!==3){var p=new QI(r);p.ok&&(p.alpha=e.getNumber(),r=p.toRGBA())}return new Pi(this.document,this.name,r)}};Pi.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};ef=class{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,r){this.viewPorts.push({width:e,height:r})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e=="number"?e:e==="x"?this.width:e==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}},gn=class{constructor(e,r){this.x=e,this.y=r}static parse(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[o=r,l=r]=Ko(e);return new gn(o,l)}static parseScale(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[o=r,l=o]=Ko(e);return new gn(o,l)}static parsePath(e){for(var r=Ko(e),o=r.length,l=[],s=0;s<o;s+=2)l.push(new gn(r[s],r[s+1]));return l}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:r,y:o}=this,l=r*e[0]+o*e[2]+e[4],s=r*e[1]+o*e[3]+e[5];this.x=l,this.y=s}},rf=class{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:r,onMouseMove:o}=this,l=e.ctx.canvas;l.onclick=r,l.onmousemove=o,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:r,eventElements:o}=this,{style:l}=e.ctx.canvas;l&&(l.cursor=""),r.forEach((s,p)=>{for(var{run:m}=s,I=o[p];I;)m(I),I=I.parent}),this.events=[],this.eventElements=[]}}checkPath(e,r){if(!(!this.working||!r)){var{events:o,eventElements:l}=this;o.forEach((s,p)=>{var{x:m,y:I}=s;!l[p]&&r.isPointInPath&&r.isPointInPath(m,I)&&(l[p]=e)})}}checkBoundingBox(e,r){if(!(!this.working||!r)){var{events:o,eventElements:l}=this;o.forEach((s,p)=>{var{x:m,y:I}=s;!l[p]&&r.isPointInBox(m,I)&&(l[p]=e)})}}mapXY(e,r){for(var{window:o,ctx:l}=this.screen,s=new gn(e,r),p=l.canvas;p;)s.x-=p.offsetLeft,s.y-=p.offsetTop,p=p.offsetParent;return o.scrollX&&(s.x+=o.scrollX),o.scrollY&&(s.y+=o.scrollY),s}onClick(e){var{x:r,y:o}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:r,y:o,run(l){l.onClick&&l.onClick()}})}onMouseMove(e){var{x:r,y:o}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:r,y:o,run(l){l.onMouseMove&&l.onMouseMove()}})}},C5=typeof window<"u"?window:null,I5=typeof fetch<"u"?fetch.bind(void 0):null,su=class{constructor(e){var{fetch:r=I5,window:o=C5}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new ef,this.mouse=new rf(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=o,this.fetch=r}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every(r=>r());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){var{document:r,ctx:o,aspectRatio:l,width:s,desiredWidth:p,height:m,desiredHeight:I,minX:w=0,minY:_=0,refX:E,refY:U,clip:F=!1,clipX:V=0,clipY:H=0}=e,Y=gu(l).replace(/^defer\s/,""),[D,tt]=Y.split(" "),ot=D||"xMidYMid",bt=tt||"meet",kt=s/p,Lt=m/I,vt=Math.min(kt,Lt),ft=Math.max(kt,Lt),Mt=p,qt=I;bt==="meet"&&(Mt*=vt,qt*=vt),bt==="slice"&&(Mt*=ft,qt*=ft);var at=new Pi(r,"refX",E),st=new Pi(r,"refY",U),wt=at.hasValue()&&st.hasValue();if(wt&&o.translate(-vt*at.getPixels("x"),-vt*st.getPixels("y")),F){var yt=vt*V,te=vt*H;o.beginPath(),o.moveTo(yt,te),o.lineTo(s,te),o.lineTo(s,m),o.lineTo(yt,m),o.closePath(),o.clip()}if(!wt){var jt=bt==="meet"&&vt===Lt,Xt=bt==="slice"&&ft===Lt,Wt=bt==="meet"&&vt===kt,Ct=bt==="slice"&&ft===kt;ot.startsWith("xMid")&&(jt||Xt)&&o.translate(s/2-Mt/2,0),ot.endsWith("YMid")&&(Wt||Ct)&&o.translate(0,m/2-qt/2),ot.startsWith("xMax")&&(jt||Xt)&&o.translate(s-Mt,0),ot.endsWith("YMax")&&(Wt||Ct)&&o.translate(0,m-qt)}switch(!0){case ot==="none":o.scale(kt,Lt);break;case bt==="meet":o.scale(vt,vt);break;case bt==="slice":o.scale(ft,ft);break}o.translate(-w,-_)}start(e){var{enableRedraw:r=!1,ignoreMouse:o=!1,ignoreAnimation:l=!1,ignoreDimensions:s=!1,ignoreClear:p=!1,forceRedraw:m,scaleWidth:I,scaleHeight:w,offsetX:_,offsetY:E}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:U,mouse:F}=this,V=1e3/U;if(this.frameDuration=V,this.readyPromise=new Promise(ot=>{this.resolveReady=ot}),this.isReady()&&this.render(e,s,p,I,w,_,E),!!r){var H=Date.now(),Y=H,D=0,tt=()=>{H=Date.now(),D=H-Y,D>=V&&(Y=H-D%V,this.shouldUpdate(l,m)&&(this.render(e,s,p,I,w,_,E),F.runEvents())),this.intervalId=oI(tt)};o||F.start(),this.intervalId=oI(tt)}}stop(){this.intervalId&&(oI.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,r){if(!e){var{frameDuration:o}=this,l=this.animations.reduce((s,p)=>p.update(o)||s,!1);if(l)return!0}return!!(typeof r=="function"&&r()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,r,o,l,s,p,m){var{CLIENT_WIDTH:I,CLIENT_HEIGHT:w,viewPort:_,ctx:E,isFirstRender:U}=this,F=E.canvas;_.clear(),F.width&&F.height?_.setCurrent(F.width,F.height):_.setCurrent(I,w);var V=e.getStyle("width"),H=e.getStyle("height");!r&&(U||typeof l!="number"&&typeof s!="number")&&(V.hasValue()&&(F.width=V.getPixels("x"),F.style&&(F.style.width="".concat(F.width,"px"))),H.hasValue()&&(F.height=H.getPixels("y"),F.style&&(F.style.height="".concat(F.height,"px"))));var Y=F.clientWidth||F.width,D=F.clientHeight||F.height;if(r&&V.hasValue()&&H.hasValue()&&(Y=V.getPixels("x"),D=H.getPixels("y")),_.setCurrent(Y,D),typeof p=="number"&&e.getAttribute("x",!0).setValue(p),typeof m=="number"&&e.getAttribute("y",!0).setValue(m),typeof l=="number"||typeof s=="number"){var tt=Ko(e.getAttribute("viewBox").getString()),ot=0,bt=0;if(typeof l=="number"){var kt=e.getStyle("width");kt.hasValue()?ot=kt.getPixels("x")/l:isNaN(tt[2])||(ot=tt[2]/l)}if(typeof s=="number"){var Lt=e.getStyle("height");Lt.hasValue()?bt=Lt.getPixels("y")/s:isNaN(tt[3])||(bt=tt[3]/s)}ot||(ot=bt),bt||(bt=ot),e.getAttribute("width",!0).setValue(l),e.getAttribute("height",!0).setValue(s);var vt=e.getStyle("transform",!0,!0);vt.setValue("".concat(vt.getString()," scale(").concat(1/ot,", ").concat(1/bt,")"))}o||E.clearRect(0,0,Y,D),e.render(E),U&&(this.isFirstRender=!1)}};su.defaultWindow=C5;su.defaultFetch=I5;({defaultFetch:g6}=su),d6=typeof DOMParser<"u"?DOMParser:null,ch=class{constructor(){var{fetch:e=g6,DOMParser:r=d6}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=e,this.DOMParser=r}parse(e){var r=this;return El(function*(){return e.startsWith("<")?r.parseFromString(e):r.load(e)})()}parseFromString(e){var r=new this.DOMParser;try{return this.checkDocument(r.parseFromString(e,"image/svg+xml"))}catch{return this.checkDocument(r.parseFromString(e,"text/xml"))}}checkDocument(e){var r=e.getElementsByTagName("parsererror")[0];if(r)throw new Error(r.textContent);return e}load(e){var r=this;return El(function*(){var o=yield r.fetch(e),l=yield o.text();return r.parseFromString(l)})()}},nf=class{constructor(e,r){this.type="translate",this.point=null,this.point=gn.parse(r)}apply(e){var{x:r,y:o}=this.point;e.translate(r||0,o||0)}unapply(e){var{x:r,y:o}=this.point;e.translate(-1*r||0,-1*o||0)}applyToPoint(e){var{x:r,y:o}=this.point;e.applyTransform([1,0,0,1,r||0,o||0])}},sf=class{constructor(e,r,o){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var l=Ko(r);this.angle=new Pi(e,"angle",l[0]),this.originX=o[0],this.originY=o[1],this.cx=l[1]||0,this.cy=l[2]||0}apply(e){var{cx:r,cy:o,originX:l,originY:s,angle:p}=this,m=r+l.getPixels("x"),I=o+s.getPixels("y");e.translate(m,I),e.rotate(p.getRadians()),e.translate(-m,-I)}unapply(e){var{cx:r,cy:o,originX:l,originY:s,angle:p}=this,m=r+l.getPixels("x"),I=o+s.getPixels("y");e.translate(m,I),e.rotate(-1*p.getRadians()),e.translate(-m,-I)}applyToPoint(e){var{cx:r,cy:o,angle:l}=this,s=l.getRadians();e.applyTransform([1,0,0,1,r||0,o||0]),e.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),e.applyTransform([1,0,0,1,-r||0,-o||0])}},of=class{constructor(e,r,o){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var l=gn.parseScale(r);(l.x===0||l.y===0)&&(l.x=ru,l.y=ru),this.scale=l,this.originX=o[0],this.originY=o[1]}apply(e){var{scale:{x:r,y:o},originX:l,originY:s}=this,p=l.getPixels("x"),m=s.getPixels("y");e.translate(p,m),e.scale(r,o||r),e.translate(-p,-m)}unapply(e){var{scale:{x:r,y:o},originX:l,originY:s}=this,p=l.getPixels("x"),m=s.getPixels("y");e.translate(p,m),e.scale(1/r,1/o||r),e.translate(-p,-m)}applyToPoint(e){var{x:r,y:o}=this.scale;e.applyTransform([r||0,0,0,o||0,0,0])}},Gg=class{constructor(e,r,o){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=Ko(r),this.originX=o[0],this.originY=o[1]}apply(e){var{originX:r,originY:o,matrix:l}=this,s=r.getPixels("x"),p=o.getPixels("y");e.translate(s,p),e.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e.translate(-s,-p)}unapply(e){var{originX:r,originY:o,matrix:l}=this,s=l[0],p=l[2],m=l[4],I=l[1],w=l[3],_=l[5],E=0,U=0,F=1,V=1/(s*(w*F-_*U)-p*(I*F-_*E)+m*(I*U-w*E)),H=r.getPixels("x"),Y=o.getPixels("y");e.translate(H,Y),e.transform(V*(w*F-_*U),V*(_*E-I*F),V*(m*U-p*F),V*(s*F-m*E),V*(p*_-m*w),V*(m*I-s*_)),e.translate(-H,-Y)}applyToPoint(e){e.applyTransform(this.matrix)}},Zg=class extends Gg{constructor(e,r,o){super(e,r,o),this.type="skew",this.angle=null,this.angle=new Pi(e,"angle",r)}},af=class extends Zg{constructor(e,r,o){super(e,r,o),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},Af=class extends Zg{constructor(e,r,o){super(e,r,o),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};zA=class{constructor(e,r,o){this.document=e,this.transforms=[];var l=p6(r);l.forEach(s=>{if(s!=="none"){var[p,m]=f6(s),I=zA.transformTypes[p];typeof I<"u"&&this.transforms.push(new I(this.document,m,o))}})}static fromElement(e,r){var o=r.getStyle("transform",!1,!0),[l,s=l]=r.getStyle("transform-origin",!1,!0).split(),p=[l,s];return o.hasValue()?new zA(e,o.getString(),p):null}apply(e){for(var{transforms:r}=this,o=r.length,l=0;l<o;l++)r[l].apply(e)}unapply(e){for(var{transforms:r}=this,o=r.length,l=o-1;l>=0;l--)r[l].unapply(e)}applyToPoint(e){for(var{transforms:r}=this,o=r.length,l=0;l<o;l++)r[l].applyToPoint(e)}};zA.transformTypes={translate:nf,rotate:sf,scale:of,matrix:Gg,skewX:af,skewY:Af};Yr=class{constructor(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=e,this.node=r,this.captureTextNodes=o,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!r||r.nodeType!==1)){if(Array.from(r.attributes).forEach(m=>{var I=p5(m.nodeName);this.attributes[I]=new Pi(e,I,m.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var l=this.getAttribute("style").getString().split(";").map(m=>m.trim());l.forEach(m=>{if(m){var[I,w]=m.split(":").map(_=>_.trim());this.styles[I]=new Pi(e,I,w)}})}var{definitions:s}=e,p=this.getAttribute("id");p.hasValue()&&(s[p.getString()]||(s[p.getString()]=this)),Array.from(r.childNodes).forEach(m=>{if(m.nodeType===1)this.addChild(m);else if(o&&(m.nodeType===3||m.nodeType===4)){var I=e.createTextNode(m);I.getText().length>0&&this.addChild(I)}})}}getAttribute(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.attributes[e];if(!o&&r){var l=new Pi(this.document,e,"");return this.attributes[e]=l,l}return o||Pi.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if(e==="href"||e.endsWith(":href"))return this.attributes[e];return Pi.empty(this.document)}getStyle(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.styles[e];if(l)return l;var s=this.getAttribute(e);if(s!=null&&s.hasValue())return this.styles[e]=s,s;if(!o){var{parent:p}=this;if(p){var m=p.getStyle(e);if(m!=null&&m.hasValue())return m}}if(r){var I=new Pi(this.document,e,"");return this.styles[e]=I,I}return l||Pi.empty(this.document)}render(e){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(e.save(),this.getStyle("mask").hasValue()){var r=this.getStyle("mask").getDefinition();r&&(this.applyEffects(e),r.apply(e,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var o=this.getStyle("filter").getDefinition();o&&(this.applyEffects(e),o.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var r=zA.fromElement(this.document,this);r&&r.apply(e);var o=this.getStyle("clip-path",!1,!0);if(o.hasValue()){var l=o.getDefinition();l&&l.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(r=>{r.render(e)})}addChild(e){var r=e instanceof Yr?e:this.document.createElement(e);r.parent=this,Yr.ignoreChildTypes.includes(r.type)||this.children.push(r)}matchesSelector(e){var r,{node:o}=this;if(typeof o.matches=="function")return o.matches(e);var l=(r=o.getAttribute)===null||r===void 0?void 0:r.call(o,"class");return!l||l===""?!1:l.split(" ").some(s=>".".concat(s)===e)}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:r}=this.document;for(var o in e)if(!o.startsWith("@")&&this.matchesSelector(o)){var l=e[o],s=r[o];if(l)for(var p in l){var m=this.stylesSpecificity[p];typeof m>"u"&&(m="000"),s>=m&&(this.styles[p]=l[p],this.stylesSpecificity[p]=s)}}}removeStyles(e,r){var o=r.reduce((l,s)=>{var p=e.getStyle(s);if(!p.hasValue())return l;var m=p.getString();return p.setValue(""),[...l,[s,m]]},[]);return o}restoreStyles(e,r){r.forEach(o=>{var[l,s]=o;e.getStyle(l,!0).setValue(s)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}};Yr.ignoreChildTypes=["title"];lf=class extends Yr{constructor(e,r,o){super(e,r,o)}};gs=class{constructor(e,r,o,l,s,p){var m=p?typeof p=="string"?gs.parse(p):p:{};this.fontFamily=s||m.fontFamily,this.fontSize=l||m.fontSize,this.fontStyle=e||m.fontStyle,this.fontWeight=o||m.fontWeight,this.fontVariant=r||m.fontVariant}static parse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,o="",l="",s="",p="",m="",I=gu(e).trim().split(" "),w={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return I.forEach(_=>{switch(!0){case(!w.fontStyle&&gs.styles.includes(_)):_!=="inherit"&&(o=_),w.fontStyle=!0;break;case(!w.fontVariant&&gs.variants.includes(_)):_!=="inherit"&&(l=_),w.fontStyle=!0,w.fontVariant=!0;break;case(!w.fontWeight&&gs.weights.includes(_)):_!=="inherit"&&(s=_),w.fontStyle=!0,w.fontVariant=!0,w.fontWeight=!0;break;case!w.fontSize:_!=="inherit"&&([p]=_.split("/")),w.fontStyle=!0,w.fontVariant=!0,w.fontWeight=!0,w.fontSize=!0;break;default:_!=="inherit"&&(m+=_)}}),new gs(o,l,s,p,m,r)}toString(){return[I6(this.fontStyle),this.fontVariant,y6(this.fontWeight),this.fontSize,C6(this.fontFamily)].join(" ").trim()}};gs.styles="normal|italic|oblique|inherit";gs.variants="normal|small-caps|inherit";gs.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";Oo=class{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=e,this.y1=r,this.x2=o,this.y2=l,this.addPoint(e,r),this.addPoint(o,l)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,r){typeof e<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof r<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=r,this.y2=r),r<this.y1&&(this.y1=r),r>this.y2&&(this.y2=r))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:r,y1:o,x2:l,y2:s}=e;this.addPoint(r,o),this.addPoint(l,s)}}sumCubic(e,r,o,l,s){return Math.pow(1-e,3)*r+3*Math.pow(1-e,2)*e*o+3*(1-e)*Math.pow(e,2)*l+Math.pow(e,3)*s}bezierCurveAdd(e,r,o,l,s){var p=6*r-12*o+6*l,m=-3*r+9*o-9*l+3*s,I=3*o-3*r;if(m===0){if(p===0)return;var w=-I/p;0<w&&w<1&&(e?this.addX(this.sumCubic(w,r,o,l,s)):this.addY(this.sumCubic(w,r,o,l,s)));return}var _=Math.pow(p,2)-4*I*m;if(!(_<0)){var E=(-p+Math.sqrt(_))/(2*m);0<E&&E<1&&(e?this.addX(this.sumCubic(E,r,o,l,s)):this.addY(this.sumCubic(E,r,o,l,s)));var U=(-p-Math.sqrt(_))/(2*m);0<U&&U<1&&(e?this.addX(this.sumCubic(U,r,o,l,s)):this.addY(this.sumCubic(U,r,o,l,s)))}}addBezierCurve(e,r,o,l,s,p,m,I){this.addPoint(e,r),this.addPoint(m,I),this.bezierCurveAdd(!0,e,o,s,m),this.bezierCurveAdd(!1,r,l,p,I)}addQuadraticCurve(e,r,o,l,s,p){var m=e+.6666666666666666*(o-e),I=r+2/3*(l-r),w=m+1/3*(s-e),_=I+1/3*(p-r);this.addBezierCurve(e,r,m,w,I,_,s,p)}isPointInBox(e,r){var{x1:o,y1:l,x2:s,y2:p}=this;return o<=e&&e<=s&&l<=r&&r<=p}},ir=class extends Me{constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new gn(0,0),this.control=new gn(0,0),this.current=new gn(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:r}=this;return e>=r.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",o=new gn(this.command[e],this.command[r]);return this.makeAbsolute(o)}getAsControlPoint(e,r){var o=this.getPoint(e,r);return this.control=o,o}getAsCurrentPoint(e,r){var o=this.getPoint(e,r);return this.current=o,o}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==Me.CURVE_TO&&e!==Me.SMOOTH_CURVE_TO&&e!==Me.QUAD_TO&&e!==Me.SMOOTH_QUAD_TO)return this.current;var{current:{x:r,y:o},control:{x:l,y:s}}=this,p=new gn(2*r-l,2*o-s);return p}makeAbsolute(e){if(this.command.relative){var{x:r,y:o}=this.current;e.x+=r,e.y+=o}return e}addMarker(e,r,o){var{points:l,angles:s}=this;o&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=l[l.length-1].angleTo(o)),this.addMarkerAngle(e,r?r.angleTo(e):null)}addMarkerAngle(e,r){this.points.push(e),this.angles.push(r)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,r=e.length,o=0;o<r;o++)if(!e[o]){for(var l=o+1;l<r;l++)if(e[l]){e[o]=e[l];break}}return e}},WA=class extends Yr{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,r=this;r;){var o=r.getStyle("opacity",!1,!0);o.hasValue(!0)&&(e*=o.getNumber()),r=r.parent}return e}setContext(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r){var o=this.getStyle("fill"),l=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),p=this.getStyle("stroke-opacity");if(o.isUrlDefinition()){var m=o.getFillStyleDefinition(this,l);m&&(e.fillStyle=m)}else if(o.hasValue()){o.getString()==="currentColor"&&o.setValue(this.getStyle("color").getColor());var I=o.getColor();I!=="inherit"&&(e.fillStyle=I==="none"?"rgba(0,0,0,0)":I)}if(l.hasValue()){var w=new Pi(this.document,"fill",e.fillStyle).addOpacity(l).getColor();e.fillStyle=w}if(s.isUrlDefinition()){var _=s.getFillStyleDefinition(this,p);_&&(e.strokeStyle=_)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var E=s.getString();E!=="inherit"&&(e.strokeStyle=E==="none"?"rgba(0,0,0,0)":E)}if(p.hasValue()){var U=new Pi(this.document,"stroke",e.strokeStyle).addOpacity(p).getString();e.strokeStyle=U}var F=this.getStyle("stroke-width");if(F.hasValue()){var V=F.getPixels();e.lineWidth=V||ru}var H=this.getStyle("stroke-linecap"),Y=this.getStyle("stroke-linejoin"),D=this.getStyle("stroke-miterlimit"),tt=this.getStyle("stroke-dasharray"),ot=this.getStyle("stroke-dashoffset");if(H.hasValue()&&(e.lineCap=H.getString()),Y.hasValue()&&(e.lineJoin=Y.getString()),D.hasValue()&&(e.miterLimit=D.getNumber()),tt.hasValue()&&tt.getString()!=="none"){var bt=Ko(tt.getString());typeof e.setLineDash<"u"?e.setLineDash(bt):typeof e.webkitLineDash<"u"?e.webkitLineDash=bt:typeof e.mozDash<"u"&&!(bt.length===1&&bt[0]===0)&&(e.mozDash=bt);var kt=ot.getPixels();typeof e.lineDashOffset<"u"?e.lineDashOffset=kt:typeof e.webkitLineDashOffset<"u"?e.webkitLineDashOffset=kt:typeof e.mozDashOffset<"u"&&(e.mozDashOffset=kt)}}if(this.modifiedEmSizeStack=!1,typeof e.font<"u"){var Lt=this.getStyle("font"),vt=this.getStyle("font-style"),ft=this.getStyle("font-variant"),Mt=this.getStyle("font-weight"),qt=this.getStyle("font-size"),at=this.getStyle("font-family"),st=new gs(vt.getString(),ft.getString(),Mt.getString(),qt.hasValue()?"".concat(qt.getPixels(!0),"px"):"",at.getString(),gs.parse(Lt.getString(),e.font));vt.setValue(st.fontStyle),ft.setValue(st.fontVariant),Mt.setValue(st.fontWeight),qt.setValue(st.fontSize),at.setValue(st.fontFamily),e.font=st.toString(),qt.isPixels()&&(this.document.emSize=qt.getPixels(),this.modifiedEmSizeStack=!0)}r||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}},Ur=class extends WA{constructor(e,r,o){super(e,r,o),this.type="path",this.pathParser=null,this.pathParser=new ir(this.getAttribute("d").getString())}path(e){var{pathParser:r}=this,o=new Oo;for(r.reset(),e&&e.beginPath();!r.isEnd();)switch(r.next().type){case ir.MOVE_TO:this.pathM(e,o);break;case ir.LINE_TO:this.pathL(e,o);break;case ir.HORIZ_LINE_TO:this.pathH(e,o);break;case ir.VERT_LINE_TO:this.pathV(e,o);break;case ir.CURVE_TO:this.pathC(e,o);break;case ir.SMOOTH_CURVE_TO:this.pathS(e,o);break;case ir.QUAD_TO:this.pathQ(e,o);break;case ir.SMOOTH_QUAD_TO:this.pathT(e,o);break;case ir.ARC:this.pathA(e,o);break;case ir.CLOSE_PATH:this.pathZ(e,o);break}return o}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,r=e.getMarkerPoints(),o=e.getMarkerAngles(),l=r.map((s,p)=>[s,o[p]]);return l}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var r=this.getStyle("fill-rule");e.fillStyle!==""&&(r.getString("inherit")!=="inherit"?e.fill(r.getString()):e.fill()),e.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var o=this.getMarkers();if(o){var l=o.length-1,s=this.getStyle("marker-start"),p=this.getStyle("marker-mid"),m=this.getStyle("marker-end");if(s.isUrlDefinition()){var I=s.getDefinition(),[w,_]=o[0];I.render(e,w,_)}if(p.isUrlDefinition())for(var E=p.getDefinition(),U=1;U<l;U++){var[F,V]=o[U];E.render(e,F,V)}if(m.isUrlDefinition()){var H=m.getDefinition(),[Y,D]=o[l];H.render(e,Y,D)}}}static pathM(e){var r=e.getAsCurrentPoint();return e.start=e.current,{point:r}}pathM(e,r){var{pathParser:o}=this,{point:l}=Ur.pathM(o),{x:s,y:p}=l;o.addMarker(l),r.addPoint(s,p),e&&e.moveTo(s,p)}static pathL(e){var{current:r}=e,o=e.getAsCurrentPoint();return{current:r,point:o}}pathL(e,r){var{pathParser:o}=this,{current:l,point:s}=Ur.pathL(o),{x:p,y:m}=s;o.addMarker(s,l),r.addPoint(p,m),e&&e.lineTo(p,m)}static pathH(e){var{current:r,command:o}=e,l=new gn((o.relative?r.x:0)+o.x,r.y);return e.current=l,{current:r,point:l}}pathH(e,r){var{pathParser:o}=this,{current:l,point:s}=Ur.pathH(o),{x:p,y:m}=s;o.addMarker(s,l),r.addPoint(p,m),e&&e.lineTo(p,m)}static pathV(e){var{current:r,command:o}=e,l=new gn(r.x,(o.relative?r.y:0)+o.y);return e.current=l,{current:r,point:l}}pathV(e,r){var{pathParser:o}=this,{current:l,point:s}=Ur.pathV(o),{x:p,y:m}=s;o.addMarker(s,l),r.addPoint(p,m),e&&e.lineTo(p,m)}static pathC(e){var{current:r}=e,o=e.getPoint("x1","y1"),l=e.getAsControlPoint("x2","y2"),s=e.getAsCurrentPoint();return{current:r,point:o,controlPoint:l,currentPoint:s}}pathC(e,r){var{pathParser:o}=this,{current:l,point:s,controlPoint:p,currentPoint:m}=Ur.pathC(o);o.addMarker(m,p,s),r.addBezierCurve(l.x,l.y,s.x,s.y,p.x,p.y,m.x,m.y),e&&e.bezierCurveTo(s.x,s.y,p.x,p.y,m.x,m.y)}static pathS(e){var{current:r}=e,o=e.getReflectedControlPoint(),l=e.getAsControlPoint("x2","y2"),s=e.getAsCurrentPoint();return{current:r,point:o,controlPoint:l,currentPoint:s}}pathS(e,r){var{pathParser:o}=this,{current:l,point:s,controlPoint:p,currentPoint:m}=Ur.pathS(o);o.addMarker(m,p,s),r.addBezierCurve(l.x,l.y,s.x,s.y,p.x,p.y,m.x,m.y),e&&e.bezierCurveTo(s.x,s.y,p.x,p.y,m.x,m.y)}static pathQ(e){var{current:r}=e,o=e.getAsControlPoint("x1","y1"),l=e.getAsCurrentPoint();return{current:r,controlPoint:o,currentPoint:l}}pathQ(e,r){var{pathParser:o}=this,{current:l,controlPoint:s,currentPoint:p}=Ur.pathQ(o);o.addMarker(p,s,s),r.addQuadraticCurve(l.x,l.y,s.x,s.y,p.x,p.y),e&&e.quadraticCurveTo(s.x,s.y,p.x,p.y)}static pathT(e){var{current:r}=e,o=e.getReflectedControlPoint();e.control=o;var l=e.getAsCurrentPoint();return{current:r,controlPoint:o,currentPoint:l}}pathT(e,r){var{pathParser:o}=this,{current:l,controlPoint:s,currentPoint:p}=Ur.pathT(o);o.addMarker(p,s,s),r.addQuadraticCurve(l.x,l.y,s.x,s.y,p.x,p.y),e&&e.quadraticCurveTo(s.x,s.y,p.x,p.y)}static pathA(e){var{current:r,command:o}=e,{rX:l,rY:s,xRot:p,lArcFlag:m,sweepFlag:I}=o,w=p*(Math.PI/180),_=e.getAsCurrentPoint(),E=new gn(Math.cos(w)*(r.x-_.x)/2+Math.sin(w)*(r.y-_.y)/2,-Math.sin(w)*(r.x-_.x)/2+Math.cos(w)*(r.y-_.y)/2),U=Math.pow(E.x,2)/Math.pow(l,2)+Math.pow(E.y,2)/Math.pow(s,2);U>1&&(l*=Math.sqrt(U),s*=Math.sqrt(U));var F=(m===I?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(s,2)-Math.pow(l,2)*Math.pow(E.y,2)-Math.pow(s,2)*Math.pow(E.x,2))/(Math.pow(l,2)*Math.pow(E.y,2)+Math.pow(s,2)*Math.pow(E.x,2)));isNaN(F)&&(F=0);var V=new gn(F*l*E.y/s,F*-s*E.x/l),H=new gn((r.x+_.x)/2+Math.cos(w)*V.x-Math.sin(w)*V.y,(r.y+_.y)/2+Math.sin(w)*V.x+Math.cos(w)*V.y),Y=PI([1,0],[(E.x-V.x)/l,(E.y-V.y)/s]),D=[(E.x-V.x)/l,(E.y-V.y)/s],tt=[(-E.x-V.x)/l,(-E.y-V.y)/s],ot=PI(D,tt);return tf(D,tt)<=-1&&(ot=Math.PI),tf(D,tt)>=1&&(ot=0),{currentPoint:_,rX:l,rY:s,sweepFlag:I,xAxisRotation:w,centp:H,a1:Y,ad:ot}}pathA(e,r){var{pathParser:o}=this,{currentPoint:l,rX:s,rY:p,sweepFlag:m,xAxisRotation:I,centp:w,a1:_,ad:E}=Ur.pathA(o),U=1-m?1:-1,F=_+U*(E/2),V=new gn(w.x+s*Math.cos(F),w.y+p*Math.sin(F));if(o.addMarkerAngle(V,F-U*Math.PI/2),o.addMarkerAngle(l,F-U*Math.PI),r.addPoint(l.x,l.y),e&&!isNaN(_)&&!isNaN(E)){var H=s>p?s:p,Y=s>p?1:s/p,D=s>p?p/s:1;e.translate(w.x,w.y),e.rotate(I),e.scale(Y,D),e.arc(0,0,H,_,_+E,!!(1-m)),e.scale(1/Y,1/D),e.rotate(-I),e.translate(-w.x,-w.y)}}static pathZ(e){e.current=e.start}pathZ(e,r){Ur.pathZ(this.pathParser),e&&r.x1!==r.x2&&r.y1!==r.y2&&e.closePath()}},Pg=class extends Ur{constructor(e,r,o){super(e,r,o),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},sA=class extends WA{constructor(e,r,o){super(e,r,new.target===sA?!0:o),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,r);var o=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();o&&(e.textBaseline=o)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!=="text")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var r=null;return this.children.forEach((o,l)=>{var s=this.getChildBoundingBox(e,this,this,l);r?r.addBoundingBox(s):r=s}),r}getFontSize(){var{document:e,parent:r}=this,o=gs.parse(e.ctx.font).fontSize,l=r.getStyle("font-size").getNumber(o);return l}getTElementBoundingBox(e){var r=this.getFontSize();return new Oo(this.x,this.y-r,this.x+this.measureText(e),this.y)}getGlyph(e,r,o){var l=r[o],s=null;if(e.isArabic){var p=r.length,m=r[o-1],I=r[o+1],w="isolated";if((o===0||m===" ")&&o<p-1&&I!==" "&&(w="terminal"),o>0&&m!==" "&&o<p-1&&I!==" "&&(w="medial"),o>0&&m!==" "&&(o===p-1||I===" ")&&(w="initial"),typeof e.glyphs[l]<"u"){var _=e.glyphs[l];s=_ instanceof Pg?_:_[w]}}else s=e.glyphs[l];return s||(s=e.missingGlyph),s}getText(){return""}getTextFromNode(e){var r=e||this.node,o=Array.from(r.parentNode.childNodes),l=o.indexOf(r),s=o.length-1,p=gu(r.textContent||"");return l===0&&(p=g5(p)),l===s&&(p=d5(p)),p}renderChildren(e){if(this.type!=="text"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((o,l)=>{this.renderChild(e,this,this,l)});var{mouse:r}=this.document.screen;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){var{document:r,parent:o}=this,l=this.getText(),s=o.getStyle("font-family").getDefinition();if(s){for(var{unitsPerEm:p}=s.fontFace,m=gs.parse(r.ctx.font),I=o.getStyle("font-size").getNumber(m.fontSize),w=o.getStyle("font-style").getString(m.fontStyle),_=I/p,E=s.isRTL?l.split("").reverse().join(""):l,U=Ko(o.getAttribute("dx").getString()),F=E.length,V=0;V<F;V++){var H=this.getGlyph(s,E,V);e.translate(this.x,this.y),e.scale(_,-_);var Y=e.lineWidth;e.lineWidth=e.lineWidth*p/I,w==="italic"&&e.transform(1,0,.4,1,0,0),H.render(e),w==="italic"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=Y,e.scale(1/_,-1/_),e.translate(-this.x,-this.y),this.x+=I*(H.horizAdvX||s.horizAdvX)/p,typeof U[V]<"u"&&!isNaN(U[V])&&(this.x+=U[V])}return}var{x:D,y:tt}=this;e.fillStyle&&e.fillText(l,D,tt),e.strokeStyle&&e.strokeText(l,D,tt)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],r=e.getStyle("text-anchor").getString("start"),o=!1,l=0;r==="start"&&!o||r==="end"&&o?l=e.x-this.minX:r==="end"&&!o||r==="start"&&o?l=e.x-this.maxX:l=e.x-(this.minX+this.maxX)/2;for(var s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=l;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach((r,o)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,o)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,r,o,l){var s=o.children[l];s.children.length>0?s.children.forEach((p,m)=>{r.adjustChildCoordinatesRecursiveCore(e,r,s,m)}):this.adjustChildCoordinates(e,r,o,l)}adjustChildCoordinates(e,r,o,l){var s=o.children[l];if(typeof s.measureText!="function")return s;e.save(),s.setContext(e,!0);var p=s.getAttribute("x"),m=s.getAttribute("y"),I=s.getAttribute("dx"),w=s.getAttribute("dy"),_=s.getStyle("font-family").getDefinition(),E=!!_&&_.isRTL;l===0&&(p.hasValue()||p.setValue(s.getInheritedAttribute("x")),m.hasValue()||m.setValue(s.getInheritedAttribute("y")),I.hasValue()||I.setValue(s.getInheritedAttribute("dx")),w.hasValue()||w.setValue(s.getInheritedAttribute("dy")));var U=s.measureText(e);return E&&(r.x-=U),p.hasValue()?(r.applyAnchoring(),s.x=p.getPixels("x"),I.hasValue()&&(s.x+=I.getPixels("x"))):(I.hasValue()&&(r.x+=I.getPixels("x")),s.x=r.x),r.x=s.x,E||(r.x+=U),m.hasValue()?(s.y=m.getPixels("y"),w.hasValue()&&(s.y+=w.getPixels("y"))):(w.hasValue()&&(r.y+=w.getPixels("y")),s.y=r.y),r.y=s.y,r.leafTexts.push(s),r.minX=Math.min(r.minX,s.x,s.x+U),r.maxX=Math.max(r.maxX,s.x,s.x+U),s.clearContext(e),e.restore(),s}getChildBoundingBox(e,r,o,l){var s=o.children[l];if(typeof s.getBoundingBox!="function")return null;var p=s.getBoundingBox(e);return p?(s.children.forEach((m,I)=>{var w=r.getChildBoundingBox(e,r,s,I);p.addBoundingBox(w)}),p):null}renderChild(e,r,o,l){var s=o.children[l];s.render(e),s.children.forEach((p,m)=>{r.renderChild(e,r,s,m)})}measureText(e){var{measureCache:r}=this;if(~r)return r;var o=this.getText(),l=this.measureTargetText(e,o);return this.measureCache=l,l}measureTargetText(e,r){if(!r.length)return 0;var{parent:o}=this,l=o.getStyle("font-family").getDefinition();if(l){for(var s=this.getFontSize(),p=l.isRTL?r.split("").reverse().join(""):r,m=Ko(o.getAttribute("dx").getString()),I=p.length,w=0,_=0;_<I;_++){var E=this.getGlyph(l,p,_);w+=(E.horizAdvX||l.horizAdvX)*s/l.fontFace.unitsPerEm,typeof m[_]<"u"&&!isNaN(m[_])&&(w+=m[_])}return w}if(!e.measureText)return r.length*10;e.save(),this.setContext(e,!0);var{width:U}=e.measureText(r);return this.clearContext(e),e.restore(),U}getInheritedAttribute(e){for(var r=this;r instanceof sA&&r.isFirstChild();){var o=r.parent.getAttribute(e);if(o.hasValue(!0))return o.getValue("0");r=r.parent}return null}},ou=class extends sA{constructor(e,r,o){super(e,r,new.target===ou?!0:o),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}},zI=class extends ou{constructor(){super(...arguments),this.type="textNode"}},vc=class extends WA{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(e){var r,{document:o}=this,{screen:l,window:s}=o,p=e.canvas;if(l.setDefaults(e),p.style&&typeof e.font<"u"&&s&&typeof s.getComputedStyle<"u"){e.font=s.getComputedStyle(p).getPropertyValue("font");var m=new Pi(o,"fontSize",gs.parse(e.font).fontSize);m.hasValue()&&(o.rootEmSize=m.getPixels("y"),o.emSize=o.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:I,height:w}=l.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var _=this.getAttribute("refX"),E=this.getAttribute("refY"),U=this.getAttribute("viewBox"),F=U.hasValue()?Ko(U.getString()):null,V=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",H=0,Y=0,D=0,tt=0;F&&(H=F[0],Y=F[1]),this.root||(I=this.getStyle("width").getPixels("x"),w=this.getStyle("height").getPixels("y"),this.type==="marker"&&(D=H,tt=Y,H=0,Y=0)),l.viewPort.setCurrent(I,w),this.node&&(!this.parent||((r=this.node.parentNode)===null||r===void 0?void 0:r.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),F&&(I=F[2],w=F[3]),o.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:l.viewPort.width,desiredWidth:I,height:l.viewPort.height,desiredHeight:w,minX:H,minY:Y,refX:_.getValue(),refY:E.getValue(),clip:V,clipX:D,clipY:tt}),F&&(l.viewPort.removeCurrent(),l.viewPort.setCurrent(I,w))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.getAttribute("width",!0),s=this.getAttribute("height",!0),p=this.getAttribute("viewBox"),m=this.getAttribute("style"),I=l.getNumber(0),w=s.getNumber(0);if(o)if(typeof o=="string")this.getAttribute("preserveAspectRatio",!0).setValue(o);else{var _=this.getAttribute("preserveAspectRatio");_.hasValue()&&_.setValue(_.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(l.setValue(e),s.setValue(r),p.hasValue()||p.setValue("0 0 ".concat(I||e," ").concat(w||r)),m.hasValue()){var E=this.getStyle("width"),U=this.getStyle("height");E.hasValue()&&E.setValue("".concat(e,"px")),U.hasValue()&&U.setValue("".concat(r,"px"))}}},Hg=class extends Ur{constructor(){super(...arguments),this.type="rect"}path(e){var r=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),l=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),p=this.getAttribute("rx"),m=this.getAttribute("ry"),I=p.getPixels("x"),w=m.getPixels("y");if(p.hasValue()&&!m.hasValue()&&(w=I),m.hasValue()&&!p.hasValue()&&(I=w),I=Math.min(I,l/2),w=Math.min(w,s/2),e){var _=4*((Math.sqrt(2)-1)/3);e.beginPath(),s>0&&l>0&&(e.moveTo(r+I,o),e.lineTo(r+l-I,o),e.bezierCurveTo(r+l-I+_*I,o,r+l,o+w-_*w,r+l,o+w),e.lineTo(r+l,o+s-w),e.bezierCurveTo(r+l,o+s-w+_*w,r+l-I+_*I,o+s,r+l-I,o+s),e.lineTo(r+I,o+s),e.bezierCurveTo(r+I-_*I,o+s,r,o+s-w+_*w,r,o+s-w),e.lineTo(r,o+w),e.bezierCurveTo(r,o+w-_*w,r+I-_*I,o,r+I,o),e.closePath())}return new Oo(r,o,r+l,o+s)}getMarkers(){return null}},cf=class extends Ur{constructor(){super(...arguments),this.type="circle"}path(e){var r=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y"),l=this.getAttribute("r").getPixels();return e&&l>0&&(e.beginPath(),e.arc(r,o,l,0,Math.PI*2,!1),e.closePath()),new Oo(r-l,o-l,r+l,o+l)}getMarkers(){return null}},uf=class extends Ur{constructor(){super(...arguments),this.type="ellipse"}path(e){var r=4*((Math.sqrt(2)-1)/3),o=this.getAttribute("rx").getPixels("x"),l=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),p=this.getAttribute("cy").getPixels("y");return e&&o>0&&l>0&&(e.beginPath(),e.moveTo(s+o,p),e.bezierCurveTo(s+o,p+r*l,s+r*o,p+l,s,p+l),e.bezierCurveTo(s-r*o,p+l,s-o,p+r*l,s-o,p),e.bezierCurveTo(s-o,p-r*l,s-r*o,p-l,s,p-l),e.bezierCurveTo(s+r*o,p-l,s+o,p-r*l,s+o,p),e.closePath()),new Oo(s-o,p-l,s+o,p+l)}getMarkers(){return null}},hf=class extends Ur{constructor(){super(...arguments),this.type="line"}getPoints(){return[new gn(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new gn(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){var[{x:r,y:o},{x:l,y:s}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(r,o),e.lineTo(l,s)),new Oo(r,o,l,s)}getMarkers(){var[e,r]=this.getPoints(),o=e.angleTo(r);return[[e,o],[r,o]]}},Mg=class extends Ur{constructor(e,r,o){super(e,r,o),this.type="polyline",this.points=[],this.points=gn.parsePath(this.getAttribute("points").getString())}path(e){var{points:r}=this,[{x:o,y:l}]=r,s=new Oo(o,l);return e&&(e.beginPath(),e.moveTo(o,l)),r.forEach(p=>{var{x:m,y:I}=p;s.addPoint(m,I),e&&e.lineTo(m,I)}),s}getMarkers(){var{points:e}=this,r=e.length-1,o=[];return e.forEach((l,s)=>{s!==r&&o.push([l,l.angleTo(e[s+1])])}),o.length>0&&o.push([e[e.length-1],o[o.length-1][1]]),o}},gf=class extends Mg{constructor(){super(...arguments),this.type="polygon"}path(e){var r=super.path(e),[{x:o,y:l}]=this.points;return e&&(e.lineTo(o,l),e.closePath()),r}},df=class extends Yr{constructor(){super(...arguments),this.type="pattern"}createPattern(e,r,o){var l=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),p=new vc(this.document,null);p.attributes.viewBox=new Pi(this.document,"viewBox",this.getAttribute("viewBox").getValue()),p.attributes.width=new Pi(this.document,"width","".concat(l,"px")),p.attributes.height=new Pi(this.document,"height","".concat(s,"px")),p.attributes.transform=new Pi(this.document,"transform",this.getAttribute("patternTransform").getValue()),p.children=this.children;var m=this.document.createCanvas(l,s),I=m.getContext("2d"),w=this.getAttribute("x"),_=this.getAttribute("y");w.hasValue()&&_.hasValue()&&I.translate(w.getPixels("x",!0),_.getPixels("y",!0)),o.hasValue()?this.styles["fill-opacity"]=o:Reflect.deleteProperty(this.styles,"fill-opacity");for(var E=-1;E<=1;E++)for(var U=-1;U<=1;U++)I.save(),p.attributes.x=new Pi(this.document,"x",E*m.width),p.attributes.y=new Pi(this.document,"y",U*m.height),p.render(I),I.restore();var F=e.createPattern(m,"repeat");return F}},pf=class extends Yr{constructor(){super(...arguments),this.type="marker"}render(e,r,o){if(r){var{x:l,y:s}=r,p=this.getAttribute("orient").getString("auto"),m=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(l,s),p==="auto"&&e.rotate(o),m==="strokeWidth"&&e.scale(e.lineWidth,e.lineWidth),e.save();var I=new vc(this.document,null);I.type=this.type,I.attributes.viewBox=new Pi(this.document,"viewBox",this.getAttribute("viewBox").getValue()),I.attributes.refX=new Pi(this.document,"refX",this.getAttribute("refX").getValue()),I.attributes.refY=new Pi(this.document,"refY",this.getAttribute("refY").getValue()),I.attributes.width=new Pi(this.document,"width",this.getAttribute("markerWidth").getValue()),I.attributes.height=new Pi(this.document,"height",this.getAttribute("markerHeight").getValue()),I.attributes.overflow=new Pi(this.document,"overflow",this.getAttribute("overflow").getValue()),I.attributes.fill=new Pi(this.document,"fill",this.getAttribute("fill").getColor("black")),I.attributes.stroke=new Pi(this.document,"stroke",this.getAttribute("stroke").getValue("none")),I.children=this.children,I.render(e),e.restore(),m==="strokeWidth"&&e.scale(1/e.lineWidth,1/e.lineWidth),p==="auto"&&e.rotate(-o),e.translate(-l,-s)}}},ff=class extends Yr{constructor(){super(...arguments),this.type="defs"}render(){}},dh=class extends WA{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var r=new Oo;return this.children.forEach(o=>{r.addBoundingBox(o.getBoundingBox(e))}),r}},Ng=class extends Yr{constructor(e,r,o){super(e,r,o),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:l,children:s}=this;s.forEach(p=>{p.type==="stop"&&l.push(p)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,r,o){var l=this;this.getHrefAttribute().hasValue()&&(l=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(l));var{stops:s}=l,p=this.getGradient(e,r);if(!p)return this.addParentOpacity(o,s[s.length-1].color);if(s.forEach(Y=>{p.addColorStop(Y.offset,this.addParentOpacity(o,Y.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:m}=this,{MAX_VIRTUAL_PIXELS:I,viewPort:w}=m.screen,[_]=w.viewPorts,E=new Hg(m,null);E.attributes.x=new Pi(m,"x",-I/3),E.attributes.y=new Pi(m,"y",-I/3),E.attributes.width=new Pi(m,"width",I),E.attributes.height=new Pi(m,"height",I);var U=new dh(m,null);U.attributes.transform=new Pi(m,"transform",this.getAttribute("gradientTransform").getValue()),U.children=[E];var F=new vc(m,null);F.attributes.x=new Pi(m,"x",0),F.attributes.y=new Pi(m,"y",0),F.attributes.width=new Pi(m,"width",_.width),F.attributes.height=new Pi(m,"height",_.height),F.children=[U];var V=m.createCanvas(_.width,_.height),H=V.getContext("2d");return H.fillStyle=p,F.render(H),H.createPattern(V,"no-repeat")}return p}inheritStopContainer(e){this.attributesToInherit.forEach(r=>{!this.getAttribute(r).hasValue()&&e.getAttribute(r).hasValue()&&this.getAttribute(r,!0).setValue(e.getAttribute(r).getValue())})}addParentOpacity(e,r){if(e.hasValue()){var o=new Pi(this.document,"color",r);return o.addOpacity(e).getColor()}return r}},mf=class extends Ng{constructor(e,r,o){super(e,r,o),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(e,r){var o=this.getGradientUnits()==="objectBoundingBox",l=o?r.getBoundingBox(e):null;if(o&&!l)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var s=o?l.x+l.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),p=o?l.y+l.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),m=o?l.x+l.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),I=o?l.y+l.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===m&&p===I?null:e.createLinearGradient(s,p,m,I)}},Cf=class extends Ng{constructor(e,r,o){super(e,r,o),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(e,r){var o=this.getGradientUnits()==="objectBoundingBox",l=r.getBoundingBox(e);if(o&&!l)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var s=o?l.x+l.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),p=o?l.y+l.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),m=s,I=p;this.getAttribute("fx").hasValue()&&(m=o?l.x+l.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(I=o?l.y+l.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var w=o?(l.width+l.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),_=this.getAttribute("fr").getPixels();return e.createRadialGradient(m,I,_,s,p,w)}},If=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="stop";var l=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity"),p=this.getStyle("stop-color",!0);p.getString()===""&&p.setValue("#000"),s.hasValue()&&(p=p.addOpacity(s)),this.offset=l,this.color=p.getColor()}},ph=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Pi(e,"values",null);var l=this.getAttribute("values");l.hasValue()&&this.values.setValue(l.getString().split(";"))}getProperty(){var e=this.getAttribute("attributeType").getString(),r=this.getAttribute("attributeName").getString();return e==="CSS"?this.parent.getStyle(r,!0):this.parent.getAttribute(r,!0)}calcValue(){var{initialUnits:e}=this,{progress:r,from:o,to:l}=this.getProgress(),s=o.getNumber()+(l.getNumber()-o.getNumber())*r;return e==="%"&&(s*=100),"".concat(s).concat(e)}update(e){var{parent:r}=this,o=this.getProperty();if(this.initialValue||(this.initialValue=o.getString(),this.initialUnits=o.getUnits()),this.duration>this.maxDuration){var l=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(l==="freeze"&&!this.frozen)this.frozen=!0,r.animationFrozen=!0,r.animationFrozenValue=o.getString();else if(l==="remove"&&!this.removed)return this.removed=!0,o.setValue(r.animationFrozen?r.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;var s=!1;if(this.begin<this.duration){var p=this.calcValue(),m=this.getAttribute("type");if(m.hasValue()){var I=m.getString();p="".concat(I,"(").concat(p,")")}o.setValue(p),s=!0}return s}getProgress(){var{document:e,values:r}=this,o={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(r.hasValue()){var l=o.progress*(r.getValue().length-1),s=Math.floor(l),p=Math.ceil(l);o.from=new Pi(e,"from",parseFloat(r.getValue()[s])),o.to=new Pi(e,"to",parseFloat(r.getValue()[p])),o.progress=(l-s)/(p-s)}else o.from=this.from,o.to=this.to;return o}},yf=class extends ph{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:e,from:r,to:o}=this.getProgress(),l=new QI(r.getColor()),s=new QI(o.getColor());if(l.ok&&s.ok){var p=l.r+(s.r-l.r)*e,m=l.g+(s.g-l.g)*e,I=l.b+(s.b-l.b)*e;return"rgb(".concat(Math.floor(p),", ").concat(Math.floor(m),", ").concat(Math.floor(I),")")}return this.getAttribute("from").getColor()}},bf=class extends ph{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:e,from:r,to:o}=this.getProgress(),l=Ko(r.getString()),s=Ko(o.getString()),p=l.map((m,I)=>{var w=s[I];return m+(w-m)*e}).join(" ");return p}},vf=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:l}=e,{children:s}=this;for(var p of s)switch(p.type){case"font-face":{this.fontFace=p;var m=p.getStyle("font-family");m.hasValue()&&(l[m.getString()]=this);break}case"missing-glyph":this.missingGlyph=p;break;case"glyph":{var I=p;I.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[I.unicode]>"u"&&(this.glyphs[I.unicode]={}),this.glyphs[I.unicode][I.arabicForm]=I):this.glyphs[I.unicode]=I;break}}}render(){}},wf=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},Bf=class extends Ur{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}},_f=class extends sA{constructor(){super(...arguments),this.type="tref"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var r=e.children[0];if(r)return r.getText()}return""}},xf=class extends sA{constructor(e,r,o){super(e,r,o),this.type="a";var{childNodes:l}=r,s=l[0],p=l.length>0&&Array.from(l).every(m=>m.nodeType===3);this.hasText=p,this.text=p?this.getTextFromNode(s):""}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:r,x:o,y:l}=this,{mouse:s}=r.screen,p=new Pi(r,"fontSize",gs.parse(r.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new Oo(o,l-p.getPixels("y"),o+this.measureText(e),l))}else if(this.children.length>0){var m=new dh(this.document,null);m.children=this.children,m.parent=this,m.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){var e=this.document.ctx;e.canvas.style.cursor="pointer"}};Sf=class extends sA{constructor(e,r,o){super(e,r,o),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var l=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(l)}getText(){return this.text}path(e){var{dataArray:r}=this;e&&e.beginPath(),r.forEach(o=>{var{type:l,points:s}=o;switch(l){case ir.LINE_TO:e&&e.lineTo(s[0],s[1]);break;case ir.MOVE_TO:e&&e.moveTo(s[0],s[1]);break;case ir.CURVE_TO:e&&e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case ir.QUAD_TO:e&&e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case ir.ARC:{var[p,m,I,w,_,E,U,F]=s,V=I>w?I:w,H=I>w?1:I/w,Y=I>w?w/I:1;e&&(e.translate(p,m),e.rotate(U),e.scale(H,Y),e.arc(0,0,V,_,_+E,!!(1-F)),e.scale(1/H,1/Y),e.rotate(-U),e.translate(-p,-m));break}case ir.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();var r=this.parent.getStyle("text-decoration").getString(),o=this.getFontSize(),{glyphInfo:l}=this,s=e.fillStyle;r==="underline"&&e.beginPath(),l.forEach((p,m)=>{var{p0:I,p1:w,rotation:_,text:E}=p;e.save(),e.translate(I.x,I.y),e.rotate(_),e.fillStyle&&e.fillText(E,0,0),e.strokeStyle&&e.strokeText(E,0,0),e.restore(),r==="underline"&&(m===0&&e.moveTo(I.x,I.y+o/8),e.lineTo(w.x,w.y+o/5))}),r==="underline"&&(e.lineWidth=o/20,e.strokeStyle=s,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,r,o,l,s,p,m,I,w){var _=p,E=this.measureText(e,I);I===" "&&r==="justify"&&o<l&&(E+=(l-o)/s),w>-1&&(_+=this.getLetterSpacingAt(w));var U=this.textHeight/20,F=this.getEquidistantPointOnPath(_,U,0),V=this.getEquidistantPointOnPath(_+E,U,0),H={p0:F,p1:V},Y=F&&V?Math.atan2(V.y-F.y,V.x-F.x):0;if(m){var D=Math.cos(Math.PI/2+Y)*m,tt=Math.cos(-Y)*m;H.p0=Hp(Hp({},F),{},{x:F.x+D,y:F.y+tt}),H.p1=Hp(Hp({},V),{},{x:V.x+D,y:V.y+tt})}return _+=E,{offset:_,segment:H,rotation:Y}}measureText(e,r){var{measuresCache:o}=this,l=r||this.getText();if(o.has(l))return o.get(l);var s=this.measureTargetText(e,l);return o.set(l,s),s}setTextData(e){if(!this.glyphInfo){var r=this.getText(),o=r.split(""),l=r.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(bt=>bt.getPixels("x")),p=this.parent.getAttribute("dy").getPixels("y"),m=this.parent.getStyle("text-anchor").getString("start"),I=this.getStyle("letter-spacing"),w=this.parent.getStyle("letter-spacing"),_=0;!I.hasValue()||I.getValue()==="inherit"?_=w.getPixels():I.hasValue()&&I.getValue()!=="initial"&&I.getValue()!=="unset"&&(_=I.getPixels());var E=[],U=r.length;this.letterSpacingCache=E;for(var F=0;F<U;F++)E.push(typeof s[F]<"u"?s[F]:_);var V=E.reduce((bt,kt,Lt)=>Lt===0?0:bt+kt||0,0),H=this.measureText(e),Y=Math.max(H+V,0);this.textWidth=H,this.textHeight=this.getFontSize(),this.glyphInfo=[];var D=this.getPathLength(),tt=this.getStyle("startOffset").getNumber(0)*D,ot=0;(m==="middle"||m==="center")&&(ot=-Y/2),(m==="end"||m==="right")&&(ot=-Y),ot+=tt,o.forEach((bt,kt)=>{var{offset:Lt,segment:vt,rotation:ft}=this.findSegmentToFitChar(e,m,Y,D,l,ot,p,bt,kt);ot=Lt,!(!vt.p0||!vt.p1)&&this.glyphInfo.push({text:o[kt],p0:vt.p0,p1:vt.p1,rotation:ft})})}}parsePathData(e){if(this.pathLength=-1,!e)return[];var r=[],{pathParser:o}=e;for(o.reset();!o.isEnd();){var{current:l}=o,s=l?l.x:0,p=l?l.y:0,m=o.next(),I=m.type,w=[];switch(m.type){case ir.MOVE_TO:this.pathM(o,w);break;case ir.LINE_TO:I=this.pathL(o,w);break;case ir.HORIZ_LINE_TO:I=this.pathH(o,w);break;case ir.VERT_LINE_TO:I=this.pathV(o,w);break;case ir.CURVE_TO:this.pathC(o,w);break;case ir.SMOOTH_CURVE_TO:I=this.pathS(o,w);break;case ir.QUAD_TO:this.pathQ(o,w);break;case ir.SMOOTH_QUAD_TO:I=this.pathT(o,w);break;case ir.ARC:w=this.pathA(o);break;case ir.CLOSE_PATH:Ur.pathZ(o);break}m.type!==ir.CLOSE_PATH?r.push({type:I,points:w,start:{x:s,y:p},pathLength:this.calcLength(s,p,I,w)}):r.push({type:ir.CLOSE_PATH,points:[],pathLength:0})}return r}pathM(e,r){var{x:o,y:l}=Ur.pathM(e).point;r.push(o,l)}pathL(e,r){var{x:o,y:l}=Ur.pathL(e).point;return r.push(o,l),ir.LINE_TO}pathH(e,r){var{x:o,y:l}=Ur.pathH(e).point;return r.push(o,l),ir.LINE_TO}pathV(e,r){var{x:o,y:l}=Ur.pathV(e).point;return r.push(o,l),ir.LINE_TO}pathC(e,r){var{point:o,controlPoint:l,currentPoint:s}=Ur.pathC(e);r.push(o.x,o.y,l.x,l.y,s.x,s.y)}pathS(e,r){var{point:o,controlPoint:l,currentPoint:s}=Ur.pathS(e);return r.push(o.x,o.y,l.x,l.y,s.x,s.y),ir.CURVE_TO}pathQ(e,r){var{controlPoint:o,currentPoint:l}=Ur.pathQ(e);r.push(o.x,o.y,l.x,l.y)}pathT(e,r){var{controlPoint:o,currentPoint:l}=Ur.pathT(e);return r.push(o.x,o.y,l.x,l.y),ir.QUAD_TO}pathA(e){var{rX:r,rY:o,sweepFlag:l,xAxisRotation:s,centp:p,a1:m,ad:I}=Ur.pathA(e);return l===0&&I>0&&(I-=2*Math.PI),l===1&&I<0&&(I+=2*Math.PI),[p.x,p.y,r,o,m,I,s,l]}calcLength(e,r,o,l){var s=0,p=null,m=null,I=0;switch(o){case ir.LINE_TO:return this.getLineLength(e,r,l[0],l[1]);case ir.CURVE_TO:for(s=0,p=this.getPointOnCubicBezier(0,e,r,l[0],l[1],l[2],l[3],l[4],l[5]),I=.01;I<=1;I+=.01)m=this.getPointOnCubicBezier(I,e,r,l[0],l[1],l[2],l[3],l[4],l[5]),s+=this.getLineLength(p.x,p.y,m.x,m.y),p=m;return s;case ir.QUAD_TO:for(s=0,p=this.getPointOnQuadraticBezier(0,e,r,l[0],l[1],l[2],l[3]),I=.01;I<=1;I+=.01)m=this.getPointOnQuadraticBezier(I,e,r,l[0],l[1],l[2],l[3]),s+=this.getLineLength(p.x,p.y,m.x,m.y),p=m;return s;case ir.ARC:{s=0;var w=l[4],_=l[5],E=l[4]+_,U=Math.PI/180;if(Math.abs(w-E)<U&&(U=Math.abs(w-E)),p=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],w,0),_<0)for(I=w-U;I>E;I-=U)m=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],I,0),s+=this.getLineLength(p.x,p.y,m.x,m.y),p=m;else for(I=w+U;I<E;I+=U)m=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],I,0),s+=this.getLineLength(p.x,p.y,m.x,m.y),p=m;return m=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],E,0),s+=this.getLineLength(p.x,p.y,m.x,m.y),s}}return 0}getPointOnLine(e,r,o,l,s){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:r,m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:o,I=(s-o)/(l-r+ru),w=Math.sqrt(e*e/(1+I*I));l<r&&(w*=-1);var _=I*w,E=null;if(l===r)E={x:p,y:m+_};else if((m-o)/(p-r+ru)===I)E={x:p+w,y:m+_};else{var U=0,F=0,V=this.getLineLength(r,o,l,s);if(V<ru)return null;var H=(p-r)*(l-r)+(m-o)*(s-o);H/=V*V,U=r+H*(l-r),F=o+H*(s-o);var Y=this.getLineLength(p,m,U,F),D=Math.sqrt(e*e-Y*Y);w=Math.sqrt(D*D/(1+I*I)),l<r&&(w*=-1),_=I*w,E={x:U+w,y:F+_}}return E}getPointOnPath(e){var r=this.getPathLength(),o=0,l=null;if(e<-5e-5||e-5e-5>r)return null;var{dataArray:s}=this;for(var p of s){if(p&&(p.pathLength<5e-5||o+p.pathLength+5e-5<e)){o+=p.pathLength;continue}var m=e-o,I=0;switch(p.type){case ir.LINE_TO:l=this.getPointOnLine(m,p.start.x,p.start.y,p.points[0],p.points[1],p.start.x,p.start.y);break;case ir.ARC:{var w=p.points[4],_=p.points[5],E=p.points[4]+_;if(I=w+m/p.pathLength*_,_<0&&I<E||_>=0&&I>E)break;l=this.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],I,p.points[6]);break}case ir.CURVE_TO:I=m/p.pathLength,I>1&&(I=1),l=this.getPointOnCubicBezier(I,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case ir.QUAD_TO:I=m/p.pathLength,I>1&&(I=1),l=this.getPointOnQuadraticBezier(I,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3]);break}if(l)return l;break}return null}getLineLength(e,r,o,l){return Math.sqrt((o-e)*(o-e)+(l-r)*(l-r))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,r)=>r.pathLength>0?e+r.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,r,o,l,s,p,m,I,w){var _=I*HI(e)+p*MI(e)+l*NI(e)+r*VI(e),E=w*HI(e)+m*MI(e)+s*NI(e)+o*VI(e);return{x:_,y:E}}getPointOnQuadraticBezier(e,r,o,l,s,p,m){var I=p*DI(e)+l*KI(e)+r*OI(e),w=m*DI(e)+s*KI(e)+o*OI(e);return{x:I,y:w}}getPointOnEllipticalArc(e,r,o,l,s,p){var m=Math.cos(p),I=Math.sin(p),w={x:o*Math.cos(s),y:l*Math.sin(s)};return{x:e+(w.x*m-w.y*I),y:r+(w.x*I+w.y*m)}}buildEquidistantCache(e,r){var o=this.getPathLength(),l=r||.25,s=e||o/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==l){this.equidistantCache={step:s,precision:l,points:[]};for(var p=0,m=0;m<=o;m+=l){var I=this.getPointOnPath(m),w=this.getPointOnPath(m+l);!I||!w||(p+=this.getLineLength(I.x,I.y,w.x,w.y),p>=s&&(this.equidistantCache.points.push({x:I.x,y:I.y,distance:m}),p-=s))}}}getEquidistantPointOnPath(e,r,o){if(this.buildEquidistantCache(r,o),e<0||e-this.getPathLength()>5e-5)return null;var l=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[l]||null}},b6=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Ff=class extends WA{constructor(e,r,o){super(e,r,o),this.type="image",this.loaded=!1;var l=this.getHrefAttribute().getString();if(l){var s=l.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(l);e.images.push(this),s?this.loadSvg(l):this.loadImage(l),this.isSvg=s}}loadImage(e){var r=this;return El(function*(){try{var o=yield r.document.createImage(e);r.image=o}catch(l){console.error('Error while loading image "'.concat(e,'":'),l)}r.loaded=!0})()}loadSvg(e){var r=this;return El(function*(){var o=b6.exec(e);if(o){var l=o[5];o[4]==="base64"?r.image=atob(l):r.image=decodeURIComponent(l)}else try{var s=yield r.document.fetch(e),p=yield s.text();r.image=p}catch(m){console.error('Error while loading image "'.concat(e,'":'),m)}r.loaded=!0})()}renderChildren(e){var{document:r,image:o,loaded:l}=this,s=this.getAttribute("x").getPixels("x"),p=this.getAttribute("y").getPixels("y"),m=this.getStyle("width").getPixels("x"),I=this.getStyle("height").getPixels("y");if(!(!l||!o||!m||!I)){if(e.save(),e.translate(s,p),this.isSvg){var w=r.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:m,scaleHeight:I});w.document.documentElement.parent=this,w.render()}else{var _=this.image;r.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:m,desiredWidth:_.width,height:I,desiredHeight:_.height}),this.loaded&&(typeof _.complete>"u"||_.complete)&&e.drawImage(_,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");return new Oo(e,r,e+o,r+l)}},kf=class extends WA{constructor(){super(...arguments),this.type="symbol"}render(e){}},Lf=class{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,r){var o=this;return El(function*(){try{var{document:l}=o,s=yield l.canvg.parser.load(r),p=s.getElementsByTagName("font");Array.from(p).forEach(m=>{var I=l.createElement(m);l.definitions[e]=I})}catch(m){console.error('Error while loading font "'.concat(r,'":'),m)}o.loaded=!0})()}},Vg=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="style";var l=gu(Array.from(r.childNodes).map(p=>p.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),s=l.split("}");s.forEach(p=>{var m=p.trim();if(m){var I=m.split("{"),w=I[0].split(","),_=I[1].split(";");w.forEach(E=>{var U=E.trim();if(U){var F=e.styles[U]||{};if(_.forEach(Y=>{var D=Y.indexOf(":"),tt=Y.substr(0,D).trim(),ot=Y.substr(D+1,Y.length-D).trim();tt&&ot&&(F[tt]=new Pi(e,tt,ot))}),e.styles[U]=F,e.stylesSpecificity[U]=m5(U),U==="@font-face"){var V=F["font-family"].getString().replace(/"|'/g,""),H=F.src.getString().split(",");H.forEach(Y=>{if(Y.indexOf('format("svg")')>0){var D=Ly(Y);D&&new Lf(e).load(V,D)}})}}})}})}};Vg.parseExternalUrl=Ly;Ef=class extends WA{constructor(){super(...arguments),this.type="use"}setContext(e){super.setContext(e);var r=this.getAttribute("x"),o=this.getAttribute("y");r.hasValue()&&e.translate(r.getPixels("x"),0),o.hasValue()&&e.translate(0,o.getPixels("y"))}path(e){var{element:r}=this;r&&r.path(e)}renderChildren(e){var{document:r,element:o}=this;if(o){var l=o;if(o.type==="symbol"&&(l=new vc(r,null),l.attributes.viewBox=new Pi(r,"viewBox",o.getAttribute("viewBox").getString()),l.attributes.preserveAspectRatio=new Pi(r,"preserveAspectRatio",o.getAttribute("preserveAspectRatio").getString()),l.attributes.overflow=new Pi(r,"overflow",o.getAttribute("overflow").getString()),l.children=o.children,o.styles.opacity=new Pi(r,"opacity",this.calculateOpacity())),l.type==="svg"){var s=this.getStyle("width",!1,!0),p=this.getStyle("height",!1,!0);s.hasValue()&&(l.attributes.width=new Pi(r,"width",s.getString())),p.hasValue()&&(l.attributes.height=new Pi(r,"height",p.getString()))}var m=l.parent;l.parent=this,l.render(e),l.parent=m}}getBoundingBox(e){var{element:r}=this;return r?r.getBoundingBox(e):null}elementTransform(){var{document:e,element:r}=this;return zA.fromElement(e,r)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}};Dg=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="feColorMatrix";var l=Ko(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var s=l[0];l=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var p=l[0]*Math.PI/180;l=[kl(p,.213,.787,-.213),kl(p,.715,-.715,-.715),kl(p,.072,-.072,.928),0,0,kl(p,.213,-.213,.143),kl(p,.715,.285,.14),kl(p,.072,-.072,-.283),0,0,kl(p,.213,-.213,-.787),kl(p,.715,-.715,.715),kl(p,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=l,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(e,r,o,l,s){for(var{includeOpacity:p,matrix:m}=this,I=e.getImageData(0,0,l,s),w=0;w<s;w++)for(var _=0;_<l;_++){var E=Mp(I.data,_,w,l,s,0),U=Mp(I.data,_,w,l,s,1),F=Mp(I.data,_,w,l,s,2),V=Mp(I.data,_,w,l,s,3),H=zn(m,0,E)+zn(m,1,U)+zn(m,2,F)+zn(m,3,V)+zn(m,4,1),Y=zn(m,5,E)+zn(m,6,U)+zn(m,7,F)+zn(m,8,V)+zn(m,9,1),D=zn(m,10,E)+zn(m,11,U)+zn(m,12,F)+zn(m,13,V)+zn(m,14,1),tt=zn(m,15,E)+zn(m,16,U)+zn(m,17,F)+zn(m,18,V)+zn(m,19,1);p&&(H=0,Y=0,D=0,tt*=V/255),Np(I.data,_,w,l,s,0,H),Np(I.data,_,w,l,s,1,Y),Np(I.data,_,w,l,s,2,D),Np(I.data,_,w,l,s,3,tt)}e.clearRect(0,0,l,s),e.putImageData(I,0,0)}},au=class extends Yr{constructor(){super(...arguments),this.type="mask"}apply(e,r){var{document:o}=this,l=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),p=this.getStyle("width").getPixels("x"),m=this.getStyle("height").getPixels("y");if(!p&&!m){var I=new Oo;this.children.forEach(V=>{I.addBoundingBox(V.getBoundingBox(e))}),l=Math.floor(I.x1),s=Math.floor(I.y1),p=Math.floor(I.width),m=Math.floor(I.height)}var w=this.removeStyles(r,au.ignoreStyles),_=o.createCanvas(l+p,s+m),E=_.getContext("2d");o.screen.setDefaults(E),this.renderChildren(E),new Dg(o,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(E,0,0,l+p,s+m);var U=o.createCanvas(l+p,s+m),F=U.getContext("2d");o.screen.setDefaults(F),r.render(F),F.globalCompositeOperation="destination-in",F.fillStyle=E.createPattern(_,"no-repeat"),F.fillRect(0,0,l+p,s+m),e.fillStyle=F.createPattern(U,"no-repeat"),e.fillRect(0,0,l+p,s+m),this.restoreStyles(r,w)}render(e){}};au.ignoreStyles=["mask","transform","clip-path"];L_=()=>{},Tf=class extends Yr{constructor(){super(...arguments),this.type="clipPath"}apply(e){var{document:r}=this,o=Reflect.getPrototypeOf(e),{beginPath:l,closePath:s}=e;o&&(o.beginPath=L_,o.closePath=L_),Reflect.apply(l,e,[]),this.children.forEach(p=>{if(!(typeof p.path>"u")){var m=typeof p.elementTransform<"u"?p.elementTransform():null;m||(m=zA.fromElement(r,p)),m&&m.apply(e),p.path(e),o&&(o.closePath=s),m&&m.unapply(e)}}),Reflect.apply(s,e,[]),e.clip(),o&&(o.beginPath=l,o.closePath=s)}render(e){}},Au=class extends Yr{constructor(){super(...arguments),this.type="filter"}apply(e,r){var{document:o,children:l}=this,s=r.getBoundingBox(e);if(s){var p=0,m=0;l.forEach(D=>{var tt=D.extraFilterDistance||0;p=Math.max(p,tt),m=Math.max(m,tt)});var I=Math.floor(s.width),w=Math.floor(s.height),_=I+2*p,E=w+2*m;if(!(_<1||E<1)){var U=Math.floor(s.x),F=Math.floor(s.y),V=this.removeStyles(r,Au.ignoreStyles),H=o.createCanvas(_,E),Y=H.getContext("2d");o.screen.setDefaults(Y),Y.translate(-U+p,-F+m),r.render(Y),l.forEach(D=>{typeof D.apply=="function"&&D.apply(Y,0,0,_,E)}),e.drawImage(H,0,0,_,E,U-p,F-m,_,E),this.restoreStyles(r,V)}}}render(e){}};Au.ignoreStyles=["filter","transform","clip-path"];Uf=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(e,r,o,l,s){}},Qf=class extends Yr{constructor(){super(...arguments),this.type="feMorphology"}apply(e,r,o,l,s){}},Rf=class extends Yr{constructor(){super(...arguments),this.type="feComposite"}apply(e,r,o,l,s){}},Gf=class extends Yr{constructor(e,r,o){super(e,r,o),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,r,o,l,s){var{document:p,blurRadius:m}=this,I=p.window?p.window.document.body:null,w=e.canvas;w.id=p.getUniqueId(),I&&(w.style.display="none",I.appendChild(w)),t6(w,r,o,l,s,m),I&&I.removeChild(w)}},Zf=class extends Yr{constructor(){super(...arguments),this.type="title"}},Pf=class extends Yr{constructor(){super(...arguments),this.type="desc"}},v6={svg:vc,rect:Hg,circle:cf,ellipse:uf,line:hf,polyline:Mg,polygon:gf,path:Ur,pattern:df,marker:pf,defs:ff,linearGradient:mf,radialGradient:Cf,stop:If,animate:ph,animateColor:yf,animateTransform:bf,font:vf,"font-face":wf,"missing-glyph":Bf,glyph:Pg,text:sA,tspan:ou,tref:_f,a:xf,textPath:Sf,image:Ff,g:dh,symbol:kf,style:Vg,use:Ef,mask:au,clipPath:Tf,filter:Au,feDropShadow:Uf,feMorphology:Qf,feComposite:Rf,feColorMatrix:Dg,feGaussianBlur:Gf,title:Zf,desc:Pf};nA=class{constructor(e){var{rootEmSize:r=12,emSize:o=12,createCanvas:l=nA.createCanvas,createImage:s=nA.createImage,anonymousCrossOrigin:p}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=r,this.emSize=o,this.createCanvas=l,this.createImage=this.bindCreateImage(s,p),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,r){return typeof r=="boolean"?(o,l)=>e(o,typeof l=="boolean"?l:r):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:r}=this;r.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){var r=this.createElement(e.documentElement);return r.root=!0,r.addStylesFromStyleDefinition(),this.documentElement=r,r}createElement(e){var r=e.nodeName.replace(/^[^:]+:/,""),o=nA.elementTypes[r];return typeof o<"u"?new o(this,e):new lf(this,e)}createTextNode(e){return new zI(this,e)}setViewBox(e){this.screen.setViewBox(w6({document:this},e))}};nA.createCanvas=B6;nA.createImage=_6;nA.elementTypes=v6;yc=class{constructor(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new ch(o),this.screen=new su(e,o),this.options=o;var l=new nA(this,o),s=l.createDocumentElement(r);this.document=l,this.documentElement=s}static from(e,r){var o=arguments;return El(function*(){var l=o.length>2&&o[2]!==void 0?o[2]:{},s=new ch(l),p=yield s.parse(r);return new yc(e,p,l)})()}static fromString(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new ch(o),s=l.parseFromString(r);return new yc(e,s,o)}fork(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return yc.from(e,r,eu(eu({},this.options),o))}forkString(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return yc.fromString(e,r,eu(eu({},this.options),o))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,r=this;return El(function*(){var o=e.length>0&&e[0]!==void 0?e[0]:{};r.start(eu({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},o)),yield r.ready(),r.stop()})()}start(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:r,screen:o,options:l}=this;o.start(r,eu(eu({enableRedraw:!0},l),e))}stop(){this.screen.stop()}resize(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,r,o)}}});function Sr(n){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(n)}function Ky(n,e){e===void 0&&(e={});var r=Z6();r.p(n);var o=P6(n,e,2,4);return M6(o,e),H6(o,o.length-4,r.d()),o}function V6(n,e){return U6((N6(n),n.subarray(2,-4)),e)}function Ry(){Yi.console&&typeof Yi.console.log=="function"&&Yi.console.log.apply(Yi.console,arguments)}function Gy(n,e,r){var o=new XMLHttpRequest;o.open("GET",n),o.responseType="blob",o.onload=function(){du(o.response,e,r)},o.onerror=function(){tn.error("could not download file")},o.send()}function _5(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function em(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}function Y5(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(m){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(m){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}}],o=0;o<r.length;o++){var l=r[o].re,s=r[o].process,p=l.exec(n);p&&(e=s(p),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var m=this.r.toString(16),I=this.g.toString(16),w=this.b.toString(16);return m.length==1&&(m="0"+m),I.length==1&&(I="0"+I),w.length==1&&(w="0"+w),"#"+m+I+w}}function Zy(n,e){var r=n[0],o=n[1],l=n[2],s=n[3];r=qs(r,o,l,s,e[0],7,-680876936),s=qs(s,r,o,l,e[1],12,-389564586),l=qs(l,s,r,o,e[2],17,606105819),o=qs(o,l,s,r,e[3],22,-1044525330),r=qs(r,o,l,s,e[4],7,-176418897),s=qs(s,r,o,l,e[5],12,1200080426),l=qs(l,s,r,o,e[6],17,-1473231341),o=qs(o,l,s,r,e[7],22,-45705983),r=qs(r,o,l,s,e[8],7,1770035416),s=qs(s,r,o,l,e[9],12,-1958414417),l=qs(l,s,r,o,e[10],17,-42063),o=qs(o,l,s,r,e[11],22,-1990404162),r=qs(r,o,l,s,e[12],7,1804603682),s=qs(s,r,o,l,e[13],12,-40341101),l=qs(l,s,r,o,e[14],17,-1502002290),r=$s(r,o=qs(o,l,s,r,e[15],22,1236535329),l,s,e[1],5,-165796510),s=$s(s,r,o,l,e[6],9,-1069501632),l=$s(l,s,r,o,e[11],14,643717713),o=$s(o,l,s,r,e[0],20,-373897302),r=$s(r,o,l,s,e[5],5,-701558691),s=$s(s,r,o,l,e[10],9,38016083),l=$s(l,s,r,o,e[15],14,-660478335),o=$s(o,l,s,r,e[4],20,-405537848),r=$s(r,o,l,s,e[9],5,568446438),s=$s(s,r,o,l,e[14],9,-1019803690),l=$s(l,s,r,o,e[3],14,-187363961),o=$s(o,l,s,r,e[8],20,1163531501),r=$s(r,o,l,s,e[13],5,-1444681467),s=$s(s,r,o,l,e[2],9,-51403784),l=$s(l,s,r,o,e[7],14,1735328473),r=to(r,o=$s(o,l,s,r,e[12],20,-1926607734),l,s,e[5],4,-378558),s=to(s,r,o,l,e[8],11,-2022574463),l=to(l,s,r,o,e[11],16,1839030562),o=to(o,l,s,r,e[14],23,-35309556),r=to(r,o,l,s,e[1],4,-1530992060),s=to(s,r,o,l,e[4],11,1272893353),l=to(l,s,r,o,e[7],16,-155497632),o=to(o,l,s,r,e[10],23,-1094730640),r=to(r,o,l,s,e[13],4,681279174),s=to(s,r,o,l,e[0],11,-358537222),l=to(l,s,r,o,e[3],16,-722521979),o=to(o,l,s,r,e[6],23,76029189),r=to(r,o,l,s,e[9],4,-640364487),s=to(s,r,o,l,e[12],11,-421815835),l=to(l,s,r,o,e[15],16,530742520),r=eo(r,o=to(o,l,s,r,e[2],23,-995338651),l,s,e[0],6,-198630844),s=eo(s,r,o,l,e[7],10,1126891415),l=eo(l,s,r,o,e[14],15,-1416354905),o=eo(o,l,s,r,e[5],21,-57434055),r=eo(r,o,l,s,e[12],6,1700485571),s=eo(s,r,o,l,e[3],10,-1894986606),l=eo(l,s,r,o,e[10],15,-1051523),o=eo(o,l,s,r,e[1],21,-2054922799),r=eo(r,o,l,s,e[8],6,1873313359),s=eo(s,r,o,l,e[15],10,-30611744),l=eo(l,s,r,o,e[6],15,-1560198380),o=eo(o,l,s,r,e[13],21,1309151649),r=eo(r,o,l,s,e[4],6,-145523070),s=eo(s,r,o,l,e[11],10,-1120210379),l=eo(l,s,r,o,e[2],15,718787259),o=eo(o,l,s,r,e[9],21,-343485551),n[0]=_c(r,n[0]),n[1]=_c(o,n[1]),n[2]=_c(l,n[2]),n[3]=_c(s,n[3])}function fm(n,e,r,o,l,s){return e=_c(_c(e,n),_c(o,s)),_c(e<<l|e>>>32-l,r)}function qs(n,e,r,o,l,s,p){return fm(e&r|~e&o,n,e,l,s,p)}function $s(n,e,r,o,l,s,p){return fm(e&o|r&~o,n,e,l,s,p)}function to(n,e,r,o,l,s,p){return fm(e^r^o,n,e,l,s,p)}function eo(n,e,r,o,l,s,p){return fm(r^(e|~o),n,e,l,s,p)}function j5(n){var e,r=n.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Zy(o,D6(n.substring(e-64,e)));n=n.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)l[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Zy(o,l),e=0;e<16;e++)l[e]=0;return l[14]=8*r,Zy(o,l),o}function D6(n){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return r}function K6(n){for(var e="",r=0;r<4;r++)e+=x5[n>>8*r+4&15]+x5[n>>8*r&15];return e}function O6(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function zy(n){return j5(n).map(O6).join("")}function _c(n,e){if(z6){var r=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(r>>16)<<16|65535&r}return n+e&4294967295}function Wy(n,e){var r,o,l,s;if(n!==r){for(var p=(l=n,s=1+(256/n.length>>0),new Array(s+1).join(l)),m=[],I=0;I<256;I++)m[I]=I;var w=0;for(I=0;I<256;I++){var _=m[I];w=(w+_+p.charCodeAt(I))%256,m[I]=m[w],m[w]=_}r=n,o=m}else m=o;var E=e.length,U=0,F=0,V="";for(I=0;I<E;I++)F=(F+(_=m[U=(U+1)%256]))%256,m[U]=m[F],m[F]=_,p=m[(m[U]+m[F])%256],V+=String.fromCharCode(e.charCodeAt(I)^p);return V}function bh(n,e,r,o){this.v=1,this.r=2;var l=192;n.forEach(function(m){if(S5.perm!==void 0)throw new Error("Invalid permission: "+m);l+=S5[m]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(e+this.padding).substr(0,32),p=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,p),this.P=-(1+(255^l)),this.encryptionKey=zy(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=Wy(this.encryptionKey,this.padding)}function vh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",r=n.length,o=0;o<r;o++){var l=n.charCodeAt(o);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=n[o]}return e}function F5(n){if(Sr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,o,l){if(l=l||!1,typeof r!="string"||typeof o!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[o,!!l],s},this.unsubscribe=function(r){for(var o in e)if(e[o][r])return delete e[o][r],Object.keys(e[o]).length===0&&delete e[o],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),l=[];for(var s in e[r]){var p=e[r][s];try{p[0].apply(n,o)}catch(m){Yi.console&&tn.error("jsPDF PubSub Error",m.message,m)}p[1]&&l.push(s)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function um(n){if(!(this instanceof um))return new um(n);var e="opacity,stroke-opacity".split(",");for(var r in n)n.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=n[r]);this.id="",this.objectNumber=-1}function q5(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function pu(n,e,r,o,l){if(!(this instanceof pu))return new pu(n,e,r,o,l);this.type=n==="axial"?2:3,this.coords=e,this.colors=r,q5.call(this,o,l)}function wh(n,e,r,o,l){if(!(this instanceof wh))return new wh(n,e,r,o,l);this.boundingBox=n,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,q5.call(this,o,l)}function Xi(n){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],l=arguments[2],s=arguments[3],p=[],m=1,I=16,w="S",_=null;Sr(n=n||{})==="object"&&(r=n.orientation,o=n.unit||o,l=n.format||l,s=n.compress||n.compressPdf||s,(_=n.encryption||null)!==null&&(_.userPassword=_.userPassword||"",_.ownerPassword=_.ownerPassword||"",_.userPermissions=_.userPermissions||[]),m=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(I=n.floatPrecision),w=n.defaultPathOperation||"S"),p=n.filters||(s===!0?["FlateEncode"]:p),o=o||"mm",r=(""+(r||"P")).toLowerCase();var E=n.putOnlyUsedFonts||!1,U={},F={internal:{},__private__:{}};F.__private__.PubSub=F5;var V="1.3",H=F.__private__.getPdfVersion=function(){return V};F.__private__.setPdfVersion=function(T){V=T};var Y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};F.__private__.getPageFormats=function(){return Y};var D=F.__private__.getPageFormat=function(T){return Y[T]};l=l||"a4";var tt={COMPAT:"compat",ADVANCED:"advanced"},ot=tt.COMPAT;function bt(){this.saveGraphicsState(),Tt(new Ot(ne,0,0,-ne,0,qo()*ne).toString()+" cm"),this.setFontSize(this.getFontSize()/ne),w="n",ot=tt.ADVANCED}function kt(){this.restoreGraphicsState(),w="S",ot=tt.COMPAT}var Lt=F.__private__.combineFontStyleAndFontWeight=function(T,$){if(T=="bold"&&$=="normal"||T=="bold"&&$==400||T=="normal"&&$=="italic"||T=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(T=$==400||$==="normal"?T==="italic"?"italic":"normal":$!=700&&$!=="bold"||T!=="normal"?($==700?"bold":$)+""+T:"bold"),T};F.advancedAPI=function(T){var $=ot===tt.COMPAT;return $&&bt.call(this),typeof T!="function"||(T(this),$&&kt.call(this)),this},F.compatAPI=function(T){var $=ot===tt.ADVANCED;return $&&kt.call(this),typeof T!="function"||(T(this),$&&bt.call(this)),this},F.isAdvancedAPI=function(){return ot===tt.ADVANCED};var vt,ft=function(T){if(ot!==tt.ADVANCED)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Mt=F.roundToPrecision=F.__private__.roundToPrecision=function(T,$){var xt=e||$;if(isNaN(T)||isNaN(xt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(xt).replace(/0+$/,"")};vt=F.hpf=F.__private__.hpf=typeof I=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Mt(T,I)}:I==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Mt(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Mt(T,16)};var qt=F.f2=F.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return Mt(T,2)},at=F.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return Mt(T,3)},st=F.scale=F.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return ot===tt.COMPAT?T*ne:ot===tt.ADVANCED?T:void 0},wt=function(T){return ot===tt.COMPAT?qo()-T:ot===tt.ADVANCED?T:void 0},yt=function(T){return st(wt(T))};F.__private__.setPrecision=F.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(e=parseInt(T,10))};var te,jt="00000000000000000000000000000000",Xt=F.__private__.getFileId=function(){return jt},Wt=F.__private__.setFileId=function(T){return jt=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():jt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),_!==null&&(ai=new bh(_.userPermissions,_.userPassword,_.ownerPassword,jt)),jt};F.setFileId=function(T){return Wt(T),this},F.getFileId=function(){return Xt()};var Ct=F.__private__.convertDateToPDFDate=function(T){var $=T.getTimezoneOffset(),xt=$<0?"+":"-",Vt=Math.floor(Math.abs($/60)),ae=Math.abs($%60),ye=[xt,mt(Vt),"'",mt(ae),"'"].join("");return["D:",T.getFullYear(),mt(T.getMonth()+1),mt(T.getDate()),mt(T.getHours()),mt(T.getMinutes()),mt(T.getSeconds()),ye].join("")},Et=F.__private__.convertPDFDateToDate=function(T){var $=parseInt(T.substr(2,4),10),xt=parseInt(T.substr(6,2),10)-1,Vt=parseInt(T.substr(8,2),10),ae=parseInt(T.substr(10,2),10),ye=parseInt(T.substr(12,2),10),Pe=parseInt(T.substr(14,2),10);return new Date($,xt,Vt,ae,ye,Pe,0)},ue=F.__private__.setCreationDate=function(T){var $;if(T===void 0&&(T=new Date),T instanceof Date)$=Ct(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=T}return te=$},J=F.__private__.getCreationDate=function(T){var $=te;return T==="jsDate"&&($=Et(te)),$};F.setCreationDate=function(T){return ue(T),this},F.getCreationDate=function(T){return J(T)};var dt,mt=F.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},Ut=F.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},Pt=0,ie=[],le=[],ce=0,Qe=[],Ee=[],We=!1,Je=le,Dt=function(){Pt=0,ce=0,le=[],ie=[],Qe=[],Vi=je(),vi=je()};F.__private__.setCustomOutputDestination=function(T){We=!0,Je=T};var de=function(T){We||(Je=T)};F.__private__.resetCustomOutputDestination=function(){We=!1,Je=le};var Tt=F.__private__.out=function(T){return T=T.toString(),ce+=T.length+1,Je.push(T),Je},Xe=F.__private__.write=function(T){return Tt(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},Oe=F.__private__.getArrayBuffer=function(T){for(var $=T.length,xt=new ArrayBuffer($),Vt=new Uint8Array(xt);$--;)Vt[$]=T.charCodeAt($);return xt},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];F.__private__.getStandardFonts=function(){return Le};var He=n.fontSize||16;F.__private__.setFontSize=F.setFontSize=function(T){return He=ot===tt.ADVANCED?T/ne:T,this};var Ke,ze=F.__private__.getFontSize=F.getFontSize=function(){return ot===tt.COMPAT?He:He*ne},ti=n.R2L||!1;F.__private__.setR2L=F.setR2L=function(T){return ti=T,this},F.__private__.getR2L=F.getR2L=function(){return ti};var ci,Si=F.__private__.setZoomMode=function(T){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))Ke=T;else if(isNaN(T)){if($.indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');Ke=T}else Ke=parseInt(T,10)};F.__private__.getZoomMode=function(){return Ke};var he,Zi=F.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');ci=T};F.__private__.getPageMode=function(){return ci};var Hi=F.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');he=T};F.__private__.getLayoutMode=function(){return he},F.__private__.setDisplayMode=F.setDisplayMode=function(T,$,xt){return Si(T),Hi($),Zi(xt),this};var pi={title:"",subject:"",author:"",keywords:"",creator:""};F.__private__.getDocumentProperty=function(T){if(Object.keys(pi).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pi[T]},F.__private__.getDocumentProperties=function(){return pi},F.__private__.setDocumentProperties=F.setProperties=F.setDocumentProperties=function(T){for(var $ in pi)pi.hasOwnProperty($)&&T[$]&&(pi[$]=T[$]);return this},F.__private__.setDocumentProperty=function(T,$){if(Object.keys(pi).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pi[T]=$};var Ei,ne,ui,Ve,rr,Ni={},$e={},wr=[],zi={},_r={},nr={},It={},K=null,z=0,it=[],gt=new F5(F),Ht=n.hotfixes||[],Nt={},Jt={},Rt=[],Ot=function T($,xt,Vt,ae,ye,Pe){if(!(this instanceof T))return new T($,xt,Vt,ae,ye,Pe);isNaN($)&&($=1),isNaN(xt)&&(xt=0),isNaN(Vt)&&(Vt=0),isNaN(ae)&&(ae=1),isNaN(ye)&&(ye=0),isNaN(Pe)&&(Pe=0),this._matrix=[$,xt,Vt,ae,ye,Pe]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(vt).join(T)},Ot.prototype.multiply=function(T){var $=T.sx*this.sx+T.shy*this.shx,xt=T.sx*this.shy+T.shy*this.sy,Vt=T.shx*this.sx+T.sy*this.shx,ae=T.shx*this.shy+T.sy*this.sy,ye=T.tx*this.sx+T.ty*this.shx+this.tx,Pe=T.tx*this.shy+T.ty*this.sy+this.ty;return new Ot($,xt,Vt,ae,ye,Pe)},Ot.prototype.decompose=function(){var T=this.sx,$=this.shy,xt=this.shx,Vt=this.sy,ae=this.tx,ye=this.ty,Pe=Math.sqrt(T*T+$*$),Ai=(T/=Pe)*xt+($/=Pe)*Vt;xt-=T*Ai,Vt-=$*Ai;var Ri=Math.sqrt(xt*xt+Vt*Vt);return Ai/=Ri,T*(Vt/=Ri)<$*(xt/=Ri)&&(T=-T,$=-$,Ai=-Ai,Pe=-Pe),{scale:new Ot(Pe,0,0,Ri,0,0),translate:new Ot(1,0,0,1,ae,ye),rotate:new Ot(T,$,-$,T,0,0),skew:new Ot(1,0,Ai,1,0,0)}},Ot.prototype.toString=function(T){return this.join(" ")},Ot.prototype.inversed=function(){var T=this.sx,$=this.shy,xt=this.shx,Vt=this.sy,ae=this.tx,ye=this.ty,Pe=1/(T*Vt-$*xt),Ai=Vt*Pe,Ri=-$*Pe,Ki=-xt*Pe,tr=T*Pe;return new Ot(Ai,Ri,Ki,tr,-Ai*ae-Ki*ye,-Ri*ae-tr*ye)},Ot.prototype.applyToPoint=function(T){var $=T.x*this.sx+T.y*this.shx+this.tx,xt=T.x*this.shy+T.y*this.sy+this.ty;return new dA($,xt)},Ot.prototype.applyToRectangle=function(T){var $=this.applyToPoint(T),xt=this.applyToPoint(new dA(T.x+T.w,T.y+T.h));return new pA($.x,$.y,xt.x-$.x,xt.y-$.y)},Ot.prototype.clone=function(){var T=this.sx,$=this.shy,xt=this.shx,Vt=this.sy,ae=this.tx,ye=this.ty;return new Ot(T,$,xt,Vt,ae,ye)},F.Matrix=Ot;var me=F.matrixMult=function(T,$){return $.multiply(T)},Ae=new Ot(1,0,0,1,0,0);F.unitMatrix=F.identityMatrix=Ae;var Se=function(T,$){if(!_r[T]){var xt=($ instanceof pu?"Sh":"P")+(Object.keys(zi).length+1).toString(10);$.id=xt,_r[T]=xt,zi[xt]=$,gt.publish("addPattern",$)}};F.ShadingPattern=pu,F.TilingPattern=wh,F.addShadingPattern=function(T,$){return ft("addShadingPattern()"),Se(T,$),this},F.beginTilingPattern=function(T){ft("beginTilingPattern()"),Hl(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},F.endTilingPattern=function(T,$){ft("endTilingPattern()"),$.stream=Ee[dt].join(`
`),Se(T,$),gt.publish("endTilingPattern",$),Rt.pop().restore()};var Ye=F.__private__.newObject=function(){var T=je();return Mi(T,!0),T},je=F.__private__.newObjectDeferred=function(){return Pt++,ie[Pt]=function(){return ce},Pt},Mi=function(T,$){return $=typeof $=="boolean"&&$,ie[T]=ce,$&&Tt(T+" 0 obj"),T},Ti=F.__private__.newAdditionalObject=function(){var T={objId:je(),content:""};return Qe.push(T),T},Vi=je(),vi=je(),pr=F.__private__.decodeColorString=function(T){var $=T.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var xt=parseFloat($[0]);$=[xt,xt,xt,"r"]}for(var Vt="#",ae=0;ae<3;ae++)Vt+=("0"+Math.floor(255*parseFloat($[ae])).toString(16)).slice(-2);return Vt},ur=F.__private__.encodeColorString=function(T){var $;typeof T=="string"&&(T={ch1:T});var xt=T.ch1,Vt=T.ch2,ae=T.ch3,ye=T.ch4,Pe=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof xt=="string"&&xt.charAt(0)!=="#"){var Ai=new Y5(xt);if(Ai.ok)xt=Ai.toHex();else if(!/^\d*\.?\d*$/.test(xt))throw new Error('Invalid color "'+xt+'" passed to jsPDF.encodeColorString.')}if(typeof xt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(xt)&&(xt="#"+xt[1]+xt[1]+xt[2]+xt[2]+xt[3]+xt[3]),typeof xt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xt)){var Ri=parseInt(xt.substr(1),16);xt=Ri>>16&255,Vt=Ri>>8&255,ae=255&Ri}if(Vt===void 0||ye===void 0&&xt===Vt&&Vt===ae)if(typeof xt=="string")$=xt+" "+Pe[0];else switch(T.precision){case 2:$=qt(xt/255)+" "+Pe[0];break;case 3:default:$=at(xt/255)+" "+Pe[0]}else if(ye===void 0||Sr(ye)==="object"){if(ye&&!isNaN(ye.a)&&ye.a===0)return $=["1.","1.","1.",Pe[1]].join(" ");if(typeof xt=="string")$=[xt,Vt,ae,Pe[1]].join(" ");else switch(T.precision){case 2:$=[qt(xt/255),qt(Vt/255),qt(ae/255),Pe[1]].join(" ");break;default:case 3:$=[at(xt/255),at(Vt/255),at(ae/255),Pe[1]].join(" ")}}else if(typeof xt=="string")$=[xt,Vt,ae,ye,Pe[2]].join(" ");else switch(T.precision){case 2:$=[qt(xt),qt(Vt),qt(ae),qt(ye),Pe[2]].join(" ");break;case 3:default:$=[at(xt),at(Vt),at(ae),at(ye),Pe[2]].join(" ")}return $},Qi=F.__private__.getFilters=function(){return p},Oi=F.__private__.putStream=function(T){var $=(T=T||{}).data||"",xt=T.filters||Qi(),Vt=T.alreadyAppliedFilters||[],ae=T.addLength1||!1,ye=$.length,Pe=T.objectId,Ai=function(fn){return fn};if(_!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");_!==null&&(Ai=ai.encryptor(Pe,0));var Ri={};xt===!0&&(xt=["FlateEncode"]);var Ki=T.additionalKeyValues||[],tr=(Ri=Xi.API.processDataByFilters!==void 0?Xi.API.processDataByFilters($,xt):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(Vt)?Vt.join(" "):Vt.toString());if(Ri.data.length!==0&&(Ki.push({key:"Length",value:Ri.data.length}),ae===!0&&Ki.push({key:"Length1",value:ye})),tr.length!=0)if(tr.split("/").length-1==1)Ki.push({key:"Filter",value:tr});else{Ki.push({key:"Filter",value:"["+tr+"]"});for(var mr=0;mr<Ki.length;mr+=1)if(Ki[mr].key==="DecodeParms"){for(var ji=[],an=0;an<Ri.reverseChain.split("/").length-1;an+=1)ji.push("null");ji.push(Ki[mr].value),Ki[mr].value="["+ji.join(" ")+"]"}}Tt("<<");for(var Bi=0;Bi<Ki.length;Bi++)Tt("/"+Ki[Bi].key+" "+Ki[Bi].value);Tt(">>"),Ri.data.length!==0&&(Tt("stream"),Tt(Ai(Ri.data)),Tt("endstream"))},sr=F.__private__.putPage=function(T){var $=T.number,xt=T.data,Vt=T.objId,ae=T.contentsObjId;Mi(Vt,!0),Tt("<</Type /Page"),Tt("/Parent "+T.rootDictionaryObjId+" 0 R"),Tt("/Resources "+T.resourceDictionaryObjId+" 0 R"),Tt("/MediaBox ["+parseFloat(vt(T.mediaBox.bottomLeftX))+" "+parseFloat(vt(T.mediaBox.bottomLeftY))+" "+vt(T.mediaBox.topRightX)+" "+vt(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&Tt("/CropBox ["+vt(T.cropBox.bottomLeftX)+" "+vt(T.cropBox.bottomLeftY)+" "+vt(T.cropBox.topRightX)+" "+vt(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&Tt("/BleedBox ["+vt(T.bleedBox.bottomLeftX)+" "+vt(T.bleedBox.bottomLeftY)+" "+vt(T.bleedBox.topRightX)+" "+vt(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&Tt("/TrimBox ["+vt(T.trimBox.bottomLeftX)+" "+vt(T.trimBox.bottomLeftY)+" "+vt(T.trimBox.topRightX)+" "+vt(T.trimBox.topRightY)+"]"),T.artBox!==null&&Tt("/ArtBox ["+vt(T.artBox.bottomLeftX)+" "+vt(T.artBox.bottomLeftY)+" "+vt(T.artBox.topRightX)+" "+vt(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&Tt("/UserUnit "+T.userUnit),gt.publish("putPage",{objId:Vt,pageContext:it[$],pageNumber:$,page:xt}),Tt("/Contents "+ae+" 0 R"),Tt(">>"),Tt("endobj");var ye=xt.join(`
`);return ot===tt.ADVANCED&&(ye+=`
Q`),Mi(ae,!0),Oi({data:ye,filters:Qi(),objectId:ae}),Tt("endobj"),Vt},Zt=F.__private__.putPages=function(){var T,$,xt=[];for(T=1;T<=z;T++)it[T].objId=je(),it[T].contentsObjId=je();for(T=1;T<=z;T++)xt.push(sr({number:T,data:Ee[T],objId:it[T].objId,contentsObjId:it[T].contentsObjId,mediaBox:it[T].mediaBox,cropBox:it[T].cropBox,bleedBox:it[T].bleedBox,trimBox:it[T].trimBox,artBox:it[T].artBox,userUnit:it[T].userUnit,rootDictionaryObjId:Vi,resourceDictionaryObjId:vi}));Mi(Vi,!0),Tt("<</Type /Pages");var Vt="/Kids [";for($=0;$<z;$++)Vt+=xt[$]+" 0 R ";Tt(Vt+"]"),Tt("/Count "+z),Tt(">>"),Tt("endobj"),gt.publish("postPutPages")},Ne=function(T){gt.publish("putFont",{font:T,out:Tt,newObject:Ye,putStream:Oi}),T.isAlreadyPutted!==!0&&(T.objectNumber=Ye(),Tt("<<"),Tt("/Type /Font"),Tt("/BaseFont /"+vh(T.postScriptName)),Tt("/Subtype /Type1"),typeof T.encoding=="string"&&Tt("/Encoding /"+T.encoding),Tt("/FirstChar 32"),Tt("/LastChar 255"),Tt(">>"),Tt("endobj"))},ke=function(){for(var T in Ni)Ni.hasOwnProperty(T)&&(E===!1||E===!0&&U.hasOwnProperty(T))&&Ne(Ni[T])},Wi=function(T){T.objectNumber=Ye();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[vt(T.x),vt(T.y),vt(T.x+T.width),vt(T.y+T.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var xt=T.pages[1].join(`
`);Oi({data:xt,additionalKeyValues:$,objectId:T.objectNumber}),Tt("endobj")},Fi=function(){for(var T in Nt)Nt.hasOwnProperty(T)&&Wi(Nt[T])},rn=function(T,$){var xt,Vt=[],ae=1/($-1);for(xt=0;xt<1;xt+=ae)Vt.push(xt);if(Vt.push(1),T[0].offset!=0){var ye={offset:0,color:T[0].color};T.unshift(ye)}if(T[T.length-1].offset!=1){var Pe={offset:1,color:T[T.length-1].color};T.push(Pe)}for(var Ai="",Ri=0,Ki=0;Ki<Vt.length;Ki++){for(xt=Vt[Ki];xt>T[Ri+1].offset;)Ri++;var tr=T[Ri].offset,mr=(xt-tr)/(T[Ri+1].offset-tr),ji=T[Ri].color,an=T[Ri+1].color;Ai+=Ut(Math.round((1-mr)*ji[0]+mr*an[0]).toString(16))+Ut(Math.round((1-mr)*ji[1]+mr*an[1]).toString(16))+Ut(Math.round((1-mr)*ji[2]+mr*an[2]).toString(16))}return Ai.trim()},Fr=function(T,$){$||($=21);var xt=Ye(),Vt=rn(T.colors,$),ae=[];ae.push({key:"FunctionType",value:"0"}),ae.push({key:"Domain",value:"[0.0 1.0]"}),ae.push({key:"Size",value:"["+$+"]"}),ae.push({key:"BitsPerSample",value:"8"}),ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oi({data:Vt,additionalKeyValues:ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:xt}),Tt("endobj"),T.objectNumber=Ye(),Tt("<< /ShadingType "+T.type),Tt("/ColorSpace /DeviceRGB");var ye="/Coords ["+vt(parseFloat(T.coords[0]))+" "+vt(parseFloat(T.coords[1]))+" ";T.type===2?ye+=vt(parseFloat(T.coords[2]))+" "+vt(parseFloat(T.coords[3])):ye+=vt(parseFloat(T.coords[2]))+" "+vt(parseFloat(T.coords[3]))+" "+vt(parseFloat(T.coords[4]))+" "+vt(parseFloat(T.coords[5])),Tt(ye+="]"),T.matrix&&Tt("/Matrix ["+T.matrix.toString()+"]"),Tt("/Function "+xt+" 0 R"),Tt("/Extend [true true]"),Tt(">>"),Tt("endobj")},jr=function(T,$){var xt=je(),Vt=Ye();$.push({resourcesOid:xt,objectOid:Vt}),T.objectNumber=Vt;var ae=[];ae.push({key:"Type",value:"/Pattern"}),ae.push({key:"PatternType",value:"1"}),ae.push({key:"PaintType",value:"1"}),ae.push({key:"TilingType",value:"1"}),ae.push({key:"BBox",value:"["+T.boundingBox.map(vt).join(" ")+"]"}),ae.push({key:"XStep",value:vt(T.xStep)}),ae.push({key:"YStep",value:vt(T.yStep)}),ae.push({key:"Resources",value:xt+" 0 R"}),T.matrix&&ae.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),Oi({data:T.stream,additionalKeyValues:ae,objectId:T.objectNumber}),Tt("endobj")},br=function(T){var $;for($ in zi)zi.hasOwnProperty($)&&(zi[$]instanceof pu?Fr(zi[$]):zi[$]instanceof wh&&jr(zi[$],T))},on=function(T){for(var $ in T.objectNumber=Ye(),Tt("<<"),T)switch($){case"opacity":Tt("/ca "+qt(T[$]));break;case"stroke-opacity":Tt("/CA "+qt(T[$]))}Tt(">>"),Tt("endobj")},dn=function(){var T;for(T in nr)nr.hasOwnProperty(T)&&on(nr[T])},pn=function(){for(var T in Tt("/XObject <<"),Nt)Nt.hasOwnProperty(T)&&Nt[T].objectNumber>=0&&Tt("/"+T+" "+Nt[T].objectNumber+" 0 R");gt.publish("putXobjectDict"),Tt(">>")},vo=function(){ai.oid=Ye(),Tt("<<"),Tt("/Filter /Standard"),Tt("/V "+ai.v),Tt("/R "+ai.r),Tt("/U <"+ai.toHexString(ai.U)+">"),Tt("/O <"+ai.toHexString(ai.O)+">"),Tt("/P "+ai.P),Tt(">>"),Tt("endobj")},es=function(){for(var T in Tt("/Font <<"),Ni)Ni.hasOwnProperty(T)&&(E===!1||E===!0&&U.hasOwnProperty(T))&&Tt("/"+T+" "+Ni[T].objectNumber+" 0 R");Tt(">>")},Or=function(){if(Object.keys(zi).length>0){for(var T in Tt("/Shading <<"),zi)zi.hasOwnProperty(T)&&zi[T]instanceof pu&&zi[T].objectNumber>=0&&Tt("/"+T+" "+zi[T].objectNumber+" 0 R");gt.publish("putShadingPatternDict"),Tt(">>")}},is=function(T){if(Object.keys(zi).length>0){for(var $ in Tt("/Pattern <<"),zi)zi.hasOwnProperty($)&&zi[$]instanceof F.TilingPattern&&zi[$].objectNumber>=0&&zi[$].objectNumber<T&&Tt("/"+$+" "+zi[$].objectNumber+" 0 R");gt.publish("putTilingPatternDict"),Tt(">>")}},Jn=function(){if(Object.keys(nr).length>0){var T;for(T in Tt("/ExtGState <<"),nr)nr.hasOwnProperty(T)&&nr[T].objectNumber>=0&&Tt("/"+T+" "+nr[T].objectNumber+" 0 R");gt.publish("putGStateDict"),Tt(">>")}},$i=function(T){Mi(T.resourcesOid,!0),Tt("<<"),Tt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),es(),Or(),is(T.objectOid),Jn(),pn(),Tt(">>"),Tt("endobj")},io=function(){var T=[];ke(),dn(),Fi(),br(T),gt.publish("putResources"),T.forEach($i),$i({resourcesOid:vi,objectOid:Number.MAX_SAFE_INTEGER}),gt.publish("postPutResources")},wn=function(){gt.publish("putAdditionalObjects");for(var T=0;T<Qe.length;T++){var $=Qe[T];Mi($.objId,!0),Tt($.content),Tt("endobj")}gt.publish("postPutAdditionalObjects")},Wo=function(T){$e[T.fontName]=$e[T.fontName]||{},$e[T.fontName][T.fontStyle]=T.id},Bn=function(T,$,xt,Vt,ae){var ye={id:"F"+(Object.keys(Ni).length+1).toString(10),postScriptName:T,fontName:$,fontStyle:xt,encoding:Vt,isStandardFont:ae||!1,metadata:{}};return gt.publish("addFont",{font:ye,instance:this}),Ni[ye.id]=ye,Wo(ye),ye.id},ht=function(T){for(var $=0,xt=Le.length;$<xt;$++){var Vt=Bn.call(this,T[$][0],T[$][1],T[$][2],Le[$][3],!0);E===!1&&(U[Vt]=!0);var ae=T[$][0].split("-");Wo({id:Vt,fontName:ae[0],fontStyle:ae[1]||""})}gt.publish("addFonts",{fonts:Ni,dictionary:$e})},pt=function(T){return T.foo=function(){try{return T.apply(this,arguments)}catch(Vt){var $=Vt.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var xt="Error in function "+$.split(`
`)[0].split("<")[0]+": "+Vt.message;if(!Yi.console)throw new Error(xt);Yi.console.error(xt,Vt),Yi.alert&&alert(xt)}},T.foo.bar=T,T.foo},At=function(T,$){var xt,Vt,ae,ye,Pe,Ai,Ri,Ki,tr;if(ae=($=$||{}).sourceEncoding||"Unicode",Pe=$.outputEncoding,($.autoencode||Pe)&&Ni[Ei].metadata&&Ni[Ei].metadata[ae]&&Ni[Ei].metadata[ae].encoding&&(ye=Ni[Ei].metadata[ae].encoding,!Pe&&Ni[Ei].encoding&&(Pe=Ni[Ei].encoding),!Pe&&ye.codePages&&(Pe=ye.codePages[0]),typeof Pe=="string"&&(Pe=ye[Pe]),Pe)){for(Ri=!1,Ai=[],xt=0,Vt=T.length;xt<Vt;xt++)(Ki=Pe[T.charCodeAt(xt)])?Ai.push(String.fromCharCode(Ki)):Ai.push(T[xt]),Ai[xt].charCodeAt(0)>>8&&(Ri=!0);T=Ai.join("")}for(xt=T.length;Ri===void 0&&xt!==0;)T.charCodeAt(xt-1)>>8&&(Ri=!0),xt--;if(!Ri)return T;for(Ai=$.noBOM?[]:[254,255],xt=0,Vt=T.length;xt<Vt;xt++){if((tr=(Ki=T.charCodeAt(xt))>>8)>>8)throw new Error("Character at position "+xt+" of string '"+T+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ai.push(tr),Ai.push(Ki-(tr<<8))}return String.fromCharCode.apply(void 0,Ai)},St=F.__private__.pdfEscape=F.pdfEscape=function(T,$){return At(T,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_t=F.__private__.beginPage=function(T){Ee[++z]=[],it[z]={objId:0,contentsObjId:0,userUnit:Number(m),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},be(z),de(Ee[dt])},zt=function(T,$){var xt,Vt,ae;switch(r=$||r,typeof T=="string"&&(xt=D(T.toLowerCase()),Array.isArray(xt)&&(Vt=xt[0],ae=xt[1])),Array.isArray(T)&&(Vt=T[0]*ne,ae=T[1]*ne),isNaN(Vt)&&(Vt=l[0],ae=l[1]),(Vt>14400||ae>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Vt=Math.min(14400,Vt),ae=Math.min(14400,ae)),l=[Vt,ae],r.substr(0,1)){case"l":ae>Vt&&(l=[ae,Vt]);break;case"p":Vt>ae&&(l=[ae,Vt])}_t(l),xo(rl),Tt(no),gA!==0&&Tt(gA+" J"),so!==0&&Tt(so+" j"),gt.publish("addPage",{pageNumber:z})},ee=function(T){T>0&&T<=z&&(Ee.splice(T,1),it.splice(T,1),z--,dt>z&&(dt=z),this.setPage(dt))},be=function(T){T>0&&T<=z&&(dt=T)},Ie=F.__private__.getNumberOfPages=F.getNumberOfPages=function(){return Ee.length-1},pe=function(T,$,xt){var Vt,ae=void 0;return xt=xt||{},T=T!==void 0?T:Ni[Ei].fontName,$=$!==void 0?$:Ni[Ei].fontStyle,Vt=T.toLowerCase(),$e[Vt]!==void 0&&$e[Vt][$]!==void 0?ae=$e[Vt][$]:$e[T]!==void 0&&$e[T][$]!==void 0?ae=$e[T][$]:xt.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+T+"', '"+$+"'. Refer to getFontList() for available fonts."),ae||xt.noFallback||(ae=$e.times[$])==null&&(ae=$e.times.normal),ae},$t=F.__private__.putInfo=function(){var T=Ye(),$=function(Vt){return Vt};for(var xt in _!==null&&($=ai.encryptor(T,0)),Tt("<<"),Tt("/Producer ("+St($("jsPDF "+Xi.version))+")"),pi)pi.hasOwnProperty(xt)&&pi[xt]&&Tt("/"+xt.substr(0,1).toUpperCase()+xt.substr(1)+" ("+St($(pi[xt]))+")");Tt("/CreationDate ("+St($(te))+")"),Tt(">>"),Tt("endobj")},fe=F.__private__.putCatalog=function(T){var $=(T=T||{}).rootDictionaryObjId||Vi;switch(Ye(),Tt("<<"),Tt("/Type /Catalog"),Tt("/Pages "+$+" 0 R"),Ke||(Ke="fullwidth"),Ke){case"fullwidth":Tt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Tt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Tt("/OpenAction [3 0 R /Fit]");break;case"original":Tt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var xt=""+Ke;xt.substr(xt.length-1)==="%"&&(Ke=parseInt(Ke)/100),typeof Ke=="number"&&Tt("/OpenAction [3 0 R /XYZ null null "+qt(Ke)+"]")}switch(he||(he="continuous"),he){case"continuous":Tt("/PageLayout /OneColumn");break;case"single":Tt("/PageLayout /SinglePage");break;case"two":case"twoleft":Tt("/PageLayout /TwoColumnLeft");break;case"tworight":Tt("/PageLayout /TwoColumnRight")}ci&&Tt("/PageMode /"+ci),gt.publish("putCatalog"),Tt(">>"),Tt("endobj")},Ce=F.__private__.putTrailer=function(){Tt("trailer"),Tt("<<"),Tt("/Size "+(Pt+1)),Tt("/Root "+Pt+" 0 R"),Tt("/Info "+(Pt-1)+" 0 R"),_!==null&&Tt("/Encrypt "+ai.oid+" 0 R"),Tt("/ID [ <"+jt+"> <"+jt+"> ]"),Tt(">>")},Te=F.__private__.putHeader=function(){Tt("%PDF-"+V),Tt("%\xBA\xDF\xAC\xE0")},Li=F.__private__.putXRef=function(){var T="0000000000";Tt("xref"),Tt("0 "+(Pt+1)),Tt("0000000000 65535 f ");for(var $=1;$<=Pt;$++)typeof ie[$]=="function"?Tt((T+ie[$]()).slice(-10)+" 00000 n "):ie[$]!==void 0?Tt((T+ie[$]).slice(-10)+" 00000 n "):Tt("0000000000 00000 n ")},ki=F.__private__.buildDocument=function(){Dt(),de(le),gt.publish("buildDocument"),Te(),Zt(),wn(),io(),_!==null&&vo(),$t(),fe();var T=ce;return Li(),Ce(),Tt("startxref"),Tt(""+T),Tt("%%EOF"),de(Ee[dt]),le.join(`
`)},Ze=F.__private__.getBlob=function(T){return new Blob([Oe(T)],{type:"application/pdf"})},Fe=F.output=F.__private__.output=pt(function(T,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",T){case void 0:return ki();case"save":F.save($.filename);break;case"arraybuffer":return Oe(ki());case"blob":return Ze(ki());case"bloburi":case"bloburl":if(Yi.URL!==void 0&&typeof Yi.URL.createObjectURL=="function")return Yi.URL&&Yi.URL.createObjectURL(Ze(ki()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var xt="",Vt=ki();try{xt=Oy(Vt)}catch{xt=Oy(unescape(encodeURIComponent(Vt)))}return"data:application/pdf;filename="+$.filename+";base64,"+xt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yi)==="[object Window]"){var ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(ae=$.pdfObjectUrl,ye="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ae+'"'+ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Ai=Yi.open();return Ai!==null&&Ai.document.write(Pe),Ai}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yi)==="[object Window]"){var Ri='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',Ki=Yi.open();if(Ki!==null){Ki.document.write(Ri);var tr=this;Ki.document.documentElement.querySelector("#pdfViewer").onload=function(){Ki.document.title=$.filename,Ki.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tr.output("bloburl"))}}return Ki}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yi)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',ji=Yi.open();if(ji!==null&&(ji.document.write(mr),ji.document.title=$.filename),ji||typeof safari>"u")return ji;break;case"datauri":case"dataurl":return Yi.document.location.href=this.output("datauristring",$);default:return null}}),ii=function(T){return Array.isArray(Ht)===!0&&Ht.indexOf(T)>-1};switch(o){case"pt":ne=1;break;case"mm":ne=72/25.4;break;case"cm":ne=72/2.54;break;case"in":ne=72;break;case"px":ne=ii("px_scaling")==1?.75:96/72;break;case"pc":case"em":ne=12;break;case"ex":ne=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);ne=o}var ai=null;ue(),Wt();var wi=function(T){return _!==null?ai.encryptor(T,0):function($){return $}},ar=F.__private__.getPageInfo=F.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[T].objId,pageNumber:T,pageContext:it[T]}},si=F.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in it)if(it[$].objId===T)break;return ar($)},vr=F.__private__.getCurrentPageInfo=F.getCurrentPageInfo=function(){return{objId:it[dt].objId,pageNumber:dt,pageContext:it[dt]}};F.addPage=function(){return zt.apply(this,arguments),this},F.setPage=function(){return be.apply(this,arguments),de.call(this,Ee[dt]),this},F.insertPage=function(T){return this.addPage(),this.movePage(dt,T),this},F.movePage=function(T,$){var xt,Vt;if(T>$){xt=Ee[T],Vt=it[T];for(var ae=T;ae>$;ae--)Ee[ae]=Ee[ae-1],it[ae]=it[ae-1];Ee[$]=xt,it[$]=Vt,this.setPage($)}else if(T<$){xt=Ee[T],Vt=it[T];for(var ye=T;ye<$;ye++)Ee[ye]=Ee[ye+1],it[ye]=it[ye+1];Ee[$]=xt,it[$]=Vt,this.setPage($)}return this},F.deletePage=function(){return ee.apply(this,arguments),this},F.__private__.text=F.text=function(T,$,xt,Vt,ae){var ye,Pe,Ai,Ri,Ki,tr,mr,ji,an,Bi=(Vt=Vt||{}).scope||this;if(typeof T=="number"&&typeof $=="number"&&(typeof xt=="string"||Array.isArray(xt))){var fn=xt;xt=$,$=T,T=fn}if(arguments[3]instanceof Ot?(ft("The transform parameter of text() with a Matrix value"),an=ae):(Ai=arguments[4],Ri=arguments[5],Sr(mr=arguments[3])==="object"&&mr!==null||(typeof Ai=="string"&&(Ri=Ai,Ai=null),typeof mr=="string"&&(Ri=mr,mr=null),typeof mr=="number"&&(Ai=mr,mr=null),Vt={flags:mr,angle:Ai,align:Ri})),isNaN($)||isNaN(xt)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return Bi;var qi="",Ar=!1,Cn=typeof Vt.lineHeightFactor=="number"?Vt.lineHeightFactor:Gn,Is=Bi.internal.scaleFactor;function fa(xr){return xr=xr.split("	").join(Array(Vt.TabLen||9).join(" ")),St(xr,mr)}function Ua(xr){for(var kr,Vr=xr.concat(),qr=[],zr=Vr.length;zr--;)typeof(kr=Vr.shift())=="string"?qr.push(kr):Array.isArray(xr)&&(kr.length===1||kr[1]===void 0&&kr[2]===void 0)?qr.push(kr[0]):qr.push([kr[0],kr[1],kr[2]]);return qr}function oo(xr,kr){var Vr;if(typeof xr=="string")Vr=kr(xr)[0];else if(Array.isArray(xr)){for(var qr,zr,ns=xr.concat(),Pa=[],sl=ns.length;sl--;)typeof(qr=ns.shift())=="string"?Pa.push(kr(qr)[0]):Array.isArray(qr)&&typeof qr[0]=="string"&&(zr=kr(qr[0],qr[1],qr[2]),Pa.push([zr[0],zr[1],zr[2]]));Vr=Pa}return Vr}var ao=!1,Zn=!0;if(typeof T=="string")ao=!0;else if(Array.isArray(T)){var Qa=T.concat();Pe=[];for(var ma,Pn=Qa.length;Pn--;)(typeof(ma=Qa.shift())!="string"||Array.isArray(ma)&&typeof ma[0]!="string")&&(Zn=!1);ao=Zn}if(ao===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var Ls=He/Bi.internal.scaleFactor,So=Ls*(Cn-1);switch(Vt.baseline){case"bottom":xt-=So;break;case"top":xt+=Ls-So;break;case"hanging":xt+=Ls-2*So;break;case"middle":xt+=Ls/2-So}if((tr=Vt.maxWidth||0)>0&&(typeof T=="string"?T=Bi.splitTextToSize(T,tr):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(xr,kr){return xr.concat(Bi.splitTextToSize(kr,tr))},[]))),ye={text:T,x:$,y:xt,options:Vt,mutex:{pdfEscape:St,activeFontKey:Ei,fonts:Ni,activeFontSize:He}},gt.publish("preProcessText",ye),T=ye.text,Ai=(Vt=ye.options).angle,!(an instanceof Ot)&&Ai&&typeof Ai=="number"){Ai*=Math.PI/180,Vt.rotationDirection===0&&(Ai=-Ai),ot===tt.ADVANCED&&(Ai=-Ai);var Fo=Math.cos(Ai),ko=Math.sin(Ai);an=new Ot(Fo,ko,-ko,Fo,0,0)}else Ai&&Ai instanceof Ot&&(an=Ai);ot!==tt.ADVANCED||an||(an=Ae),(Ki=Vt.charSpace||Ea)!==void 0&&(qi+=vt(st(Ki))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ji=Vt.horizontalScale)!==void 0&&(qi+=vt(100*ji)+` Tz
`),Vt.lang;var In=-1,yA=Vt.renderingMode!==void 0?Vt.renderingMode:Vt.stroke,Lo=Bi.internal.getCurrentPageInfo().pageContext;switch(yA){case 0:case!1:case"fill":In=0;break;case 1:case!0:case"stroke":In=1;break;case 2:case"fillThenStroke":In=2;break;case 3:case"invisible":In=3;break;case 4:case"fillAndAddForClipping":In=4;break;case 5:case"strokeAndAddPathForClipping":In=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":In=6;break;case 7:case"addToPathForClipping":In=7}var $o=Lo.usedRenderingMode!==void 0?Lo.usedRenderingMode:-1;In!==-1?qi+=In+` Tr
`:$o!==-1&&(qi+=`0 Tr
`),In!==-1&&(Lo.usedRenderingMode=In),Ri=Vt.align||"left";var Es,Ra=He*Cn,gr=Bi.internal.pageSize.getWidth(),bA=Ni[Ei];Ki=Vt.charSpace||Ea,tr=Vt.maxWidth||0,mr=Object.assign({autoencode:!0,noBOM:!0},Vt.flags);var Ca=[];if(Object.prototype.toString.call(T)==="[object Array]"){var ys;Pe=Ua(T),Ri!=="left"&&(Es=Pe.map(function(xr){return Bi.getStringUnitWidth(xr,{font:bA,charSpace:Ki,fontSize:He,doKerning:!1})*He/Is}));var Hn,ta=0;if(Ri==="right"){$-=Es[0],T=[],Pn=Pe.length;for(var bs=0;bs<Pn;bs++)bs===0?(Hn=Jo($),ys=Cs(xt)):(Hn=st(ta-Es[bs]),ys=-Ra),T.push([Pe[bs],Hn,ys]),ta=Es[bs]}else if(Ri==="center"){$-=Es[0]/2,T=[],Pn=Pe.length;for(var Eo=0;Eo<Pn;Eo++)Eo===0?(Hn=Jo($),ys=Cs(xt)):(Hn=st((ta-Es[Eo])/2),ys=-Ra),T.push([Pe[Eo],Hn,ys]),ta=Es[Eo]}else if(Ri==="left"){T=[],Pn=Pe.length;for(var Ga=0;Ga<Pn;Ga++)T.push(Pe[Ga])}else{if(Ri!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');T=[],Pn=Pe.length,tr=tr!==0?tr:gr;for(var rs=0;rs<Pn;rs++)ys=rs===0?Cs(xt):-Ra,Hn=rs===0?Jo($):0,rs<Pn-1?Ca.push(vt(st((tr-Es[rs])/(Pe[rs].split(" ").length-1)))):Ca.push(0),T.push([Pe[rs],Hn,ys])}}var ea=typeof Vt.R2L=="boolean"?Vt.R2L:ti;ea===!0&&(T=oo(T,function(xr,kr,Vr){return[xr.split("").reverse().join(""),kr,Vr]})),ye={text:T,x:$,y:xt,options:Vt,mutex:{pdfEscape:St,activeFontKey:Ei,fonts:Ni,activeFontSize:He}},gt.publish("postProcessText",ye),T=ye.text,Ar=ye.mutex.isHex||!1;var To=Ni[Ei].encoding;To!=="WinAnsiEncoding"&&To!=="StandardEncoding"||(T=oo(T,function(xr,kr,Vr){return[fa(xr),kr,Vr]})),Pe=Ua(T),T=[];for(var vs,Mn,Ao,Ts=0,Uo=1,Qo=Array.isArray(Pe[0])?Uo:Ts,lo="",Za=function(xr,kr,Vr){var qr="";return Vr instanceof Ot?(Vr=typeof Vt.angle=="number"?me(Vr,new Ot(1,0,0,1,xr,kr)):me(new Ot(1,0,0,1,xr,kr),Vr),ot===tt.ADVANCED&&(Vr=me(new Ot(1,0,0,-1,0,0),Vr)),qr=Vr.join(" ")+` Tm
`):qr=vt(xr)+" "+vt(kr)+` Td
`,qr},Us=0;Us<Pe.length;Us++){switch(lo="",Qo){case Uo:Ao=(Ar?"<":"(")+Pe[Us][0]+(Ar?">":")"),vs=parseFloat(Pe[Us][1]),Mn=parseFloat(Pe[Us][2]);break;case Ts:Ao=(Ar?"<":"(")+Pe[Us]+(Ar?">":")"),vs=Jo($),Mn=Cs(xt)}Ca!==void 0&&Ca[Us]!==void 0&&(lo=Ca[Us]+` Tw
`),Us===0?T.push(lo+Za(vs,Mn,an)+Ao):Qo===Ts?T.push(lo+Ao):Qo===Uo&&T.push(lo+Za(vs,Mn,an)+Ao)}T=Qo===Ts?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var Ro=`BT
/`;return Ro+=Ei+" "+He+` Tf
`,Ro+=vt(He*Cn)+` TL
`,Ro+=Yo+`
`,Ro+=qi,Ro+=T,Tt(Ro+="ET"),U[Ei]=!0,Bi};var nn=F.__private__.clip=F.clip=function(T){return Tt(T==="evenodd"?"W*":"W"),this};F.clipEvenOdd=function(){return nn("evenodd")},F.__private__.discardPath=F.discardPath=function(){return Tt("n"),this};var Br=F.__private__.isValidStyle=function(T){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&($=!0),$};F.__private__.setDefaultPathOperation=F.setDefaultPathOperation=function(T){return Br(T)&&(w=T),this};var ms=F.__private__.getStyle=F.getStyle=function(T){var $=w;switch(T){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=T}return $},Rn=F.close=function(){return Tt("h"),this};F.stroke=function(){return Tt("S"),this},F.fill=function(T){return wo("f",T),this},F.fillEvenOdd=function(T){return wo("f*",T),this},F.fillStroke=function(T){return wo("B",T),this},F.fillStrokeEvenOdd=function(T){return wo("B*",T),this};var wo=function(T,$){Sr($)==="object"?Gl($,T):Tt(T)},el=function(T){T===null||ot===tt.ADVANCED&&T===void 0||(T=ms(T),Tt(T))};function Fc(T,$,xt,Vt,ae){var ye=new wh($||this.boundingBox,xt||this.xStep,Vt||this.yStep,this.gState,ae||this.matrix);ye.stream=this.stream;var Pe=T+"$$"+this.cloneIndex+++"$$";return Se(Pe,ye),ye}var Gl=function(T,$){var xt=_r[T.key],Vt=zi[xt];if(Vt instanceof pu)Tt("q"),Tt(Fa($)),Vt.gState&&F.setGState(Vt.gState),Tt(T.matrix.toString()+" cm"),Tt("/"+xt+" sh"),Tt("Q");else if(Vt instanceof wh){var ae=new Ot(1,0,0,-1,0,qo());T.matrix&&(ae=ae.multiply(T.matrix||Ae),xt=Fc.call(Vt,T.key,T.boundingBox,T.xStep,T.yStep,ae).id),Tt("q"),Tt("/Pattern cs"),Tt("/"+xt+" scn"),Vt.gState&&F.setGState(Vt.gState),Tt($),Tt("Q")}},Fa=function(T){switch(T){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ka=F.moveTo=function(T,$){return Tt(vt(st(T))+" "+vt(yt($))+" m"),this},Bo=F.lineTo=function(T,$){return Tt(vt(st(T))+" "+vt(yt($))+" l"),this},_o=F.curveTo=function(T,$,xt,Vt,ae,ye){return Tt([vt(st(T)),vt(yt($)),vt(st(xt)),vt(yt(Vt)),vt(st(ae)),vt(yt(ye)),"c"].join(" ")),this};F.__private__.line=F.line=function(T,$,xt,Vt,ae){if(isNaN(T)||isNaN($)||isNaN(xt)||isNaN(Vt)||!Br(ae))throw new Error("Invalid arguments passed to jsPDF.line");return ot===tt.COMPAT?this.lines([[xt-T,Vt-$]],T,$,[1,1],ae||"S"):this.lines([[xt-T,Vt-$]],T,$,[1,1]).stroke()},F.__private__.lines=F.lines=function(T,$,xt,Vt,ae,ye){var Pe,Ai,Ri,Ki,tr,mr,ji,an,Bi,fn,qi,Ar;if(typeof T=="number"&&(Ar=xt,xt=$,$=T,T=Ar),Vt=Vt||[1,1],ye=ye||!1,isNaN($)||isNaN(xt)||!Array.isArray(T)||!Array.isArray(Vt)||!Br(ae)||typeof ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ka($,xt),Pe=Vt[0],Ai=Vt[1],Ki=T.length,fn=$,qi=xt,Ri=0;Ri<Ki;Ri++)(tr=T[Ri]).length===2?(fn=tr[0]*Pe+fn,qi=tr[1]*Ai+qi,Bo(fn,qi)):(mr=tr[0]*Pe+fn,ji=tr[1]*Ai+qi,an=tr[2]*Pe+fn,Bi=tr[3]*Ai+qi,fn=tr[4]*Pe+fn,qi=tr[5]*Ai+qi,_o(mr,ji,an,Bi,fn,qi));return ye&&Rn(),el(ae),this},F.path=function(T){for(var $=0;$<T.length;$++){var xt=T[$],Vt=xt.c;switch(xt.op){case"m":ka(Vt[0],Vt[1]);break;case"l":Bo(Vt[0],Vt[1]);break;case"c":_o.apply(this,Vt);break;case"h":Rn()}}return this},F.__private__.rect=F.rect=function(T,$,xt,Vt,ae){if(isNaN(T)||isNaN($)||isNaN(xt)||isNaN(Vt)||!Br(ae))throw new Error("Invalid arguments passed to jsPDF.rect");return ot===tt.COMPAT&&(Vt=-Vt),Tt([vt(st(T)),vt(yt($)),vt(st(xt)),vt(st(Vt)),"re"].join(" ")),el(ae),this},F.__private__.triangle=F.triangle=function(T,$,xt,Vt,ae,ye,Pe){if(isNaN(T)||isNaN($)||isNaN(xt)||isNaN(Vt)||isNaN(ae)||isNaN(ye)||!Br(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[xt-T,Vt-$],[ae-xt,ye-Vt],[T-ae,$-ye]],T,$,[1,1],Pe,!0),this},F.__private__.roundedRect=F.roundedRect=function(T,$,xt,Vt,ae,ye,Pe){if(isNaN(T)||isNaN($)||isNaN(xt)||isNaN(Vt)||isNaN(ae)||isNaN(ye)||!Br(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ai=4/3*(Math.SQRT2-1);return ae=Math.min(ae,.5*xt),ye=Math.min(ye,.5*Vt),this.lines([[xt-2*ae,0],[ae*Ai,0,ae,ye-ye*Ai,ae,ye],[0,Vt-2*ye],[0,ye*Ai,-ae*Ai,ye,-ae,ye],[2*ae-xt,0],[-ae*Ai,0,-ae,-ye*Ai,-ae,-ye],[0,2*ye-Vt],[0,-ye*Ai,ae*Ai,-ye,ae,-ye]],T+ae,$,[1,1],Pe,!0),this},F.__private__.ellipse=F.ellipse=function(T,$,xt,Vt,ae){if(isNaN(T)||isNaN($)||isNaN(xt)||isNaN(Vt)||!Br(ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ye=4/3*(Math.SQRT2-1)*xt,Pe=4/3*(Math.SQRT2-1)*Vt;return ka(T+xt,$),_o(T+xt,$-Pe,T+ye,$-Vt,T,$-Vt),_o(T-ye,$-Vt,T-xt,$-Pe,T-xt,$),_o(T-xt,$+Pe,T-ye,$+Vt,T,$+Vt),_o(T+ye,$+Vt,T+xt,$+Pe,T+xt,$),el(ae),this},F.__private__.circle=F.circle=function(T,$,xt,Vt){if(isNaN(T)||isNaN($)||isNaN(xt)||!Br(Vt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,$,xt,xt,Vt)},F.setFont=function(T,$,xt){return xt&&($=Lt($,xt)),Ei=pe(T,$,{disableWarning:!1}),this};var il=F.__private__.getFont=F.getFont=function(){return Ni[pe.apply(F,arguments)]};F.__private__.getFontList=F.getFontList=function(){var T,$,xt={};for(T in $e)if($e.hasOwnProperty(T))for($ in xt[T]=[],$e[T])$e[T].hasOwnProperty($)&&xt[T].push($);return xt},F.addFont=function(T,$,xt,Vt,ae){var ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ye.indexOf(arguments[3])!==-1?ae=arguments[3]:arguments[3]&&ye.indexOf(arguments[3])==-1&&(xt=Lt(xt,Vt)),ae=ae||"Identity-H",Bn.call(this,T,$,xt,ae)};var Gn,rl=n.lineWidth||.200025,pa=F.__private__.getLineWidth=F.getLineWidth=function(){return rl},xo=F.__private__.setLineWidth=F.setLineWidth=function(T){return rl=T,Tt(vt(st(T))+" w"),this};F.__private__.setLineDash=Xi.API.setLineDash=Xi.API.setLineDashPattern=function(T,$){if(T=T||[],$=$||0,isNaN($)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(xt){return vt(st(xt))}).join(" "),$=vt(st($)),Tt("["+T+"] "+$+" d"),this};var ro=F.__private__.getLineHeight=F.getLineHeight=function(){return He*Gn};F.__private__.getLineHeight=F.getLineHeight=function(){return He*Gn};var fr=F.__private__.setLineHeightFactor=F.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(Gn=T),this},La=F.__private__.getLineHeightFactor=F.getLineHeightFactor=function(){return Gn};fr(n.lineHeight);var Jo=F.__private__.getHorizontalCoordinate=function(T){return st(T)},Cs=F.__private__.getVerticalCoordinate=function(T){return ot===tt.ADVANCED?T:it[dt].mediaBox.topRightY-it[dt].mediaBox.bottomLeftY-st(T)},kc=F.__private__.getHorizontalCoordinateString=F.getHorizontalCoordinateString=function(T){return vt(Jo(T))},Xo=F.__private__.getVerticalCoordinateString=F.getVerticalCoordinateString=function(T){return vt(Cs(T))},no=n.strokeColor||"0 G";F.__private__.getStrokeColor=F.getDrawColor=function(){return pr(no)},F.__private__.setStrokeColor=F.setDrawColor=function(T,$,xt,Vt){return no=ur({ch1:T,ch2:$,ch3:xt,ch4:Vt,pdfColorType:"draw",precision:2}),Tt(no),this};var hA=n.fillColor||"0 g";F.__private__.getFillColor=F.getFillColor=function(){return pr(hA)},F.__private__.setFillColor=F.setFillColor=function(T,$,xt,Vt){return hA=ur({ch1:T,ch2:$,ch3:xt,ch4:Vt,pdfColorType:"fill",precision:2}),Tt(hA),this};var Yo=n.textColor||"0 g",Zl=F.__private__.getTextColor=F.getTextColor=function(){return pr(Yo)};F.__private__.setTextColor=F.setTextColor=function(T,$,xt,Vt){return Yo=ur({ch1:T,ch2:$,ch3:xt,ch4:Vt,pdfColorType:"text",precision:3}),this};var Ea=n.charSpace,Pl=F.__private__.getCharSpace=F.getCharSpace=function(){return parseFloat(Ea||0)};F.__private__.setCharSpace=F.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ea=T,this};var gA=0;F.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},F.__private__.setLineCap=F.setLineCap=function(T){var $=F.CapJoinStyles[T];if($===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gA=$,Tt($+" J"),this};var so=0;F.__private__.setLineJoin=F.setLineJoin=function(T){var $=F.CapJoinStyles[T];if($===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return so=$,Tt($+" j"),this},F.__private__.setLineMiterLimit=F.__private__.setMiterLimit=F.setLineMiterLimit=F.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Tt(vt(st(T))+" M"),this},F.GState=um,F.setGState=function(T){(T=typeof T=="string"?nr[It[T]]:nl(null,T)).equals(K)||(Tt("/"+T.id+" gs"),K=T)};var nl=function(T,$){if(!T||!It[T]){var xt=!1;for(var Vt in nr)if(nr.hasOwnProperty(Vt)&&nr[Vt].equals($)){xt=!0;break}if(xt)$=nr[Vt];else{var ae="GS"+(Object.keys(nr).length+1).toString(10);nr[ae]=$,$.id=ae}return T&&(It[T]=$.id),gt.publish("addGState",$),$}};F.addGState=function(T,$){return nl(T,$),this},F.saveGraphicsState=function(){return Tt("q"),wr.push({key:Ei,size:He,color:Yo}),this},F.restoreGraphicsState=function(){Tt("Q");var T=wr.pop();return Ei=T.key,He=T.size,Yo=T.color,K=null,this},F.setCurrentTransformationMatrix=function(T){return Tt(T.toString()+" cm"),this},F.comment=function(T){return Tt("#"+T),this};var dA=function(T,$){var xt=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return xt},set:function(ye){isNaN(ye)||(xt=parseFloat(ye))}});var Vt=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Vt},set:function(ye){isNaN(ye)||(Vt=parseFloat(ye))}});var ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ae},set:function(ye){ae=ye.toString()}}),this},pA=function(T,$,xt,Vt){dA.call(this,T,$),this.type="rect";var ae=xt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ae},set:function(Pe){isNaN(Pe)||(ae=parseFloat(Pe))}});var ye=Vt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ye},set:function(Pe){isNaN(Pe)||(ye=parseFloat(Pe))}}),this},jo=function(){this.page=z,this.currentPage=dt,this.pages=Ee.slice(0),this.pagesContext=it.slice(0),this.x=ui,this.y=Ve,this.matrix=rr,this.width=Ta(dt),this.height=qo(dt),this.outputDestination=Je,this.id="",this.objectNumber=-1};jo.prototype.restore=function(){z=this.page,dt=this.currentPage,it=this.pagesContext,Ee=this.pages,ui=this.x,Ve=this.y,rr=this.matrix,CA(dt,this.width),IA(dt,this.height),Je=this.outputDestination};var Hl=function(T,$,xt,Vt,ae){Rt.push(new jo),z=dt=0,Ee=[],ui=T,Ve=$,rr=ae,_t([xt,Vt])},fA=function(T){if(Jt[T])Rt.pop().restore();else{var $=new jo,xt="Xo"+(Object.keys(Nt).length+1).toString(10);$.id=xt,Jt[T]=xt,Nt[xt]=$,gt.publish("addFormObject",$),Rt.pop().restore()}};for(var mA in F.beginFormObject=function(T,$,xt,Vt,ae){return Hl(T,$,xt,Vt,ae),this},F.endFormObject=function(T){return fA(T),this},F.doFormObject=function(T,$){var xt=Nt[Jt[T]];return Tt("q"),Tt($.toString()+" cm"),Tt("/"+xt.id+" Do"),Tt("Q"),this},F.getFormObject=function(T){var $=Nt[Jt[T]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},F.save=function(T,$){return T=T||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(du(Ze(ki()),T),typeof du.unload=="function"&&Yi.setTimeout&&setTimeout(du.unload,911),this):new Promise(function(xt,Vt){try{var ae=du(Ze(ki()),T);typeof du.unload=="function"&&Yi.setTimeout&&setTimeout(du.unload,911),xt(ae)}catch(ye){Vt(ye.message)}})},Xi.API)Xi.API.hasOwnProperty(mA)&&(mA==="events"&&Xi.API.events.length?function(T,$){var xt,Vt,ae;for(ae=$.length-1;ae!==-1;ae--)xt=$[ae][0],Vt=$[ae][1],T.subscribe.apply(T,[xt].concat(typeof Vt=="function"?[Vt]:Vt))}(gt,Xi.API.events):F[mA]=Xi.API[mA]);var Ta=F.getPageWidth=function(T){return(it[T=T||dt].mediaBox.topRightX-it[T].mediaBox.bottomLeftX)/ne},CA=F.setPageWidth=function(T,$){it[T].mediaBox.topRightX=$*ne+it[T].mediaBox.bottomLeftX},qo=F.getPageHeight=function(T){return(it[T=T||dt].mediaBox.topRightY-it[T].mediaBox.bottomLeftY)/ne},IA=F.setPageHeight=function(T,$){it[T].mediaBox.topRightY=$*ne+it[T].mediaBox.bottomLeftY};return F.internal={pdfEscape:St,getStyle:ms,getFont:il,getFontSize:ze,getCharSpace:Pl,getTextColor:Zl,getLineHeight:ro,getLineHeightFactor:La,getLineWidth:pa,write:Xe,getHorizontalCoordinate:Jo,getVerticalCoordinate:Cs,getCoordinateString:kc,getVerticalCoordinateString:Xo,collections:{},newObject:Ye,newAdditionalObject:Ti,newObjectDeferred:je,newObjectDeferredBegin:Mi,getFilters:Qi,putStream:Oi,events:gt,scaleFactor:ne,pageSize:{getWidth:function(){return Ta(dt)},setWidth:function(T){CA(dt,T)},getHeight:function(){return qo(dt)},setHeight:function(T){IA(dt,T)}},encryptionOptions:_,encryption:ai,getEncryptor:wi,output:Fe,getNumberOfPages:Ie,pages:Ee,out:Tt,f2:qt,f3:at,getPageInfo:ar,getPageInfoByObjId:si,getCurrentPageInfo:vr,getPDFVersion:H,Point:dA,Rectangle:pA,Matrix:Ot,hasHotfix:ii},Object.defineProperty(F.internal.pageSize,"width",{get:function(){return Ta(dt)},set:function(T){CA(dt,T)},enumerable:!0,configurable:!0}),Object.defineProperty(F.internal.pageSize,"height",{get:function(){return qo(dt)},set:function(T){IA(dt,T)},enumerable:!0,configurable:!0}),ht.call(F,Le),Ei="F1",zt(l,r),gt.publish("initialized"),F}function iS(n){return n.reduce(function(e,r,o){return e[r]=o,e},{})}function Yy(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return rS[s=s||"normal"]?s:"normal"}(n.style),o=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),l=function(s){return typeof Xy[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:r,weight:o,stretch:l,src:n.src||[],ref:n.ref||{name:e,style:[l,r,o].join(" ")}}}function L5(n,e,r,o){var l;for(l=r;l>=0&&l<e.length;l+=o)if(n[e[l]])return n[e[l]];for(l=r;l>=0&&l<e.length;l-=o)if(n[e[l]])return n[e[l]]}function T5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function sK(n,e,r){for(var o=(r=r||{}).defaultFontFamily||"times",l=Object.assign({},nK,r.genericFontFamilies||{}),s=null,p=null,m=0;m<e.length;++m)if(l[(s=Yy(e[m])).family]&&(s.family=l[s.family]),n.hasOwnProperty(s.family)){p=n[s.family];break}if(!(p=p||n[o]))throw new Error("Could not find a font-family for the rule '"+T5(s)+"' and default family '"+o+"'.");if(p=function(I,w){if(w[I])return w[I];var _=Xy[I],E=_<=Xy.normal?-1:1,U=L5(w,nS,_,E);if(!U)throw new Error("Could not find a matching font-stretch value for "+I);return U}(s.stretch,p),p=function(I,w){if(w[I])return w[I];for(var _=rS[I],E=0;E<_.length;++E)if(w[_[E]])return w[_[E]];throw new Error("Could not find a matching font-style for "+I)}(s.style,p),!(p=function(I,w){if(w[I])return w[I];if(I===400&&w[500])return w[500];if(I===500&&w[400])return w[400];var _=rK[I],E=L5(w,sS,_,I<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+I);return E}(s.weight,p)))throw new Error("Failed to resolve a font for the rule '"+T5(s)+"'.");return p}function U5(n){return n.trimLeft()}function oK(n,e){for(var r=0;r<n.length;){if(n.charAt(r)===e)return[n.substring(0,r),n.substring(r+1)];r+=1}return null}function aK(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}function lK(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=n[e++]|n[e++]<<8,o=n[e++]|n[e++]<<8,l=n[e++],s=l>>7,p=1<<(7&l)+1;n[e++],n[e++];var m=null,I=null;s&&(m=e,I=p,e+=3*p);var w=!0,_=[],E=0,U=null,F=0,V=null;for(this.width=r,this.height=o;w&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,V=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((at=n[e++])>=0))throw Error("Invalid block size");if(at===0)break;e+=at}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var H=n[e++];E=n[e++]|n[e++]<<8,U=n[e++],!(1&H)&&(U=null),F=H>>2&7,e++;break;case 254:for(;;){if(!((at=n[e++])>=0))throw Error("Invalid block size");if(at===0)break;e+=at}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var Y=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,tt=n[e++]|n[e++]<<8,ot=n[e++]|n[e++]<<8,bt=n[e++],kt=bt>>6&1,Lt=1<<(7&bt)+1,vt=m,ft=I,Mt=!1;bt>>7&&(Mt=!0,vt=e,ft=Lt,e+=3*Lt);var qt=e;for(e++;;){var at;if(!((at=n[e++])>=0))throw Error("Invalid block size");if(at===0)break;e+=at}_.push({x:Y,y:D,width:tt,height:ot,has_local_palette:Mt,palette_offset:vt,palette_size:ft,data_offset:qt,data_length:e-qt,transparent_index:U,interlaced:!!kt,delay:E,disposal:F});break;case 59:w=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return V},this.frameInfo=function(st){if(st<0||st>=_.length)throw new Error("Frame index out of range.");return _[st]},this.decodeAndBlitFrameBGRA=function(st,wt){var yt=this.frameInfo(st),te=yt.width*yt.height,jt=new Uint8Array(te);M5(n,yt.data_offset,jt,te);var Xt=yt.palette_offset,Wt=yt.transparent_index;Wt===null&&(Wt=256);var Ct=yt.width,Et=r-Ct,ue=Ct,J=4*(yt.y*r+yt.x),dt=4*((yt.y+yt.height)*r+yt.x),mt=J,Ut=4*Et;yt.interlaced===!0&&(Ut+=4*r*7);for(var Pt=8,ie=0,le=jt.length;ie<le;++ie){var ce=jt[ie];if(ue===0&&(ue=Ct,(mt+=Ut)>=dt&&(Ut=4*Et+4*r*(Pt-1),mt=J+(Ct+Et)*(Pt<<1),Pt>>=1)),ce===Wt)mt+=4;else{var Qe=n[Xt+3*ce],Ee=n[Xt+3*ce+1],We=n[Xt+3*ce+2];wt[mt++]=We,wt[mt++]=Ee,wt[mt++]=Qe,wt[mt++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(st,wt){var yt=this.frameInfo(st),te=yt.width*yt.height,jt=new Uint8Array(te);M5(n,yt.data_offset,jt,te);var Xt=yt.palette_offset,Wt=yt.transparent_index;Wt===null&&(Wt=256);var Ct=yt.width,Et=r-Ct,ue=Ct,J=4*(yt.y*r+yt.x),dt=4*((yt.y+yt.height)*r+yt.x),mt=J,Ut=4*Et;yt.interlaced===!0&&(Ut+=4*r*7);for(var Pt=8,ie=0,le=jt.length;ie<le;++ie){var ce=jt[ie];if(ue===0&&(ue=Ct,(mt+=Ut)>=dt&&(Ut=4*Et+4*r*(Pt-1),mt=J+(Ct+Et)*(Pt<<1),Pt>>=1)),ce===Wt)mt+=4;else{var Qe=n[Xt+3*ce],Ee=n[Xt+3*ce+1],We=n[Xt+3*ce+2];wt[mt++]=Qe,wt[mt++]=Ee,wt[mt++]=We,wt[mt++]=255}--ue}}}function M5(n,e,r,o){for(var l=n[e++],s=1<<l,p=s+1,m=p+1,I=l+1,w=(1<<I)-1,_=0,E=0,U=0,F=n[e++],V=new Int32Array(4096),H=null;;){for(;_<16&&F!==0;)E|=n[e++]<<_,_+=8,F===1?F=n[e++]:--F;if(_<I)break;var Y=E&w;if(E>>=I,_-=I,Y!==s){if(Y===p)break;for(var D=Y<m?Y:H,tt=0,ot=D;ot>s;)ot=V[ot]>>8,++tt;var bt=ot;if(U+tt+(D!==Y?1:0)>o)return void tn.log("Warning, gif stream longer than expected.");r[U++]=bt;var kt=U+=tt;for(D!==Y&&(r[U++]=bt),ot=D;tt--;)ot=V[ot],r[--kt]=255&ot,ot>>=8;H!==null&&m<4096&&(V[m++]=H<<8|bt,m>=w+1&&I<12&&(++I,w=w<<1|1)),H=Y}else m=p+1,w=(1<<(I=l+1))-1,H=null}return U!==o&&tn.log("Warning, gif stream shorter than expected."),r}function Hy(n){var e,r,o,l,s,p=Math.floor,m=new Array(64),I=new Array(64),w=new Array(64),_=new Array(64),E=new Array(65535),U=new Array(65535),F=new Array(64),V=new Array(64),H=[],Y=0,D=7,tt=new Array(64),ot=new Array(64),bt=new Array(64),kt=new Array(256),Lt=new Array(2048),vt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ft=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mt=[0,1,2,3,4,5,6,7,8,9,10,11],qt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],at=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],st=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],wt=[0,1,2,3,4,5,6,7,8,9,10,11],yt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function jt(J,dt){for(var mt=0,Ut=0,Pt=new Array,ie=1;ie<=16;ie++){for(var le=1;le<=J[ie];le++)Pt[dt[Ut]]=[],Pt[dt[Ut]][0]=mt,Pt[dt[Ut]][1]=ie,Ut++,mt++;mt*=2}return Pt}function Xt(J){for(var dt=J[0],mt=J[1]-1;mt>=0;)dt&1<<mt&&(Y|=1<<D),mt--,--D<0&&(Y==255?(Wt(255),Wt(0)):Wt(Y),D=7,Y=0)}function Wt(J){H.push(J)}function Ct(J){Wt(J>>8&255),Wt(255&J)}function Et(J,dt,mt,Ut,Pt){for(var ie,le=Pt[0],ce=Pt[240],Qe=function(Le,He){var Ke,ze,ti,ci,Si,he,Zi,Hi,pi,Ei,ne=0;for(pi=0;pi<8;++pi){Ke=Le[ne],ze=Le[ne+1],ti=Le[ne+2],ci=Le[ne+3],Si=Le[ne+4],he=Le[ne+5],Zi=Le[ne+6];var ui=Ke+(Hi=Le[ne+7]),Ve=Ke-Hi,rr=ze+Zi,Ni=ze-Zi,$e=ti+he,wr=ti-he,zi=ci+Si,_r=ci-Si,nr=ui+zi,It=ui-zi,K=rr+$e,z=rr-$e;Le[ne]=nr+K,Le[ne+4]=nr-K;var it=.707106781*(z+It);Le[ne+2]=It+it,Le[ne+6]=It-it;var gt=.382683433*((nr=_r+wr)-(z=Ni+Ve)),Ht=.5411961*nr+gt,Nt=1.306562965*z+gt,Jt=.707106781*(K=wr+Ni),Rt=Ve+Jt,Ot=Ve-Jt;Le[ne+5]=Ot+Ht,Le[ne+3]=Ot-Ht,Le[ne+1]=Rt+Nt,Le[ne+7]=Rt-Nt,ne+=8}for(ne=0,pi=0;pi<8;++pi){Ke=Le[ne],ze=Le[ne+8],ti=Le[ne+16],ci=Le[ne+24],Si=Le[ne+32],he=Le[ne+40],Zi=Le[ne+48];var me=Ke+(Hi=Le[ne+56]),Ae=Ke-Hi,Se=ze+Zi,Ye=ze-Zi,je=ti+he,Mi=ti-he,Ti=ci+Si,Vi=ci-Si,vi=me+Ti,pr=me-Ti,ur=Se+je,Qi=Se-je;Le[ne]=vi+ur,Le[ne+32]=vi-ur;var Oi=.707106781*(Qi+pr);Le[ne+16]=pr+Oi,Le[ne+48]=pr-Oi;var sr=.382683433*((vi=Vi+Mi)-(Qi=Ye+Ae)),Zt=.5411961*vi+sr,Ne=1.306562965*Qi+sr,ke=.707106781*(ur=Mi+Ye),Wi=Ae+ke,Fi=Ae-ke;Le[ne+40]=Fi+Zt,Le[ne+24]=Fi-Zt,Le[ne+8]=Wi+Ne,Le[ne+56]=Wi-Ne,ne++}for(pi=0;pi<64;++pi)Ei=Le[pi]*He[pi],F[pi]=Ei>0?Ei+.5|0:Ei-.5|0;return F}(J,dt),Ee=0;Ee<64;++Ee)V[vt[Ee]]=Qe[Ee];var We=V[0]-mt;mt=V[0],We==0?Xt(Ut[0]):(Xt(Ut[U[ie=32767+We]]),Xt(E[ie]));for(var Je=63;Je>0&&V[Je]==0;)Je--;if(Je==0)return Xt(le),mt;for(var Dt,de=1;de<=Je;){for(var Tt=de;V[de]==0&&de<=Je;)++de;var Xe=de-Tt;if(Xe>=16){Dt=Xe>>4;for(var Oe=1;Oe<=Dt;++Oe)Xt(ce);Xe&=15}ie=32767+V[de],Xt(Pt[(Xe<<4)+U[ie]]),Xt(E[ie]),de++}return Je!=63&&Xt(le),mt}function ue(J){J=Math.min(Math.max(J,1),100),s!=J&&(function(dt){for(var mt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ut=0;Ut<64;Ut++){var Pt=p((mt[Ut]*dt+50)/100);Pt=Math.min(Math.max(Pt,1),255),m[vt[Ut]]=Pt}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var ce=p((ie[le]*dt+50)/100);ce=Math.min(Math.max(ce,1),255),I[vt[le]]=ce}for(var Qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ee=0,We=0;We<8;We++)for(var Je=0;Je<8;Je++)w[Ee]=1/(m[vt[Ee]]*Qe[We]*Qe[Je]*8),_[Ee]=1/(I[vt[Ee]]*Qe[We]*Qe[Je]*8),Ee++}(J<50?Math.floor(5e3/J):Math.floor(200-2*J)),s=J)}this.encode=function(J,dt){dt&&ue(dt),H=new Array,Y=0,D=7,Ct(65496),Ct(65504),Ct(16),Wt(74),Wt(70),Wt(73),Wt(70),Wt(0),Wt(1),Wt(1),Wt(0),Ct(1),Ct(1),Wt(0),Wt(0),function(){Ct(65499),Ct(132),Wt(0);for(var ze=0;ze<64;ze++)Wt(m[ze]);Wt(1);for(var ti=0;ti<64;ti++)Wt(I[ti])}(),function(ze,ti){Ct(65472),Ct(17),Wt(8),Ct(ti),Ct(ze),Wt(3),Wt(1),Wt(17),Wt(0),Wt(2),Wt(17),Wt(1),Wt(3),Wt(17),Wt(1)}(J.width,J.height),function(){Ct(65476),Ct(418),Wt(0);for(var ze=0;ze<16;ze++)Wt(ft[ze+1]);for(var ti=0;ti<=11;ti++)Wt(Mt[ti]);Wt(16);for(var ci=0;ci<16;ci++)Wt(qt[ci+1]);for(var Si=0;Si<=161;Si++)Wt(at[Si]);Wt(1);for(var he=0;he<16;he++)Wt(st[he+1]);for(var Zi=0;Zi<=11;Zi++)Wt(wt[Zi]);Wt(17);for(var Hi=0;Hi<16;Hi++)Wt(yt[Hi+1]);for(var pi=0;pi<=161;pi++)Wt(te[pi])}(),Ct(65498),Ct(12),Wt(3),Wt(1),Wt(0),Wt(2),Wt(17),Wt(3),Wt(17),Wt(0),Wt(63),Wt(0);var mt=0,Ut=0,Pt=0;Y=0,D=7,this.encode.displayName="_encode_";for(var ie,le,ce,Qe,Ee,We,Je,Dt,de,Tt=J.data,Xe=J.width,Oe=J.height,Le=4*Xe,He=0;He<Oe;){for(ie=0;ie<Le;){for(Ee=Le*He+ie,Je=-1,Dt=0,de=0;de<64;de++)We=Ee+(Dt=de>>3)*Le+(Je=4*(7&de)),He+Dt>=Oe&&(We-=Le*(He+1+Dt-Oe)),ie+Je>=Le&&(We-=ie+Je-Le+4),le=Tt[We++],ce=Tt[We++],Qe=Tt[We++],tt[de]=(Lt[le]+Lt[ce+256>>0]+Lt[Qe+512>>0]>>16)-128,ot[de]=(Lt[le+768>>0]+Lt[ce+1024>>0]+Lt[Qe+1280>>0]>>16)-128,bt[de]=(Lt[le+1280>>0]+Lt[ce+1536>>0]+Lt[Qe+1792>>0]>>16)-128;mt=Et(tt,w,mt,e,o),Ut=Et(ot,_,Ut,r,l),Pt=Et(bt,_,Pt,r,l),ie+=32}He+=8}if(D>=0){var Ke=[];Ke[1]=D+1,Ke[0]=(1<<D+1)-1,Xt(Ke)}return Ct(65497),new Uint8Array(H)},n=n||50,function(){for(var J=String.fromCharCode,dt=0;dt<256;dt++)kt[dt]=J(dt)}(),e=jt(ft,Mt),r=jt(st,wt),o=jt(qt,at),l=jt(yt,te),function(){for(var J=1,dt=2,mt=1;mt<=15;mt++){for(var Ut=J;Ut<dt;Ut++)U[32767+Ut]=mt,E[32767+Ut]=[],E[32767+Ut][1]=mt,E[32767+Ut][0]=Ut;for(var Pt=-(dt-1);Pt<=-J;Pt++)U[32767+Pt]=mt,E[32767+Pt]=[],E[32767+Pt][1]=mt,E[32767+Pt][0]=dt-1+Pt;J<<=1,dt<<=1}}(),function(){for(var J=0;J<256;J++)Lt[J]=19595*J,Lt[J+256>>0]=38470*J,Lt[J+512>>0]=7471*J+32768,Lt[J+768>>0]=-11059*J,Lt[J+1024>>0]=-21709*J,Lt[J+1280>>0]=32768*J+8421375,Lt[J+1536>>0]=-27439*J,Lt[J+1792>>0]=-5329*J}(),ue(n)}function lA(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N5(n){function e(ft){if(!ft)throw Error("assert :P")}function r(ft,Mt,qt){for(var at=0;4>at;at++)if(ft[Mt+at]!=qt.charCodeAt(at))return!0;return!1}function o(ft,Mt,qt,at,st){for(var wt=0;wt<st;wt++)ft[Mt+wt]=qt[at+wt]}function l(ft,Mt,qt,at){for(var st=0;st<at;st++)ft[Mt+st]=qt}function s(ft){return new Int32Array(ft)}function p(ft,Mt){for(var qt=[],at=0;at<ft;at++)qt.push(new Mt);return qt}function m(ft,Mt){var qt=[];return function at(st,wt,yt){for(var te=yt[wt],jt=0;jt<te&&(st.push(yt.length>wt+1?[]:new Mt),!(yt.length<wt+1));jt++)at(st[jt],wt+1,yt)}(qt,0,ft),qt}var I=function(){var ft=this;function Mt(u,t){for(var a=1<<t-1>>>0;u&a;)a>>>=1;return a?(u&a-1)+a:u}function qt(u,t,a,h,g){e(!(h%a));do u[t+(h-=a)]=g;while(0<h)}function at(u,t,a,h,g){if(e(2328>=g),512>=g)var f=s(512);else if((f=s(g))==null)return 0;return function(y,B,x,k,R,G){var P,M,j=B,et=1<<x,W=s(16),X=s(16);for(e(R!=0),e(k!=null),e(y!=null),e(0<x),M=0;M<R;++M){if(15<k[M])return 0;++W[k[M]]}if(W[0]==R)return 0;for(X[1]=0,P=1;15>P;++P){if(W[P]>1<<P)return 0;X[P+1]=X[P]+W[P]}for(M=0;M<R;++M)P=k[M],0<k[M]&&(G[X[P]++]=M);if(X[15]==1)return(k=new st).g=0,k.value=G[0],qt(y,j,1,et,k),et;var ct,rt=-1,ut=et-1,Ft=0,Qt=1,se=1,oe=1<<x;for(M=0,P=1,R=2;P<=x;++P,R<<=1){if(Qt+=se<<=1,0>(se-=W[P]))return 0;for(;0<W[P];--W[P])(k=new st).g=P,k.value=G[M++],qt(y,j+Ft,R,oe,k),Ft=Mt(Ft,P)}for(P=x+1,R=2;15>=P;++P,R<<=1){if(Qt+=se<<=1,0>(se-=W[P]))return 0;for(;0<W[P];--W[P]){if(k=new st,(Ft&ut)!=rt){for(j+=oe,ct=1<<(rt=P)-x;15>rt&&!(0>=(ct-=W[rt]));)++rt,ct<<=1;et+=oe=1<<(ct=rt-x),y[B+(rt=Ft&ut)].g=ct+x,y[B+rt].value=j-B-rt}k.g=P-x,k.value=G[M++],qt(y,j+(Ft>>x),R,oe,k),Ft=Mt(Ft,P)}}return Qt!=2*X[15]-1?0:et}(u,t,a,h,g,f)}function st(){this.value=this.g=0}function wt(){this.value=this.g=0}function yt(){this.G=p(5,st),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(Pn,wt)}function te(u,t,a,h){e(u!=null),e(t!=null),e(2147483648>h),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=t,u.pa=a,u.Jd=t,u.Yc=a+h,u.Zc=4<=h?a+h-4+1:a,ie(u)}function jt(u,t){for(var a=0;0<t--;)a|=ce(u,128)<<t;return a}function Xt(u,t){var a=jt(u,t);return le(u)?-a:a}function Wt(u,t,a,h){var g,f=0;for(e(u!=null),e(t!=null),e(4294967288>h),u.Sb=h,u.Ra=0,u.u=0,u.h=0,4<h&&(h=4),g=0;g<h;++g)f+=t[a+g]<<8*g;u.Ra=f,u.bb=h,u.oa=t,u.pa=a}function Ct(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Fo-8>>>0,++u.bb,u.u-=8;mt(u)&&(u.h=1,u.u=0)}function Et(u,t){if(e(0<=t),!u.h&&t<=So){var a=dt(u)&Ls[t];return u.u+=t,Ct(u),a}return u.h=1,u.u=0}function ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function dt(u){return u.Ra>>>(u.u&Fo-1)>>>0}function mt(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Fo}function Ut(u,t){u.u=t,u.h=mt(u)}function Pt(u){u.u>=ko&&(e(u.u>=ko),Ct(u))}function ie(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function le(u){return jt(u,1)}function ce(u,t){var a=u.Ca;0>u.b&&ie(u);var h=u.b,g=a*t>>>8,f=(u.I>>>h>g)+0;for(f?(a-=g,u.I-=g+1<<h>>>0):a=g+1,h=a,g=0;256<=h;)g+=8,h>>=8;return h=7^g+In[h],u.b-=h,u.Ca=(a<<h)-1,f}function Qe(u,t,a){u[t+0]=a>>24&255,u[t+1]=a>>16&255,u[t+2]=a>>8&255,u[t+3]=a>>0&255}function Ee(u,t){return u[t+0]<<0|u[t+1]<<8}function We(u,t){return Ee(u,t)|u[t+2]<<16}function Je(u,t){return Ee(u,t)|Ee(u,t+2)<<16}function Dt(u,t){var a=1<<t;return e(u!=null),e(0<t),u.X=s(a),u.X==null?0:(u.Mb=32-t,u.Xa=t,1)}function de(u,t){e(u!=null),e(t!=null),e(u.Xa==t.Xa),o(t.X,0,u.X,0,1<<t.Xa)}function Tt(){this.X=[],this.Xa=this.Mb=0}function Xe(u,t,a,h){e(a!=null),e(h!=null);var g=a[0],f=h[0];return g==0&&(g=(u*f+t/2)/t),f==0&&(f=(t*g+u/2)/u),0>=g||0>=f?0:(a[0]=g,h[0]=f,1)}function Oe(u,t){return u+(1<<t)-1>>>t}function Le(u,t){return((4278255360&u)+(4278255360&t)>>>0&4278255360)+((16711935&u)+(16711935&t)>>>0&16711935)>>>0}function He(u,t){ft[t]=function(a,h,g,f,y,B,x){var k;for(k=0;k<y;++k){var R=ft[u](B[x+k-1],g,f+k);B[x+k]=Le(a[h+k],R)}}}function Ke(){this.ud=this.hd=this.jd=0}function ze(u,t){return((4278124286&(u^t))>>>1)+(u&t)>>>0}function ti(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function ci(u,t){return ti(u+(u-t+.5>>1))}function Si(u,t,a){return Math.abs(t-a)-Math.abs(u-a)}function he(u,t,a,h,g,f,y){for(h=f[y-1],a=0;a<g;++a)f[y+a]=h=Le(u[t+a],h)}function Zi(u,t,a,h,g){var f;for(f=0;f<a;++f){var y=u[t+f],B=y>>8&255,x=16711935&(x=(x=16711935&y)+((B<<16)+B));h[g+f]=(4278255360&y)+x>>>0}}function Hi(u,t){t.jd=u>>0&255,t.hd=u>>8&255,t.ud=u>>16&255}function pi(u,t,a,h,g,f){var y;for(y=0;y<h;++y){var B=t[a+y],x=B>>>8,k=B,R=255&(R=(R=B>>>16)+((u.jd<<24>>24)*(x<<24>>24)>>>5));k=255&(k=(k=k+((u.hd<<24>>24)*(x<<24>>24)>>>5))+((u.ud<<24>>24)*(R<<24>>24)>>>5)),g[f+y]=(4278255360&B)+(R<<16)+k}}function Ei(u,t,a,h,g){ft[t]=function(f,y,B,x,k,R,G,P,M){for(x=G;x<P;++x)for(G=0;G<M;++G)k[R++]=g(B[h(f[y++])])},ft[u]=function(f,y,B,x,k,R,G){var P=8>>f.b,M=f.Ea,j=f.K[0],et=f.w;if(8>P)for(f=(1<<f.b)-1,et=(1<<P)-1;y<B;++y){var W,X=0;for(W=0;W<M;++W)W&f||(X=h(x[k++])),R[G++]=g(j[X&et]),X>>=P}else ft["VP8LMapColor"+a](x,k,j,et,R,G,y,B,M)}}function ne(u,t,a,h,g){for(a=t+a;t<a;){var f=u[t++];h[g++]=f>>16&255,h[g++]=f>>8&255,h[g++]=f>>0&255}}function ui(u,t,a,h,g){for(a=t+a;t<a;){var f=u[t++];h[g++]=f>>16&255,h[g++]=f>>8&255,h[g++]=f>>0&255,h[g++]=f>>24&255}}function Ve(u,t,a,h,g){for(a=t+a;t<a;){var f=(y=u[t++])>>16&240|y>>12&15,y=y>>0&240|y>>28&15;h[g++]=f,h[g++]=y}}function rr(u,t,a,h,g){for(a=t+a;t<a;){var f=(y=u[t++])>>16&248|y>>13&7,y=y>>5&224|y>>3&31;h[g++]=f,h[g++]=y}}function Ni(u,t,a,h,g){for(a=t+a;t<a;){var f=u[t++];h[g++]=f>>0&255,h[g++]=f>>8&255,h[g++]=f>>16&255}}function $e(u,t,a,h,g,f){if(f==0)for(a=t+a;t<a;)Qe(h,((f=u[t++])[0]>>24|f[1]>>8&65280|f[2]<<8&16711680|f[3]<<24)>>>0),g+=32;else o(h,g,u,t,a)}function wr(u,t){ft[t][0]=ft[u+"0"],ft[t][1]=ft[u+"1"],ft[t][2]=ft[u+"2"],ft[t][3]=ft[u+"3"],ft[t][4]=ft[u+"4"],ft[t][5]=ft[u+"5"],ft[t][6]=ft[u+"6"],ft[t][7]=ft[u+"7"],ft[t][8]=ft[u+"8"],ft[t][9]=ft[u+"9"],ft[t][10]=ft[u+"10"],ft[t][11]=ft[u+"11"],ft[t][12]=ft[u+"12"],ft[t][13]=ft[u+"13"],ft[t][14]=ft[u+"0"],ft[t][15]=ft[u+"0"]}function zi(u){return u==al||u==Al||u==SA||u==ll}function _r(){this.eb=[],this.size=this.A=this.fb=0}function nr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function It(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _r,this.f.kb=new nr,this.sd=null}function K(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function z(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function it(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function gt(u,t){var a=u.T,h=t.ba.f.RGBA,g=h.eb,f=h.fb+u.ka*h.A,y=Ps[t.ba.S],B=u.y,x=u.O,k=u.f,R=u.N,G=u.ea,P=u.W,M=t.cc,j=t.dc,et=t.Mc,W=t.Nc,X=u.ka,ct=u.ka+u.T,rt=u.U,ut=rt+1>>1;for(X==0?y(B,x,null,null,k,R,G,P,k,R,G,P,g,f,null,null,rt):(y(t.ec,t.fc,B,x,M,j,et,W,k,R,G,P,g,f-h.A,g,f,rt),++a);X+2<ct;X+=2)M=k,j=R,et=G,W=P,R+=u.Rc,P+=u.Rc,f+=2*h.A,y(B,(x+=2*u.fa)-u.fa,B,x,M,j,et,W,k,R,G,P,g,f-h.A,g,f,rt);return x+=u.fa,u.j+ct<u.o?(o(t.ec,t.fc,B,x,rt),o(t.cc,t.dc,k,R,ut),o(t.Mc,t.Nc,G,P,ut),a--):1&ct||y(B,x,null,null,k,R,G,P,k,R,G,P,g,f+h.A,null,null,rt),a}function Ht(u,t,a){var h=u.F,g=[u.J];if(h!=null){var f=u.U,y=t.ba.S,B=y==Go||y==SA;t=t.ba.f.RGBA;var x=[0],k=u.ka;x[0]=u.T,u.Kb&&(k==0?--x[0]:(--k,g[0]-=u.width),u.j+u.ka+u.T==u.o&&(x[0]=u.o-u.j-k));var R=t.eb;k=t.fb+k*t.A,u=sl(h,g[0],u.width,f,x,R,k+(B?0:3),t.A),e(a==x),u&&zi(y)&&ns(R,k,B,f,x,t.A)}return 0}function Nt(u){var t=u.ma,a=t.ba.S,h=11>a,g=a==Ha||a==BA||a==Go||a==_A||a==12||zi(a);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Zn(t.Oa,u,g?11:12))return 0;if(g&&zi(a)&&Pe(),u.da)alert("todo:use_scaling");else{if(h){if(t.Ib=it,u.Kb){if(a=u.U+1>>1,t.memory=s(u.U+2*a),t.memory==null)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+u.U,t.Mc=t.cc,t.Nc=t.dc+a,t.Ib=gt,Pe()}}else alert("todo:EmitYUV");g&&(t.Jb=Ht,h&&ae())}if(h&&!ul){for(u=0;256>u;++u)zl[u]=89858*(u-128)+Ol>>LA,gl[u]=-22014*(u-128)+Ol,hl[u]=-45773*(u-128),Iu[u]=113618*(u-128)+Ol>>LA;for(u=cl;u<jn;++u)t=76283*(u-16)+Ol>>LA,Ho[u-cl]=Cn(t,255),dl[u-cl]=Cn(t+8>>4,15);ul=1}return 1}function Jt(u){var t=u.ma,a=u.U,h=u.T;return e(!(1&u.ka)),0>=a||0>=h?0:(a=t.Ib(u,t),t.Jb!=null&&t.Jb(u,t,a),t.Dc+=a,1)}function Rt(u){u.ma.memory=null}function Ot(u,t,a,h){return Et(u,8)!=47?0:(t[0]=Et(u,14)+1,a[0]=Et(u,14)+1,h[0]=Et(u,1),Et(u,3)!=0?0:!u.h)}function me(u,t){if(4>u)return u+1;var a=u-2>>1;return(2+(1&u)<<a)+Et(t,a)+1}function Ae(u,t){return 120<t?t-120:1<=(a=((a=Ec[t-1])>>4)*u+(8-(15&a)))?a:1;var a}function Se(u,t,a){var h=dt(a),g=u[t+=255&h].g-8;return 0<g&&(Ut(a,a.u+8),h=dt(a),t+=u[t].value,t+=h&(1<<g)-1),Ut(a,a.u+u[t].g),u[t].value}function Ye(u,t,a){return a.g+=u.g,a.value+=u.value<<t>>>0,e(8>=a.g),u.g}function je(u,t,a){var h=u.xc;return e((t=h==0?0:u.vc[u.md*(a>>h)+(t>>h)])<u.Wb),u.Ya[t]}function Mi(u,t,a,h){var g=u.ab,f=u.c*t,y=u.C;t=y+t;var B=a,x=h;for(h=u.Ta,a=u.Ua;0<g--;){var k=u.gc[g],R=y,G=t,P=B,M=x,j=(x=h,B=a,k.Ea);switch(e(R<G),e(G<=k.nc),k.hc){case 2:$o(P,M,(G-R)*j,x,B);break;case 0:var et=R,W=G,X=x,ct=B,rt=(oe=k).Ea;et==0&&(yA(P,M,null,null,1,X,ct),he(P,M+1,0,0,rt-1,X,ct+1),M+=rt,ct+=rt,++et);for(var ut=1<<oe.b,Ft=ut-1,Qt=Oe(rt,oe.b),se=oe.K,oe=oe.w+(et>>oe.b)*Qt;et<W;){var xe=se,Ue=oe,_e=1;for(Lo(P,M,X,ct-rt,1,X,ct);_e<rt;){var Be=(_e&~Ft)+ut;Be>rt&&(Be=rt),(0,Ca[xe[Ue++]>>8&15])(P,M+ +_e,X,ct+_e-rt,Be-_e,X,ct+_e),_e=Be}M+=rt,ct+=rt,++et&Ft||(oe+=Qt)}G!=k.nc&&o(x,B-j,x,B+(G-R-1)*j,j);break;case 1:for(j=P,W=M,rt=(P=k.Ea)-(ct=P&~(X=(M=1<<k.b)-1)),et=Oe(P,k.b),ut=k.K,k=k.w+(R>>k.b)*et;R<G;){for(Ft=ut,Qt=k,se=new Ke,oe=W+ct,xe=W+P;W<oe;)Hi(Ft[Qt++],se),ys(se,j,W,M,x,B),W+=M,B+=M;W<xe&&(Hi(Ft[Qt++],se),ys(se,j,W,rt,x,B),W+=rt,B+=rt),++R&X||(k+=et)}break;case 3:if(P==x&&M==B&&0<k.b){for(W=x,P=j=B+(G-R)*j-(ct=(G-R)*Oe(k.Ea,k.b)),M=x,X=B,et=[],ct=(rt=ct)-1;0<=ct;--ct)et[ct]=M[X+ct];for(ct=rt-1;0<=ct;--ct)W[P+ct]=et[ct];Es(k,R,G,x,j,x,B)}else Es(k,R,G,P,M,x,B)}B=h,x=a}x!=a&&o(h,a,B,x,f)}function Ti(u,t){var a=u.V,h=u.Ba+u.c*u.C,g=t-u.C;if(e(t<=u.l.o),e(16>=g),0<g){var f=u.l,y=u.Ta,B=u.Ua,x=f.width;if(Mi(u,g,a,h),g=B=[B],e((a=u.C)<(h=t)),e(f.v<f.va),h>f.o&&(h=f.o),a<f.j){var k=f.j-a;a=f.j,g[0]+=k*x}if(a>=h?a=0:(g[0]+=4*f.v,f.ka=a-f.j,f.U=f.va-f.v,f.T=h-a,a=1),a){if(B=B[0],11>(a=u.ca).S){var R=a.f.RGBA,G=(h=a.S,g=f.U,f=f.T,k=R.eb,R.A),P=f;for(R=R.fb+u.Ma*R.A;0<P--;){var M=y,j=B,et=g,W=k,X=R;switch(h){case wA:Hn(M,j,et,W,X);break;case Ha:ta(M,j,et,W,X);break;case al:ta(M,j,et,W,X),ns(W,X,0,et,1,0);break;case Nl:Ga(M,j,et,W,X);break;case BA:$e(M,j,et,W,X,1);break;case Al:$e(M,j,et,W,X,1),ns(W,X,0,et,1,0);break;case Go:$e(M,j,et,W,X,0);break;case SA:$e(M,j,et,W,X,0),ns(W,X,1,et,1,0);break;case _A:bs(M,j,et,W,X);break;case ll:bs(M,j,et,W,X),Pa(W,X,et,1,0);break;case xA:Eo(M,j,et,W,X);break;default:e(0)}B+=x,R+=G}u.Ma+=f}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=a.height)}}u.C=t,e(u.C<=u.i)}function Vi(u){var t;if(0<u.ua)return 0;for(t=0;t<u.Wb;++t){var a=u.Ya[t].G,h=u.Ya[t].H;if(0<a[1][h[1]+0].g||0<a[2][h[2]+0].g||0<a[3][h[3]+0].g)return 0}return 1}function vi(u,t,a,h,g,f){if(u.Z!=0){var y=u.qd,B=u.rd;for(e(Po[u.Z]!=null);t<a;++t)Po[u.Z](y,B,h,g,h,g,f),y=h,B=g,g+=f;u.qd=y,u.rd=B}}function pr(u,t){var a=u.l.ma,h=a.Z==0||a.Z==1?u.l.j:u.C;if(h=u.C<h?h:u.C,e(t<=u.l.o),t>h){var g=u.l.width,f=a.ca,y=a.tb+g*h,B=u.V,x=u.Ba+u.c*h,k=u.gc;e(u.ab==1),e(k[0].hc==3),gr(k[0],h,t,B,x,f,y),vi(a,h,t,f,y,g)}u.C=u.Ma=t}function ur(u,t,a,h,g,f,y){var B=u.$/h,x=u.$%h,k=u.m,R=u.s,G=a+u.$,P=G;g=a+h*g;var M=a+h*f,j=280+R.ua,et=u.Pb?B:16777216,W=0<R.ua?R.Wa:null,X=R.wc,ct=G<M?je(R,x,B):null;e(u.C<f),e(M<=g);var rt=!1;t:for(;;){for(;rt||G<M;){var ut=0;if(B>=et){var Ft=G-a;e((et=u).Pb),et.wd=et.m,et.xd=Ft,0<et.s.ua&&de(et.s.Wa,et.s.vb),et=B+Ma}if(x&X||(ct=je(R,x,B)),e(ct!=null),ct.Qb&&(t[G]=ct.qb,rt=!0),!rt)if(Pt(k),ct.jc){ut=k,Ft=t;var Qt=G,se=ct.pd[dt(ut)&Pn-1];e(ct.jc),256>se.g?(Ut(ut,ut.u+se.g),Ft[Qt]=se.value,ut=0):(Ut(ut,ut.u+se.g-256),e(256<=se.value),ut=se.value),ut==0&&(rt=!0)}else ut=Se(ct.G[0],ct.H[0],k);if(k.h)break;if(rt||256>ut){if(!rt)if(ct.nd)t[G]=(ct.qb|ut<<8)>>>0;else{if(Pt(k),rt=Se(ct.G[1],ct.H[1],k),Pt(k),Ft=Se(ct.G[2],ct.H[2],k),Qt=Se(ct.G[3],ct.H[3],k),k.h)break;t[G]=(Qt<<24|rt<<16|ut<<8|Ft)>>>0}if(rt=!1,++G,++x>=h&&(x=0,++B,y!=null&&B<=f&&!(B%16)&&y(u,B),W!=null))for(;P<G;)ut=t[P++],W.X[(506832829*ut&4294967295)>>>W.Mb]=ut}else if(280>ut){if(ut=me(ut-256,k),Ft=Se(ct.G[4],ct.H[4],k),Pt(k),Ft=Ae(h,Ft=me(Ft,k)),k.h)break;if(G-a<Ft||g-G<ut)break t;for(Qt=0;Qt<ut;++Qt)t[G+Qt]=t[G+Qt-Ft];for(G+=ut,x+=ut;x>=h;)x-=h,++B,y!=null&&B<=f&&!(B%16)&&y(u,B);if(e(G<=g),x&X&&(ct=je(R,x,B)),W!=null)for(;P<G;)ut=t[P++],W.X[(506832829*ut&4294967295)>>>W.Mb]=ut}else{if(!(ut<j))break t;for(rt=ut-280,e(W!=null);P<G;)ut=t[P++],W.X[(506832829*ut&4294967295)>>>W.Mb]=ut;ut=G,e(!(rt>>>(Ft=W).Xa)),t[ut]=Ft.X[rt],rt=!0}rt||e(k.h==mt(k))}if(u.Pb&&k.h&&G<g)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&de(u.s.vb,u.s.Wa);else{if(k.h)break t;y?.(u,B>f?f:B),u.a=0,u.$=G-a}return 1}return u.a=3,0}function Qi(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var t=u.Wa;t!=null&&(t.X=null),u.vb=null,e(u!=null)}function Oi(){var u=new fA;return u==null?null:(u.a=0,u.xb=lr,wr("Predictor","VP8LPredictors"),wr("Predictor","VP8LPredictors_C"),wr("PredictorAdd","VP8LPredictorsAdd"),wr("PredictorAdd","VP8LPredictorsAdd_C"),$o=Zi,ys=pi,Hn=ne,ta=ui,bs=Ve,Eo=rr,Ga=Ni,ft.VP8LMapColor32b=Ra,ft.VP8LMapColor8b=bA,u)}function sr(u,t,a,h,g){var f=1,y=[u],B=[t],x=h.m,k=h.s,R=null,G=0;t:for(;;){if(a)for(;f&&Et(x,1);){var P=y,M=B,j=h,et=1,W=j.m,X=j.gc[j.ab],ct=Et(W,2);if(j.Oc&1<<ct)f=0;else{switch(j.Oc|=1<<ct,X.hc=ct,X.Ea=P[0],X.nc=M[0],X.K=[null],++j.ab,e(4>=j.ab),ct){case 0:case 1:X.b=Et(W,3)+2,et=sr(Oe(X.Ea,X.b),Oe(X.nc,X.b),0,j,X.K),X.K=X.K[0];break;case 3:var rt,ut=Et(W,8)+1,Ft=16<ut?0:4<ut?1:2<ut?2:3;if(P[0]=Oe(X.Ea,Ft),X.b=Ft,rt=et=sr(ut,1,0,j,X.K)){var Qt,se=ut,oe=X,xe=1<<(8>>oe.b),Ue=s(xe);if(Ue==null)rt=0;else{var _e=oe.K[0],Be=oe.w;for(Ue[0]=oe.K[0][0],Qt=1;Qt<1*se;++Qt)Ue[Qt]=Le(_e[Be+Qt],Ue[Qt-1]);for(;Qt<4*xe;++Qt)Ue[Qt]=0;oe.K[0]=null,oe.K[0]=Ue,rt=1}}et=rt;break;case 2:break;default:e(0)}f=et}}if(y=y[0],B=B[0],f&&Et(x,1)&&!(f=1<=(G=Et(x,4))&&11>=G)){h.a=3;break t}var De;if(De=f)e:{var ri,ve,Ge,Ci=h,Ji=y,Ui=B,fi=G,hr=a,Lr=Ci.m,Er=Ci.s,er=[null],Tr=1,Hr=0,Dr=co[fi];i:for(;;){if(hr&&Et(Lr,1)){var Ir=Et(Lr,3)+2,yn=Oe(Ji,Ir),Hs=Oe(Ui,Ir),ra=yn*Hs;if(!sr(yn,Hs,0,Ci,er))break i;for(er=er[0],Er.xc=Ir,ri=0;ri<ra;++ri){var ws=er[ri]>>8&65535;er[ri]=ws,ws>=Tr&&(Tr=ws+1)}}if(Lr.h)break i;for(ve=0;5>ve;++ve){var Cr=Lc[ve];!ve&&0<fi&&(Cr+=1<<fi),Hr<Cr&&(Hr=Cr)}var TA=p(Tr*Dr,st),Yl=Tr,Bs=p(Yl,yt);if(Bs==null)var qn=null;else e(65536>=Yl),qn=Bs;var Ms=s(Hr);if(qn==null||Ms==null||TA==null){Ci.a=1;break i}var as=TA;for(ri=Ge=0;ri<Tr;++ri){var Rr=qn[ri],An=Rr.G,bn=Rr.H,cr=0,Mo=1,Da=0;for(ve=0;5>ve;++ve){Cr=Lc[ve],An[ve]=as,bn[ve]=Ge,!ve&&0<fi&&(Cr+=1<<fi);n:{var na,jl=Cr,ql=Ci,UA=Ms,ya=as,yu=Ge,QA=0,Ns=ql.m,$l=Et(Ns,1);if(l(UA,0,0,jl),$l){var tc=Et(Ns,1)+1,RA=Et(Ns,1),GA=Et(Ns,RA==0?1:8);UA[GA]=1,tc==2&&(UA[GA=Et(Ns,8)]=1);var pl=1}else{var Eh=s(19),Th=Et(Ns,4)+4;if(19<Th){ql.a=3;var bu=0;break n}for(na=0;na<Th;++na)Eh[Zo[na]]=Et(Ns,3);var Mc=void 0,Ka=void 0,fl=ql,Oa=Eh,Vs=jl,za=UA,vu=0,Ds=fl.m,sd=8,Uh=p(128,st);r:for(;at(Uh,0,7,Oa,19);){if(Et(Ds,1)){var cn=2+2*Et(Ds,3);if((Mc=2+Et(Ds,cn))>Vs)break r}else Mc=Vs;for(Ka=0;Ka<Vs&&Mc--;){Pt(Ds);var wu=Uh[0+(127&dt(Ds))];Ut(Ds,Ds.u+wu.g);var ml=wu.value;if(16>ml)za[Ka++]=ml,ml!=0&&(sd=ml);else{var Cl=ml==16,ZA=ml-16,Bu=FA[ZA],_u=Et(Ds,Vl[ZA])+Bu;if(Ka+_u>Vs)break r;for(var od=Cl?sd:0;0<_u--;)za[Ka++]=od}}vu=1;break r}vu||(fl.a=3),pl=vu}(pl=pl&&!Ns.h)&&(QA=at(ya,yu,8,UA,jl)),pl&&QA!=0?bu=QA:(ql.a=3,bu=0)}if(bu==0)break i;if(Mo&&Gs[ve]==1&&(Mo=as[Ge].g==0),cr+=as[Ge].g,Ge+=bu,3>=ve){var Nc,xu=Ms[0];for(Nc=1;Nc<Cr;++Nc)Ms[Nc]>xu&&(xu=Ms[Nc]);Da+=xu}}if(Rr.nd=Mo,Rr.Qb=0,Mo&&(Rr.qb=(An[3][bn[3]+0].value<<24|An[1][bn[1]+0].value<<16|An[2][bn[2]+0].value)>>>0,cr==0&&256>An[0][bn[0]+0].value&&(Rr.Qb=1,Rr.qb+=An[0][bn[0]+0].value<<8)),Rr.jc=!Rr.Qb&&6>Da,Rr.jc){var Su,sa=Rr;for(Su=0;Su<Pn;++Su){var PA=Su,ba=sa.pd[PA],Vc=sa.G[0][sa.H[0]+PA];256<=Vc.value?(ba.g=Vc.g+256,ba.value=Vc.value):(ba.g=0,ba.value=0,PA>>=Ye(Vc,8,ba),PA>>=Ye(sa.G[1][sa.H[1]+PA],16,ba),PA>>=Ye(sa.G[2][sa.H[2]+PA],0,ba),Ye(sa.G[3][sa.H[3]+PA],24,ba))}}}Er.vc=er,Er.Wb=Tr,Er.Ya=qn,Er.yc=TA,De=1;break e}De=0}if(!(f=De)){h.a=3;break t}if(0<G){if(k.ua=1<<G,!Dt(k.Wa,G)){h.a=1,f=0;break t}}else k.ua=0;var Fu=h,Il=y,mm=B,yl=Fu.s,ec=yl.xc;if(Fu.c=Il,Fu.i=mm,yl.md=Oe(Il,ec),yl.wc=ec==0?-1:(1<<ec)-1,a){h.xb=Gc;break t}if((R=s(y*B))==null){h.a=1,f=0;break t}f=(f=ur(h,R,0,y,B,B,null))&&!x.h;break t}return f?(g!=null?g[0]=R:(e(R==null),e(a)),h.$=0,a||Qi(k)):Qi(k),f}function Zt(u,t){var a=u.c*u.i,h=a+t+16*t;return e(u.c<=t),u.V=s(h),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+a+t,1)}function Ne(u,t){var a=u.C,h=t-a,g=u.V,f=u.Ba+u.c*a;for(e(t<=u.l.o);0<h;){var y=16<h?16:h,B=u.l.ma,x=u.l.width,k=x*y,R=B.ca,G=B.tb+x*a,P=u.Ta,M=u.Ua;Mi(u,y,g,f),$r(P,M,R,G,k),vi(B,a,a+y,R,G,x),h-=y,g+=y*u.c,a+=y}e(a==t),u.C=u.Ma=t}function ke(){this.ub=this.yd=this.td=this.Rb=0}function Wi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function rn(){this.Yb=function(){var u=[];return function t(a,h,g){for(var f=g[h],y=0;y<f&&(a.push(g.length>h+1?[]:0),!(g.length<h+1));y++)t(a[y],h+1,g)}(u,0,[3,11]),u}()}function Fr(){this.jb=s(3),this.Wc=m([4,8],rn),this.Xc=m([4,17],rn)}function jr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function br(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function dn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pn(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vo(){this.uc=this.M=this.Nb=0,this.wa=Array(new br),this.Y=0,this.ya=Array(new pn),this.aa=0,this.l=new is}function es(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Or(){this.cb=this.a=0,this.sc="",this.m=new ue,this.Od=new ke,this.Kc=new Wi,this.ed=new jr,this.Qa=new Fi,this.Ic=this.$c=this.Aa=0,this.D=new vo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,ue),this.ia=0,this.pb=p(4,dn),this.Pa=new Fr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new es),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new br),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pn),this.L=this.aa=0,this.gd=m([4,2],br),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function is(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jn(){var u=new Or;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,kA||(kA=Wo)),u}function $i(u,t,a){return u.a==0&&(u.a=t,u.sc=a,u.cb=0),0}function io(u,t,a){return 3<=a&&u[t+0]==157&&u[t+1]==1&&u[t+2]==42}function wn(u,t){if(u==null)return 0;if(u.a=0,u.sc="OK",t==null)return $i(u,2,"null VP8Io passed to VP8GetHeaders()");var a=t.data,h=t.w,g=t.ha;if(4>g)return $i(u,7,"Truncated header.");var f=a[h+0]|a[h+1]<<8|a[h+2]<<16,y=u.Od;if(y.Rb=!(1&f),y.td=f>>1&7,y.yd=f>>4&1,y.ub=f>>5,3<y.td)return $i(u,3,"Incorrect keyframe parameters.");if(!y.yd)return $i(u,4,"Frame not displayable.");h+=3,g-=3;var B=u.Kc;if(y.Rb){if(7>g)return $i(u,7,"cannot parse picture header");if(!io(a,h,g))return $i(u,3,"Bad code word");B.c=16383&(a[h+4]<<8|a[h+3]),B.Td=a[h+4]>>6,B.i=16383&(a[h+6]<<8|a[h+5]),B.Ud=a[h+6]>>6,h+=7,g-=7,u.za=B.c+15>>4,u.Ub=B.i+15>>4,t.width=B.c,t.height=B.i,t.Da=0,t.j=0,t.v=0,t.va=t.width,t.o=t.height,t.da=0,t.ib=t.width,t.hb=t.height,t.U=t.width,t.T=t.height,l((f=u.Pa).jb,0,255,f.jb.length),e((f=u.Qa)!=null),f.Cb=0,f.Bb=0,f.Fb=1,l(f.Zb,0,0,f.Zb.length),l(f.Lb,0,0,f.Lb)}if(y.ub>g)return $i(u,7,"bad partition length");te(f=u.m,a,h,y.ub),h+=y.ub,g-=y.ub,y.Rb&&(B.Ld=le(f),B.Kd=le(f)),B=u.Qa;var x,k=u.Pa;if(e(f!=null),e(B!=null),B.Cb=le(f),B.Cb){if(B.Bb=le(f),le(f)){for(B.Fb=le(f),x=0;4>x;++x)B.Zb[x]=le(f)?Xt(f,7):0;for(x=0;4>x;++x)B.Lb[x]=le(f)?Xt(f,6):0}if(B.Bb)for(x=0;3>x;++x)k.jb[x]=le(f)?jt(f,8):255}else B.Bb=0;if(f.Ka)return $i(u,3,"cannot parse segment header");if((B=u.ed).zd=le(f),B.Tb=jt(f,6),B.wb=jt(f,3),B.Pc=le(f),B.Pc&&le(f)){for(k=0;4>k;++k)le(f)&&(B.vd[k]=Xt(f,6));for(k=0;4>k;++k)le(f)&&(B.od[k]=Xt(f,6))}if(u.L=B.Tb==0?0:B.zd?1:2,f.Ka)return $i(u,3,"cannot parse filter header");var R=g;if(g=x=h,h=x+R,B=R,u.Xb=(1<<jt(u.m,2))-1,R<3*(k=u.Xb))a=7;else{for(x+=3*k,B-=3*k,R=0;R<k;++R){var G=a[g+0]|a[g+1]<<8|a[g+2]<<16;G>B&&(G=B),te(u.Jc[+R],a,x,G),x+=G,B-=G,g+=3}te(u.Jc[+k],a,x,B),a=x<h?0:5}if(a!=0)return $i(u,a,"cannot parse partitions");for(a=jt(x=u.m,7),g=le(x)?Xt(x,4):0,h=le(x)?Xt(x,4):0,B=le(x)?Xt(x,4):0,k=le(x)?Xt(x,4):0,x=le(x)?Xt(x,4):0,R=u.Qa,G=0;4>G;++G){if(R.Cb){var P=R.Zb[G];R.Fb||(P+=a)}else{if(0<G){u.pb[G]=u.pb[0];continue}P=a}var M=u.pb[G];M.Sc[0]=Tc[Cn(P+g,127)],M.Sc[1]=Uc[Cn(P+0,127)],M.Eb[0]=2*Tc[Cn(P+h,127)],M.Eb[1]=101581*Uc[Cn(P+B,127)]>>16,8>M.Eb[1]&&(M.Eb[1]=8),M.Qc[0]=Tc[Cn(P+k,117)],M.Qc[1]=Uc[Cn(P+x,127)],M.lc=P+x}if(!y.Rb)return $i(u,4,"Not a key frame.");for(le(f),y=u.Pa,a=0;4>a;++a){for(g=0;8>g;++g)for(h=0;3>h;++h)for(B=0;11>B;++B)k=ce(f,Dl[a][g][h][B])?jt(f,8):Zs[a][g][h][B],y.Wc[a][g].Yb[h][B]=k;for(g=0;17>g;++g)y.Xc[a][g]=y.Wc[a][Rc[g]]}return u.kc=le(f),u.kc&&(u.Bd=jt(f,8)),u.cb=1}function Wo(u,t,a,h,g,f,y){var B=t[g].Yb[a];for(a=0;16>g;++g){if(!ce(u,B[a+0]))return g;for(;!ce(u,B[a+1]);)if(B=t[++g].Yb[0],a=0,g==16)return 16;var x=t[g+1].Yb;if(ce(u,B[a+2])){var k=u,R=0;if(ce(k,(P=B)[(G=a)+3]))if(ce(k,P[G+6])){for(B=0,G=2*(R=ce(k,P[G+8]))+(P=ce(k,P[G+9+R])),R=0,P=Cu[G];P[B];++B)R+=R+ce(k,P[B]);R+=3+(8<<G)}else ce(k,P[G+7])?(R=7+2*ce(k,165),R+=ce(k,145)):R=5+ce(k,159);else R=ce(k,P[G+4])?3+ce(k,P[G+5]):2;B=x[2]}else R=1,B=x[1];x=y+Qc[g],0>(k=u).b&&ie(k);var G,P=k.b,M=(G=k.Ca>>1)-(k.I>>P)>>31;--k.b,k.Ca+=M,k.Ca|=1,k.I-=(G+1&M)<<P,f[x]=((R^M)-M)*h[(0<g)+0]}return 16}function Bn(u){var t=u.rb[u.sb-1];t.la=0,t.Na=0,l(u.zc,0,0,u.zc.length),u.ja=0}function ht(u,t){if(u==null)return 0;if(t==null)return $i(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!wn(u,t))return 0;if(e(u.cb),t.ac==null||t.ac(t)){t.ob&&(u.L=0);var a=_i[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=t.v-a>>4,u.zb=t.j-a>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=t.o+15+a>>4,u.Hb=t.va+15+a>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var h=u.ed;for(a=0;4>a;++a){var g;if(u.Qa.Cb){var f=u.Qa.Lb[a];u.Qa.Fb||(f+=h.Tb)}else f=h.Tb;for(g=0;1>=g;++g){var y=u.gd[a][g],B=f;if(h.Pc&&(B+=h.vd[0],g&&(B+=h.od[0])),0<(B=0>B?0:63<B?63:B)){var x=B;0<h.wb&&(x=4<h.wb?x>>2:x>>1)>9-h.wb&&(x=9-h.wb),1>x&&(x=1),y.dd=x,y.tc=2*B+x,y.ld=40<=B?2:15<=B?1:0}else y.tc=0;y.La=g}}}a=0}else $i(u,6,"Frame setup failed"),a=u.a;if(a=a==0){if(a){u.$c=0,0<u.Aa||(u.Ic=Jl);t:{a=u.Ic,h=4*(x=u.za);var k=32*x,R=x+1,G=0<u.L?x*(0<u.Aa?2:1):0,P=(u.Aa==2?2:1)*x;if((y=h+832+(g=3*(16*a+_i[u.L])/2*k)+(f=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=y)a=0;else{if(y>u.Vb){if(u.Vb=0,u.Ec=s(y),u.Fc=0,u.Ec==null){a=$i(u,1,"no memory during frame initialization.");break t}u.Vb=y}y=u.Ec,B=u.Fc,u.Ac=y,u.Bc=B,B+=h,u.Gd=p(k,es),u.Hd=0,u.rb=p(R+1,on),u.sb=1,u.wa=G?p(G,br):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=x),e(!0),u.oc=y,u.pc=B,B+=832,u.ya=p(P,pn),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=x),u.R=16*x,u.B=8*x,x=(k=_i[u.L])*u.R,k=k/2*u.B,u.sa=y,u.ta=B+x,u.qa=u.sa,u.ra=u.ta+16*a*u.R+k,u.Ha=u.qa,u.Ia=u.ra+8*a*u.B+k,u.$c=0,B+=g,u.mb=f?y:null,u.nb=f?B:null,e(B+f<=u.Fc+u.Vb),Bn(u),l(u.Ac,u.Bc,0,h),a=1}}if(a){if(t.ka=0,t.y=u.sa,t.O=u.ta,t.f=u.qa,t.N=u.ra,t.ea=u.Ha,t.Vd=u.Ia,t.fa=u.R,t.Rc=u.B,t.F=null,t.J=0,!ol){for(a=-255;255>=a;++a)Qs[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)ss[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)vA[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Ml[255+a]=0>a?0:255<a?255:a;ol=1}rs=$t,ea=ee,vs=be,Mn=Ie,Ao=pe,To=zt,Ts=hA,Uo=Yo,Qo=Pl,lo=gA,Za=Zl,Us=Ea,Ro=so,xr=nl,kr=La,Vr=Jo,qr=Cs,zr=kc,Nn[0]=Br,Nn[1]=Ce,Nn[2]=vr,Nn[3]=nn,Nn[4]=ms,Nn[5]=wo,Nn[6]=Rn,Nn[7]=el,Nn[8]=Gl,Nn[9]=Fc,ia[0]=ii,ia[1]=Li,ia[2]=ki,ia[3]=Ze,ia[4]=ai,ia[5]=wi,ia[6]=ar,os[0]=_o,os[1]=Te,os[2]=Fa,os[3]=ka,os[4]=Gn,os[5]=il,os[6]=rl,a=1}else a=0}a&&(a=function(M,j){for(M.M=0;M.M<M.Va;++M.M){var et,W=M.Jc[M.M&M.Xb],X=M.m,ct=M;for(et=0;et<ct.za;++et){var rt=X,ut=ct,Ft=ut.Ac,Qt=ut.Bc+4*et,se=ut.zc,oe=ut.ya[ut.aa+et];if(ut.Qa.Bb?oe.$b=ce(rt,ut.Pa.jb[0])?2+ce(rt,ut.Pa.jb[2]):ce(rt,ut.Pa.jb[1]):oe.$b=0,ut.kc&&(oe.Ad=ce(rt,ut.Bd)),oe.Za=!ce(rt,145)+0,oe.Za){var xe=oe.Ob,Ue=0;for(ut=0;4>ut;++ut){var _e,Be=se[0+ut];for(_e=0;4>_e;++_e){Be=oi[Ft[Qt+_e]][Be];for(var De=Na[ce(rt,Be[0])];0<De;)De=Na[2*De+ce(rt,Be[De])];Be=-De,Ft[Qt+_e]=Be}o(xe,Ue,Ft,Qt,4),Ue+=4,se[0+ut]=Be}}else Be=ce(rt,156)?ce(rt,128)?1:3:ce(rt,163)?2:0,oe.Ob[0]=Be,l(Ft,Qt,Be,4),l(se,0,Be,4);oe.Dd=ce(rt,142)?ce(rt,114)?ce(rt,183)?1:3:2:0}if(ct.m.Ka)return $i(M,7,"Premature end-of-partition0 encountered.");for(;M.ja<M.za;++M.ja){if(ct=W,rt=(X=M).rb[X.sb-1],Ft=X.rb[X.sb+X.ja],et=X.ya[X.aa+X.ja],Qt=X.kc?et.Ad:0)rt.la=Ft.la=0,et.Za||(rt.Na=Ft.Na=0),et.Hc=0,et.Gc=0,et.ia=0;else{var ri,ve;if(rt=Ft,Ft=ct,Qt=X.Pa.Xc,se=X.ya[X.aa+X.ja],oe=X.pb[se.$b],ut=se.ad,xe=0,Ue=X.rb[X.sb-1],Be=_e=0,l(ut,xe,0,384),se.Za)var Ge=0,Ci=Qt[3];else{De=s(16);var Ji=rt.Na+Ue.Na;if(Ji=kA(Ft,Qt[1],Ji,oe.Eb,0,De,0),rt.Na=Ue.Na=(0<Ji)+0,1<Ji)rs(De,0,ut,xe);else{var Ui=De[0]+3>>3;for(De=0;256>De;De+=16)ut[xe+De]=Ui}Ge=1,Ci=Qt[0]}var fi=15&rt.la,hr=15&Ue.la;for(De=0;4>De;++De){var Lr=1&hr;for(Ui=ve=0;4>Ui;++Ui)fi=fi>>1|(Lr=(Ji=kA(Ft,Ci,Ji=Lr+(1&fi),oe.Sc,Ge,ut,xe))>Ge)<<7,ve=ve<<2|(3<Ji?3:1<Ji?2:ut[xe+0]!=0),xe+=16;fi>>=4,hr=hr>>1|Lr<<7,_e=(_e<<8|ve)>>>0}for(Ci=fi,Ge=hr>>4,ri=0;4>ri;ri+=2){for(ve=0,fi=rt.la>>4+ri,hr=Ue.la>>4+ri,De=0;2>De;++De){for(Lr=1&hr,Ui=0;2>Ui;++Ui)Ji=Lr+(1&fi),fi=fi>>1|(Lr=0<(Ji=kA(Ft,Qt[2],Ji,oe.Qc,0,ut,xe)))<<3,ve=ve<<2|(3<Ji?3:1<Ji?2:ut[xe+0]!=0),xe+=16;fi>>=2,hr=hr>>1|Lr<<5}Be|=ve<<4*ri,Ci|=fi<<4<<ri,Ge|=(240&hr)<<ri}rt.la=Ci,Ue.la=Ge,se.Hc=_e,se.Gc=Be,se.ia=43690&Be?0:oe.ia,Qt=!(_e|Be)}if(0<X.L&&(X.wa[X.Y+X.ja]=X.gd[et.$b][et.Za],X.wa[X.Y+X.ja].La|=!Qt),ct.Ka)return $i(M,7,"Premature end-of-file encountered.")}if(Bn(M),X=j,ct=1,et=(W=M).D,rt=0<W.L&&W.M>=W.zb&&W.M<=W.Va,W.Aa==0)t:{if(et.M=W.M,et.uc=rt,oo(W,et),ct=1,et=(ve=W.D).Nb,rt=(Be=_i[W.L])*W.R,Ft=Be/2*W.B,De=16*et*W.R,Ui=8*et*W.B,Qt=W.sa,se=W.ta-rt+De,oe=W.qa,ut=W.ra-Ft+Ui,xe=W.Ha,Ue=W.Ia-Ft+Ui,hr=(fi=ve.M)==0,_e=fi>=W.Va-1,W.Aa==2&&oo(W,ve),ve.uc)for(Lr=(Ji=W).D.M,e(Ji.D.uc),ve=Ji.yb;ve<Ji.Hb;++ve){Ge=ve,Ci=Lr;var Er=(er=(Cr=Ji).D).Nb;ri=Cr.R;var er=er.wa[er.Y+Ge],Tr=Cr.sa,Hr=Cr.ta+16*Er*ri+16*Ge,Dr=er.dd,Ir=er.tc;if(Ir!=0)if(e(3<=Ir),Cr.L==1)0<Ge&&Vr(Tr,Hr,ri,Ir+4),er.La&&zr(Tr,Hr,ri,Ir),0<Ci&&kr(Tr,Hr,ri,Ir+4),er.La&&qr(Tr,Hr,ri,Ir);else{var yn=Cr.B,Hs=Cr.qa,ra=Cr.ra+8*Er*yn+8*Ge,ws=Cr.Ha,Cr=Cr.Ia+8*Er*yn+8*Ge;Er=er.ld,0<Ge&&(Uo(Tr,Hr,ri,Ir+4,Dr,Er),lo(Hs,ra,ws,Cr,yn,Ir+4,Dr,Er)),er.La&&(Us(Tr,Hr,ri,Ir,Dr,Er),xr(Hs,ra,ws,Cr,yn,Ir,Dr,Er)),0<Ci&&(Ts(Tr,Hr,ri,Ir+4,Dr,Er),Qo(Hs,ra,ws,Cr,yn,Ir+4,Dr,Er)),er.La&&(Za(Tr,Hr,ri,Ir,Dr,Er),Ro(Hs,ra,ws,Cr,yn,Ir,Dr,Er))}}if(W.ia&&alert("todo:DitherRow"),X.put!=null){if(ve=16*fi,fi=16*(fi+1),hr?(X.y=W.sa,X.O=W.ta+De,X.f=W.qa,X.N=W.ra+Ui,X.ea=W.Ha,X.W=W.Ia+Ui):(ve-=Be,X.y=Qt,X.O=se,X.f=oe,X.N=ut,X.ea=xe,X.W=Ue),_e||(fi-=Be),fi>X.o&&(fi=X.o),X.F=null,X.J=null,W.Fa!=null&&0<W.Fa.length&&ve<fi&&(X.J=IA(W,X,ve,fi-ve),X.F=W.mb,X.F==null&&X.F.length==0)){ct=$i(W,3,"Could not decode alpha data.");break t}ve<X.j&&(Be=X.j-ve,ve=X.j,e(!(1&Be)),X.O+=W.R*Be,X.N+=W.B*(Be>>1),X.W+=W.B*(Be>>1),X.F!=null&&(X.J+=X.width*Be)),ve<fi&&(X.O+=X.v,X.N+=X.v>>1,X.W+=X.v>>1,X.F!=null&&(X.J+=X.v),X.ka=ve-X.j,X.U=X.va-X.v,X.T=fi-ve,ct=X.put(X))}et+1!=W.Ic||_e||(o(W.sa,W.ta-rt,Qt,se+16*W.R,rt),o(W.qa,W.ra-Ft,oe,ut+8*W.B,Ft),o(W.Ha,W.Ia-Ft,xe,Ue+8*W.B,Ft))}if(!ct)return $i(M,6,"Output aborted.")}return 1}(u,t)),t.bc!=null&&t.bc(t),a&=1}return a?(u.cb=0,a):0}function pt(u,t,a,h,g){g=u[t+a+32*h]+(g>>3),u[t+a+32*h]=-256&g?0>g?0:255:g}function At(u,t,a,h,g,f){pt(u,t,0,a,h+g),pt(u,t,1,a,h+f),pt(u,t,2,a,h-f),pt(u,t,3,a,h-g)}function St(u){return(20091*u>>16)+u}function _t(u,t,a,h){var g,f=0,y=s(16);for(g=0;4>g;++g){var B=u[t+0]+u[t+8],x=u[t+0]-u[t+8],k=(35468*u[t+4]>>16)-St(u[t+12]),R=St(u[t+4])+(35468*u[t+12]>>16);y[f+0]=B+R,y[f+1]=x+k,y[f+2]=x-k,y[f+3]=B-R,f+=4,t++}for(g=f=0;4>g;++g)B=(u=y[f+0]+4)+y[f+8],x=u-y[f+8],k=(35468*y[f+4]>>16)-St(y[f+12]),pt(a,h,0,0,B+(R=St(y[f+4])+(35468*y[f+12]>>16))),pt(a,h,1,0,x+k),pt(a,h,2,0,x-k),pt(a,h,3,0,B-R),f++,h+=32}function zt(u,t,a,h){var g=u[t+0]+4,f=35468*u[t+4]>>16,y=St(u[t+4]),B=35468*u[t+1]>>16;At(a,h,0,g+y,u=St(u[t+1]),B),At(a,h,1,g+f,u,B),At(a,h,2,g-f,u,B),At(a,h,3,g-y,u,B)}function ee(u,t,a,h,g){_t(u,t,a,h),g&&_t(u,t+16,a,h+4)}function be(u,t,a,h){ea(u,t+0,a,h,1),ea(u,t+32,a,h+128,1)}function Ie(u,t,a,h){var g;for(u=u[t+0]+4,g=0;4>g;++g)for(t=0;4>t;++t)pt(a,h,t,g,u)}function pe(u,t,a,h){u[t+0]&&Mn(u,t+0,a,h),u[t+16]&&Mn(u,t+16,a,h+4),u[t+32]&&Mn(u,t+32,a,h+128),u[t+48]&&Mn(u,t+48,a,h+128+4)}function $t(u,t,a,h){var g,f=s(16);for(g=0;4>g;++g){var y=u[t+0+g]+u[t+12+g],B=u[t+4+g]+u[t+8+g],x=u[t+4+g]-u[t+8+g],k=u[t+0+g]-u[t+12+g];f[0+g]=y+B,f[8+g]=y-B,f[4+g]=k+x,f[12+g]=k-x}for(g=0;4>g;++g)y=(u=f[0+4*g]+3)+f[3+4*g],B=f[1+4*g]+f[2+4*g],x=f[1+4*g]-f[2+4*g],k=u-f[3+4*g],a[h+0]=y+B>>3,a[h+16]=k+x>>3,a[h+32]=y-B>>3,a[h+48]=k-x>>3,h+=64}function fe(u,t,a){var h,g=t-32,f=Xn,y=255-u[g-1];for(h=0;h<a;++h){var B,x=f,k=y+u[t-1];for(B=0;B<a;++B)u[t+B]=x[k+u[g+B]];t+=32}}function Ce(u,t){fe(u,t,4)}function Te(u,t){fe(u,t,8)}function Li(u,t){fe(u,t,16)}function ki(u,t){var a;for(a=0;16>a;++a)o(u,t+32*a,u,t-32,16)}function Ze(u,t){var a;for(a=16;0<a;--a)l(u,t,u[t-1],16),t+=32}function Fe(u,t,a){var h;for(h=0;16>h;++h)l(t,a+32*h,u,16)}function ii(u,t){var a,h=16;for(a=0;16>a;++a)h+=u[t-1+32*a]+u[t+a-32];Fe(h>>5,u,t)}function ai(u,t){var a,h=8;for(a=0;16>a;++a)h+=u[t-1+32*a];Fe(h>>4,u,t)}function wi(u,t){var a,h=8;for(a=0;16>a;++a)h+=u[t+a-32];Fe(h>>4,u,t)}function ar(u,t){Fe(128,u,t)}function si(u,t,a){return u+2*t+a+2>>2}function vr(u,t){var a,h=t-32;for(h=new Uint8Array([si(u[h-1],u[h+0],u[h+1]),si(u[h+0],u[h+1],u[h+2]),si(u[h+1],u[h+2],u[h+3]),si(u[h+2],u[h+3],u[h+4])]),a=0;4>a;++a)o(u,t+32*a,h,0,h.length)}function nn(u,t){var a=u[t-1],h=u[t-1+32],g=u[t-1+64],f=u[t-1+96];Qe(u,t+0,16843009*si(u[t-1-32],a,h)),Qe(u,t+32,16843009*si(a,h,g)),Qe(u,t+64,16843009*si(h,g,f)),Qe(u,t+96,16843009*si(g,f,f))}function Br(u,t){var a,h=4;for(a=0;4>a;++a)h+=u[t+a-32]+u[t-1+32*a];for(h>>=3,a=0;4>a;++a)l(u,t+32*a,h,4)}function ms(u,t){var a=u[t-1+0],h=u[t-1+32],g=u[t-1+64],f=u[t-1-32],y=u[t+0-32],B=u[t+1-32],x=u[t+2-32],k=u[t+3-32];u[t+0+96]=si(h,g,u[t-1+96]),u[t+1+96]=u[t+0+64]=si(a,h,g),u[t+2+96]=u[t+1+64]=u[t+0+32]=si(f,a,h),u[t+3+96]=u[t+2+64]=u[t+1+32]=u[t+0+0]=si(y,f,a),u[t+3+64]=u[t+2+32]=u[t+1+0]=si(B,y,f),u[t+3+32]=u[t+2+0]=si(x,B,y),u[t+3+0]=si(k,x,B)}function Rn(u,t){var a=u[t+1-32],h=u[t+2-32],g=u[t+3-32],f=u[t+4-32],y=u[t+5-32],B=u[t+6-32],x=u[t+7-32];u[t+0+0]=si(u[t+0-32],a,h),u[t+1+0]=u[t+0+32]=si(a,h,g),u[t+2+0]=u[t+1+32]=u[t+0+64]=si(h,g,f),u[t+3+0]=u[t+2+32]=u[t+1+64]=u[t+0+96]=si(g,f,y),u[t+3+32]=u[t+2+64]=u[t+1+96]=si(f,y,B),u[t+3+64]=u[t+2+96]=si(y,B,x),u[t+3+96]=si(B,x,x)}function wo(u,t){var a=u[t-1+0],h=u[t-1+32],g=u[t-1+64],f=u[t-1-32],y=u[t+0-32],B=u[t+1-32],x=u[t+2-32],k=u[t+3-32];u[t+0+0]=u[t+1+64]=f+y+1>>1,u[t+1+0]=u[t+2+64]=y+B+1>>1,u[t+2+0]=u[t+3+64]=B+x+1>>1,u[t+3+0]=x+k+1>>1,u[t+0+96]=si(g,h,a),u[t+0+64]=si(h,a,f),u[t+0+32]=u[t+1+96]=si(a,f,y),u[t+1+32]=u[t+2+96]=si(f,y,B),u[t+2+32]=u[t+3+96]=si(y,B,x),u[t+3+32]=si(B,x,k)}function el(u,t){var a=u[t+0-32],h=u[t+1-32],g=u[t+2-32],f=u[t+3-32],y=u[t+4-32],B=u[t+5-32],x=u[t+6-32],k=u[t+7-32];u[t+0+0]=a+h+1>>1,u[t+1+0]=u[t+0+64]=h+g+1>>1,u[t+2+0]=u[t+1+64]=g+f+1>>1,u[t+3+0]=u[t+2+64]=f+y+1>>1,u[t+0+32]=si(a,h,g),u[t+1+32]=u[t+0+96]=si(h,g,f),u[t+2+32]=u[t+1+96]=si(g,f,y),u[t+3+32]=u[t+2+96]=si(f,y,B),u[t+3+64]=si(y,B,x),u[t+3+96]=si(B,x,k)}function Fc(u,t){var a=u[t-1+0],h=u[t-1+32],g=u[t-1+64],f=u[t-1+96];u[t+0+0]=a+h+1>>1,u[t+2+0]=u[t+0+32]=h+g+1>>1,u[t+2+32]=u[t+0+64]=g+f+1>>1,u[t+1+0]=si(a,h,g),u[t+3+0]=u[t+1+32]=si(h,g,f),u[t+3+32]=u[t+1+64]=si(g,f,f),u[t+3+64]=u[t+2+64]=u[t+0+96]=u[t+1+96]=u[t+2+96]=u[t+3+96]=f}function Gl(u,t){var a=u[t-1+0],h=u[t-1+32],g=u[t-1+64],f=u[t-1+96],y=u[t-1-32],B=u[t+0-32],x=u[t+1-32],k=u[t+2-32];u[t+0+0]=u[t+2+32]=a+y+1>>1,u[t+0+32]=u[t+2+64]=h+a+1>>1,u[t+0+64]=u[t+2+96]=g+h+1>>1,u[t+0+96]=f+g+1>>1,u[t+3+0]=si(B,x,k),u[t+2+0]=si(y,B,x),u[t+1+0]=u[t+3+32]=si(a,y,B),u[t+1+32]=u[t+3+64]=si(h,a,y),u[t+1+64]=u[t+3+96]=si(g,h,a),u[t+1+96]=si(f,g,h)}function Fa(u,t){var a;for(a=0;8>a;++a)o(u,t+32*a,u,t-32,8)}function ka(u,t){var a;for(a=0;8>a;++a)l(u,t,u[t-1],8),t+=32}function Bo(u,t,a){var h;for(h=0;8>h;++h)l(t,a+32*h,u,8)}function _o(u,t){var a,h=8;for(a=0;8>a;++a)h+=u[t+a-32]+u[t-1+32*a];Bo(h>>4,u,t)}function il(u,t){var a,h=4;for(a=0;8>a;++a)h+=u[t+a-32];Bo(h>>3,u,t)}function Gn(u,t){var a,h=4;for(a=0;8>a;++a)h+=u[t-1+32*a];Bo(h>>3,u,t)}function rl(u,t){Bo(128,u,t)}function pa(u,t,a){var h=u[t-a],g=u[t+0],f=3*(g-h)+Ia[1020+u[t-2*a]-u[t+a]],y=Rs[112+(f+4>>3)];u[t-a]=Xn[255+h+Rs[112+(f+3>>3)]],u[t+0]=Xn[255+g-y]}function xo(u,t,a,h){var g=u[t+0],f=u[t+a];return Yn[255+u[t-2*a]-u[t-a]]>h||Yn[255+f-g]>h}function ro(u,t,a,h){return 4*Yn[255+u[t-a]-u[t+0]]+Yn[255+u[t-2*a]-u[t+a]]<=h}function fr(u,t,a,h,g){var f=u[t-3*a],y=u[t-2*a],B=u[t-a],x=u[t+0],k=u[t+a],R=u[t+2*a],G=u[t+3*a];return 4*Yn[255+B-x]+Yn[255+y-k]>h?0:Yn[255+u[t-4*a]-f]<=g&&Yn[255+f-y]<=g&&Yn[255+y-B]<=g&&Yn[255+G-R]<=g&&Yn[255+R-k]<=g&&Yn[255+k-x]<=g}function La(u,t,a,h){var g=2*h+1;for(h=0;16>h;++h)ro(u,t+h,a,g)&&pa(u,t+h,a)}function Jo(u,t,a,h){var g=2*h+1;for(h=0;16>h;++h)ro(u,t+h*a,1,g)&&pa(u,t+h*a,1)}function Cs(u,t,a,h){var g;for(g=3;0<g;--g)La(u,t+=4*a,a,h)}function kc(u,t,a,h){var g;for(g=3;0<g;--g)Jo(u,t+=4,a,h)}function Xo(u,t,a,h,g,f,y,B){for(f=2*f+1;0<g--;){if(fr(u,t,a,f,y))if(xo(u,t,a,B))pa(u,t,a);else{var x=u,k=t,R=a,G=x[k-2*R],P=x[k-R],M=x[k+0],j=x[k+R],et=x[k+2*R],W=27*(ct=Ia[1020+3*(M-P)+Ia[1020+G-j]])+63>>7,X=18*ct+63>>7,ct=9*ct+63>>7;x[k-3*R]=Xn[255+x[k-3*R]+ct],x[k-2*R]=Xn[255+G+X],x[k-R]=Xn[255+P+W],x[k+0]=Xn[255+M-W],x[k+R]=Xn[255+j-X],x[k+2*R]=Xn[255+et-ct]}t+=h}}function no(u,t,a,h,g,f,y,B){for(f=2*f+1;0<g--;){if(fr(u,t,a,f,y))if(xo(u,t,a,B))pa(u,t,a);else{var x=u,k=t,R=a,G=x[k-R],P=x[k+0],M=x[k+R],j=Rs[112+((et=3*(P-G))+4>>3)],et=Rs[112+(et+3>>3)],W=j+1>>1;x[k-2*R]=Xn[255+x[k-2*R]+W],x[k-R]=Xn[255+G+et],x[k+0]=Xn[255+P-j],x[k+R]=Xn[255+M-W]}t+=h}}function hA(u,t,a,h,g,f){Xo(u,t,a,1,16,h,g,f)}function Yo(u,t,a,h,g,f){Xo(u,t,1,a,16,h,g,f)}function Zl(u,t,a,h,g,f){var y;for(y=3;0<y;--y)no(u,t+=4*a,a,1,16,h,g,f)}function Ea(u,t,a,h,g,f){var y;for(y=3;0<y;--y)no(u,t+=4,1,a,16,h,g,f)}function Pl(u,t,a,h,g,f,y,B){Xo(u,t,g,1,8,f,y,B),Xo(a,h,g,1,8,f,y,B)}function gA(u,t,a,h,g,f,y,B){Xo(u,t,1,g,8,f,y,B),Xo(a,h,1,g,8,f,y,B)}function so(u,t,a,h,g,f,y,B){no(u,t+4*g,g,1,8,f,y,B),no(a,h+4*g,g,1,8,f,y,B)}function nl(u,t,a,h,g,f,y,B){no(u,t+4,1,g,8,f,y,B),no(a,h+4,1,g,8,f,y,B)}function dA(){this.ba=new It,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new z,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hl(){this.ua=0,this.Wa=new Tt,this.vb=new Tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new yt,this.yc=new st}function fA(){this.xb=this.a=0,this.l=new is,this.ca=new It,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hl,this.ab=0,this.gc=p(4,jo),this.Oc=0}function mA(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new is,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ta(u,t,a,h,g,f,y){for(u=u==null?0:u[t+0],t=0;t<y;++t)g[f+t]=u+a[h+t]&255,u=g[f+t]}function CA(u,t,a,h,g,f,y){var B;if(u==null)Ta(null,null,a,h,g,f,y);else for(B=0;B<y;++B)g[f+B]=u[t+B]+a[h+B]&255}function qo(u,t,a,h,g,f,y){if(u==null)Ta(null,null,a,h,g,f,y);else{var B,x=u[t+0],k=x,R=x;for(B=0;B<y;++B)k=R+(x=u[t+B])-k,R=a[h+B]+(-256&k?0>k?0:255:k)&255,k=x,g[f+B]=R}}function IA(u,t,a,h){var g=t.width,f=t.o;if(e(u!=null&&t!=null),0>a||0>=h||a+h>f)return null;if(!u.Cc){if(u.ga==null){var y;if(u.ga=new mA,(y=u.ga==null)||(y=t.width*t.o,e(u.Gb.length==0),u.Gb=s(y),u.Uc=0,u.Gb==null?y=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,y=1),y=!y),!y){y=u.ga;var B=u.Fa,x=u.P,k=u.qc,R=u.mb,G=u.nb,P=x+1,M=k-1,j=y.l;if(e(B!=null&&R!=null&&t!=null),Po[0]=null,Po[1]=Ta,Po[2]=CA,Po[3]=qo,y.ca=R,y.tb=G,y.c=t.width,y.i=t.height,e(0<y.c&&0<y.i),1>=k)t=0;else if(y.$a=B[x+0]>>0&3,y.Z=B[x+0]>>2&3,y.Lc=B[x+0]>>4&3,x=B[x+0]>>6&3,0>y.$a||1<y.$a||4<=y.Z||1<y.Lc||x)t=0;else if(j.put=Jt,j.ac=Nt,j.bc=Rt,j.ma=y,j.width=t.width,j.height=t.height,j.Da=t.Da,j.v=t.v,j.va=t.va,j.j=t.j,j.o=t.o,y.$a)t:{e(y.$a==1),t=Oi();e:for(;;){if(t==null){t=0;break t}if(e(y!=null),y.mc=t,t.c=y.c,t.i=y.i,t.l=y.l,t.l.ma=y,t.l.width=y.c,t.l.height=y.i,t.a=0,Wt(t.m,B,P,M),!sr(y.c,y.i,1,t,null)||(t.ab==1&&t.gc[0].hc==3&&Vi(t.s)?(y.ic=1,B=t.c*t.i,t.Ta=null,t.Ua=0,t.V=s(B),t.Ba=0,t.V==null?(t.a=1,t=0):t=1):(y.ic=0,t=Zt(t,y.c)),!t))break e;t=1;break t}y.mc=null,t=0}else t=M>=y.c*y.i;y=!t}if(y)return null;u.ga.Lc!=1?u.Ga=0:h=f-a}e(u.ga!=null),e(a+h<=f);t:{if(t=(B=u.ga).c,f=B.l.o,B.$a==0){if(P=u.rc,M=u.Vc,j=u.Fa,x=u.P+1+a*t,k=u.mb,R=u.nb+a*t,e(x<=u.P+u.qc),B.Z!=0)for(e(Po[B.Z]!=null),y=0;y<h;++y)Po[B.Z](P,M,j,x,k,R,t),P=k,M=R,R+=t,x+=t;else for(y=0;y<h;++y)o(k,R,j,x,t),P=k,M=R,R+=t,x+=t;u.rc=P,u.Vc=M}else{if(e(B.mc!=null),t=a+h,e((y=B.mc)!=null),e(t<=y.i),y.C>=t)t=1;else if(B.ic||ae(),B.ic){B=y.V,P=y.Ba,M=y.c;var et=y.i,W=(j=1,x=y.$/M,k=y.$%M,R=y.m,G=y.s,y.$),X=M*et,ct=M*t,rt=G.wc,ut=W<ct?je(G,k,x):null;e(W<=X),e(t<=et),e(Vi(G));e:for(;;){for(;!R.h&&W<ct;){if(k&rt||(ut=je(G,k,x)),e(ut!=null),Pt(R),256>(et=Se(ut.G[0],ut.H[0],R)))B[P+W]=et,++W,++k>=M&&(k=0,++x<=t&&!(x%16)&&pr(y,x));else{if(!(280>et)){j=0;break e}et=me(et-256,R);var Ft,Qt=Se(ut.G[4],ut.H[4],R);if(Pt(R),!(W>=(Qt=Ae(M,Qt=me(Qt,R)))&&X-W>=et)){j=0;break e}for(Ft=0;Ft<et;++Ft)B[P+W+Ft]=B[P+W+Ft-Qt];for(W+=et,k+=et;k>=M;)k-=M,++x<=t&&!(x%16)&&pr(y,x);W<ct&&k&rt&&(ut=je(G,k,x))}e(R.h==mt(R))}pr(y,x>t?t:x);break e}!j||R.h&&W<X?(j=0,y.a=R.h?5:3):y.$=W,t=j}else t=ur(y,y.V,y.Ba,y.c,y.i,t,Ne);if(!t){h=0;break t}}a+h>=f&&(u.Cc=1),h=1}if(!h)return null;if(u.Cc&&((h=u.ga)!=null&&(h.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+a*g}function T(u,t,a,h,g,f){for(;0<g--;){var y,B=u,x=t+(a?1:0),k=u,R=t+(a?0:3);for(y=0;y<h;++y){var G=k[R+4*y];G!=255&&(G*=32897,B[x+4*y+0]=B[x+4*y+0]*G>>23,B[x+4*y+1]=B[x+4*y+1]*G>>23,B[x+4*y+2]=B[x+4*y+2]*G>>23)}t+=f}}function $(u,t,a,h,g){for(;0<h--;){var f;for(f=0;f<a;++f){var y=u[t+2*f+0],B=15&(k=u[t+2*f+1]),x=4369*B,k=(240&k|k>>4)*x>>16;u[t+2*f+0]=(240&y|y>>4)*x>>16&240|(15&y|y<<4)*x>>16>>4&15,u[t+2*f+1]=240&k|B}t+=g}}function xt(u,t,a,h,g,f,y,B){var x,k,R=255;for(k=0;k<g;++k){for(x=0;x<h;++x){var G=u[t+x];f[y+4*x]=G,R&=G}t+=a,y+=B}return R!=255}function Vt(u,t,a,h,g){var f;for(f=0;f<g;++f)a[h+f]=u[t+f]>>8}function ae(){ns=T,Pa=$,sl=xt,$r=Vt}function ye(u,t,a){ft[u]=function(h,g,f,y,B,x,k,R,G,P,M,j,et,W,X,ct,rt){var ut,Ft=rt-1>>1,Qt=B[x+0]|k[R+0]<<16,se=G[P+0]|M[j+0]<<16;e(h!=null);var oe=3*Qt+se+131074>>2;for(t(h[g+0],255&oe,oe>>16,et,W),f!=null&&(oe=3*se+Qt+131074>>2,t(f[y+0],255&oe,oe>>16,X,ct)),ut=1;ut<=Ft;++ut){var xe=B[x+ut]|k[R+ut]<<16,Ue=G[P+ut]|M[j+ut]<<16,_e=Qt+xe+se+Ue+524296,Be=_e+2*(xe+se)>>3;oe=Be+Qt>>1,Qt=(_e=_e+2*(Qt+Ue)>>3)+xe>>1,t(h[g+2*ut-1],255&oe,oe>>16,et,W+(2*ut-1)*a),t(h[g+2*ut-0],255&Qt,Qt>>16,et,W+(2*ut-0)*a),f!=null&&(oe=_e+se>>1,Qt=Be+Ue>>1,t(f[y+2*ut-1],255&oe,oe>>16,X,ct+(2*ut-1)*a),t(f[y+2*ut+0],255&Qt,Qt>>16,X,ct+(2*ut+0)*a)),Qt=xe,se=Ue}1&rt||(oe=3*Qt+se+131074>>2,t(h[g+rt-1],255&oe,oe>>16,et,W+(rt-1)*a),f!=null&&(oe=3*se+Qt+131074>>2,t(f[y+rt-1],255&oe,oe>>16,X,ct+(rt-1)*a)))}}function Pe(){Ps[wA]=Zc,Ps[Ha]=Va,Ps[Nl]=kh,Ps[BA]=Pc,Ps[Go]=Kl,Ps[_A]=Hc,Ps[xA]=Lh,Ps[al]=Va,Ps[Al]=Pc,Ps[SA]=Kl,Ps[ll]=Hc}function Ai(u){return u&~EA?0>u?0:255:u>>Qr}function Ri(u,t){return Ai((19077*u>>8)+(26149*t>>8)-14234)}function Ki(u,t,a){return Ai((19077*u>>8)-(6419*t>>8)-(13320*a>>8)+8708)}function tr(u,t){return Ai((19077*u>>8)+(33050*t>>8)-17685)}function mr(u,t,a,h,g){h[g+0]=Ri(u,a),h[g+1]=Ki(u,t,a),h[g+2]=tr(u,t)}function ji(u,t,a,h,g){h[g+0]=tr(u,t),h[g+1]=Ki(u,t,a),h[g+2]=Ri(u,a)}function an(u,t,a,h,g){var f=Ki(u,t,a);t=f<<3&224|tr(u,t)>>3,h[g+0]=248&Ri(u,a)|f>>5,h[g+1]=t}function Bi(u,t,a,h,g){var f=240&tr(u,t)|15;h[g+0]=240&Ri(u,a)|Ki(u,t,a)>>4,h[g+1]=f}function fn(u,t,a,h,g){h[g+0]=255,mr(u,t,a,h,g+1)}function qi(u,t,a,h,g){ji(u,t,a,h,g),h[g+3]=255}function Ar(u,t,a,h,g){mr(u,t,a,h,g),h[g+3]=255}function Cn(u,t){return 0>u?0:u>t?t:u}function Is(u,t,a){ft[u]=function(h,g,f,y,B,x,k,R,G){for(var P=R+(-2&G)*a;R!=P;)t(h[g+0],f[y+0],B[x+0],k,R),t(h[g+1],f[y+0],B[x+0],k,R+a),g+=2,++y,++x,R+=2*a;1&G&&t(h[g+0],f[y+0],B[x+0],k,R)}}function fa(u,t,a){return a==0?u==0?t==0?6:5:t==0?4:0:a}function Ua(u,t,a,h,g){switch(u>>>30){case 3:ea(t,a,h,g,0);break;case 2:To(t,a,h,g);break;case 1:Mn(t,a,h,g)}}function oo(u,t){var a,h,g=t.M,f=t.Nb,y=u.oc,B=u.pc+40,x=u.oc,k=u.pc+584,R=u.oc,G=u.pc+600;for(a=0;16>a;++a)y[B+32*a-1]=129;for(a=0;8>a;++a)x[k+32*a-1]=129,R[G+32*a-1]=129;for(0<g?y[B-1-32]=x[k-1-32]=R[G-1-32]=129:(l(y,B-32-1,127,21),l(x,k-32-1,127,9),l(R,G-32-1,127,9)),h=0;h<u.za;++h){var P=t.ya[t.aa+h];if(0<h){for(a=-1;16>a;++a)o(y,B+32*a-4,y,B+32*a+12,4);for(a=-1;8>a;++a)o(x,k+32*a-4,x,k+32*a+4,4),o(R,G+32*a-4,R,G+32*a+4,4)}var M=u.Gd,j=u.Hd+h,et=P.ad,W=P.Hc;if(0<g&&(o(y,B-32,M[j].y,0,16),o(x,k-32,M[j].f,0,8),o(R,G-32,M[j].ea,0,8)),P.Za){var X=y,ct=B-32+16;for(0<g&&(h>=u.za-1?l(X,ct,M[j].y[15],4):o(X,ct,M[j+1].y,0,4)),a=0;4>a;a++)X[ct+128+a]=X[ct+256+a]=X[ct+384+a]=X[ct+0+a];for(a=0;16>a;++a,W<<=2)X=y,ct=B+gi[a],Nn[P.Ob[a]](X,ct),Ua(W,et,16*+a,X,ct)}else if(X=fa(h,g,P.Ob[0]),ia[X](y,B),W!=0)for(a=0;16>a;++a,W<<=2)Ua(W,et,16*+a,y,B+gi[a]);for(a=P.Gc,X=fa(h,g,P.Dd),os[X](x,k),os[X](R,G),W=et,X=x,ct=k,255&(P=a>>0)&&(170&P?vs(W,256,X,ct):Ao(W,256,X,ct)),P=R,W=G,255&(a>>=8)&&(170&a?vs(et,320,P,W):Ao(et,320,P,W)),g<u.Ub-1&&(o(M[j].y,0,y,B+480,16),o(M[j].f,0,x,k+224,8),o(M[j].ea,0,R,G+224,8)),a=8*f*u.B,M=u.sa,j=u.ta+16*h+16*f*u.R,et=u.qa,P=u.ra+8*h+a,W=u.Ha,X=u.Ia+8*h+a,a=0;16>a;++a)o(M,j+a*u.R,y,B+32*a,16);for(a=0;8>a;++a)o(et,P+a*u.B,x,k+32*a,8),o(W,X+a*u.B,R,G+32*a,8)}}function ao(u,t,a,h,g,f,y,B,x){var k=[0],R=[0],G=0,P=x!=null?x.kd:0,M=x??new pA;if(u==null||12>a)return 7;M.data=u,M.w=t,M.ha=a,t=[t],a=[a],M.gb=[M.gb];t:{var j=t,et=a,W=M.gb;if(e(u!=null),e(et!=null),e(W!=null),W[0]=0,12<=et[0]&&!r(u,j[0],"RIFF")){if(r(u,j[0]+8,"WEBP")){W=3;break t}var X=Je(u,j[0]+4);if(12>X||4294967286<X){W=3;break t}if(P&&X>et[0]-8){W=7;break t}W[0]=X,j[0]+=12,et[0]-=12}W=0}if(W!=0)return W;for(X=0<M.gb[0],a=a[0];;){t:{var ct=u;et=t,W=a;var rt=k,ut=R,Ft=j=[0];if((oe=G=[G])[0]=0,8>W[0])W=7;else{if(!r(ct,et[0],"VP8X")){if(Je(ct,et[0]+4)!=10){W=3;break t}if(18>W[0]){W=7;break t}var Qt=Je(ct,et[0]+8),se=1+We(ct,et[0]+12);if(2147483648<=se*(ct=1+We(ct,et[0]+15))){W=3;break t}Ft!=null&&(Ft[0]=Qt),rt!=null&&(rt[0]=se),ut!=null&&(ut[0]=ct),et[0]+=18,W[0]-=18,oe[0]=1}W=0}}if(G=G[0],j=j[0],W!=0)return W;if(et=!!(2&j),!X&&G)return 3;if(f!=null&&(f[0]=!!(16&j)),y!=null&&(y[0]=et),B!=null&&(B[0]=0),y=k[0],j=R[0],G&&et&&x==null){W=0;break}if(4>a){W=7;break}if(X&&G||!X&&!G&&!r(u,t[0],"ALPH")){a=[a],M.na=[M.na],M.P=[M.P],M.Sa=[M.Sa];t:{Qt=u,W=t,X=a;var oe=M.gb;rt=M.na,ut=M.P,Ft=M.Sa,se=22,e(Qt!=null),e(X!=null),ct=W[0];var xe=X[0];for(e(rt!=null),e(Ft!=null),rt[0]=null,ut[0]=null,Ft[0]=0;;){if(W[0]=ct,X[0]=xe,8>xe){W=7;break t}var Ue=Je(Qt,ct+4);if(4294967286<Ue){W=3;break t}var _e=8+Ue+1&-2;if(se+=_e,0<oe&&se>oe){W=3;break t}if(!r(Qt,ct,"VP8 ")||!r(Qt,ct,"VP8L")){W=0;break t}if(xe[0]<_e){W=7;break t}r(Qt,ct,"ALPH")||(rt[0]=Qt,ut[0]=ct+8,Ft[0]=Ue),ct+=_e,xe-=_e}}if(a=a[0],M.na=M.na[0],M.P=M.P[0],M.Sa=M.Sa[0],W!=0)break}a=[a],M.Ja=[M.Ja],M.xa=[M.xa];t:if(oe=u,W=t,X=a,rt=M.gb[0],ut=M.Ja,Ft=M.xa,Qt=W[0],ct=!r(oe,Qt,"VP8 "),se=!r(oe,Qt,"VP8L"),e(oe!=null),e(X!=null),e(ut!=null),e(Ft!=null),8>X[0])W=7;else{if(ct||se){if(oe=Je(oe,Qt+4),12<=rt&&oe>rt-12){W=3;break t}if(P&&oe>X[0]-8){W=7;break t}ut[0]=oe,W[0]+=8,X[0]-=8,Ft[0]=se}else Ft[0]=5<=X[0]&&oe[Qt+0]==47&&!(oe[Qt+4]>>5),ut[0]=X[0];W=0}if(a=a[0],M.Ja=M.Ja[0],M.xa=M.xa[0],t=t[0],W!=0)break;if(4294967286<M.Ja)return 3;if(B==null||et||(B[0]=M.xa?2:1),y=[y],j=[j],M.xa){if(5>a){W=7;break}B=y,P=j,et=f,u==null||5>a?u=0:5<=a&&u[t+0]==47&&!(u[t+4]>>5)?(X=[0],oe=[0],rt=[0],Wt(ut=new J,u,t,a),Ot(ut,X,oe,rt)?(B!=null&&(B[0]=X[0]),P!=null&&(P[0]=oe[0]),et!=null&&(et[0]=rt[0]),u=1):u=0):u=0}else{if(10>a){W=7;break}B=j,u==null||10>a||!io(u,t+3,a-3)?u=0:(P=u[t+0]|u[t+1]<<8|u[t+2]<<16,et=16383&(u[t+7]<<8|u[t+6]),u=16383&(u[t+9]<<8|u[t+8]),1&P||3<(P>>1&7)||!(P>>4&1)||P>>5>=M.Ja||!et||!u?u=0:(y&&(y[0]=et),B&&(B[0]=u),u=1))}if(!u||(y=y[0],j=j[0],G&&(k[0]!=y||R[0]!=j)))return 3;x!=null&&(x[0]=M,x.offset=t-x.w,e(4294967286>t-x.w),e(x.offset==x.ha-a));break}return W==0||W==7&&G&&x==null?(f!=null&&(f[0]|=M.na!=null&&0<M.na.length),h!=null&&(h[0]=y),g!=null&&(g[0]=j),0):W}function Zn(u,t,a){var h=t.width,g=t.height,f=0,y=0,B=h,x=g;if(t.Da=u!=null&&0<u.Da,t.Da&&(B=u.cd,x=u.bd,f=u.v,y=u.j,11>a||(f&=-2,y&=-2),0>f||0>y||0>=B||0>=x||f+B>h||y+x>g))return 0;if(t.v=f,t.j=y,t.va=f+B,t.o=y+x,t.U=B,t.T=x,t.da=u!=null&&0<u.da,t.da){if(!Xe(B,x,a=[u.ib],f=[u.hb]))return 0;t.ib=a[0],t.hb=f[0]}return t.ob=u!=null&&u.ob,t.Kb=u==null||!u.Sd,t.da&&(t.ob=t.ib<3*h/4&&t.hb<3*g/4,t.Kb=0),1}function Qa(u){if(u==null)return 2;if(11>u.S){var t=u.f.RGBA;t.fb+=(u.height-1)*t.A,t.A=-t.A}else t=u.f.kb,u=u.height,t.O+=(u-1)*t.fa,t.fa=-t.fa,t.N+=(u-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(u-1>>1)*t.Db,t.Db=-t.Db,t.F!=null&&(t.J+=(u-1)*t.lb,t.lb=-t.lb);return 0}function ma(u,t,a,h){if(h==null||0>=u||0>=t)return 2;if(a!=null){if(a.Da){var g=a.cd,f=a.bd,y=-2&a.v,B=-2&a.j;if(0>y||0>B||0>=g||0>=f||y+g>u||B+f>t)return 2;u=g,t=f}if(a.da){if(!Xe(u,t,g=[a.ib],f=[a.hb]))return 2;u=g[0],t=f[0]}}h.width=u,h.height=t;t:{var x=h.width,k=h.height;if(u=h.S,0>=x||0>=k||!(u>=wA&&13>u))u=2;else{if(0>=h.Rd&&h.sd==null){y=f=g=t=0;var R=(B=x*Xl[u])*k;if(11>u||(f=(k+1)/2*(t=(x+1)/2),u==12&&(y=(g=x)*k)),(k=s(R+2*f+y))==null){u=1;break t}h.sd=k,11>u?((x=h.f.RGBA).eb=k,x.fb=0,x.A=B,x.size=R):((x=h.f.kb).y=k,x.O=0,x.fa=B,x.Fd=R,x.f=k,x.N=0+R,x.Ab=t,x.Cd=f,x.ea=k,x.W=0+R+f,x.Db=t,x.Ed=f,u==12&&(x.F=k,x.J=0+R+2*f),x.Tc=y,x.lb=g)}if(t=1,g=h.S,f=h.width,y=h.height,g>=wA&&13>g)if(11>g)u=h.f.RGBA,t&=(B=Math.abs(u.A))*(y-1)+f<=u.size,t&=B>=f*Xl[g],t&=u.eb!=null;else{u=h.f.kb,B=(f+1)/2,R=(y+1)/2,x=Math.abs(u.fa),k=Math.abs(u.Ab);var G=Math.abs(u.Db),P=Math.abs(u.lb),M=P*(y-1)+f;t&=x*(y-1)+f<=u.Fd,t&=k*(R-1)+B<=u.Cd,t=(t&=G*(R-1)+B<=u.Ed)&x>=f&k>=B&G>=B,t&=u.y!=null,t&=u.f!=null,t&=u.ea!=null,g==12&&(t&=P>=f,t&=M<=u.Tc,t&=u.F!=null)}else t=0;u=t?0:2}}return u!=0||a!=null&&a.fd&&(u=Qa(h)),u}var Pn=64,Ls=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],So=24,Fo=32,ko=8,In=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),ft.Predictor0=function(){return 4278190080},ft.Predictor1=function(u){return u},ft.Predictor2=function(u,t,a){return t[a+0]},ft.Predictor3=function(u,t,a){return t[a+1]},ft.Predictor4=function(u,t,a){return t[a-1]},ft.Predictor5=function(u,t,a){return ze(ze(u,t[a+1]),t[a+0])},ft.Predictor6=function(u,t,a){return ze(u,t[a-1])},ft.Predictor7=function(u,t,a){return ze(u,t[a+0])},ft.Predictor8=function(u,t,a){return ze(t[a-1],t[a+0])},ft.Predictor9=function(u,t,a){return ze(t[a+0],t[a+1])},ft.Predictor10=function(u,t,a){return ze(ze(u,t[a-1]),ze(t[a+0],t[a+1]))},ft.Predictor11=function(u,t,a){var h=t[a+0];return 0>=Si(h>>24&255,u>>24&255,(t=t[a-1])>>24&255)+Si(h>>16&255,u>>16&255,t>>16&255)+Si(h>>8&255,u>>8&255,t>>8&255)+Si(255&h,255&u,255&t)?h:u},ft.Predictor12=function(u,t,a){var h=t[a+0];return(ti((u>>24&255)+(h>>24&255)-((t=t[a-1])>>24&255))<<24|ti((u>>16&255)+(h>>16&255)-(t>>16&255))<<16|ti((u>>8&255)+(h>>8&255)-(t>>8&255))<<8|ti((255&u)+(255&h)-(255&t)))>>>0},ft.Predictor13=function(u,t,a){var h=t[a-1];return(ci((u=ze(u,t[a+0]))>>24&255,h>>24&255)<<24|ci(u>>16&255,h>>16&255)<<16|ci(u>>8&255,h>>8&255)<<8|ci(u>>0&255,h>>0&255))>>>0};var yA=ft.PredictorAdd0;ft.PredictorAdd1=he,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var Lo=ft.PredictorAdd2;Ei("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Ei("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var $o,Es=ft.ColorIndexInverseTransform,Ra=ft.MapARGB,gr=ft.VP8LColorIndexInverseTransformAlpha,bA=ft.MapAlpha,Ca=ft.VP8LPredictorsAdd=[];Ca.length=16,(ft.VP8LPredictors=[]).length=16,(ft.VP8LPredictorsAdd_C=[]).length=16,(ft.VP8LPredictors_C=[]).length=16;var ys,Hn,ta,bs,Eo,Ga,rs,ea,To,vs,Mn,Ao,Ts,Uo,Qo,lo,Za,Us,Ro,xr,kr,Vr,qr,zr,ns,Pa,sl,$r,Qs=s(511),ss=s(2041),vA=s(225),Ml=s(767),ol=0,Ia=ss,Rs=vA,Xn=Ml,Yn=Qs,wA=0,Ha=1,Nl=2,BA=3,Go=4,_A=5,xA=6,al=7,Al=8,SA=9,ll=10,Vl=[2,3,7],FA=[3,3,11],Lc=[280,256,256,256,40],Gs=[0,1,1,1,0],Zo=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ec=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],co=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ma=8,Tc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Uc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kA=null,Cu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Na=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Dl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Rc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ia=[],Nn=[],os=[],Gc=1,lr=2,Po=[],Ps=[];ye("UpsampleRgbLinePair",mr,3),ye("UpsampleBgrLinePair",ji,3),ye("UpsampleRgbaLinePair",Ar,4),ye("UpsampleBgraLinePair",qi,4),ye("UpsampleArgbLinePair",fn,4),ye("UpsampleRgba4444LinePair",Bi,2),ye("UpsampleRgb565LinePair",an,2);var Zc=ft.UpsampleRgbLinePair,kh=ft.UpsampleBgrLinePair,Va=ft.UpsampleRgbaLinePair,Pc=ft.UpsampleBgraLinePair,Kl=ft.UpsampleArgbLinePair,Hc=ft.UpsampleRgba4444LinePair,Lh=ft.UpsampleRgb565LinePair,LA=16,Ol=1<<LA-1,cl=-227,jn=482,Qr=6,EA=(256<<Qr)-1,ul=0,zl=s(256),Iu=s(256),hl=s(256),gl=s(256),Ho=s(jn-cl),dl=s(jn-cl);Is("YuvToRgbRow",mr,3),Is("YuvToBgrRow",ji,3),Is("YuvToRgbaRow",Ar,4),Is("YuvToBgraRow",qi,4),Is("YuvToArgbRow",fn,4),Is("YuvToRgba4444Row",Bi,2),Is("YuvToRgb565Row",an,2);var gi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_i=[0,2,8],Wl=[8,7,6,4,4,2,2,2,1,1,1,1],Jl=1;this.WebPDecodeRGBA=function(u,t,a,h,g){var f=Ha,y=new dA,B=new It;y.ba=B,B.S=f,B.width=[B.width],B.height=[B.height];var x=B.width,k=B.height,R=new K;if(R==null||u==null)var G=2;else e(R!=null),G=ao(u,t,a,R.width,R.height,R.Pd,R.Qd,R.format,null);if(G!=0?x=0:(x!=null&&(x[0]=R.width[0]),k!=null&&(k[0]=R.height[0]),x=1),x){B.width=B.width[0],B.height=B.height[0],h!=null&&(h[0]=B.width),g!=null&&(g[0]=B.height);t:{if(h=new is,(g=new pA).data=u,g.w=t,g.ha=a,g.kd=1,t=[0],e(g!=null),((u=ao(g.data,g.w,g.ha,null,null,null,t,null,g))==0||u==7)&&t[0]&&(u=4),(t=u)==0){if(e(y!=null),h.data=g.data,h.w=g.w+g.offset,h.ha=g.ha-g.offset,h.put=Jt,h.ac=Nt,h.bc=Rt,h.ma=y,g.xa){if((u=Oi())==null){y=1;break t}if(function(P,M){var j=[0],et=[0],W=[0];e:for(;;){if(P==null)return 0;if(M==null)return P.a=2,0;if(P.l=M,P.a=0,Wt(P.m,M.data,M.w,M.ha),!Ot(P.m,j,et,W)){P.a=3;break e}if(P.xb=lr,M.width=j[0],M.height=et[0],!sr(j[0],et[0],1,P,null))break e;return 1}return e(P.a!=0),0}(u,h)){if(h=(t=ma(h.width,h.height,y.Oa,y.ba))==0){e:{h=u;i:for(;;){if(h==null){h=0;break e}if(e(h.s.yc!=null),e(h.s.Ya!=null),e(0<h.s.Wb),e((a=h.l)!=null),e((g=a.ma)!=null),h.xb!=0){if(h.ca=g.ba,h.tb=g.tb,e(h.ca!=null),!Zn(g.Oa,a,BA)){h.a=2;break i}if(!Zt(h,a.width)||a.da)break i;if((a.da||zi(h.ca.S))&&ae(),11>h.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),h.ca.f.kb.F!=null&&ae()),h.Pb&&0<h.s.ua&&h.s.vb.X==null&&!Dt(h.s.vb,h.s.Wa.Xa)){h.a=1;break i}h.xb=0}if(!ur(h,h.V,h.Ba,h.c,h.i,a.o,Ti))break i;g.Dc=h.Ma,h=1;break e}e(h.a!=0),h=0}h=!h}h&&(t=u.a)}else t=u.a}else{if((u=new Jn)==null){y=1;break t}if(u.Fa=g.na,u.P=g.P,u.qc=g.Sa,wn(u,h)){if((t=ma(h.width,h.height,y.Oa,y.ba))==0){if(u.Aa=0,a=y.Oa,e((g=u)!=null),a!=null){if(0<(x=0>(x=a.Md)?0:100<x?255:255*x/100)){for(k=R=0;4>k;++k)12>(G=g.pb[k]).lc&&(G.ia=x*Wl[0>G.lc?0:G.lc]>>3),R|=G.ia;R&&(alert("todo:VP8InitRandom"),g.ia=1)}g.Ga=a.Id,100<g.Ga?g.Ga=100:0>g.Ga&&(g.Ga=0)}ht(u,h)||(t=u.a)}}else t=u.a}t==0&&y.Oa!=null&&y.Oa.fd&&(t=Qa(y.ba))}y=t}f=y!=0?null:11>f?B.f.RGBA.eb:B.f.kb.y}else f=null;return f};var Xl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function w(ft,Mt){for(var qt="",at=0;at<4;at++)qt+=String.fromCharCode(ft[Mt++]);return qt}function _(ft,Mt){return(ft[Mt+0]<<0|ft[Mt+1]<<8|ft[Mt+2]<<16)>>>0}function E(ft,Mt){return(ft[Mt+0]<<0|ft[Mt+1]<<8|ft[Mt+2]<<16|ft[Mt+3]<<24)>>>0}new I;var U=[0],F=[0],V=[],H=new I,Y=n,D=function(ft,Mt){var qt={},at=0,st=!1,wt=0,yt=0;if(qt.frames=[],!function(dt,mt,Ut,Pt){for(var ie=0;ie<Pt;ie++)if(dt[mt+ie]!=Ut.charCodeAt(ie))return!0;return!1}(ft,Mt,"RIFF",4)){var te,jt;for(E(ft,Mt+=4),Mt+=8;Mt<ft.length;){var Xt=w(ft,Mt),Wt=E(ft,Mt+=4);Mt+=4;var Ct=Wt+(1&Wt);switch(Xt){case"VP8 ":case"VP8L":qt.frames[at]===void 0&&(qt.frames[at]={}),(J=qt.frames[at]).src_off=st?yt:Mt-8,J.src_size=wt+Wt+8,at++,st&&(st=!1,wt=0,yt=0);break;case"VP8X":(J=qt.header={}).feature_flags=ft[Mt];var Et=Mt+4;J.canvas_width=1+_(ft,Et),Et+=3,J.canvas_height=1+_(ft,Et),Et+=3;break;case"ALPH":st=!0,wt=Ct+8,yt=Mt-8;break;case"ANIM":(J=qt.header).bgcolor=E(ft,Mt),Et=Mt+4,J.loop_count=(te=ft)[(jt=Et)+0]<<0|te[jt+1]<<8,Et+=2;break;case"ANMF":var ue,J;(J=qt.frames[at]={}).offset_x=2*_(ft,Mt),Mt+=3,J.offset_y=2*_(ft,Mt),Mt+=3,J.width=1+_(ft,Mt),Mt+=3,J.height=1+_(ft,Mt),Mt+=3,J.duration=_(ft,Mt),Mt+=3,ue=ft[Mt++],J.dispose=1&ue,J.blend=ue>>1&1}Xt!="ANMF"&&(Mt+=Ct)}return qt}}(Y,0);D.response=Y,D.rgbaoutput=!0,D.dataurl=!1;var tt=D.header?D.header:null,ot=D.frames?D.frames:null;if(tt){tt.loop_counter=tt.loop_count,U=[tt.canvas_height],F=[tt.canvas_width];for(var bt=0;bt<ot.length&&ot[bt].blend!=0;bt++);}var kt=ot[0],Lt=H.WebPDecodeRGBA(Y,kt.src_off,kt.src_size,F,U);kt.rgba=Lt,kt.imgwidth=F[0],kt.imgheight=U[0];for(var vt=0;vt<F[0]*U[0]*4;vt++)V[vt]=Lt[vt];return this.width=F,this.height=U,this.data=V,this}var K5,x6,S6,en,cm,yo,bo,ed,dm,pm,My,O5,z5,W5,Ny,J5,F6,v5,Vy,Ql,Pr,$A,xc,Pr,Pr,Pr,Pr,id,Pr,k6,L6,E6,T6,Ty,AA,Uy,$y,X5,U6,Rl,jg,Qy,Dy,w5,qg,sm,B5,Q6,R6,G6,Z6,P6,H6,M6,N6,Yi,tn,td,Oy,du,x5,z6,S5,vn,t1,mu,Ih,or,wc,zo,k5,jA,W6,J6,X6,Tn,Un,Qn,Y6,j6,Jy,im,q6,$6,tK,eK,$5,Py,qA,tS,eS,cA,_h,xh,Sh,om,ps,am,Fh,hm,Am,fu,lm,xi,iK,rS,nS,Xy,sS,rK,nK,E5,rm,Q5,R5,G5,yh,nm,Z5,P5,H5,AK,uA,Sc,cK,uK,tl,hK,V5,oS,gK,dK,pK,fK,mK,CK,IK,aS,yK,bK,vK,wK,BK,Bc,rd,Bh,$g,jy,qy,gm,D5,_K,xK,SK,FK,kK,LK,EK,TK,UK,QK,AS,nd,Ey=_d(()=>{K5=xd(sC(),1),x6=Object.defineProperty,S6=(n,e,r)=>e in n?x6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,en=(n,e,r)=>(S6(n,typeof e!="symbol"?e+"":e,r),r),cm=class{constructor(e){en(this,"map"),en(this,"width"),en(this,"height"),en(this,"svgCanvas"),en(this,"xLine"),en(this,"yLine"),en(this,"color","#535353"),this.map=e,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,r;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);let e=this.width/2,r=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${r}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${r}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="relative",r.setAttribute("width",`${this.width}px`),r.setAttribute("height",`${this.height}px`);let o=this.width/2,l=this.height/2;this.yLine=r.appendChild(this.createLine(o,0,o,this.height,this.color,"2px")),this.xLine=r.appendChild(this.createLine(0,l,this.width,l,this.color,"2px")),e?.appendChild(r),this.svgCanvas=r}}createLine(e,r,o,l,s,p){let m=document.createElementNS("http://www.w3.org/2000/svg","line");return m.setAttribute("x1",e),m.setAttribute("y1",r),m.setAttribute("x2",o),m.setAttribute("y2",l),m.setAttribute("stroke-dasharray","5,5"),m.setAttribute("stroke",s),m.setAttribute("stroke-width",p),m}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}};yo=Uint8Array,bo=Uint16Array,ed=Uint32Array,dm=new yo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pm=new yo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),My=new yo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O5=function(n,e){for(var r=new bo(31),o=0;o<31;++o)r[o]=e+=1<<n[o-1];for(var l=new ed(r[30]),o=1;o<30;++o)for(var s=r[o];s<r[o+1];++s)l[s]=s-r[o]<<5|o;return[r,l]},z5=O5(dm,2),W5=z5[0],Ny=z5[1];W5[28]=258,Ny[258]=28;J5=O5(pm,0),F6=J5[0],v5=J5[1],Vy=new bo(32768);for(Pr=0;Pr<32768;++Pr)Ql=(Pr&43690)>>>1|(Pr&21845)<<1,Ql=(Ql&52428)>>>2|(Ql&13107)<<2,Ql=(Ql&61680)>>>4|(Ql&3855)<<4,Vy[Pr]=((Ql&65280)>>>8|(Ql&255)<<8)>>>1;$A=function(n,e,r){for(var o=n.length,l=0,s=new bo(e);l<o;++l)++s[n[l]-1];var p=new bo(e);for(l=0;l<e;++l)p[l]=p[l-1]+s[l-1]<<1;var m;if(r){m=new bo(1<<e);var I=15-e;for(l=0;l<o;++l)if(n[l])for(var w=l<<4|n[l],_=e-n[l],E=p[n[l]-1]++<<_,U=E|(1<<_)-1;E<=U;++E)m[Vy[E]>>>I]=w}else for(m=new bo(o),l=0;l<o;++l)m[l]=Vy[p[n[l]-1]++]>>>15-n[l];return m},xc=new yo(288);for(Pr=0;Pr<144;++Pr)xc[Pr]=8;for(Pr=144;Pr<256;++Pr)xc[Pr]=9;for(Pr=256;Pr<280;++Pr)xc[Pr]=7;for(Pr=280;Pr<288;++Pr)xc[Pr]=8;id=new yo(32);for(Pr=0;Pr<32;++Pr)id[Pr]=5;k6=$A(xc,9,0),L6=$A(xc,9,1),E6=$A(id,5,0),T6=$A(id,5,1),Ty=function(n){for(var e=n[0],r=1;r<n.length;++r)n[r]>e&&(e=n[r]);return e},AA=function(n,e,r){var o=e/8>>0;return(n[o]|n[o+1]<<8)>>>(e&7)&r},Uy=function(n,e){var r=e/8>>0;return(n[r]|n[r+1]<<8|n[r+2]<<16)>>>(e&7)},$y=function(n){return(n/8>>0)+(n&7&&1)},X5=function(n,e,r){(e==null||e<0)&&(e=0),(r==null||r>n.length)&&(r=n.length);var o=new(n instanceof bo?bo:n instanceof ed?ed:yo)(r-e);return o.set(n.subarray(e,r)),o},U6=function(n,e,r){var o=n.length,l=!e||r,s=!r||r.i;r||(r={}),e||(e=new yo(o*3));var p=function(Pt){var ie=e.length;if(Pt>ie){var le=new yo(Math.max(ie*2,Pt));le.set(e),e=le}},m=r.f||0,I=r.p||0,w=r.b||0,_=r.l,E=r.d,U=r.m,F=r.n,V=o*8;do{if(!_){r.f=m=AA(n,I,1);var H=AA(n,I+1,3);if(I+=3,H)if(H==1)_=L6,E=T6,U=9,F=5;else if(H==2){var Y=AA(n,I,31)+257,D=AA(n,I+10,15)+4,tt=Y+AA(n,I+5,31)+1;I+=14;for(var ot=new yo(tt),bt=new yo(19),kt=0;kt<D;++kt)bt[My[kt]]=AA(n,I+kt*3,7);I+=D*3;var Lt=Ty(bt),vt=(1<<Lt)-1;if(!s&&I+tt*(Lt+7)>V)break;for(var ft=$A(bt,Lt,1),kt=0;kt<tt;){var Mt=ft[AA(n,I,vt)];I+=Mt&15;var qt=Mt>>>4;if(qt<16)ot[kt++]=qt;else{var at=0,st=0;for(qt==16?(st=3+AA(n,I,3),I+=2,at=ot[kt-1]):qt==17?(st=3+AA(n,I,7),I+=3):qt==18&&(st=11+AA(n,I,127),I+=7);st--;)ot[kt++]=at}}var wt=ot.subarray(0,Y),yt=ot.subarray(Y);U=Ty(wt),F=Ty(yt),_=$A(wt,U,1),E=$A(yt,F,1)}else throw"invalid block type";else{var qt=$y(I)+4,te=n[qt-4]|n[qt-3]<<8,jt=qt+te;if(jt>o){if(s)throw"unexpected EOF";break}l&&p(w+te),e.set(n.subarray(qt,jt),w),r.b=w+=te,r.p=I=jt*8;continue}if(I>V)throw"unexpected EOF"}l&&p(w+131072);for(var Xt=(1<<U)-1,Wt=(1<<F)-1,Ct=U+F+18;s||I+Ct<V;){var at=_[Uy(n,I)&Xt],Et=at>>>4;if(I+=at&15,I>V)throw"unexpected EOF";if(!at)throw"invalid length/literal";if(Et<256)e[w++]=Et;else if(Et==256){_=null;break}else{var ue=Et-254;if(Et>264){var kt=Et-257,J=dm[kt];ue=AA(n,I,(1<<J)-1)+W5[kt],I+=J}var dt=E[Uy(n,I)&Wt],mt=dt>>>4;if(!dt)throw"invalid distance";I+=dt&15;var yt=F6[mt];if(mt>3){var J=pm[mt];yt+=Uy(n,I)&(1<<J)-1,I+=J}if(I>V)throw"unexpected EOF";l&&p(w+131072);for(var Ut=w+ue;w<Ut;w+=4)e[w]=e[w-yt],e[w+1]=e[w+1-yt],e[w+2]=e[w+2-yt],e[w+3]=e[w+3-yt];w=Ut}}r.l=_,r.p=I,r.b=w,_&&(m=1,r.m=U,r.d=E,r.n=F)}while(!m);return w==e.length?e:X5(e,0,w)},Rl=function(n,e,r){r<<=e&7;var o=e/8>>0;n[o]|=r,n[o+1]|=r>>>8},jg=function(n,e,r){r<<=e&7;var o=e/8>>0;n[o]|=r,n[o+1]|=r>>>8,n[o+2]|=r>>>16},Qy=function(n,e){for(var r=[],o=0;o<n.length;++o)n[o]&&r.push({s:o,f:n[o]});var l=r.length,s=r.slice();if(!l)return[new yo(0),0];if(l==1){var p=new yo(r[0].s+1);return p[r[0].s]=1,[p,1]}r.sort(function(kt,Lt){return kt.f-Lt.f}),r.push({s:-1,f:25001});var m=r[0],I=r[1],w=0,_=1,E=2;for(r[0]={s:-1,f:m.f+I.f,l:m,r:I};_!=l-1;)m=r[r[w].f<r[E].f?w++:E++],I=r[w!=_&&r[w].f<r[E].f?w++:E++],r[_++]={s:-1,f:m.f+I.f,l:m,r:I};for(var U=s[0].s,o=1;o<l;++o)s[o].s>U&&(U=s[o].s);var F=new bo(U+1),V=Dy(r[_-1],F,0);if(V>e){var o=0,H=0,Y=V-e,D=1<<Y;for(s.sort(function(Lt,vt){return F[vt.s]-F[Lt.s]||Lt.f-vt.f});o<l;++o){var tt=s[o].s;if(F[tt]>e)H+=D-(1<<V-F[tt]),F[tt]=e;else break}for(H>>>=Y;H>0;){var ot=s[o].s;F[ot]<e?H-=1<<e-F[ot]++-1:++o}for(;o>=0&&H;--o){var bt=s[o].s;F[bt]==e&&(--F[bt],++H)}V=e}return[new yo(F),V]},Dy=function(n,e,r){return n.s==-1?Math.max(Dy(n.l,e,r+1),Dy(n.r,e,r+1)):e[n.s]=r},w5=function(n){for(var e=n.length;e&&!n[--e];);for(var r=new bo(++e),o=0,l=n[0],s=1,p=function(I){r[o++]=I},m=1;m<=e;++m)if(n[m]==l&&m!=e)++s;else{if(!l&&s>2){for(;s>138;s-=138)p(32754);s>2&&(p(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(p(l),--s;s>6;s-=6)p(8304);s>2&&(p(s-3<<5|8208),s=0)}for(;s--;)p(l);s=1,l=n[m]}return[r.subarray(0,o),e]},qg=function(n,e){for(var r=0,o=0;o<e.length;++o)r+=n[o]*e[o];return r},sm=function(n,e,r){var o=r.length,l=$y(e+2);n[l]=o&255,n[l+1]=o>>>8,n[l+2]=n[l]^255,n[l+3]=n[l+1]^255;for(var s=0;s<o;++s)n[l+s+4]=r[s];return(l+4+o)*8},B5=function(n,e,r,o,l,s,p,m,I,w,_){Rl(e,_++,r),++l[256];for(var E=Qy(l,15),U=E[0],F=E[1],V=Qy(s,15),H=V[0],Y=V[1],D=w5(U),tt=D[0],ot=D[1],bt=w5(H),kt=bt[0],Lt=bt[1],vt=new bo(19),ft=0;ft<tt.length;++ft)vt[tt[ft]&31]++;for(var ft=0;ft<kt.length;++ft)vt[kt[ft]&31]++;for(var Mt=Qy(vt,7),qt=Mt[0],at=Mt[1],st=19;st>4&&!qt[My[st-1]];--st);var wt=w+5<<3,yt=qg(l,xc)+qg(s,id)+p,te=qg(l,U)+qg(s,H)+p+14+3*st+qg(vt,qt)+(2*vt[16]+3*vt[17]+7*vt[18]);if(wt<=yt&&wt<=te)return sm(e,_,n.subarray(I,I+w));var jt,Xt,Wt,Ct;if(Rl(e,_,1+(te<yt)),_+=2,te<yt){jt=$A(U,F,0),Xt=U,Wt=$A(H,Y,0),Ct=H;var Et=$A(qt,at,0);Rl(e,_,ot-257),Rl(e,_+5,Lt-1),Rl(e,_+10,st-4),_+=14;for(var ft=0;ft<st;++ft)Rl(e,_+3*ft,qt[My[ft]]);_+=3*st;for(var ue=[tt,kt],J=0;J<2;++J)for(var dt=ue[J],ft=0;ft<dt.length;++ft){var mt=dt[ft]&31;Rl(e,_,Et[mt]),_+=qt[mt],mt>15&&(Rl(e,_,dt[ft]>>>5&127),_+=dt[ft]>>>12)}}else jt=k6,Xt=xc,Wt=E6,Ct=id;for(var ft=0;ft<m;++ft)if(o[ft]>255){var mt=o[ft]>>>18&31;jg(e,_,jt[mt+257]),_+=Xt[mt+257],mt>7&&(Rl(e,_,o[ft]>>>23&31),_+=dm[mt]);var Ut=o[ft]&31;jg(e,_,Wt[Ut]),_+=Ct[Ut],Ut>3&&(jg(e,_,o[ft]>>>5&8191),_+=pm[Ut])}else jg(e,_,jt[o[ft]]),_+=Xt[o[ft]];return jg(e,_,jt[256]),_+Xt[256]},Q6=new ed([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),R6=new yo(0),G6=function(n,e,r,o,l,s){var p=n.length,m=new yo(o+p+5*(1+Math.floor(p/7e3))+l),I=m.subarray(o,m.length-l),w=0;if(!e||p<8)for(var _=0;_<=p;_+=65535){var E=_+65535;E<p?w=sm(I,w,n.subarray(_,E)):(I[_]=s,w=sm(I,w,n.subarray(_,p)))}else{for(var U=Q6[e-1],F=U>>>13,V=U&8191,H=(1<<r)-1,Y=new bo(32768),D=new bo(H+1),tt=Math.ceil(r/3),ot=2*tt,bt=function(Dt){return(n[Dt]^n[Dt+1]<<tt^n[Dt+2]<<ot)&H},kt=new ed(25e3),Lt=new bo(288),vt=new bo(32),ft=0,Mt=0,_=0,qt=0,at=0,st=0;_<p;++_){var wt=bt(_),yt=_&32767,te=D[wt];if(Y[yt]=te,D[wt]=yt,at<=_){var jt=p-_;if((ft>7e3||qt>24576)&&jt>423){w=B5(n,I,0,kt,Lt,vt,Mt,qt,st,_-st,w),qt=ft=Mt=0,st=_;for(var Xt=0;Xt<286;++Xt)Lt[Xt]=0;for(var Xt=0;Xt<30;++Xt)vt[Xt]=0}var Wt=2,Ct=0,Et=V,ue=yt-te&32767;if(jt>2&&wt==bt(_-ue))for(var J=Math.min(F,jt)-1,dt=Math.min(32767,_),mt=Math.min(258,jt);ue<=dt&&--Et&&yt!=te;){if(n[_+Wt]==n[_+Wt-ue]){for(var Ut=0;Ut<mt&&n[_+Ut]==n[_+Ut-ue];++Ut);if(Ut>Wt){if(Wt=Ut,Ct=ue,Ut>J)break;for(var Pt=Math.min(ue,Ut-2),ie=0,Xt=0;Xt<Pt;++Xt){var le=_-ue+Xt+32768&32767,ce=Y[le],Qe=le-ce+32768&32767;Qe>ie&&(ie=Qe,te=le)}}}yt=te,te=Y[yt],ue+=yt-te+32768&32767}if(Ct){kt[qt++]=268435456|Ny[Wt]<<18|v5[Ct];var Ee=Ny[Wt]&31,We=v5[Ct]&31;Mt+=dm[Ee]+pm[We],++Lt[257+Ee],++vt[We],at=_+Wt,++ft}else kt[qt++]=n[_],++Lt[n[_]]}}w=B5(n,I,s,kt,Lt,vt,Mt,qt,st,_-st,w),s||(w=sm(I,w,R6))}return X5(m,0,o+$y(w)+l)},Z6=function(){var n=1,e=0;return{p:function(r){for(var o=n,l=e,s=r.length,p=0;p!=s;){for(var m=Math.min(p+5552,s);p<m;++p)o+=r[p],l+=o;o%=65521,l%=65521}n=o,e=l},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},P6=function(n,e,r,o,l){return G6(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,r,o,!l)},H6=function(n,e,r){for(;r;++e)n[e]=r,r>>>=8},M6=function(n,e){var r=e.level,o=r==0?0:r<6?1:r==9?3:2;n[0]=120,n[1]=o<<6|(o?32-2*o:1)},N6=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};Yi=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();tn={log:Ry,warn:function(n){Yi.console&&(typeof Yi.console.warn=="function"?Yi.console.warn.apply(Yi.console,arguments):Ry.call(null,arguments))},error:function(n){Yi.console&&(typeof Yi.console.error=="function"?Yi.console.error.apply(Yi.console,arguments):Ry(n))}};du=Yi.saveAs||((typeof window>"u"?"undefined":Sr(window))!=="object"||window!==Yi?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,r){var o=Yi.URL||Yi.webkitURL,l=document.createElement("a");e=e||n.name||"download",l.download=e,l.rel="noopener",typeof n=="string"?(l.href=n,l.origin!==location.origin?_5(l.href)?Gy(n,e,r):em(l,l.target="_blank"):em(l)):(l.href=o.createObjectURL(n),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){em(l)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,r){if(e=e||n.name||"download",typeof n=="string")if(_5(n))Gy(n,e,r);else{var o=document.createElement("a");o.href=n,o.target="_blank",setTimeout(function(){em(o)})}else navigator.msSaveOrOpenBlob(function(l,s){return s===void 0?s={autoBom:!1}:Sr(s)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}(n,r),e)}:function(n,e,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof n=="string")return Gy(n,e,r);var l=n.type==="application/octet-stream",s=/constructor/i.test(Yi.HTMLElement)||Yi.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||l&&s)&&(typeof FileReader>"u"?"undefined":Sr(FileReader))==="object"){var m=new FileReader;m.onloadend=function(){var _=m.result;_=p?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=_:location=_,o=null},m.readAsDataURL(n)}else{var I=Yi.URL||Yi.webkitURL,w=I.createObjectURL(n);o?o.location=w:location.href=w,o=null,setTimeout(function(){I.revokeObjectURL(w)},4e4)}});td=Yi.atob.bind(Yi),Oy=Yi.btoa.bind(Yi);x5="0123456789abcdef".split("");z6=function(n){for(var e=0;e<n.length;e++)n[e]=K6(n[e]);return n.join("")}(j5("hello"))!="5d41402abc4b2a76b9719d911017c592";S5={print:4,modify:8,copy:16,"annot-forms":32};bh.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},bh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bh.prototype.hexToBytes=function(n){for(var e=[],r=0;r<n.length;r+=2)e.push(String.fromCharCode(parseInt(n.substr(r,2),16)));return e.join("")},bh.prototype.processOwnerPassword=function(n,e){return Wy(zy(e).substr(0,5),n)},bh.prototype.encryptor=function(n,e){var r=zy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(o){return Wy(r,o)}},um.prototype.equals=function(n){var e,r="id,objectNumber,equals";if(!n||Sr(n)!==Sr(this))return!1;var o=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;o++}for(e in n)n.hasOwnProperty(e)&&r.indexOf(e)<0&&o--;return o===0},Xi.API={events:[]},Xi.version="2.5.1";vn=Xi.API,t1=1,mu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ih=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},or=function(n){return n.toFixed(2)},wc=function(n){return n.toFixed(5)};vn.__acroform__={};zo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},k5=function(n){return n*t1},jA=function(n){var e=new tS,r=xi.internal.getHeight(n)||0,o=xi.internal.getWidth(n)||0;return e.BBox=[0,0,Number(or(o)),Number(or(r))],e},W6=vn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},J6=vn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},X6=vn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Tn=vn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return X6(n,e-1)},Un=vn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return W6(n,e-1)},Qn=vn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J6(n,e-1)},Y6=vn.__acroform__.calculateCoordinates=function(n,e){var r=e.internal.getHorizontalCoordinate,o=e.internal.getVerticalCoordinate,l=n[0],s=n[1],p=n[2],m=n[3],I={};return I.lowerLeft_X=r(l)||0,I.lowerLeft_Y=o(s+m)||0,I.upperRight_X=r(l+p)||0,I.upperRight_Y=o(s)||0,[Number(or(I.lowerLeft_X)),Number(or(I.lowerLeft_Y)),Number(or(I.upperRight_X)),Number(or(I.upperRight_Y))]},j6=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],r=n._V||n.DV,o=Jy(n,r),l=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+l+" "+or(o.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jA(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Jy=function(n,e){var r=n.fontSize===0?n.maxFontSize:n.fontSize,o={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=n.multiline?l.map(function(at){return at.split(`
`)}):l.map(function(at){return[at]});var s=r,p=xi.internal.getHeight(n)||0;p=p<0?-p:p;var m=xi.internal.getWidth(n)||0;m=m<0?-m:m;var I=function(at,st,wt){if(at+1<l.length){var yt=st+" "+l[at+1][0];return im(yt,n,wt).width<=m-4}return!1};s++;t:for(;s>0;){e="",s--;var w,_,E=im("3",n,s).height,U=n.multiline?p-s:(p-E)/2,F=U+=2,V=0,H=0,Y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+im(e,n,s=12).width+", FieldWidth:"+m+`
`;break}for(var D="",tt=0,ot=0;ot<l.length;ot++)if(l.hasOwnProperty(ot)){var bt=!1;if(l[ot].length!==1&&Y!==l[ot].length-1){if((E+2)*(tt+2)+2>p)continue t;D+=l[ot][Y],bt=!0,H=ot,ot--}else{D=(D+=l[ot][Y]+" ").substr(D.length-1)==" "?D.substr(0,D.length-1):D;var kt=parseInt(ot),Lt=I(kt,D,s),vt=ot>=l.length-1;if(Lt&&!vt){D+=" ",Y=0;continue}if(Lt||vt){if(vt)H=kt;else if(n.multiline&&(E+2)*(tt+2)+2>p)continue t}else{if(!n.multiline||(E+2)*(tt+2)+2>p)continue t;H=kt}}for(var ft="",Mt=V;Mt<=H;Mt++){var qt=l[Mt];if(n.multiline){if(Mt===H){ft+=qt[Y]+" ",Y=(Y+1)%qt.length;continue}if(Mt===V){ft+=qt[qt.length-1]+" ";continue}}ft+=qt[0]+" "}switch(ft=ft.substr(ft.length-1)==" "?ft.substr(0,ft.length-1):ft,_=im(ft,n,s).width,n.textAlign){case"right":w=m-_-2;break;case"center":w=(m-_)/2;break;case"left":default:w=2}e+=or(w)+" "+or(F)+` Td
`,e+="("+mu(ft)+`) Tj
`,e+=-or(w)+` 0 Td
`,F=-(s+2),_=0,V=bt?H:H+1,tt++,D=""}break}return o.text=e,o.fontSize=s,o},im=function(n,e,r){var o=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(n,{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:l}},q6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$6=function(n,e){var r={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(o){return o.type===r.type&&o.object===r.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(r)},tK=function(n,e){for(var r in n)if(n.hasOwnProperty(r)){var o=r,l=n[r];e.internal.newObjectDeferredBegin(l.objId,!0),Sr(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete n[o]}},eK=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(cA.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(q6)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");t1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new eS,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in o)if(o.hasOwnProperty(l)){var s=o[l];s.objId=void 0,s.hasAnnotation&&$6(s,r)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(r){(function(o,l){var s=!o;for(var p in o||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(p)){var m=o[p],I=[],w=m.Rect;if(m.Rect&&(m.Rect=Y6(m.Rect,l)),l.internal.newObjectDeferredBegin(m.objId,!0),m.DA=xi.createDefaultAppearanceStream(m),Sr(m)==="object"&&typeof m.getKeyValueListForStream=="function"&&(I=m.getKeyValueListForStream()),m.Rect=w,m.hasAppearanceStream&&!m.appearanceStreamContent){var _=j6(m);I.push({key:"AP",value:"<</N "+_+">>"}),l.internal.acroformPlugin.xForms.push(_)}if(m.appearanceStreamContent){var E="";for(var U in m.appearanceStreamContent)if(m.appearanceStreamContent.hasOwnProperty(U)){var F=m.appearanceStreamContent[U];if(E+="/"+U+" ",E+="<<",Object.keys(F).length>=1||Array.isArray(F)){for(var p in F)if(F.hasOwnProperty(p)){var V=F[p];typeof V=="function"&&(V=V.call(l,m)),E+="/"+p+" "+V+" ",l.internal.acroformPlugin.xForms.indexOf(V)>=0||l.internal.acroformPlugin.xForms.push(V)}}else typeof(V=F)=="function"&&(V=V.call(l,m)),E+="/"+p+" "+V,l.internal.acroformPlugin.xForms.indexOf(V)>=0||l.internal.acroformPlugin.xForms.push(V);E+=">>"}I.push({key:"AP",value:`<<
`+E+">>"})}l.internal.putStream({additionalKeyValues:I,objectId:m.objId}),l.internal.out("endobj")}s&&tK(l.internal.acroformPlugin.xForms,l)})(r,n)}),n.internal.acroformPlugin.isInitialized=!0}},$5=vn.__acroform__.arrayToPdfArray=function(n,e,r){var o=function(p){return p};if(Array.isArray(n)){for(var l="[",s=0;s<n.length;s++)switch(s!==0&&(l+=" "),Sr(n[s])){case"boolean":case"number":case"object":l+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&r&&(o=r.internal.getEncryptor(e)),l+="("+mu(o(n[s].toString()))+")"):l+=n[s].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Py=function(n,e,r){var o=function(l){return l};return e!==void 0&&r&&(o=r.internal.getEncryptor(e)),(n=n||"").toString(),n="("+mu(o(n))+")"},qA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qA.prototype.toString=function(){return this.objId+" 0 R"},qA.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},qA.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var o=e[r],l=this[o];l&&(Array.isArray(l)?n.push({key:o,value:$5(l,this.objId,this.scope)}):l instanceof qA?(l.scope=this.scope,n.push({key:o,value:l.objId+" 0 R"})):typeof l!="function"&&n.push({key:o,value:l}))}return n};tS=function(){qA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){n=r.trim()},get:function(){return n||null}})};zo(tS,qA);eS=function(){qA.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var r=function(o){return o};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+mu(r(n))+")"}},set:function(r){n=r}})};zo(eS,qA);cA=function n(){qA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute F supplied.');e=D}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Tn(e,3)},set:function(D){D?this.F=Un(e,3):this.F=Qn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute Ff supplied.');r=D}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(D){o=D!==void 0?D:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(D){o[0]=D}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(D){o[1]=D}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(D){o[2]=D}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(D){o[3]=D}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(D){switch(D){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=D;break;default:throw new Error('Invalid value "'+D+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof hm)return;s="FieldObject"+n.FieldNum++}var D=function(tt){return tt};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+mu(D(s))+")"},set:function(D){s=D.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(D){s=D}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(D){p=D}});var m="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return m},set:function(D){m=D}});var I=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return I},set:function(D){I=D}});var w=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return w===void 0?50/t1:w},set:function(D){w=D}});var _="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return _},set:function(D){_=D}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof hm||this instanceof fu))return Py(E,this.objId,this.scope)},set:function(D){D=D.toString(),E=D}});var U=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(U)return this instanceof ps?U:Py(U,this.objId,this.scope)},set:function(D){D=D.toString(),U=this instanceof ps?D:D.substr(0,1)==="("?Ih(D.substr(1,D.length-2)):Ih(D)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ps?Ih(U.substr(1,U.length-1)):U},set:function(D){D=D.toString(),U=this instanceof ps?"/"+D:D}});var F=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(F)return F},set:function(D){this.V=D}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(F)return this instanceof ps?F:Py(F,this.objId,this.scope)},set:function(D){D=D.toString(),F=this instanceof ps?D:D.substr(0,1)==="("?Ih(D.substr(1,D.length-2)):Ih(D)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ps?Ih(F.substr(1,F.length-1)):F},set:function(D){D=D.toString(),F=this instanceof ps?"/"+D:D}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var V,H=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return H},set:function(D){D=!!D,H=D}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(V)return V},set:function(D){V=D}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,1)},set:function(D){D?this.Ff=Un(this.Ff,1):this.Ff=Qn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,2)},set:function(D){D?this.Ff=Un(this.Ff,2):this.Ff=Qn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,3)},set:function(D){D?this.Ff=Un(this.Ff,3):this.Ff=Qn(this.Ff,3)}});var Y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Y!==null)return Y},set:function(D){if([0,1,2].indexOf(D)===-1)throw new Error('Invalid value "'+D+'" for attribute Q supplied.');Y=D}}),Object.defineProperty(this,"textAlign",{get:function(){var D;switch(Y){case 0:default:D="left";break;case 1:D="center";break;case 2:D="right"}return D},configurable:!0,enumerable:!0,set:function(D){switch(D){case"right":case 2:Y=2;break;case"center":case 1:Y=1;break;case"left":case 0:default:Y=0}}})};zo(cA,qA);_h=function(){cA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(r){n=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $5(e,this.objId,this.scope)},set:function(r){var o,l;l=[],typeof(o=r)=="string"&&(l=function(s,p,m){m||(m=1);for(var I,w=[];I=p.exec(s);)w.push(I[m]);return w}(o,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,o){for(o=o||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,18)},set:function(r){r?this.Ff=Un(this.Ff,18):this.Ff=Qn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Un(this.Ff,19):this.Ff=Qn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,20)},set:function(r){r?(this.Ff=Un(this.Ff,20),e.sort()):this.Ff=Qn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,22)},set:function(r){r?this.Ff=Un(this.Ff,22):this.Ff=Qn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,23)},set:function(r){r?this.Ff=Un(this.Ff,23):this.Ff=Qn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,27)},set:function(r){r?this.Ff=Un(this.Ff,27):this.Ff=Qn(this.Ff,27)}}),this.hasAppearanceStream=!1};zo(_h,cA);xh=function(){_h.call(this),this.fontName="helvetica",this.combo=!1};zo(xh,_h);Sh=function(){xh.call(this),this.combo=!0};zo(Sh,xh);om=function(){Sh.call(this),this.edit=!0};zo(om,Sh);ps=function(){cA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,15)},set:function(r){r?this.Ff=Un(this.Ff,15):this.Ff=Qn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,16)},set:function(r){r?this.Ff=Un(this.Ff,16):this.Ff=Qn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,17)},set:function(r){r?this.Ff=Un(this.Ff,17):this.Ff=Qn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,26)},set:function(r){r?this.Ff=Un(this.Ff,26):this.Ff=Qn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var o,l=[];for(o in l.push("<<"),e)l.push("/"+o+" ("+mu(r(e[o]))+")");return l.push(">>"),l.join(`
`)}},set:function(r){Sr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}})};zo(ps,cA);am=function(){ps.call(this),this.pushButton=!0};zo(am,ps);Fh=function(){ps.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};zo(Fh,ps);hm=function(){var n,e;cA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(l){n=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var r,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(m){return m};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var s,p=[];for(s in p.push("<<"),o)p.push("/"+s+" ("+mu(l(o[s]))+")");return p.push(">>"),p.join(`
`)},set:function(l){Sr(l)==="object"&&(o=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(l){typeof l=="string"&&(o.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(l){r=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(l){r="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zo(hm,cA),Fh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=n.createAppearanceStream(r.optionName),r.caption=n.getCA()}},Fh.prototype.createOption=function(n){var e=new hm;return e.Parent=this,e.optionName=n,this.Kids.push(e),iK.call(this.scope,e),e};Am=function(){ps.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xi.CheckBox.createAppearanceStream()};zo(Am,ps);fu=function(){cA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,13)},set:function(e){e?this.Ff=Un(this.Ff,13):this.Ff=Qn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,21)},set:function(e){e?this.Ff=Un(this.Ff,21):this.Ff=Qn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,23)},set:function(e){e?this.Ff=Un(this.Ff,23):this.Ff=Qn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,24)},set:function(e){e?this.Ff=Un(this.Ff,24):this.Ff=Qn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,25)},set:function(e){e?this.Ff=Un(this.Ff,25):this.Ff=Qn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,26)},set:function(e){e?this.Ff=Un(this.Ff,26):this.Ff=Qn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zo(fu,cA);lm=function(){fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,14)},set:function(n){n?this.Ff=Un(this.Ff,14):this.Ff=Qn(this.Ff,14)}}),this.password=!0};zo(lm,fu);xi={CheckBox:{createAppearanceStream:function(){return{N:{On:xi.CheckBox.YesNormal},D:{On:xi.CheckBox.YesPushDown,Off:xi.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=jA(n);e.scope=n.scope;var r=[],o=n.scope.internal.getFont(n.fontName,n.fontStyle).id,l=n.scope.__private__.encodeColorString(n.color),s=Jy(n,n.caption);return r.push("0.749023 g"),r.push("0 0 "+or(xi.internal.getWidth(n))+" "+or(xi.internal.getHeight(n))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+o+" "+or(s.fontSize)+" Tf "+l),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(n){var e=jA(n);e.scope=n.scope;var r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),l=[],s=xi.internal.getHeight(n),p=xi.internal.getWidth(n),m=Jy(n,n.caption);return l.push("1 g"),l.push("0 0 "+or(p)+" "+or(s)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+or(p-1)+" "+or(s-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+r+" "+or(m.fontSize)+" Tf "+o),l.push(m.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(n){var e=jA(n);e.scope=n.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+or(xi.internal.getWidth(n))+" "+or(xi.internal.getHeight(n))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:xi.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=xi.RadioButton.Circle.YesNormal,e.D[n]=xi.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=jA(n);e.scope=n.scope;var r=[],o=xi.internal.getWidth(n)<=xi.internal.getHeight(n)?xi.internal.getWidth(n)/4:xi.internal.getHeight(n)/4;o=Number((.9*o).toFixed(5));var l=xi.internal.Bezier_C,s=Number((o*l).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+wc(xi.internal.getWidth(n)/2)+" "+wc(xi.internal.getHeight(n)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),r.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),r.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),r.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(n){var e=jA(n);e.scope=n.scope;var r=[],o=xi.internal.getWidth(n)<=xi.internal.getHeight(n)?xi.internal.getWidth(n)/4:xi.internal.getHeight(n)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),s=Number((l*xi.internal.Bezier_C).toFixed(5)),p=Number((o*xi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wc(xi.internal.getWidth(n)/2)+" "+wc(xi.internal.getHeight(n)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+s+" "+s+" "+l+" 0 "+l+" c"),r.push("-"+s+" "+l+" -"+l+" "+s+" -"+l+" 0 c"),r.push("-"+l+" -"+s+" -"+s+" -"+l+" 0 -"+l+" c"),r.push(s+" -"+l+" "+l+" -"+s+" "+l+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+wc(xi.internal.getWidth(n)/2)+" "+wc(xi.internal.getHeight(n)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+p+" "+p+" "+o+" 0 "+o+" c"),r.push("-"+p+" "+o+" -"+o+" "+p+" -"+o+" 0 c"),r.push("-"+o+" -"+p+" -"+p+" -"+o+" 0 -"+o+" c"),r.push(p+" -"+o+" "+o+" -"+p+" "+o+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=jA(n);e.scope=n.scope;var r=[],o=xi.internal.getWidth(n)<=xi.internal.getHeight(n)?xi.internal.getWidth(n)/4:xi.internal.getHeight(n)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),s=Number((l*xi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wc(xi.internal.getWidth(n)/2)+" "+wc(xi.internal.getHeight(n)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+s+" "+s+" "+l+" 0 "+l+" c"),r.push("-"+s+" "+l+" -"+l+" "+s+" -"+l+" 0 c"),r.push("-"+l+" -"+s+" -"+s+" -"+l+" 0 -"+l+" c"),r.push(s+" -"+l+" "+l+" -"+s+" "+l+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:xi.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=xi.RadioButton.Cross.YesNormal,e.D[n]=xi.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=jA(n);e.scope=n.scope;var r=[],o=xi.internal.calculateCross(n);return r.push("q"),r.push("1 1 "+or(xi.internal.getWidth(n)-2)+" "+or(xi.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(or(o.x1.x)+" "+or(o.x1.y)+" m"),r.push(or(o.x2.x)+" "+or(o.x2.y)+" l"),r.push(or(o.x4.x)+" "+or(o.x4.y)+" m"),r.push(or(o.x3.x)+" "+or(o.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(n){var e=jA(n);e.scope=n.scope;var r=xi.internal.calculateCross(n),o=[];return o.push("0.749023 g"),o.push("0 0 "+or(xi.internal.getWidth(n))+" "+or(xi.internal.getHeight(n))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+or(xi.internal.getWidth(n)-2)+" "+or(xi.internal.getHeight(n)-2)+" re"),o.push("W"),o.push("n"),o.push(or(r.x1.x)+" "+or(r.x1.y)+" m"),o.push(or(r.x2.x)+" "+or(r.x2.y)+" l"),o.push(or(r.x4.x)+" "+or(r.x4.y)+" m"),o.push(or(r.x3.x)+" "+or(r.x3.y)+" l"),o.push("s"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=jA(n);e.scope=n.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+or(xi.internal.getWidth(n))+" "+or(xi.internal.getHeight(n))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+r}};xi.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=xi.internal.getWidth(n),r=xi.internal.getHeight(n),o=Math.min(e,r);return{x1:{x:(e-o)/2,y:(r-o)/2+o},x2:{x:(e-o)/2+o,y:(r-o)/2},x3:{x:(e-o)/2,y:(r-o)/2},x4:{x:(e-o)/2+o,y:(r-o)/2+o}}}},xi.internal.getWidth=function(n){var e=0;return Sr(n)==="object"&&(e=k5(n.Rect[2])),e},xi.internal.getHeight=function(n){var e=0;return Sr(n)==="object"&&(e=k5(n.Rect[3])),e};iK=vn.addField=function(n){if(eK(this,n),!(n instanceof cA))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};vn.AcroFormChoiceField=_h,vn.AcroFormListBox=xh,vn.AcroFormComboBox=Sh,vn.AcroFormEditBox=om,vn.AcroFormButton=ps,vn.AcroFormPushButton=am,vn.AcroFormRadioButton=Fh,vn.AcroFormCheckBox=Am,vn.AcroFormTextField=fu,vn.AcroFormPasswordField=lm,vn.AcroFormAppearance=xi,vn.AcroForm={ChoiceField:_h,ListBox:xh,ComboBox:Sh,EditBox:om,Button:ps,PushButton:am,RadioButton:Fh,CheckBox:Am,TextField:fu,PasswordField:lm,Appearance:xi},Xi.AcroForm={ChoiceField:_h,ListBox:xh,ComboBox:Sh,EditBox:om,Button:ps,PushButton:am,RadioButton:Fh,CheckBox:Am,TextField:fu,PasswordField:lm,Appearance:xi};(function(n){n.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=n.__addimage__.getImageFileTypeByImageData=function(at,st){var wt,yt,te,jt,Xt,Wt=e;if((st=st||e)==="RGBA"||at.data!==void 0&&at.data instanceof Uint8ClampedArray&&"height"in at&&"width"in at)return"RGBA";if(Lt(at))for(Xt in r)for(te=r[Xt],wt=0;wt<te.length;wt+=1){for(jt=!0,yt=0;yt<te[wt].length;yt+=1)if(te[wt][yt]!==void 0&&te[wt][yt]!==at[yt]){jt=!1;break}if(jt===!0){Wt=Xt;break}}else for(Xt in r)for(te=r[Xt],wt=0;wt<te.length;wt+=1){for(jt=!0,yt=0;yt<te[wt].length;yt+=1)if(te[wt][yt]!==void 0&&te[wt][yt]!==at.charCodeAt(yt)){jt=!1;break}if(jt===!0){Wt=Xt;break}}return Wt===e&&st!==e&&(Wt=st),Wt},l=function at(st){for(var wt=this.internal.write,yt=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);st.objectId=this.internal.newObject();var jt=[];if(jt.push({key:"Type",value:"/XObject"}),jt.push({key:"Subtype",value:"/Image"}),jt.push({key:"Width",value:st.width}),jt.push({key:"Height",value:st.height}),st.colorSpace===Y.INDEXED?jt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(st.palette.length/3-1)+" "+("sMask"in st&&st.sMask!==void 0?st.objectId+2:st.objectId+1)+" 0 R]"}):(jt.push({key:"ColorSpace",value:"/"+st.colorSpace}),st.colorSpace===Y.DEVICE_CMYK&&jt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),jt.push({key:"BitsPerComponent",value:st.bitsPerComponent}),"decodeParameters"in st&&st.decodeParameters!==void 0&&jt.push({key:"DecodeParms",value:"<<"+st.decodeParameters+">>"}),"transparency"in st&&Array.isArray(st.transparency)){for(var Xt="",Wt=0,Ct=st.transparency.length;Wt<Ct;Wt++)Xt+=st.transparency[Wt]+" "+st.transparency[Wt]+" ";jt.push({key:"Mask",value:"["+Xt+"]"})}st.sMask!==void 0&&jt.push({key:"SMask",value:st.objectId+1+" 0 R"});var Et=st.filter!==void 0?["/"+st.filter]:void 0;if(yt({data:st.data,additionalKeyValues:jt,alreadyAppliedFilters:Et,objectId:st.objectId}),wt("endobj"),"sMask"in st&&st.sMask!==void 0){var ue="/Predictor "+st.predictor+" /Colors 1 /BitsPerComponent "+st.bitsPerComponent+" /Columns "+st.width,J={width:st.width,height:st.height,colorSpace:"DeviceGray",bitsPerComponent:st.bitsPerComponent,decodeParameters:ue,data:st.sMask};"filter"in st&&(J.filter=st.filter),at.call(this,J)}if(st.colorSpace===Y.INDEXED){var dt=this.internal.newObject();yt({data:ft(new Uint8Array(st.palette)),objectId:dt}),wt("endobj")}},s=function(){var at=this.internal.collections.addImage_images;for(var st in at)l.call(this,at[st])},p=function(){var at,st=this.internal.collections.addImage_images,wt=this.internal.write;for(var yt in st)wt("/I"+(at=st[yt]).index,at.objectId,"0","R")},m=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",p))},I=function(){var at=this.internal.collections.addImage_images;return m.call(this),at},w=function(){return Object.keys(this.internal.collections.addImage_images).length},_=function(at){return typeof n["process"+at.toUpperCase()]=="function"},E=function(at){return Sr(at)==="object"&&at.nodeType===1},U=function(at,st){if(at.nodeName==="IMG"&&at.hasAttribute("src")){var wt=""+at.getAttribute("src");if(wt.indexOf("data:image/")===0)return td(unescape(wt).split("base64,").pop());var yt=n.loadFile(wt,!0);if(yt!==void 0)return yt}if(at.nodeName==="CANVAS"){if(at.width===0||at.height===0)throw new Error("Given canvas must have data. Canvas width: "+at.width+", height: "+at.height);var te;switch(st){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return td(at.toDataURL(te,1).split("base64,").pop())}},F=function(at){var st=this.internal.collections.addImage_images;if(st){for(var wt in st)if(at===st[wt].alias)return st[wt]}},V=function(at,st,wt){return at||st||(at=-96,st=-96),at<0&&(at=-1*wt.width*72/at/this.internal.scaleFactor),st<0&&(st=-1*wt.height*72/st/this.internal.scaleFactor),at===0&&(at=st*wt.width/wt.height),st===0&&(st=at*wt.height/wt.width),[at,st]},H=function(at,st,wt,yt,te,jt){var Xt=V.call(this,wt,yt,te),Wt=this.internal.getCoordinateString,Ct=this.internal.getVerticalCoordinateString,Et=I.call(this);if(wt=Xt[0],yt=Xt[1],Et[te.index]=te,jt){jt*=Math.PI/180;var ue=Math.cos(jt),J=Math.sin(jt),dt=function(Ut){return Ut.toFixed(4)},mt=[dt(ue),dt(J),dt(-1*J),dt(ue),0,0,"cm"]}this.internal.write("q"),jt?(this.internal.write([1,"0","0",1,Wt(at),Ct(st+yt),"cm"].join(" ")),this.internal.write(mt.join(" ")),this.internal.write([Wt(wt),"0","0",Wt(yt),"0","0","cm"].join(" "))):this.internal.write([Wt(wt),"0","0",Wt(yt),Wt(at),Ct(st+yt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},Y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var D=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},tt=n.__addimage__.sHashCode=function(at){var st,wt,yt=0;if(typeof at=="string")for(wt=at.length,st=0;st<wt;st++)yt=(yt<<5)-yt+at.charCodeAt(st),yt|=0;else if(Lt(at))for(wt=at.byteLength/2,st=0;st<wt;st++)yt=(yt<<5)-yt+at[st],yt|=0;return yt},ot=n.__addimage__.validateStringAsBase64=function(at){(at=at||"").toString().trim();var st=!0;return at.length===0&&(st=!1),at.length%4!=0&&(st=!1),/^[A-Za-z0-9+/]+$/.test(at.substr(0,at.length-2))===!1&&(st=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(at.substr(-2))===!1&&(st=!1),st},bt=n.__addimage__.extractImageFromDataUrl=function(at){var st=(at=at||"").split("base64,"),wt=null;if(st.length===2){var yt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(st[0]);Array.isArray(yt)&&(wt={mimeType:yt[1],charset:yt[2],data:st[1]})}return wt},kt=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(at){return kt()&&at instanceof ArrayBuffer};var Lt=n.__addimage__.isArrayBufferView=function(at){return kt()&&typeof Uint32Array<"u"&&(at instanceof Int8Array||at instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&at instanceof Uint8ClampedArray||at instanceof Int16Array||at instanceof Uint16Array||at instanceof Int32Array||at instanceof Uint32Array||at instanceof Float32Array||at instanceof Float64Array)},vt=n.__addimage__.binaryStringToUint8Array=function(at){for(var st=at.length,wt=new Uint8Array(st),yt=0;yt<st;yt++)wt[yt]=at.charCodeAt(yt);return wt},ft=n.__addimage__.arrayBufferToBinaryString=function(at){for(var st="",wt=Lt(at)?at:new Uint8Array(at),yt=0;yt<wt.length;yt+=8192)st+=String.fromCharCode.apply(null,wt.subarray(yt,yt+8192));return st};n.addImage=function(){var at,st,wt,yt,te,jt,Xt,Wt,Ct;if(typeof arguments[1]=="number"?(st=e,wt=arguments[1],yt=arguments[2],te=arguments[3],jt=arguments[4],Xt=arguments[5],Wt=arguments[6],Ct=arguments[7]):(st=arguments[1],wt=arguments[2],yt=arguments[3],te=arguments[4],jt=arguments[5],Xt=arguments[6],Wt=arguments[7],Ct=arguments[8]),Sr(at=arguments[0])==="object"&&!E(at)&&"imageData"in at){var Et=at;at=Et.imageData,st=Et.format||st||e,wt=Et.x||wt||0,yt=Et.y||yt||0,te=Et.w||Et.width||te,jt=Et.h||Et.height||jt,Xt=Et.alias||Xt,Wt=Et.compression||Wt,Ct=Et.rotation||Et.angle||Ct}var ue=this.internal.getFilters();if(Wt===void 0&&ue.indexOf("FlateEncode")!==-1&&(Wt="SLOW"),isNaN(wt)||isNaN(yt))throw new Error("Invalid coordinates passed to jsPDF.addImage");m.call(this);var J=Mt.call(this,at,st,Xt,Wt);return H.call(this,wt,yt,te,jt,J,Ct),this};var Mt=function(at,st,wt,yt){var te,jt,Xt;if(typeof at=="string"&&o(at)===e){at=unescape(at);var Wt=qt(at,!1);(Wt!==""||(Wt=n.loadFile(at,!0))!==void 0)&&(at=Wt)}if(E(at)&&(at=U(at,st)),st=o(at,st),!_(st))throw new Error("addImage does not support files of type '"+st+"', please ensure that a plugin for '"+st+"' support is added.");if(((Xt=wt)==null||Xt.length===0)&&(wt=function(Ct){return typeof Ct=="string"||Lt(Ct)?tt(Ct):Lt(Ct.data)?tt(Ct.data):null}(at)),(te=F.call(this,wt))||(kt()&&(at instanceof Uint8Array||st==="RGBA"||(jt=at,at=vt(at))),te=this["process"+st.toUpperCase()](at,w.call(this),wt,function(Ct){return Ct&&typeof Ct=="string"&&(Ct=Ct.toUpperCase()),Ct in n.image_compression?Ct:D.NONE}(yt),jt)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},qt=n.__addimage__.convertBase64ToBinaryString=function(at,st){var wt;st=typeof st!="boolean"||st;var yt,te="";if(typeof at=="string"){yt=(wt=bt(at))!==null?wt.data:at;try{te=td(yt)}catch(jt){if(st)throw ot(yt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+jt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(at){var st,wt,yt="";if(E(at)&&(at=U(at)),typeof at=="string"&&o(at)===e&&((yt=qt(at,!1))===""&&(yt=n.loadFile(at)||""),at=yt),wt=o(at),!_(wt))throw new Error("addImage does not support files of type '"+wt+"', please ensure that a plugin for '"+wt+"' support is added.");if(!kt()||at instanceof Uint8Array||(at=vt(at)),!(st=this["process"+wt.toUpperCase()](at)))throw new Error("An unknown error occurred whilst processing the image");return st.fileType=wt,st}})(Xi.API),function(n){var e=function(r){if(r!==void 0&&r!="")return!0};Xi.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(r){for(var o,l,s,p=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString,I=this.internal.getPageInfoByObjId(r.objId),w=r.pageContext.annotations,_=!1,E=0;E<w.length&&!_;E++)switch((o=w[E]).type){case"link":(e(o.options.url)||e(o.options.pageNumber))&&(_=!0);break;case"reference":case"text":case"freetext":_=!0}if(_!=0){this.internal.write("/Annots [");for(var U=0;U<w.length;U++){o=w[U];var F=this.internal.pdfEscape,V=this.internal.getEncryptor(r.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var H=this.internal.newAdditionalObject(),Y=this.internal.newAdditionalObject(),D=this.internal.getEncryptor(H.objId),tt=o.title||"Note";s="<</Type /Annot /Subtype /Text "+(l="/Rect ["+p(o.bounds.x)+" "+m(o.bounds.y+o.bounds.h)+" "+p(o.bounds.x+o.bounds.w)+" "+m(o.bounds.y)+"] ")+"/Contents ("+F(D(o.contents))+")",s+=" /Popup "+Y.objId+" 0 R",s+=" /P "+I.objId+" 0 R",s+=" /T ("+F(D(tt))+") >>",H.content=s;var ot=H.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+p(o.bounds.x+30)+" "+m(o.bounds.y+o.bounds.h)+" "+p(o.bounds.x+o.bounds.w+30)+" "+m(o.bounds.y)+"] ")+" /Parent "+ot,o.open&&(s+=" /Open true"),s+=" >>",Y.content=s,this.internal.write(H.objId,"0 R",Y.objId,"0 R");break;case"freetext":l="/Rect ["+p(o.bounds.x)+" "+m(o.bounds.y)+" "+p(o.bounds.x+o.bounds.w)+" "+m(o.bounds.y+o.bounds.h)+"] ";var bt=o.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+F(V(o.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+bt+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(o.options.name){var kt=this.annotations._nameMap[o.options.name];o.options.pageNumber=kt.page,o.options.top=kt.y}else o.options.top||(o.options.top=0);if(l="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",s="",o.options.url)s="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+F(V(o.options.url))+") >>";else if(o.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,s+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var Lt=m(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),s+=" /XYZ "+o.options.left+" "+Lt+" "+o.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(r){var o=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":o.pageContext.annotations.push(r)}},n.link=function(r,o,l,s,p){var m=this.internal.getCurrentPageInfo(),I=this.internal.getCoordinateString,w=this.internal.getVerticalCoordinateString;m.pageContext.annotations.push({finalBounds:{x:I(r),y:w(o),w:I(r+l),h:w(o+s)},options:p,type:"link"})},n.textWithLink=function(r,o,l,s){var p,m,I=this.getTextWidth(r),w=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){m=s.maxWidth;var _=this.splitTextToSize(r,m).length;p=Math.ceil(w*_)}else m=I,p=w;return this.text(r,o,l,s),l+=.2*w,s.align==="center"&&(o-=I/2),s.align==="right"&&(o-=I),this.link(o,l-w,m,p,s),I},n.getTextWidth=function(r){var o=this.internal.getFontSize();return this.getStringUnitWidth(r)*o/this.internal.scaleFactor}}(Xi.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(H){return e[H.charCodeAt(0)]!==void 0},p=n.__arabicParser__.isArabicLetter=function(H){return typeof H=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(H)},m=n.__arabicParser__.isArabicEndLetter=function(H){return p(H)&&s(H)&&e[H.charCodeAt(0)].length<=2},I=n.__arabicParser__.isArabicAlfLetter=function(H){return p(H)&&l.indexOf(H.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(H){return p(H)&&s(H)&&e[H.charCodeAt(0)].length>=1};var w=n.__arabicParser__.arabicLetterHasFinalForm=function(H){return p(H)&&s(H)&&e[H.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(H){return p(H)&&s(H)&&e[H.charCodeAt(0)].length>=3};var _=n.__arabicParser__.arabicLetterHasMedialForm=function(H){return p(H)&&s(H)&&e[H.charCodeAt(0)].length==4},E=n.__arabicParser__.resolveLigatures=function(H){var Y=0,D=r,tt="",ot=0;for(Y=0;Y<H.length;Y+=1)D[H.charCodeAt(Y)]!==void 0?(ot++,typeof(D=D[H.charCodeAt(Y)])=="number"&&(tt+=String.fromCharCode(D),D=r,ot=0),Y===H.length-1&&(D=r,tt+=H.charAt(Y-(ot-1)),Y-=ot-1,ot=0)):(D=r,tt+=H.charAt(Y-ot),Y-=ot,ot=0);return tt};n.__arabicParser__.isArabicDiacritic=function(H){return H!==void 0&&o[H.charCodeAt(0)]!==void 0};var U=n.__arabicParser__.getCorrectForm=function(H,Y,D){return p(H)?s(H)===!1?-1:!w(H)||!p(Y)&&!p(D)||!p(D)&&m(Y)||m(H)&&!p(Y)||m(H)&&I(Y)||m(H)&&m(Y)?0:_(H)&&p(Y)&&!m(Y)&&p(D)&&w(D)?3:m(H)||!p(D)?1:2:-1},F=function(H){var Y=0,D=0,tt=0,ot="",bt="",kt="",Lt=(H=H||"").split("\\s+"),vt=[];for(Y=0;Y<Lt.length;Y+=1){for(vt.push(""),D=0;D<Lt[Y].length;D+=1)ot=Lt[Y][D],bt=Lt[Y][D-1],kt=Lt[Y][D+1],p(ot)?(tt=U(ot,bt,kt),vt[Y]+=tt!==-1?String.fromCharCode(e[ot.charCodeAt(0)][tt]):ot):vt[Y]+=ot;vt[Y]=E(vt[Y])}return vt.join(" ")},V=n.__arabicParser__.processArabic=n.processArabic=function(){var H,Y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,D=[];if(Array.isArray(Y)){var tt=0;for(D=[],tt=0;tt<Y.length;tt+=1)Array.isArray(Y[tt])?D.push([F(Y[tt][0]),Y[tt][1],Y[tt][2]]):D.push([F(Y[tt])]);H=D}else H=F(Y);return typeof arguments[0]=="string"?H:(arguments[0].text=H,arguments[0])};n.events.push(["preProcessText",V])}(Xi.API),Xi.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(m){r=m}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(m){o=isNaN(m)||Number.isInteger(m)===!1||m<0?150:m,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(m){l=isNaN(m)||Number.isInteger(m)===!1||m<0?300:m,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(m){s=m}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(m){p=m}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,o){var l;if((r=r||"2d")!=="2d")return null;for(l in o)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=o[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Xi.API),function(n){var e={left:0,top:0,bottom:0,right:0},r=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var I=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return I},set:function(H){I=H}});var w=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return w},set:function(H){w=H}});var _=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return _},set:function(H){_=H}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(H){E=H}});var U=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return U},set:function(H){U=H}});var F=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return F},set:function(H){F=H}});var V=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return V},set:function(H){V=H}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(I){return o.call(this),this.internal.__cell__.headerFunction=typeof I=="function"?I:void 0,this},n.getTextDimensions=function(I,w){o.call(this);var _=(w=w||{}).fontSize||this.getFontSize(),E=w.font||this.getFont(),U=w.scaleFactor||this.internal.scaleFactor,F=0,V=0,H=0,Y=this;if(!Array.isArray(I)&&typeof I!="string"){if(typeof I!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");I=String(I)}var D=w.maxWidth;D>0?typeof I=="string"?I=this.splitTextToSize(I,D):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(ot,bt){return ot.concat(Y.splitTextToSize(bt,D))},[])):I=Array.isArray(I)?I:[I];for(var tt=0;tt<I.length;tt++)F<(H=this.getStringUnitWidth(I[tt],{font:E})*_)&&(F=H);return F!==0&&(V=I.length),{w:F/=U,h:Math.max((V*_*this.getLineHeightFactor()-_*(this.getLineHeightFactor()-1))/U,0)}},n.cellAddPage=function(){o.call(this),this.addPage();var I=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(I.left,I.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=n.cell=function(){var I;I=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var w=this.internal.__cell__.lastCell,_=this.internal.__cell__.padding,E=this.internal.__cell__.margins||e,U=this.internal.__cell__.tableHeaderRow,F=this.internal.__cell__.printHeaders;return w.lineNumber!==void 0&&(w.lineNumber===I.lineNumber?(I.x=(w.x||0)+(w.width||0),I.y=w.y||0):w.y+w.height+I.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),I.y=E.top,F&&U&&(this.printHeaderRow(I.lineNumber,!0),I.y+=U[0].height)):I.y=w.y+w.height||I.y),I.text[0]!==void 0&&(this.rect(I.x,I.y,I.width,I.height,r===!0?"FD":void 0),I.align==="right"?this.text(I.text,I.x+I.width-_,I.y+_,{align:"right",baseline:"top"}):I.align==="center"?this.text(I.text,I.x+I.width/2,I.y+_,{align:"center",baseline:"top",maxWidth:I.width-_-_}):this.text(I.text,I.x+_,I.y+_,{align:"left",baseline:"top",maxWidth:I.width-_-_})),this.internal.__cell__.lastCell=I,this};n.table=function(I,w,_,E,U){if(o.call(this),!_)throw new Error("No data for PDF table.");var F,V,H,Y,D=[],tt=[],ot=[],bt={},kt={},Lt=[],vt=[],ft=(U=U||{}).autoSize||!1,Mt=U.printHeaders!==!1,qt=U.css&&U.css["font-size"]!==void 0?16*U.css["font-size"]:U.fontSize||12,at=U.margins||Object.assign({width:this.getPageWidth()},e),st=typeof U.padding=="number"?U.padding:3,wt=U.headerBackgroundColor||"#c8c8c8",yt=U.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Mt,this.internal.__cell__.margins=at,this.internal.__cell__.table_font_size=qt,this.internal.__cell__.padding=st,this.internal.__cell__.headerBackgroundColor=wt,this.internal.__cell__.headerTextColor=yt,this.setFontSize(qt),E==null)tt=D=Object.keys(_[0]),ot=D.map(function(){return"left"});else if(Array.isArray(E)&&Sr(E[0])==="object")for(D=E.map(function(Et){return Et.name}),tt=E.map(function(Et){return Et.prompt||Et.name||""}),ot=E.map(function(Et){return Et.align||"left"}),F=0;F<E.length;F+=1)kt[E[F].name]=E[F].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(tt=D=E,ot=D.map(function(){return"left"}));if(ft||Array.isArray(E)&&typeof E[0]=="string")for(F=0;F<D.length;F+=1){for(bt[Y=D[F]]=_.map(function(Et){return Et[Y]}),this.setFont(void 0,"bold"),Lt.push(this.getTextDimensions(tt[F],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),V=bt[Y],this.setFont(void 0,"normal"),H=0;H<V.length;H+=1)Lt.push(this.getTextDimensions(V[H],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);kt[Y]=Math.max.apply(null,Lt)+st+st,Lt=[]}if(Mt){var te={};for(F=0;F<D.length;F+=1)te[D[F]]={},te[D[F]].text=tt[F],te[D[F]].align=ot[F];var jt=m.call(this,te,kt);vt=D.map(function(Et){return new s(I,w,kt[Et],jt,te[Et].text,void 0,te[Et].align)}),this.setTableHeaderRow(vt),this.printHeaderRow(1,!1)}var Xt=E.reduce(function(Et,ue){return Et[ue.name]=ue.align,Et},{});for(F=0;F<_.length;F+=1){"rowStart"in U&&U.rowStart instanceof Function&&U.rowStart({row:F,data:_[F]},this);var Wt=m.call(this,_[F],kt);for(H=0;H<D.length;H+=1){var Ct=_[F][D[H]];"cellStart"in U&&U.cellStart instanceof Function&&U.cellStart({row:F,col:H,data:Ct},this),p.call(this,new s(I,w,kt[D[H]],Wt,Ct,F+2,Xt[D[H]]))}}return this.internal.__cell__.table_x=I,this.internal.__cell__.table_y=w,this};var m=function(I,w){var _=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,U=this.internal.scaleFactor;return Object.keys(I).map(function(F){var V=I[F];return this.splitTextToSize(V.hasOwnProperty("text")?V.text:V,w[F]-_-_)},this).map(function(F){return this.getLineHeightFactor()*F.length*E/U+_+_},this).reduce(function(F,V){return Math.max(F,V)},0)};n.setTableHeaderRow=function(I){o.call(this),this.internal.__cell__.tableHeaderRow=I},n.printHeaderRow=function(I,w){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var _;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var U=[],F=0;F<this.internal.__cell__.tableHeaderRow.length;F+=1){_=this.internal.__cell__.tableHeaderRow[F].clone(),w&&(_.y=this.internal.__cell__.margins.top||0,U.push(_)),_.lineNumber=I;var V=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,_),this.setTextColor(V)}U.length>0&&this.setTableHeaderRow(U),this.setFont(void 0,"normal"),r=!1}}(Xi.API);rS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xy=iS(nS),sS=[100,200,300,400,500,600,700,800,900],rK=iS(sS);nK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},E5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};G5=["times"];(function(n){var e,r,o,l,s,p,m,I,w,_=function(J){return J=J||{},this.isStrokeTransparent=J.isStrokeTransparent||!1,this.strokeOpacity=J.strokeOpacity||1,this.strokeStyle=J.strokeStyle||"#000000",this.fillStyle=J.fillStyle||"#000000",this.isFillTransparent=J.isFillTransparent||!1,this.fillOpacity=J.fillOpacity||1,this.font=J.font||"10px sans-serif",this.textBaseline=J.textBaseline||"alphabetic",this.textAlign=J.textAlign||"left",this.lineWidth=J.lineWidth||1,this.lineJoin=J.lineJoin||"miter",this.lineCap=J.lineCap||"butt",this.path=J.path||[],this.transform=J.transform!==void 0?J.transform.clone():new I,this.globalCompositeOperation=J.globalCompositeOperation||"normal",this.globalAlpha=J.globalAlpha||1,this.clip_path=J.clip_path||[],this.currentPoint=J.currentPoint||new p,this.miterLimit=J.miterLimit||10,this.lastPoint=J.lastPoint||new p,this.lineDashOffset=J.lineDashOffset||0,this.lineDash=J.lineDash||[],this.margin=J.margin||[0,0,0,0],this.prevPageLastElemOffset=J.prevPageLastElemOffset||0,this.ignoreClearRect=typeof J.ignoreClearRect!="boolean"||J.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new E(this),e=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,p=this.internal.Point,m=this.internal.Rectangle,I=this.internal.Matrix,w=new _}]);var E=function(J){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var dt=J;Object.defineProperty(this,"pdf",{get:function(){return dt}});var mt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return mt},set:function(de){mt=!!de}});var Ut=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ut},set:function(de){Ut=!!de}});var Pt=0;Object.defineProperty(this,"posX",{get:function(){return Pt},set:function(de){isNaN(de)||(Pt=de)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(de){isNaN(de)||(ie=de)}}),Object.defineProperty(this,"margin",{get:function(){return w.margin},set:function(de){var Tt;typeof de=="number"?Tt=[de,de,de,de]:((Tt=new Array(4))[0]=de[0],Tt[1]=de.length>=2?de[1]:Tt[0],Tt[2]=de.length>=3?de[2]:Tt[0],Tt[3]=de.length>=4?de[3]:Tt[1]),w.margin=Tt}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(de){le=de}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(de){ce=de}});var Qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Qe},set:function(de){Qe=de}}),Object.defineProperty(this,"ctx",{get:function(){return w},set:function(de){de instanceof _&&(w=de)}}),Object.defineProperty(this,"path",{get:function(){return w.path},set:function(de){w.path=de}});var Ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ee},set:function(de){Ee=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var Tt;Tt=U(de),this.ctx.fillStyle=Tt.style,this.ctx.isFillTransparent=Tt.a===0,this.ctx.fillOpacity=Tt.a,this.pdf.setFillColor(Tt.r,Tt.g,Tt.b,{a:Tt.a}),this.pdf.setTextColor(Tt.r,Tt.g,Tt.b,{a:Tt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var Tt=U(de);this.ctx.strokeStyle=Tt.style,this.ctx.isStrokeTransparent=Tt.a===0,this.ctx.strokeOpacity=Tt.a,Tt.a===0?this.pdf.setDrawColor(255,255,255):(Tt.a,this.pdf.setDrawColor(Tt.r,Tt.g,Tt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var We=null;function Je(de,Tt){if(We===null){var Xe=function(Oe){var Le=[];return Object.keys(Oe).forEach(function(He){Oe[He].forEach(function(Ke){var ze=null;switch(Ke){case"bold":ze={family:He,weight:"bold"};break;case"italic":ze={family:He,style:"italic"};break;case"bolditalic":ze={family:He,weight:"bold",style:"italic"};break;case"":case"normal":ze={family:He}}ze!==null&&(ze.ref={name:He,style:Ke},Le.push(ze))})}),Le}(de.getFontList());We=function(Oe){for(var Le={},He=0;He<Oe.length;++He){var Ke=Yy(Oe[He]),ze=Ke.family,ti=Ke.stretch,ci=Ke.style,Si=Ke.weight;Le[ze]=Le[ze]||{},Le[ze][ti]=Le[ze][ti]||{},Le[ze][ti][ci]=Le[ze][ti][ci]||{},Le[ze][ti][ci][Si]=Ke}return Le}(Xe.concat(Tt))}return We}var Dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Dt},set:function(de){We=null,Dt=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var Tt;if(this.ctx.font=de,(Tt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var Xe=Tt[1],Oe=(Tt[2],Tt[3]),Le=Tt[4],He=(Tt[5],Tt[6]),Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(Ke==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var ze=function(pi){var Ei,ne,ui=[],Ve=pi.trim();if(Ve==="")return G5;if(Ve in E5)return[E5[Ve]];for(;Ve!=="";){switch(ne=null,Ei=(Ve=U5(Ve)).charAt(0)){case'"':case"'":ne=oK(Ve.substring(1),Ei);break;default:ne=aK(Ve)}if(ne===null||(ui.push(ne[0]),(Ve=U5(ne[1]))!==""&&Ve.charAt(0)!==","))return G5;Ve=Ve.replace(/^,/,"")}return ui}(He);if(this.fontFaces){var ti=sK(Je(this.pdf,this.fontFaces),ze.map(function(pi){return{family:pi,stretch:"normal",weight:Oe,style:Xe}}));this.pdf.setFont(ti.ref.name,ti.ref.style)}else{var ci="";(Oe==="bold"||parseInt(Oe,10)>=700||Xe==="bold")&&(ci="bold"),Xe==="italic"&&(ci+="italic"),ci.length===0&&(ci="normal");for(var Si="",he={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Zi=0;Zi<ze.length;Zi++){if(this.pdf.internal.getFont(ze[Zi],ci,{noFallback:!0,disableWarning:!0})!==void 0){Si=ze[Zi];break}if(ci==="bolditalic"&&this.pdf.internal.getFont(ze[Zi],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Si=ze[Zi],ci="bold";else if(this.pdf.internal.getFont(ze[Zi],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Si=ze[Zi],ci="normal";break}}if(Si===""){for(var Hi=0;Hi<ze.length;Hi++)if(he[ze[Hi]]){Si=he[ze[Hi]];break}}Si=Si===""?"Times":Si,this.pdf.setFont(Si,ci)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};E.prototype.setLineDash=function(J){this.lineDash=J},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){bt.call(this,"fill",!1)},E.prototype.stroke=function(){bt.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(J,dt){if(isNaN(J)||isNaN(dt))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var mt=this.ctx.transform.applyToPoint(new p(J,dt));this.path.push({type:"mt",x:mt.x,y:mt.y}),this.ctx.lastPoint=new p(J,dt)},E.prototype.closePath=function(){var J=new p(0,0),dt=0;for(dt=this.path.length-1;dt!==-1;dt--)if(this.path[dt].type==="begin"&&Sr(this.path[dt+1])==="object"&&typeof this.path[dt+1].x=="number"){J=new p(this.path[dt+1].x,this.path[dt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(J.x,J.y)},E.prototype.lineTo=function(J,dt){if(isNaN(J)||isNaN(dt))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var mt=this.ctx.transform.applyToPoint(new p(J,dt));this.path.push({type:"lt",x:mt.x,y:mt.y}),this.ctx.lastPoint=new p(mt.x,mt.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),bt.call(this,null,!0)},E.prototype.quadraticCurveTo=function(J,dt,mt,Ut){if(isNaN(mt)||isNaN(Ut)||isNaN(J)||isNaN(dt))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Pt=this.ctx.transform.applyToPoint(new p(mt,Ut)),ie=this.ctx.transform.applyToPoint(new p(J,dt));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:Pt.x,y:Pt.y}),this.ctx.lastPoint=new p(Pt.x,Pt.y)},E.prototype.bezierCurveTo=function(J,dt,mt,Ut,Pt,ie){if(isNaN(Pt)||isNaN(ie)||isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new p(Pt,ie)),ce=this.ctx.transform.applyToPoint(new p(J,dt)),Qe=this.ctx.transform.applyToPoint(new p(mt,Ut));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:Qe.x,y2:Qe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new p(le.x,le.y)},E.prototype.arc=function(J,dt,mt,Ut,Pt,ie){if(isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut)||isNaN(Pt))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new p(J,dt));J=le.x,dt=le.y;var ce=this.ctx.transform.applyToPoint(new p(0,mt)),Qe=this.ctx.transform.applyToPoint(new p(0,0));mt=Math.sqrt(Math.pow(ce.x-Qe.x,2)+Math.pow(ce.y-Qe.y,2))}Math.abs(Pt-Ut)>=2*Math.PI&&(Ut=0,Pt=2*Math.PI),this.path.push({type:"arc",x:J,y:dt,radius:mt,startAngle:Ut,endAngle:Pt,counterclockwise:ie})},E.prototype.arcTo=function(J,dt,mt,Ut,Pt){throw new Error("arcTo not implemented.")},E.prototype.rect=function(J,dt,mt,Ut){if(isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(J,dt),this.lineTo(J+mt,dt),this.lineTo(J+mt,dt+Ut),this.lineTo(J,dt+Ut),this.lineTo(J,dt),this.lineTo(J+mt,dt),this.lineTo(J,dt)},E.prototype.fillRect=function(J,dt,mt,Ut){if(isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!F.call(this)){var Pt={};this.lineCap!=="butt"&&(Pt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Pt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(J,dt,mt,Ut),this.fill(),Pt.hasOwnProperty("lineCap")&&(this.lineCap=Pt.lineCap),Pt.hasOwnProperty("lineJoin")&&(this.lineJoin=Pt.lineJoin)}},E.prototype.strokeRect=function(J,dt,mt,Ut){if(isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");V.call(this)||(this.beginPath(),this.rect(J,dt,mt,Ut),this.stroke())},E.prototype.clearRect=function(J,dt,mt,Ut){if(isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(J,dt,mt,Ut))},E.prototype.save=function(J){J=typeof J!="boolean"||J;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,mt=0;mt<this.pdf.internal.getNumberOfPages();mt++)this.pdf.setPage(mt+1),this.pdf.internal.out("q");if(this.pdf.setPage(dt),J){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ut=new _(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ut}},E.prototype.restore=function(J){J=typeof J!="boolean"||J;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,mt=0;mt<this.pdf.internal.getNumberOfPages();mt++)this.pdf.setPage(mt+1),this.pdf.internal.out("Q");this.pdf.setPage(dt),J&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var U=function(J){var dt,mt,Ut,Pt;if(J.isCanvasGradient===!0&&(J=J.getColor()),!J)return{r:0,g:0,b:0,a:0,style:J};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(J))dt=0,mt=0,Ut=0,Pt=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(J);if(ie!==null)dt=parseInt(ie[1]),mt=parseInt(ie[2]),Ut=parseInt(ie[3]),Pt=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(J))!==null)dt=parseInt(ie[1]),mt=parseInt(ie[2]),Ut=parseInt(ie[3]),Pt=parseFloat(ie[4]);else{if(Pt=1,typeof J=="string"&&J.charAt(0)!=="#"){var le=new Y5(J);J=le.ok?le.toHex():"#000000"}J.length===4?(dt=J.substring(1,2),dt+=dt,mt=J.substring(2,3),mt+=mt,Ut=J.substring(3,4),Ut+=Ut):(dt=J.substring(1,3),mt=J.substring(3,5),Ut=J.substring(5,7)),dt=parseInt(dt,16),mt=parseInt(mt,16),Ut=parseInt(Ut,16)}}return{r:dt,g:mt,b:Ut,a:Pt,style:J}},F=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},V=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(J,dt,mt,Ut){if(isNaN(dt)||isNaN(mt)||typeof J!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ut=isNaN(Ut)?void 0:Ut,!F.call(this)){var Pt=Wt(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;st.call(this,{text:J,x:dt,y:mt,scale:ie,angle:Pt,align:this.textAlign,maxWidth:Ut})}},E.prototype.strokeText=function(J,dt,mt,Ut){if(isNaN(dt)||isNaN(mt)||typeof J!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!V.call(this)){Ut=isNaN(Ut)?void 0:Ut;var Pt=Wt(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;st.call(this,{text:J,x:dt,y:mt,scale:ie,renderingMode:"stroke",angle:Pt,align:this.textAlign,maxWidth:Ut})}},E.prototype.measureText=function(J){if(typeof J!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var dt=this.pdf,mt=this.pdf.internal.scaleFactor,Ut=dt.internal.getFontSize(),Pt=dt.getStringUnitWidth(J)*Ut/dt.internal.scaleFactor,ie=function(le){var ce=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new ie({width:Pt*=Math.round(96*mt/72*1e4)/1e4})},E.prototype.scale=function(J,dt){if(isNaN(J)||isNaN(dt))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var mt=new I(J,0,0,dt,0,0);this.ctx.transform=this.ctx.transform.multiply(mt)},E.prototype.rotate=function(J){if(isNaN(J))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var dt=new I(Math.cos(J),Math.sin(J),-Math.sin(J),Math.cos(J),0,0);this.ctx.transform=this.ctx.transform.multiply(dt)},E.prototype.translate=function(J,dt){if(isNaN(J)||isNaN(dt))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var mt=new I(1,0,0,1,J,dt);this.ctx.transform=this.ctx.transform.multiply(mt)},E.prototype.transform=function(J,dt,mt,Ut,Pt,ie){if(isNaN(J)||isNaN(dt)||isNaN(mt)||isNaN(Ut)||isNaN(Pt)||isNaN(ie))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new I(J,dt,mt,Ut,Pt,ie);this.ctx.transform=this.ctx.transform.multiply(le)},E.prototype.setTransform=function(J,dt,mt,Ut,Pt,ie){J=isNaN(J)?1:J,dt=isNaN(dt)?0:dt,mt=isNaN(mt)?0:mt,Ut=isNaN(Ut)?1:Ut,Pt=isNaN(Pt)?0:Pt,ie=isNaN(ie)?0:ie,this.ctx.transform=new I(J,dt,mt,Ut,Pt,ie)};var H=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(J,dt,mt,Ut,Pt,ie,le,ce,Qe){var Ee=this.pdf.getImageProperties(J),We=1,Je=1,Dt=1,de=1;Ut!==void 0&&ce!==void 0&&(Dt=ce/Ut,de=Qe/Pt,We=Ee.width/Ut*ce/Ut,Je=Ee.height/Pt*Qe/Pt),ie===void 0&&(ie=dt,le=mt,dt=0,mt=0),Ut!==void 0&&ce===void 0&&(ce=Ut,Qe=Pt),Ut===void 0&&ce===void 0&&(ce=Ee.width,Qe=Ee.height);for(var Tt,Xe=this.ctx.transform.decompose(),Oe=Wt(Xe.rotate.shx),Le=new I,He=(Le=(Le=(Le=Le.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale)).applyToRectangle(new m(ie-dt*Dt,le-mt*de,Ut*We,Pt*Je)),Ke=Y.call(this,He),ze=[],ti=0;ti<Ke.length;ti+=1)ze.indexOf(Ke[ti])===-1&&ze.push(Ke[ti]);if(ot(ze),this.autoPaging)for(var ci=ze[0],Si=ze[ze.length-1],he=ci;he<Si+1;he++){this.pdf.setPage(he);var Zi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Hi=he===1?this.posY+this.margin[0]:this.margin[0],pi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ei=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ne=he===1?0:pi+(he-2)*Ei;if(this.ctx.clip_path.length!==0){var ui=this.path;Tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=tt(Tt,this.posX+this.margin[3],-ne+Hi+this.ctx.prevPageLastElemOffset),kt.call(this,"fill",!0),this.path=ui}var Ve=JSON.parse(JSON.stringify(He));Ve=tt([Ve],this.posX+this.margin[3],-ne+Hi+this.ctx.prevPageLastElemOffset)[0];var rr=(he>ci||he<Si)&&H.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zi,Ei,null).clip().discardPath()),this.pdf.addImage(J,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,Oe),rr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(J,"JPEG",He.x,He.y,He.w,He.h,null,null,Oe)};var Y=function(J,dt,mt){var Ut=[];dt=dt||this.pdf.internal.pageSize.width,mt=mt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Pt=this.posY+this.ctx.prevPageLastElemOffset;switch(J.type){default:case"mt":case"lt":Ut.push(Math.floor((J.y+Pt)/mt)+1);break;case"arc":Ut.push(Math.floor((J.y+Pt-J.radius)/mt)+1),Ut.push(Math.floor((J.y+Pt+J.radius)/mt)+1);break;case"qct":var ie=Ct(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x,J.y);Ut.push(Math.floor((ie.y+Pt)/mt)+1),Ut.push(Math.floor((ie.y+ie.h+Pt)/mt)+1);break;case"bct":var le=Et(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x2,J.y2,J.x,J.y);Ut.push(Math.floor((le.y+Pt)/mt)+1),Ut.push(Math.floor((le.y+le.h+Pt)/mt)+1);break;case"rect":Ut.push(Math.floor((J.y+Pt)/mt)+1),Ut.push(Math.floor((J.y+J.h+Pt)/mt)+1)}for(var ce=0;ce<Ut.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<Ut[ce];)D.call(this);return Ut},D=function(){var J=this.fillStyle,dt=this.strokeStyle,mt=this.font,Ut=this.lineCap,Pt=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=J,this.strokeStyle=dt,this.font=mt,this.lineCap=Ut,this.lineWidth=Pt,this.lineJoin=ie},tt=function(J,dt,mt){for(var Ut=0;Ut<J.length;Ut++)switch(J[Ut].type){case"bct":J[Ut].x2+=dt,J[Ut].y2+=mt;case"qct":J[Ut].x1+=dt,J[Ut].y1+=mt;case"mt":case"lt":case"arc":default:J[Ut].x+=dt,J[Ut].y+=mt}return J},ot=function(J){return J.sort(function(dt,mt){return dt-mt})},bt=function(J,dt){for(var mt,Ut,Pt=this.fillStyle,ie=this.strokeStyle,le=this.lineCap,ce=this.lineWidth,Qe=Math.abs(ce*this.ctx.transform.scaleX),Ee=this.lineJoin,We=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),Dt=[],de=0;de<Je.length;de++)if(Je[de].x!==void 0)for(var Tt=Y.call(this,Je[de]),Xe=0;Xe<Tt.length;Xe+=1)Dt.indexOf(Tt[Xe])===-1&&Dt.push(Tt[Xe]);for(var Oe=0;Oe<Dt.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<Dt[Oe];)D.call(this);if(ot(Dt),this.autoPaging)for(var Le=Dt[0],He=Dt[Dt.length-1],Ke=Le;Ke<He+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=Pt,this.strokeStyle=ie,this.lineCap=le,this.lineWidth=Qe,this.lineJoin=Ee;var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ti=Ke===1?this.posY+this.margin[0]:this.margin[0],ci=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Si=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],he=Ke===1?0:ci+(Ke-2)*Si;if(this.ctx.clip_path.length!==0){var Zi=this.path;mt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=tt(mt,this.posX+this.margin[3],-he+ti+this.ctx.prevPageLastElemOffset),kt.call(this,J,!0),this.path=Zi}if(Ut=JSON.parse(JSON.stringify(We)),this.path=tt(Ut,this.posX+this.margin[3],-he+ti+this.ctx.prevPageLastElemOffset),dt===!1||Ke===0){var Hi=(Ke>Le||Ke<He)&&H.call(this);Hi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Si,null).clip().discardPath()),kt.call(this,J,dt),Hi&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=Qe,kt.call(this,J,dt),this.lineWidth=ce;this.path=We},kt=function(J,dt){if((J!=="stroke"||dt||!V.call(this))&&(J==="stroke"||dt||!F.call(this))){for(var mt,Ut,Pt=[],ie=this.path,le=0;le<ie.length;le++){var ce=ie[le];switch(ce.type){case"begin":Pt.push({begin:!0});break;case"close":Pt.push({close:!0});break;case"mt":Pt.push({start:ce,deltas:[],abs:[]});break;case"lt":var Qe=Pt.length;if(ie[le-1]&&!isNaN(ie[le-1].x)&&(mt=[ce.x-ie[le-1].x,ce.y-ie[le-1].y],Qe>0)){for(;Qe>=0;Qe--)if(Pt[Qe-1].close!==!0&&Pt[Qe-1].begin!==!0){Pt[Qe-1].deltas.push(mt),Pt[Qe-1].abs.push(ce);break}}break;case"bct":mt=[ce.x1-ie[le-1].x,ce.y1-ie[le-1].y,ce.x2-ie[le-1].x,ce.y2-ie[le-1].y,ce.x-ie[le-1].x,ce.y-ie[le-1].y],Pt[Pt.length-1].deltas.push(mt);break;case"qct":var Ee=ie[le-1].x+2/3*(ce.x1-ie[le-1].x),We=ie[le-1].y+2/3*(ce.y1-ie[le-1].y),Je=ce.x+2/3*(ce.x1-ce.x),Dt=ce.y+2/3*(ce.y1-ce.y),de=ce.x,Tt=ce.y;mt=[Ee-ie[le-1].x,We-ie[le-1].y,Je-ie[le-1].x,Dt-ie[le-1].y,de-ie[le-1].x,Tt-ie[le-1].y],Pt[Pt.length-1].deltas.push(mt);break;case"arc":Pt.push({deltas:[],abs:[],arc:!0}),Array.isArray(Pt[Pt.length-1].abs)&&Pt[Pt.length-1].abs.push(ce)}}Ut=dt?null:J==="stroke"?"stroke":"fill";for(var Xe=!1,Oe=0;Oe<Pt.length;Oe++)if(Pt[Oe].arc)for(var Le=Pt[Oe].abs,He=0;He<Le.length;He++){var Ke=Le[He];Ke.type==="arc"?ft.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,dt,!Xe):wt.call(this,Ke.x,Ke.y),Xe=!0}else if(Pt[Oe].close===!0)this.pdf.internal.out("h"),Xe=!1;else if(Pt[Oe].begin!==!0){var ze=Pt[Oe].start.x,ti=Pt[Oe].start.y;yt.call(this,Pt[Oe].deltas,ze,ti),Xe=!0}Ut&&Mt.call(this,Ut),dt&&qt.call(this)}},Lt=function(J){var dt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,mt=dt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return J-mt;case"top":return J+dt-mt;case"hanging":return J+dt-2*mt;case"middle":return J+dt/2-mt;case"ideographic":return J;case"alphabetic":default:return J}},vt=function(J){return J+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var J=function(){};return J.colorStops=[],J.addColorStop=function(dt,mt){this.colorStops.push([dt,mt])},J.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},J.isCanvasGradient=!0,J},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ft=function(J,dt,mt,Ut,Pt,ie,le,ce,Qe){for(var Ee=jt.call(this,mt,Ut,Pt,ie),We=0;We<Ee.length;We++){var Je=Ee[We];We===0&&(Qe?at.call(this,Je.x1+J,Je.y1+dt):wt.call(this,Je.x1+J,Je.y1+dt)),te.call(this,J,dt,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}ce?qt.call(this):Mt.call(this,le)},Mt=function(J){switch(J){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},qt=function(){this.pdf.clip(),this.pdf.discardPath()},at=function(J,dt){this.pdf.internal.out(r(J)+" "+o(dt)+" m")},st=function(J){var dt;switch(J.align){case"right":case"end":dt="right";break;case"center":dt="center";break;case"left":case"start":default:dt="left"}var mt=this.pdf.getTextDimensions(J.text),Ut=Lt.call(this,J.y),Pt=vt.call(this,Ut)-mt.h,ie=this.ctx.transform.applyToPoint(new p(J.x,Ut)),le=this.ctx.transform.decompose(),ce=new I;ce=(ce=(ce=ce.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var Qe,Ee,We,Je=this.ctx.transform.applyToRectangle(new m(J.x,Ut,mt.w,mt.h)),Dt=ce.applyToRectangle(new m(J.x,Pt,mt.w,mt.h)),de=Y.call(this,Dt),Tt=[],Xe=0;Xe<de.length;Xe+=1)Tt.indexOf(de[Xe])===-1&&Tt.push(de[Xe]);if(ot(Tt),this.autoPaging)for(var Oe=Tt[0],Le=Tt[Tt.length-1],He=Oe;He<Le+1;He++){this.pdf.setPage(He);var Ke=He===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ti=this.pdf.internal.pageSize.height-this.margin[2],ci=ti-this.margin[0],Si=this.pdf.internal.pageSize.width-this.margin[1],he=Si-this.margin[3],Zi=He===1?0:ze+(He-2)*ci;if(this.ctx.clip_path.length!==0){var Hi=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=tt(Qe,this.posX+this.margin[3],-1*Zi+Ke),kt.call(this,"fill",!0),this.path=Hi}var pi=tt([JSON.parse(JSON.stringify(Dt))],this.posX+this.margin[3],-Zi+Ke+this.ctx.prevPageLastElemOffset)[0];J.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*J.scale),We=this.lineWidth,this.lineWidth=We*J.scale);var Ei=this.autoPaging!=="text";if(Ei||pi.y+pi.h<=ti){if(Ei||pi.y>=Ke&&pi.x<=Si){var ne=Ei?J.text:this.pdf.splitTextToSize(J.text,J.maxWidth||Si-pi.x)[0],ui=tt([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-Zi+Ke+this.ctx.prevPageLastElemOffset)[0],Ve=Ei&&(He>Oe||He<Le)&&H.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,ci,null).clip().discardPath()),this.pdf.text(ne,ui.x,ui.y,{angle:J.angle,align:dt,renderingMode:J.renderingMode}),Ve&&this.pdf.restoreGraphicsState()}}else pi.y<ti&&(this.ctx.prevPageLastElemOffset+=ti-pi.y);J.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=We)}else J.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*J.scale),We=this.lineWidth,this.lineWidth=We*J.scale),this.pdf.text(J.text,ie.x+this.posX,ie.y+this.posY,{angle:J.angle,align:dt,renderingMode:J.renderingMode,maxWidth:J.maxWidth}),J.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=We)},wt=function(J,dt,mt,Ut){mt=mt||0,Ut=Ut||0,this.pdf.internal.out(r(J+mt)+" "+o(dt+Ut)+" l")},yt=function(J,dt,mt){return this.pdf.lines(J,dt,mt,null,null)},te=function(J,dt,mt,Ut,Pt,ie,le,ce){this.pdf.internal.out([e(l(mt+J)),e(s(Ut+dt)),e(l(Pt+J)),e(s(ie+dt)),e(l(le+J)),e(s(ce+dt)),"c"].join(" "))},jt=function(J,dt,mt,Ut){for(var Pt=2*Math.PI,ie=Math.PI/2;dt>mt;)dt-=Pt;var le=Math.abs(mt-dt);le<Pt&&Ut&&(le=Pt-le);for(var ce=[],Qe=Ut?-1:1,Ee=dt;le>1e-5;){var We=Ee+Qe*Math.min(le,ie);ce.push(Xt.call(this,J,Ee,We)),le-=Math.abs(We-Ee),Ee=We}return ce},Xt=function(J,dt,mt){var Ut=(mt-dt)/2,Pt=J*Math.cos(Ut),ie=J*Math.sin(Ut),le=Pt,ce=-ie,Qe=le*le+ce*ce,Ee=Qe+le*Pt+ce*ie,We=4/3*(Math.sqrt(2*Qe*Ee)-Ee)/(le*ie-ce*Pt),Je=le-We*ce,Dt=ce+We*le,de=Je,Tt=-Dt,Xe=Ut+dt,Oe=Math.cos(Xe),Le=Math.sin(Xe);return{x1:J*Math.cos(dt),y1:J*Math.sin(dt),x2:Je*Oe-Dt*Le,y2:Je*Le+Dt*Oe,x3:de*Oe-Tt*Le,y3:de*Le+Tt*Oe,x4:J*Math.cos(mt),y4:J*Math.sin(mt)}},Wt=function(J){return 180*J/Math.PI},Ct=function(J,dt,mt,Ut,Pt,ie){var le=J+.5*(mt-J),ce=dt+.5*(Ut-dt),Qe=Pt+.5*(mt-Pt),Ee=ie+.5*(Ut-ie),We=Math.min(J,Pt,le,Qe),Je=Math.max(J,Pt,le,Qe),Dt=Math.min(dt,ie,ce,Ee),de=Math.max(dt,ie,ce,Ee);return new m(We,Dt,Je-We,de-Dt)},Et=function(J,dt,mt,Ut,Pt,ie,le,ce){var Qe,Ee,We,Je,Dt,de,Tt,Xe,Oe,Le,He,Ke,ze,ti,ci=mt-J,Si=Ut-dt,he=Pt-mt,Zi=ie-Ut,Hi=le-Pt,pi=ce-ie;for(Ee=0;Ee<41;Ee++)Oe=(Tt=(We=J+(Qe=Ee/40)*ci)+Qe*((Dt=mt+Qe*he)-We))+Qe*(Dt+Qe*(Pt+Qe*Hi-Dt)-Tt),Le=(Xe=(Je=dt+Qe*Si)+Qe*((de=Ut+Qe*Zi)-Je))+Qe*(de+Qe*(ie+Qe*pi-de)-Xe),Ee==0?(He=Oe,Ke=Le,ze=Oe,ti=Le):(He=Math.min(He,Oe),Ke=Math.min(Ke,Le),ze=Math.max(ze,Oe),ti=Math.max(ti,Le));return new m(Math.round(He),Math.round(Ke),Math.round(ze-He),Math.round(ti-Ke))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var J,dt,mt=(J=this.ctx.lineDash,dt=this.ctx.lineDashOffset,JSON.stringify({lineDash:J,lineDashOffset:dt}));this.prevLineDash!==mt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=mt)}}})(Xi.API),function(n){var e=function(s){var p,m,I,w,_,E,U,F,V,H;for(m=[],I=0,w=(s+=p="\0\0\0\0".slice(s.length%4||4)).length;w>I;I+=4)(_=(s.charCodeAt(I)<<24)+(s.charCodeAt(I+1)<<16)+(s.charCodeAt(I+2)<<8)+s.charCodeAt(I+3))!==0?(E=(_=((_=((_=((_=(_-(H=_%85))/85)-(V=_%85))/85)-(F=_%85))/85)-(U=_%85))/85)%85,m.push(E+33,U+33,F+33,V+33,H+33)):m.push(122);return function(Y,D){for(var tt=D;tt>0;tt--)Y.pop()}(m,p.length),String.fromCharCode.apply(String,m)+"~>"},r=function(s){var p,m,I,w,_,E=String,U="length",F=255,V="charCodeAt",H="slice",Y="replace";for(s[H](-2),s=s[H](0,-2)[Y](/\s/g,"")[Y]("z","!!!!!"),I=[],w=0,_=(s+=p="uuuuu"[H](s[U]%5||5))[U];_>w;w+=5)m=52200625*(s[V](w)-33)+614125*(s[V](w+1)-33)+7225*(s[V](w+2)-33)+85*(s[V](w+3)-33)+(s[V](w+4)-33),I.push(F&m>>24,F&m>>16,F&m>>8,F&m);return function(D,tt){for(var ot=tt;ot>0;ot--)D.pop()}(I,p[U]),E.fromCharCode.apply(E,I)},o=function(s){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),p.test(s)===!1)return"";for(var m="",I=0;I<s.length;I+=2)m+=String.fromCharCode("0x"+(s[I]+s[I+1]));return m},l=function(s){for(var p=new Uint8Array(s.length),m=s.length;m--;)p[m]=s.charCodeAt(m);return s=(p=Ky(p)).reduce(function(I,w){return I+String.fromCharCode(w)},"")};n.processDataByFilters=function(s,p){var m=0,I=s||"",w=[];for(typeof(p=p||[])=="string"&&(p=[p]),m=0;m<p.length;m+=1)switch(p[m]){case"ASCII85Decode":case"/ASCII85Decode":I=r(I),w.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":I=e(I),w.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":I=o(I),w.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":I=I.split("").map(function(_){return("0"+_.charCodeAt().toString(16)).slice(-2)}).join("")+">",w.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":I=l(I),w.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[m]+'" is not implemented')}return{data:I,reverseChain:w.reverse().join(" ")}}}(Xi.API),function(n){n.loadFile=function(e,r,o){return function(l,s,p){s=s!==!1,p=typeof p=="function"?p:function(){};var m=void 0;try{m=function(I,w,_){var E=new XMLHttpRequest,U=0,F=function(V){var H=V.length,Y=[],D=String.fromCharCode;for(U=0;U<H;U+=1)Y.push(D(255&V.charCodeAt(U)));return Y.join("")};if(E.open("GET",I,!w),E.overrideMimeType("text/plain; charset=x-user-defined"),w===!1&&(E.onload=function(){E.status===200?_(F(this.responseText)):_(void 0)}),E.send(null),w&&E.status===200)return F(E.responseText)}(l,s,p)}catch{}return m}(e,r,o)},n.loadImageFile=n.loadFile}(Xi.API),function(n){function e(){return(Yi.html2canvas?Promise.resolve(Yi.html2canvas):Promise.resolve().then(()=>(m2(),f2))).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function r(){return(Yi.DOMPurify?Promise.resolve(Yi.DOMPurify):Promise.resolve().then(()=>(S2(),x2))).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var o=function(p){var m=Sr(p);return m==="undefined"?"undefined":m==="string"||p instanceof String?"string":m==="number"||p instanceof Number?"number":m==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":m==="object"?"object":"unknown"},l=function(p,m){var I=document.createElement(p);for(var w in m.className&&(I.className=m.className),m.innerHTML&&m.dompurify&&(I.innerHTML=m.dompurify.sanitize(m.innerHTML)),m.style)I.style[w]=m.style[w];return I},s=function p(m){var I=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),w=p.convert(Promise.resolve(),I);return w=(w=w.setProgress(1,p,1,[p])).set(m)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(p,m){return p.__proto__=m||s.prototype,p},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(p,m){return this.then(function(){switch(m=m||function(I){switch(o(I)){case"string":return"string";case"element":return I.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(p)){case"string":return this.then(r).then(function(I){return this.set({src:l("div",{innerHTML:p,dompurify:I})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},s.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},m=function I(w,_){for(var E=w.nodeType===3?document.createTextNode(w.nodeValue):w.cloneNode(!1),U=w.firstChild;U;U=U.nextSibling)_!==!0&&U.nodeType===1&&U.nodeName==="SCRIPT"||E.appendChild(I(U,_));return w.nodeType===1&&(w.nodeName==="CANVAS"?(E.width=w.width,E.height=w.height,E.getContext("2d").drawImage(w,0,0)):w.nodeName!=="TEXTAREA"&&w.nodeName!=="SELECT"||(E.value=w.value),E.addEventListener("load",function(){E.scrollTop=w.scrollTop,E.scrollLeft=w.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);m.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(m),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(m){var I=Object.assign({},this.opt.html2canvas);return delete I.onrendered,m(this.prop.container,I)}).then(function(m){(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(m){var I=this.opt.jsPDF,w=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,I.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,I.context2d.posX=this.opt.x,I.context2d.posY=this.opt.y,I.context2d.margin=this.opt.margin,I.context2d.fontFaces=w,w)for(var U=0;U<w.length;++U){var F=w[U],V=F.src.find(function(H){return H.format==="truetype"});V&&I.addFont(V.url,F.ref.name,F.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,I.context2d.save(!0),m(this.prop.container,E)}).then(function(m){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(p,m,I){return(I=I||"pdf").toLowerCase()==="img"||I.toLowerCase()==="image"?this.outputImg(p,m):this.outputPdf(p,m)},s.prototype.outputPdf=function(p,m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,m)})},s.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},s.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(p){if(o(p)!=="object")return this;var m=Object.keys(p||{}).map(function(I){if(I in s.template.prop)return function(){this.prop[I]=p[I]};switch(I){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[I]=p[I]}}},this);return this.then(function(){return this.thenList(m)})},s.prototype.get=function(p,m){return this.then(function(){var I=p in s.template.prop?this.prop[p]:this.opt[p];return m?m(I):I})},s.prototype.setMargin=function(p){return this.then(function(){switch(o(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},s.prototype.setPageSize=function(p){function m(I,w){return Math.floor(I*w/72*96)}return this.then(function(){(p=p||Xi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:m(p.inner.width,p.k),height:m(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},s.prototype.setProgress=function(p,m,I,w){return p!=null&&(this.progress.val=p),m!=null&&(this.progress.state=m),I!=null&&(this.progress.n=I),w!=null&&(this.progress.stack=w),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(p,m,I,w){return this.setProgress(p?this.progress.val+p:null,m||null,I?this.progress.n+I:null,w?this.progress.stack.concat(w):null)},s.prototype.then=function(p,m){var I=this;return this.thenCore(p,m,function(w,_){return I.updateProgress(null,null,1,[w]),Promise.prototype.then.call(this,function(E){return I.updateProgress(null,w),E}).then(w,_).then(function(E){return I.updateProgress(1),E})})},s.prototype.thenCore=function(p,m,I){I=I||Promise.prototype.then,p&&(p=p.bind(this)),m&&(m=m.bind(this));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),_=I.call(w,p,m);return s.convert(_,this.__proto__)},s.prototype.thenExternal=function(p,m){return Promise.prototype.then.call(this,p,m)},s.prototype.thenList=function(p){var m=this;return p.forEach(function(I){m=m.thenCore(I)}),m},s.prototype.catch=function(p){p&&(p=p.bind(this));var m=Promise.prototype.catch.call(this,p);return s.convert(m,this)},s.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},s.prototype.error=function(p){return this.then(function(){throw new Error(p)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Xi.getPageSize=function(p,m,I){if(Sr(p)==="object"){var w=p;p=w.orientation,m=w.unit||m,I=w.format||I}m=m||"mm",I=I||"a4",p=(""+(p||"P")).toLowerCase();var _,E=(""+I).toLowerCase(),U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(m){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+m}var F,V=0,H=0;if(U.hasOwnProperty(E))V=U[E][1]/_,H=U[E][0]/_;else try{V=I[1],H=I[0]}catch{throw new Error("Invalid format: "+I)}if(p==="p"||p==="portrait")p="p",H>V&&(F=H,H=V,V=F);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",V>H&&(F=H,H=V,V=F)}return{width:H,height:V,unit:m,k:_,orientation:p}},n.html=function(p,m){(m=m||{}).callback=m.callback||function(){},m.html2canvas=m.html2canvas||{},m.html2canvas.canvas=m.html2canvas.canvas||this.canvas,m.jsPDF=m.jsPDF||this,m.fontFaces=m.fontFaces?m.fontFaces.map(Yy):null;var I=new s(m);return m.worker?I:I.from(p).doCallback()}}(Xi.API),Xi.API.addJS=function(n){return R5=n,this.internal.events.subscribe("postPutResources",function(){rm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Q5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+R5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rm!==void 0&&Q5!==void 0&&this.internal.out("/Names <</JavaScript "+rm+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var r=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=r.outline.render().split(/\r\n/),s=0;s<l.length;s++){var p=l[s],m=o.exec(p);if(m!=null){var I=m[1];r.internal.newObjectDeferredBegin(I,!1)}r.internal.write(p)}if(this.outline.createNamedDestinations){var w=this.internal.pages.length,_=[];for(s=0;s<w;s++){var E=r.internal.newObject();_.push(E);var U=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+U.objId+" 0 R /XYZ null null null]>> endobj")}var F=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<_.length;s++)r.internal.write("(page_"+(s+1)+")"+_[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+F+" 0 R"),r.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(o,l,s){var p={title:l,options:s,children:[]};return o==null&&(o=this.root),o.children.push(p),p},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(o){o.id=r.internal.newObjectDeferred();for(var l=0;l<o.children.length;l++)this.genIds_r(o.children[l])},r.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},r.outline.renderItems=function(o){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<o.children.length;s++){var p=o.children[s];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(o)),s>0&&this.line("/Prev "+this.makeRef(o.children[s-1])),s<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[s+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var m=this.count=this.count_r({count:0},p);if(m>0&&this.line("/Count "+m),p.options&&p.options.pageNumber){var I=r.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+I.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var w=0;w<o.children.length;w++)this.renderItems(o.children[w])},r.outline.line=function(o){this.ctx.val+=o+`\r
`},r.outline.makeRef=function(o){return o.id+" 0 R"},r.outline.makeString=function(o){return"("+r.internal.pdfEscape(o)+")"},r.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(o,l){for(var s=0;s<l.children.length;s++)o.count++,this.count_r(o,l.children[s]);return o.count}}])}(Xi.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(r,o,l,s,p,m){var I,w=this.decode.DCT_DECODE,_=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=p||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(I=function(E){for(var U,F=256*E.charCodeAt(4)+E.charCodeAt(5),V=E.length,H={width:0,height:0,numcomponents:1},Y=4;Y<V;Y+=2){if(Y+=F,e.indexOf(E.charCodeAt(Y+1))!==-1){U=256*E.charCodeAt(Y+5)+E.charCodeAt(Y+6),H={width:256*E.charCodeAt(Y+7)+E.charCodeAt(Y+8),height:U,numcomponents:E.charCodeAt(Y+9)};break}F=256*E.charCodeAt(Y+2)+E.charCodeAt(Y+3)}return H}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:m=this.color_spaces.DEVICE_GRAY;break;case 4:m=this.color_spaces.DEVICE_CMYK;break;case 3:m=this.color_spaces.DEVICE_RGB}_={data:r,width:I.width,height:I.height,colorSpace:m,bitsPerComponent:8,filter:w,index:o,alias:l}}return _}}(Xi.API);AK=function(){var n,e,r;function o(s){var p,m,I,w,_,E,U,F,V,H,Y,D,tt,ot;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(p=this.readUInt32(),V=function(){var bt,kt;for(kt=[],bt=0;bt<4;++bt)kt.push(String.fromCharCode(this.data[this.pos++]));return kt}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(p);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},_=this.readUInt16(),w=this.readUInt16()||100,E.delay=1e3*_/w,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(V==="fdAT"&&(this.pos+=4,p-=4),s=E?.data||this.imgData,D=0;0<=p?D<p:D>p;0<=p?++D:--D)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(I=this.palette.length/3,this.transparency.indexed=this.read(p),this.transparency.indexed.length>I)throw new Error("More transparent colors than palette size");if((H=I-this.transparency.indexed.length)>0)for(tt=0;0<=H?tt<H:tt>H;0<=H?++tt:--tt)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(p)[0];break;case 2:this.transparency.rgb=this.read(p)}break;case"tEXt":U=(Y=this.read(p)).indexOf(0),F=String.fromCharCode.apply(String,Y.slice(0,U)),this.text[F]=String.fromCharCode.apply(String,Y.slice(U+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(ot=this.colorType)===4||ot===6,m=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*m,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(s){var p,m;for(m=[],p=0;0<=s?p<s:p>s;0<=s?++p:--p)m.push(this.data[this.pos++]);return m},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(s){var p=this.pixelBitlength/8,m=new Uint8Array(this.width*this.height*p),I=0,w=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function _(E,U,F,V){var H,Y,D,tt,ot,bt,kt,Lt,vt,ft,Mt,qt,at,st,wt,yt,te,jt,Xt,Wt,Ct,Et=Math.ceil((w.width-E)/F),ue=Math.ceil((w.height-U)/V),J=w.width==Et&&w.height==ue;for(st=p*Et,qt=J?m:new Uint8Array(st*ue),bt=s.length,at=0,Y=0;at<ue&&I<bt;){switch(s[I++]){case 0:for(tt=te=0;te<st;tt=te+=1)qt[Y++]=s[I++];break;case 1:for(tt=jt=0;jt<st;tt=jt+=1)H=s[I++],ot=tt<p?0:qt[Y-p],qt[Y++]=(H+ot)%256;break;case 2:for(tt=Xt=0;Xt<st;tt=Xt+=1)H=s[I++],D=(tt-tt%p)/p,wt=at&&qt[(at-1)*st+D*p+tt%p],qt[Y++]=(wt+H)%256;break;case 3:for(tt=Wt=0;Wt<st;tt=Wt+=1)H=s[I++],D=(tt-tt%p)/p,ot=tt<p?0:qt[Y-p],wt=at&&qt[(at-1)*st+D*p+tt%p],qt[Y++]=(H+Math.floor((ot+wt)/2))%256;break;case 4:for(tt=Ct=0;Ct<st;tt=Ct+=1)H=s[I++],D=(tt-tt%p)/p,ot=tt<p?0:qt[Y-p],at===0?wt=yt=0:(wt=qt[(at-1)*st+D*p+tt%p],yt=D&&qt[(at-1)*st+(D-1)*p+tt%p]),kt=ot+wt-yt,Lt=Math.abs(kt-ot),ft=Math.abs(kt-wt),Mt=Math.abs(kt-yt),vt=Lt<=ft&&Lt<=Mt?ot:ft<=Mt?wt:yt,qt[Y++]=(H+vt)%256;break;default:throw new Error("Invalid filter algorithm: "+s[I-1])}if(!J){var dt=((U+at*V)*w.width+E)*p,mt=at*st;for(tt=0;tt<Et;tt+=1){for(var Ut=0;Ut<p;Ut+=1)m[dt++]=qt[mt++];dt+=(F-1)*p}}at++}}return s=V6(s),w.interlaceMethod==1?(_(0,0,8,8),_(4,0,8,8),_(0,4,4,8),_(2,0,4,4),_(0,2,2,4),_(1,0,2,2),_(0,1,1,2)):_(0,0,1,1),m},o.prototype.decodePalette=function(){var s,p,m,I,w,_,E,U,F;for(m=this.palette,_=this.transparency.indexed||[],w=new Uint8Array((_.length||0)+m.length),I=0,s=0,p=E=0,U=m.length;E<U;p=E+=3)w[I++]=m[p],w[I++]=m[p+1],w[I++]=m[p+2],w[I++]=(F=_[s++])!=null?F:255;return w},o.prototype.copyToImageData=function(s,p){var m,I,w,_,E,U,F,V,H,Y,D;if(I=this.colors,H=null,m=this.hasAlphaChannel,this.palette.length&&(H=(D=this._decodedPalette)!=null?D:this._decodedPalette=this.decodePalette(),I=4,m=!0),V=(w=s.data||s).length,E=H||p,_=U=0,I===1)for(;_<V;)F=H?4*p[_/4]:U,Y=E[F++],w[_++]=Y,w[_++]=Y,w[_++]=Y,w[_++]=m?E[F++]:255,U=F;else for(;_<V;)F=H?4*p[_/4]:U,w[_++]=E[F++],w[_++]=E[F++],w[_++]=E[F++],w[_++]=m?E[F++]:255,U=F},o.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var l=function(){if(Object.prototype.toString.call(Yi)==="[object Window]"){try{e=Yi.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),n=function(s){var p;if(l()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(p=new Image).src=e.toDataURL(),p;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(s){var p,m,I,w,_,E,U,F;if(this.animation){for(F=[],m=_=0,E=(U=this.animation.frames).length;_<E;m=++_)p=U[m],I=s.createImageData(p.width,p.height),w=this.decodePixels(new Uint8Array(p.data)),this.copyToImageData(I,w),p.imageData=I,F.push(p.image=n(I));return F}},o.prototype.renderFrame=function(s,p){var m,I,w;return m=(I=this.animation.frames)[p],w=I[p-1],p===0&&s.clearRect(0,0,this.width,this.height),w?.disposeOp===1?s.clearRect(w.xOffset,w.yOffset,w.width,w.height):w?.disposeOp===2&&s.putImageData(w.imageData,w.xOffset,w.yOffset),m.blendOp===0&&s.clearRect(m.xOffset,m.yOffset,m.width,m.height),s.drawImage(m.image,m.xOffset,m.yOffset)},o.prototype.animate=function(s){var p,m,I,w,_,E,U=this;return m=0,E=this.animation,w=E.numFrames,I=E.frames,_=E.numPlays,(p=function(){var F,V;if(F=m++%w,V=I[F],U.renderFrame(s,F),w>1&&m/w<_)return U.animation._timeout=setTimeout(p,V.delay)})()},o.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},o.prototype.render=function(s){var p,m;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,p=s.getContext("2d"),this.animation?(this.decodeFrames(p),this.animate(p)):(m=p.createImageData(this.width,this.height),this.copyToImageData(m,this.decodePixels()),p.putImageData(m,0,0))},o}();(function(n){var e=function(){return typeof Ky=="function"},r=function(U,F,V,H){var Y=4,D=p;switch(H){case n.image_compression.FAST:Y=1,D=s;break;case n.image_compression.MEDIUM:Y=6,D=m;break;case n.image_compression.SLOW:Y=9,D=I}U=o(U,F,V,D);var tt=Ky(U,{level:Y});return n.__addimage__.arrayBufferToBinaryString(tt)},o=function(U,F,V,H){for(var Y,D,tt,ot=U.length/F,bt=new Uint8Array(U.length+ot),kt=_(),Lt=0;Lt<ot;Lt+=1){if(tt=Lt*F,Y=U.subarray(tt,tt+F),H)bt.set(H(Y,V,D),tt+Lt);else{for(var vt,ft=kt.length,Mt=[];vt<ft;vt+=1)Mt[vt]=kt[vt](Y,V,D);var qt=E(Mt.concat());bt.set(Mt[qt],tt+Lt)}D=Y}return bt},l=function(U){var F=Array.apply([],U);return F.unshift(0),F},s=function(U,F){var V,H=[],Y=U.length;H[0]=1;for(var D=0;D<Y;D+=1)V=U[D-F]||0,H[D+1]=U[D]-V+256&255;return H},p=function(U,F,V){var H,Y=[],D=U.length;Y[0]=2;for(var tt=0;tt<D;tt+=1)H=V&&V[tt]||0,Y[tt+1]=U[tt]-H+256&255;return Y},m=function(U,F,V){var H,Y,D=[],tt=U.length;D[0]=3;for(var ot=0;ot<tt;ot+=1)H=U[ot-F]||0,Y=V&&V[ot]||0,D[ot+1]=U[ot]+256-(H+Y>>>1)&255;return D},I=function(U,F,V){var H,Y,D,tt,ot=[],bt=U.length;ot[0]=4;for(var kt=0;kt<bt;kt+=1)H=U[kt-F]||0,Y=V&&V[kt]||0,D=V&&V[kt-F]||0,tt=w(H,Y,D),ot[kt+1]=U[kt]-tt+256&255;return ot},w=function(U,F,V){if(U===F&&F===V)return U;var H=Math.abs(F-V),Y=Math.abs(U-V),D=Math.abs(U+F-V-V);return H<=Y&&H<=D?U:Y<=D?F:V},_=function(){return[l,s,p,m,I]},E=function(U){var F=U.map(function(V){return V.reduce(function(H,Y){return H+Math.abs(Y)},0)});return F.indexOf(Math.min.apply(null,F))};n.processPNG=function(U,F,V,H){var Y,D,tt,ot,bt,kt,Lt,vt,ft,Mt,qt,at,st,wt,yt,te=this.decode.FLATE_DECODE,jt="";if(this.__addimage__.isArrayBuffer(U)&&(U=new Uint8Array(U)),this.__addimage__.isArrayBufferView(U)){if(U=(tt=new AK(U)).imgData,D=tt.bits,Y=tt.colorSpace,bt=tt.colors,[4,6].indexOf(tt.colorType)!==-1){if(tt.bits===8){ft=(vt=tt.pixelBitlength==32?new Uint32Array(tt.decodePixels().buffer):tt.pixelBitlength==16?new Uint16Array(tt.decodePixels().buffer):new Uint8Array(tt.decodePixels().buffer)).length,qt=new Uint8Array(ft*tt.colors),Mt=new Uint8Array(ft);var Xt,Wt=tt.pixelBitlength-tt.bits;for(wt=0,yt=0;wt<ft;wt++){for(st=vt[wt],Xt=0;Xt<Wt;)qt[yt++]=st>>>Xt&255,Xt+=tt.bits;Mt[wt]=st>>>Xt&255}}if(tt.bits===16){ft=(vt=new Uint32Array(tt.decodePixels().buffer)).length,qt=new Uint8Array(ft*(32/tt.pixelBitlength)*tt.colors),Mt=new Uint8Array(ft*(32/tt.pixelBitlength)),at=tt.colors>1,wt=0,yt=0;for(var Ct=0;wt<ft;)st=vt[wt++],qt[yt++]=st>>>0&255,at&&(qt[yt++]=st>>>16&255,st=vt[wt++],qt[yt++]=st>>>0&255),Mt[Ct++]=st>>>16&255;D=8}H!==n.image_compression.NONE&&e()?(U=r(qt,tt.width*tt.colors,tt.colors,H),Lt=r(Mt,tt.width,1,H)):(U=qt,Lt=Mt,te=void 0)}if(tt.colorType===3&&(Y=this.color_spaces.INDEXED,kt=tt.palette,tt.transparency.indexed)){var Et=tt.transparency.indexed,ue=0;for(wt=0,ft=Et.length;wt<ft;++wt)ue+=Et[wt];if((ue/=255)===ft-1&&Et.indexOf(0)!==-1)ot=[Et.indexOf(0)];else if(ue!==ft){for(vt=tt.decodePixels(),Mt=new Uint8Array(vt.length),wt=0,ft=vt.length;wt<ft;wt++)Mt[wt]=Et[vt[wt]];Lt=r(Mt,tt.width,1)}}var J=function(dt){var mt;switch(dt){case n.image_compression.FAST:mt=11;break;case n.image_compression.MEDIUM:mt=13;break;case n.image_compression.SLOW:mt=14;break;default:mt=12}return mt}(H);return te===this.decode.FLATE_DECODE&&(jt="/Predictor "+J+" "),jt+="/Colors "+bt+" /BitsPerComponent "+D+" /Columns "+tt.width,(this.__addimage__.isArrayBuffer(U)||this.__addimage__.isArrayBufferView(U))&&(U=this.__addimage__.arrayBufferToBinaryString(U)),(Lt&&this.__addimage__.isArrayBuffer(Lt)||this.__addimage__.isArrayBufferView(Lt))&&(Lt=this.__addimage__.arrayBufferToBinaryString(Lt)),{alias:V,data:U,index:F,filter:te,decodeParameters:jt,transparency:ot,palette:kt,sMask:Lt,predictor:J,width:tt.width,height:tt.height,bitsPerComponent:D,colorSpace:Y}}}})(Xi.API),function(n){n.processGIF89A=function(e,r,o,l){var s=new lK(e),p=s.width,m=s.height,I=[];s.decodeAndBlitFrameRGBA(0,I);var w={data:I,width:p,height:m},_=new Hy(100).encode(w,100);return n.processJPEG.call(this,_,r,o,l)},n.processGIF87A=n.processGIF89A}(Xi.API),lA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:o,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lA.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(r){tn.log("bit decode error:"+r)}},lA.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),r=e%4;for(n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,l=0;l<e;l++)for(var s=this.datav.getUint8(this.pos++,!0),p=o*this.width*4+8*l*4,m=0;m<8&&8*l+m<this.width;m++){var I=this.palette[s>>7-m&1];this.data[p+4*m]=I.blue,this.data[p+4*m+1]=I.green,this.data[p+4*m+2]=I.red,this.data[p+4*m+3]=255}r!==0&&(this.pos+=4-r)}},lA.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<n;l++){var s=this.datav.getUint8(this.pos++,!0),p=o*this.width*4+2*l*4,m=s>>4,I=15&s,w=this.palette[m];if(this.data[p]=w.blue,this.data[p+1]=w.green,this.data[p+2]=w.red,this.data[p+3]=255,2*l+1>=this.width)break;w=this.palette[I],this.data[p+4]=w.blue,this.data[p+4+1]=w.green,this.data[p+4+2]=w.red,this.data[p+4+3]=255}e!==0&&(this.pos+=4-e)}},lA.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var l=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*o;if(l<this.palette.length){var p=this.palette[l];this.data[s]=p.red,this.data[s+1]=p.green,this.data[s+2]=p.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},lA.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(s&e)/e*255|0,m=(s>>5&e)/e*255|0,I=(s>>10&e)/e*255|0,w=s>>15?255:0,_=o*this.width*4+4*l;this.data[_]=I,this.data[_+1]=m,this.data[_+2]=p,this.data[_+3]=w}this.pos+=n}},lA.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var l=this.bottom_up?o:this.height-1-o,s=0;s<this.width;s++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(p&e)/e*255|0,I=(p>>5&r)/r*255|0,w=(p>>11)/e*255|0,_=l*this.width*4+4*s;this.data[_]=w,this.data[_+1]=I,this.data[_+2]=m,this.data[_+3]=255}this.pos+=n}},lA.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),p=e*this.width*4+4*r;this.data[p]=s,this.data[p+1]=l,this.data[p+2]=o,this.data[p+3]=255}this.pos+=this.width%4}},lA.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),m=e*this.width*4+4*r;this.data[m]=s,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=p}},lA.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,r,o,l){var s=new lA(e,!1),p=s.width,m=s.height,I={data:s.getData(),width:p,height:m},w=new Hy(100).encode(I,100);return n.processJPEG.call(this,w,r,o,l)}}(Xi.API),N5.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,r,o,l){var s=new N5(e),p=s.width,m=s.height,I={data:s.getData(),width:p,height:m},w=new Hy(100).encode(I,100);return n.processJPEG.call(this,w,r,o,l)}}(Xi.API),Xi.API.processRGBA=function(n,e,r){for(var o=n.data,l=o.length,s=new Uint8Array(l/4*3),p=new Uint8Array(l/4),m=0,I=0,w=0;w<l;w+=4){var _=o[w],E=o[w+1],U=o[w+2],F=o[w+3];s[m++]=_,s[m++]=E,s[m++]=U,p[I++]=F}var V=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:V,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Xi.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yh=Xi.API,nm=yh.getCharWidthsArray=function(n,e){var r,o,l=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),p=e.charSpace||this.internal.getCharSpace(),m=e.widths?e.widths:l.metadata.Unicode.widths,I=m.fof?m.fof:1,w=e.kerning?e.kerning:l.metadata.Unicode.kerning,_=w.fof?w.fof:1,E=e.doKerning!==!1,U=0,F=n.length,V=0,H=m[0]||I,Y=[];for(r=0;r<F;r++)o=n.charCodeAt(r),typeof l.metadata.widthOfString=="function"?Y.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(o))+p*(1e3/s)||0)/1e3):(U=E&&Sr(w[o])==="object"&&!isNaN(parseInt(w[o][V],10))?w[o][V]/_:0,Y.push((m[o]||H)/I+U)),V=o;return Y},Z5=yh.getStringUnitWidth=function(n,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),o=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return yh.processArabic&&(n=yh.processArabic(n)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(n,r,l)/r:nm.apply(this,arguments).reduce(function(s,p){return s+p},0)},P5=function(n,e,r,o){for(var l=[],s=0,p=n.length,m=0;s!==p&&m+e[s]<r;)m+=e[s],s++;l.push(n.slice(0,s));var I=s;for(m=0;s!==p;)m+e[s]>o&&(l.push(n.slice(I,s)),m=0,I=s),m+=e[s],s++;return I!==s&&l.push(n.slice(I,s)),l},H5=function(n,e,r){r||(r={});var o,l,s,p,m,I,w,_=[],E=[_],U=r.textIndent||0,F=0,V=0,H=n.split(" "),Y=nm.apply(this,[" ",r])[0];if(I=r.lineIndent===-1?H[0].length+2:r.lineIndent||0){var D=Array(I).join(" "),tt=[];H.map(function(bt){(bt=bt.split(/\s*\n/)).length>1?tt=tt.concat(bt.map(function(kt,Lt){return(Lt&&kt.length?`
`:"")+kt})):tt.push(bt[0])}),H=tt,I=Z5.apply(this,[D,r])}for(s=0,p=H.length;s<p;s++){var ot=0;if(o=H[s],I&&o[0]==`
`&&(o=o.substr(1),ot=1),U+F+(V=(l=nm.apply(this,[o,r])).reduce(function(bt,kt){return bt+kt},0))>e||ot){if(V>e){for(m=P5.apply(this,[o,l,e-(U+F),e]),_.push(m.shift()),_=[m.pop()];m.length;)E.push([m.shift()]);V=l.slice(o.length-(_[0]?_[0].length:0)).reduce(function(bt,kt){return bt+kt},0)}else _=[o];E.push(_),U=V+I,F=Y}else _.push(o),U+=F+V,F=Y}return w=I?function(bt,kt){return(kt?D:"")+bt.join(" ")}:function(bt){return bt.join(" ")},E.map(w)},yh.splitTextToSize=function(n,e,r){var o,l=(r=r||{}).fontSize||this.internal.getFontSize(),s=function(_){if(_.widths&&_.kerning)return{widths:_.widths,kerning:_.kerning};var E=this.internal.getFont(_.fontName,_.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);o=Array.isArray(n)?n:String(n).split(/\r?\n/);var p=1*this.internal.scaleFactor*e/l;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/l:0,s.lineIndent=r.lineIndent;var m,I,w=[];for(m=0,I=o.length;m<I;m++)w=w.concat(H5.apply(this,[o[m],p,s]));return w},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},o={},l=0;l<e.length;l++)r[e[l]]="0123456789abcdef"[l],o["0123456789abcdef"[l]]=e[l];var s=function(E){return"0x"+parseInt(E,10).toString(16)},p=n.__fontmetrics__.compress=function(E){var U,F,V,H,Y=["{"];for(var D in E){if(U=E[D],isNaN(parseInt(D,10))?F="'"+D+"'":(D=parseInt(D,10),F=(F=s(D).slice(2)).slice(0,-1)+o[F.slice(-1)]),typeof U=="number")U<0?(V=s(U).slice(3),H="-"):(V=s(U).slice(2),H=""),V=H+V.slice(0,-1)+o[V.slice(-1)];else{if(Sr(U)!=="object")throw new Error("Don't know what to do with value type "+Sr(U)+".");V=p(U)}Y.push(F+V)}return Y.push("}"),Y.join("")},m=n.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var U,F,V,H,Y={},D=1,tt=Y,ot=[],bt="",kt="",Lt=E.length-1,vt=1;vt<Lt;vt+=1)(H=E[vt])=="'"?U?(V=U.join(""),U=void 0):U=[]:U?U.push(H):H=="{"?(ot.push([tt,V]),tt={},V=void 0):H=="}"?((F=ot.pop())[0][F[1]]=tt,V=void 0,tt=F[0]):H=="-"?D=-1:V===void 0?r.hasOwnProperty(H)?(bt+=r[H],V=parseInt(bt,16)*D,D=1,bt=""):bt+=H:r.hasOwnProperty(H)?(kt+=r[H],tt[V]=parseInt(kt,16)*D,D=1,V=void 0,kt=""):kt+=H;return Y},I={codePages:["WinAnsiEncoding"],WinAnsiEncoding:m("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},w={Unicode:{Courier:I,"Courier-Bold":I,"Courier-BoldOblique":I,"Courier-Oblique":I,Helvetica:I,"Helvetica-Bold":I,"Helvetica-BoldOblique":I,"Helvetica-Oblique":I,"Times-Roman":I,"Times-Bold":I,"Times-BoldItalic":I,"Times-Italic":I}},_={Unicode:{"Courier-Oblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":m("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":m("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:m("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:m("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":m("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":m("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(E){var U=E.font,F=_.Unicode[U.postScriptName];F&&(U.metadata.Unicode={},U.metadata.Unicode.widths=F.widths,U.metadata.Unicode.kerning=F.kerning);var V=w.Unicode[U.postScriptName];V&&(U.metadata.Unicode.encoding=V,U.encoding=V.codePages[0])}])}(Xi.API),function(n){var e=function(r){for(var o=r.length,l=new Uint8Array(o),s=0;s<o;s++)l[s]=r.charCodeAt(s);return l};n.API.events.push(["addFont",function(r){var o=void 0,l=r.font,s=r.instance;if(!l.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(o=s.existsFileInVFS(l.postScriptName)===!1?s.loadFile(l.postScriptName):s.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(p,m){m=/^\x00\x01\x00\x00/.test(m)?e(m):e(td(m)),p.metadata=n.API.TTFFont.open(m),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(l,o)}}])}(Xi),function(n){function e(){return(Yi.canvg?Promise.resolve(Yi.canvg):Promise.resolve().then(()=>(b5(),y5))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Xi.API.addSvgAsImage=function(r,o,l,s,p,m,I,w){if(isNaN(o)||isNaN(l))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(p))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var _=document.createElement("canvas");_.width=s,_.height=p;var E=_.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,_.width,_.height);var U={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},F=this;return e().then(function(V){return V.fromString(E,r,U)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(V){return V.render(U)}).then(function(){F.addImage(_.toDataURL("image/jpeg",1),o,l,s,p,I,w)})}}(),Xi.API.putTotalPages=function(n){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var l=0;l<this.internal.pages[o].length;l++)this.internal.pages[o][l]=this.internal.pages[o][l].replace(e,r);return this},Xi.API.viewerPreferences=function(n,e){var r;n=n||{},e=e||!1;var o,l,s,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},m=Object.keys(p),I=[],w=0,_=0,E=0;function U(V,H){var Y,D=!1;for(Y=0;Y<V.length;Y+=1)V[Y]===H&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var F=m.length;for(E=0;E<F;E+=1)r[m[E]].value=r[m[E]].defaultValue,r[m[E]].explicitSet=!1}if(Sr(n)==="object"){for(l in n)if(s=n[l],U(m,l)&&s!==void 0){if(r[l].type==="boolean"&&typeof s=="boolean")r[l].value=s;else if(r[l].type==="name"&&U(r[l].valueSet,s))r[l].value=s;else if(r[l].type==="integer"&&Number.isInteger(s))r[l].value=s;else if(r[l].type==="array"){for(w=0;w<s.length;w+=1)if(o=!0,s[w].length===1&&typeof s[w][0]=="number")I.push(String(s[w]-1));else if(s[w].length>1){for(_=0;_<s[w].length;_+=1)typeof s[w][_]!="number"&&(o=!1);o===!0&&I.push([s[w][0]-1,s[w][1]-1].join(" "))}r[l].value="["+I.join(" ")+"]"}else r[l].value=r[l].defaultValue;r[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var V,H=[];for(V in r)r[V].explicitSet===!0&&(r[V].type==="name"?H.push("/"+V+" /"+r[V].value):H.push("/"+V+" "+r[V].value));H.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+H.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(n){var e=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(o)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),m=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),I=unescape(encodeURIComponent("</x:xmpmeta>")),w=s.length+p.length+m.length+l.length+I.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+w+" >>"),this.internal.write("stream"),this.internal.write(l+s+p+m+I),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(o,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Xi.API),function(n){var e=n.API,r=e.pdfEscape16=function(s,p){for(var m,I=p.metadata.Unicode.widths,w=["","0","00","000","0000"],_=[""],E=0,U=s.length;E<U;++E){if(m=p.metadata.characterToGlyph(s.charCodeAt(E)),p.metadata.glyIdsUsed.push(m),p.metadata.toUnicode[m]=s.charCodeAt(E),I.indexOf(m)==-1&&(I.push(m),I.push([parseInt(p.metadata.widthOfGlyph(m),10)])),m=="0")return _.join("");m=m.toString(16),_.push(w[4-m.length],m)}return _.join("")},o=function(s){var p,m,I,w,_,E,U;for(_=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,I=[],E=0,U=(m=Object.keys(s).sort(function(F,V){return F-V})).length;E<U;E++)p=m[E],I.length>=100&&(_+=`
`+I.length+` beginbfchar
`+I.join(`
`)+`
endbfchar`,I=[]),s[p]!==void 0&&s[p]!==null&&typeof s[p].toString=="function"&&(w=("0000"+s[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),I.push("<"+p+"><"+w+">"));return I.length&&(_+=`
`+I.length+` beginbfchar
`+I.join(`
`)+`
endbfchar
`),_+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(p){var m=p.font,I=p.out,w=p.newObject,_=p.putStream;if(m.metadata instanceof n.API.TTFFont&&m.encoding==="Identity-H"){for(var E=m.metadata.Unicode.widths,U=m.metadata.subset.encode(m.metadata.glyIdsUsed,1),F="",V=0;V<U.length;V++)F+=String.fromCharCode(U[V]);var H=w();_({data:F,addLength1:!0,objectId:H}),I("endobj");var Y=w();_({data:o(m.metadata.toUnicode),addLength1:!0,objectId:Y}),I("endobj");var D=w();I("<<"),I("/Type /FontDescriptor"),I("/FontName /"+vh(m.fontName)),I("/FontFile2 "+H+" 0 R"),I("/FontBBox "+n.API.PDFObject.convert(m.metadata.bbox)),I("/Flags "+m.metadata.flags),I("/StemV "+m.metadata.stemV),I("/ItalicAngle "+m.metadata.italicAngle),I("/Ascent "+m.metadata.ascender),I("/Descent "+m.metadata.decender),I("/CapHeight "+m.metadata.capHeight),I(">>"),I("endobj");var tt=w();I("<<"),I("/Type /Font"),I("/BaseFont /"+vh(m.fontName)),I("/FontDescriptor "+D+" 0 R"),I("/W "+n.API.PDFObject.convert(E)),I("/CIDToGIDMap /Identity"),I("/DW 1000"),I("/Subtype /CIDFontType2"),I("/CIDSystemInfo"),I("<<"),I("/Supplement 0"),I("/Registry (Adobe)"),I("/Ordering ("+m.encoding+")"),I(">>"),I(">>"),I("endobj"),m.objectNumber=w(),I("<<"),I("/Type /Font"),I("/Subtype /Type0"),I("/ToUnicode "+Y+" 0 R"),I("/BaseFont /"+vh(m.fontName)),I("/Encoding /"+m.encoding),I("/DescendantFonts ["+tt+" 0 R]"),I(">>"),I("endobj"),m.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(p){var m=p.font,I=p.out,w=p.newObject,_=p.putStream;if(m.metadata instanceof n.API.TTFFont&&m.encoding==="WinAnsiEncoding"){for(var E=m.metadata.rawData,U="",F=0;F<E.length;F++)U+=String.fromCharCode(E[F]);var V=w();_({data:U,addLength1:!0,objectId:V}),I("endobj");var H=w();_({data:o(m.metadata.toUnicode),addLength1:!0,objectId:H}),I("endobj");var Y=w();I("<<"),I("/Descent "+m.metadata.decender),I("/CapHeight "+m.metadata.capHeight),I("/StemV "+m.metadata.stemV),I("/Type /FontDescriptor"),I("/FontFile2 "+V+" 0 R"),I("/Flags 96"),I("/FontBBox "+n.API.PDFObject.convert(m.metadata.bbox)),I("/FontName /"+vh(m.fontName)),I("/ItalicAngle "+m.metadata.italicAngle),I("/Ascent "+m.metadata.ascender),I(">>"),I("endobj"),m.objectNumber=w();for(var D=0;D<m.metadata.hmtx.widths.length;D++)m.metadata.hmtx.widths[D]=parseInt(m.metadata.hmtx.widths[D]*(1e3/m.metadata.head.unitsPerEm));I("<</Subtype/TrueType/Type/Font/ToUnicode "+H+" 0 R/BaseFont/"+vh(m.fontName)+"/FontDescriptor "+Y+" 0 R/Encoding/"+m.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(m.metadata.hmtx.widths)+">>"),I("endobj"),m.isAlreadyPutted=!0}})(s)}]);var l=function(s){var p,m=s.text||"",I=s.x,w=s.y,_=s.options||{},E=s.mutex||{},U=E.pdfEscape,F=E.activeFontKey,V=E.fonts,H=F,Y="",D=0,tt="",ot=V[H].encoding;if(V[H].encoding!=="Identity-H")return{text:m,x:I,y:w,options:_,mutex:E};for(tt=m,H=F,Array.isArray(m)&&(tt=m[0]),D=0;D<tt.length;D+=1)V[H].metadata.hasOwnProperty("cmap")&&(p=V[H].metadata.cmap.unicode.codeMap[tt[D].charCodeAt(0)]),p||tt[D].charCodeAt(0)<256&&V[H].metadata.hasOwnProperty("Unicode")?Y+=tt[D]:Y+="";var bt="";return parseInt(H.slice(1))<14||ot==="WinAnsiEncoding"?bt=U(Y,H).split("").map(function(kt){return kt.charCodeAt(0).toString(16)}).join(""):ot==="Identity-H"&&(bt=r(Y,V[H])),E.isHex=!0,{text:bt,x:I,y:w,options:_,mutex:E}};e.events.push(["postProcessText",function(s){var p=s.text||"",m=[],I={text:p,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(p)){var w=0;for(w=0;w<p.length;w+=1)Array.isArray(p[w])&&p[w].length===3?m.push([l(Object.assign({},I,{text:p[w][0]})).text,p[w][1],p[w][2]]):m.push(l(Object.assign({},I,{text:p[w]})).text);s.text=m}else s.text=l(Object.assign({},I,{text:p})).text}])}(Xi),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},n.addFileToVFS=function(r,o){return e.call(this),this.internal.vFS[r]=o,this},n.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Xi.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(o){var l,s,p,m,I,w,_,E=e,U=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],F=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],V={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},H={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Y=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],D=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),tt=!1,ot=0;this.__bidiEngine__={};var bt=function(at){var st=at.charCodeAt(),wt=st>>8,yt=H[wt];return yt!==void 0?E[256*yt+(255&st)]:wt===252||wt===253?"AL":D.test(wt)?"L":wt===8?"R":"N"},kt=function(at){for(var st,wt=0;wt<at.length;wt++){if((st=bt(at.charAt(wt)))==="L")return!1;if(st==="R")return!0}return!1},Lt=function(at,st,wt,yt){var te,jt,Xt,Wt,Ct=st[yt];switch(Ct){case"L":case"R":tt=!1;break;case"N":case"AN":break;case"EN":tt&&(Ct="AN");break;case"AL":tt=!0,Ct="R";break;case"WS":Ct="N";break;case"CS":yt<1||yt+1>=st.length||(te=wt[yt-1])!=="EN"&&te!=="AN"||(jt=st[yt+1])!=="EN"&&jt!=="AN"?Ct="N":tt&&(jt="AN"),Ct=jt===te?jt:"N";break;case"ES":Ct=(te=yt>0?wt[yt-1]:"B")==="EN"&&yt+1<st.length&&st[yt+1]==="EN"?"EN":"N";break;case"ET":if(yt>0&&wt[yt-1]==="EN"){Ct="EN";break}if(tt){Ct="N";break}for(Xt=yt+1,Wt=st.length;Xt<Wt&&st[Xt]==="ET";)Xt++;Ct=Xt<Wt&&st[Xt]==="EN"?"EN":"N";break;case"NSM":if(p&&!m){for(Wt=st.length,Xt=yt+1;Xt<Wt&&st[Xt]==="NSM";)Xt++;if(Xt<Wt){var Et=at[yt],ue=Et>=1425&&Et<=2303||Et===64286;if(te=st[Xt],ue&&(te==="R"||te==="AL")){Ct="R";break}}}Ct=yt<1||(te=st[yt-1])==="B"?"N":wt[yt-1];break;case"B":tt=!1,l=!0,Ct=ot;break;case"S":s=!0,Ct="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":tt=!1;break;case"BN":Ct="N"}return Ct},vt=function(at,st,wt){var yt=at.split("");return wt&&ft(yt,wt,{hiLevel:ot}),yt.reverse(),st&&st.reverse(),yt.join("")},ft=function(at,st,wt){var yt,te,jt,Xt,Wt,Ct=-1,Et=at.length,ue=0,J=[],dt=ot?F:U,mt=[];for(tt=!1,l=!1,s=!1,te=0;te<Et;te++)mt[te]=bt(at[te]);for(jt=0;jt<Et;jt++){if(Wt=ue,J[jt]=Lt(at,mt,J,jt),yt=240&(ue=dt[Wt][V[J[jt]]]),ue&=15,st[jt]=Xt=dt[ue][5],yt>0)if(yt===16){for(te=Ct;te<jt;te++)st[te]=1;Ct=-1}else Ct=-1;if(dt[ue][6])Ct===-1&&(Ct=jt);else if(Ct>-1){for(te=Ct;te<jt;te++)st[te]=Xt;Ct=-1}mt[jt]==="B"&&(st[jt]=0),wt.hiLevel|=Xt}s&&function(Ut,Pt,ie){for(var le=0;le<ie;le++)if(Ut[le]==="S"){Pt[le]=ot;for(var ce=le-1;ce>=0&&Ut[ce]==="WS";ce--)Pt[ce]=ot}}(mt,st,Et)},Mt=function(at,st,wt,yt,te){if(!(te.hiLevel<at)){if(at===1&&ot===1&&!l)return st.reverse(),void(wt&&wt.reverse());for(var jt,Xt,Wt,Ct,Et=st.length,ue=0;ue<Et;){if(yt[ue]>=at){for(Wt=ue+1;Wt<Et&&yt[Wt]>=at;)Wt++;for(Ct=ue,Xt=Wt-1;Ct<Xt;Ct++,Xt--)jt=st[Ct],st[Ct]=st[Xt],st[Xt]=jt,wt&&(jt=wt[Ct],wt[Ct]=wt[Xt],wt[Xt]=jt);ue=Wt}ue++}}},qt=function(at,st,wt){var yt=at.split(""),te={hiLevel:ot};return wt||(wt=[]),ft(yt,wt,te),function(jt,Xt,Wt){if(Wt.hiLevel!==0&&_)for(var Ct,Et=0;Et<jt.length;Et++)Xt[Et]===1&&(Ct=Y.indexOf(jt[Et]))>=0&&(jt[Et]=Y[Ct+1])}(yt,wt,te),Mt(2,yt,st,wt,te),Mt(1,yt,st,wt,te),yt.join("")};return this.__bidiEngine__.doBidiReorder=function(at,st,wt){if(function(te,jt){if(jt)for(var Xt=0;Xt<te.length;Xt++)jt[Xt]=Xt;m===void 0&&(m=kt(te)),w===void 0&&(w=kt(te))}(at,st),p||!I||w)if(p&&I&&m^w)ot=m?1:0,at=vt(at,st,wt);else if(!p&&I&&w)ot=m?1:0,at=qt(at,st,wt),at=vt(at,st);else if(!p||m||I||w){if(p&&!I&&m^w)at=vt(at,st),m?(ot=0,at=qt(at,st,wt)):(ot=1,at=qt(at,st,wt),at=vt(at,st));else if(p&&m&&!I&&w)ot=1,at=qt(at,st,wt),at=vt(at,st);else if(!p&&!I&&m^w){var yt=_;m?(ot=1,at=qt(at,st,wt),ot=0,_=!1,at=qt(at,st,wt),_=yt):(ot=0,at=qt(at,st,wt),at=vt(at,st),ot=1,_=!1,at=qt(at,st,wt),_=yt,at=vt(at,st))}}else ot=0,at=qt(at,st,wt);else ot=m?1:0,at=qt(at,st,wt);return at},this.__bidiEngine__.setOptions=function(at){at&&(p=at.isInputVisual,I=at.isOutputVisual,m=at.isInputRtl,w=at.isOutputRtl,_=at.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(o){var l=o.text,s=(o.x,o.y,o.options||{}),p=(o.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(l)==="[object Array]"){var m=0;for(p=[],m=0;m<l.length;m+=1)Object.prototype.toString.call(l[m])==="[object Array]"?p.push([r.doBidiReorder(l[m][0]),l[m][1],l[m][2]]):p.push([r.doBidiReorder(l[m])]);o.text=p}else o.text=r.doBidiReorder(l);r.setOptions({isInputVisual:!0})}])}(Xi),Xi.API.TTFFont=function(){function n(e){var r;if(this.rawData=e,r=this.contents=new Sc(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new BK(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new cK(this.contents),this.head=new hK(this),this.name=new mK(this),this.cmap=new oS(this),this.toUnicode={},this.hhea=new gK(this),this.maxp=new CK(this),this.hmtx=new IK(this),this.post=new pK(this),this.os2=new dK(this),this.loca=new wK(this),this.glyf=new yK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,r,o,l,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var p,m,I,w;for(w=[],p=0,m=(I=this.bbox).length;p<m;p++)e=I[p],w.push(Math.round(e*this.scaleFactor));return w}.call(this),this.stemV=0,this.post.exists?(o=255&(l=this.post.italic_angle),32768&(r=l>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},n.prototype.widthOfString=function(e,r,o){var l,s,p,m;for(p=0,s=0,m=(e=""+e).length;0<=m?s<m:s>m;s=0<=m?++s:--s)l=e.charCodeAt(s),p+=this.widthOfGlyph(this.characterToGlyph(l))+o*(1e3/r)||0;return p*(r/1e3)},n.prototype.lineHeight=function(e,r){var o;return r==null&&(r=!1),o=r?this.lineGap:0,(this.ascender+o-this.decender)/1e3*e},n}();Sc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var r,o;for(o=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)o[r]=String.fromCharCode(this.readByte());return o.join("")},n.prototype.writeString=function(e){var r,o,l;for(l=[],r=0,o=e.length;0<=o?r<o:r>o;r=0<=o?++r:--r)l.push(this.writeByte(e.charCodeAt(r)));return l},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,r,o,l,s,p,m,I;return e=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),s=this.readByte(),p=this.readByte(),m=this.readByte(),I=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^o)+4294967296*(255^l)+16777216*(255^s)+65536*(255^p)+256*(255^m)+(255^I)+1):72057594037927940*e+281474976710656*r+1099511627776*o+4294967296*l+16777216*s+65536*p+256*m+I},n.prototype.writeLongLong=function(e){var r,o;return r=Math.floor(e/4294967296),o=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var r,o;for(r=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)r.push(this.readByte());return r},n.prototype.write=function(e){var r,o,l,s;for(s=[],o=0,l=e.length;o<l;o++)r=e[o],s.push(this.writeByte(r));return s},n}(),cK=function(){var n;function e(r){var o,l,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},l=0,s=this.tableCount;0<=s?l<s:l>s;l=0<=s?++l:--l)o={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[o.tag]=o}return e.prototype.encode=function(r){var o,l,s,p,m,I,w,_,E,U,F,V,H;for(H in F=Object.keys(r).length,I=Math.log(2),E=16*Math.floor(Math.log(F)/I),p=Math.floor(E/I),_=16*F-E,(l=new Sc).writeInt(this.scalarType),l.writeShort(F),l.writeShort(E),l.writeShort(p),l.writeShort(_),s=16*F,w=l.pos+s,m=null,V=[],r)for(U=r[H],l.writeString(H),l.writeInt(n(U)),l.writeInt(w),l.writeInt(U.length),V=V.concat(U),H==="head"&&(m=w),w+=U.length;w%4;)V.push(0),w++;return l.write(V),o=2981146554-n(l.data),l.pos=m+8,l.writeUInt32(o),l.data},n=function(r){var o,l,s,p;for(r=aS.call(r);r.length%4;)r.push(0);for(s=new Sc(r),l=0,o=0,p=r.length;o<p;o=o+=4)l+=s.readUInt32();return 4294967295&l},e}(),uK={}.hasOwnProperty,tl=function(n,e){for(var r in e)uK.call(e,r)&&(n[r]=e[r]);function o(){this.constructor=n}return o.prototype=e.prototype,n.prototype=new o,n.__super__=e.prototype,n};uA=function(){function n(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();hK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var o;return(o=new Sc).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(r),o.writeShort(this.glyphDataFormat),o.data},e}(),V5=function(){function n(e,r){var o,l,s,p,m,I,w,_,E,U,F,V,H,Y,D,tt,ot;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),E=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(I=0;I<256;++I)this.codeMap[I]=e.readByte();break;case 4:for(F=e.readUInt16(),U=F/2,e.pos+=6,s=function(){var bt,kt;for(kt=[],I=bt=0;0<=U?bt<U:bt>U;I=0<=U?++bt:--bt)kt.push(e.readUInt16());return kt}(),e.pos+=2,H=function(){var bt,kt;for(kt=[],I=bt=0;0<=U?bt<U:bt>U;I=0<=U?++bt:--bt)kt.push(e.readUInt16());return kt}(),w=function(){var bt,kt;for(kt=[],I=bt=0;0<=U?bt<U:bt>U;I=0<=U?++bt:--bt)kt.push(e.readUInt16());return kt}(),_=function(){var bt,kt;for(kt=[],I=bt=0;0<=U?bt<U:bt>U;I=0<=U?++bt:--bt)kt.push(e.readUInt16());return kt}(),l=(this.length-e.pos+this.offset)/2,m=function(){var bt,kt;for(kt=[],I=bt=0;0<=l?bt<l:bt>l;I=0<=l?++bt:--bt)kt.push(e.readUInt16());return kt}(),I=D=0,ot=s.length;D<ot;I=++D)for(Y=s[I],o=tt=V=H[I];V<=Y?tt<=Y:tt>=Y;o=V<=Y?++tt:--tt)_[I]===0?p=o+w[I]:(p=m[_[I]/2+(o-V)-(U-I)]||0)!==0&&(p+=w[I]),this.codeMap[o]=65535&p}e.pos=E}return n.encode=function(e,r){var o,l,s,p,m,I,w,_,E,U,F,V,H,Y,D,tt,ot,bt,kt,Lt,vt,ft,Mt,qt,at,st,wt,yt,te,jt,Xt,Wt,Ct,Et,ue,J,dt,mt,Ut,Pt,ie,le,ce,Qe,Ee,We;switch(yt=new Sc,p=Object.keys(e).sort(function(Je,Dt){return Je-Dt}),r){case"macroman":for(H=0,Y=function(){var Je=[];for(V=0;V<256;++V)Je.push(0);return Je}(),tt={0:0},s={},te=0,Ct=p.length;te<Ct;te++)tt[ce=e[l=p[te]]]==null&&(tt[ce]=++H),s[l]={old:e[l],new:tt[e[l]]},Y[l]=tt[e[l]];return yt.writeUInt16(1),yt.writeUInt16(0),yt.writeUInt32(12),yt.writeUInt16(0),yt.writeUInt16(262),yt.writeUInt16(0),yt.write(Y),{charMap:s,subtable:yt.data,maxGlyphID:H+1};case"unicode":for(st=[],E=[],ot=0,tt={},o={},D=w=null,jt=0,Et=p.length;jt<Et;jt++)tt[kt=e[l=p[jt]]]==null&&(tt[kt]=++ot),o[l]={old:kt,new:tt[kt]},m=tt[kt]-l,D!=null&&m===w||(D&&E.push(D),st.push(l),w=m),D=l;for(D&&E.push(D),E.push(65535),st.push(65535),qt=2*(Mt=st.length),ft=2*Math.pow(Math.log(Mt)/Math.LN2,2),U=Math.log(ft/2)/Math.LN2,vt=2*Mt-ft,I=[],Lt=[],F=[],V=Xt=0,ue=st.length;Xt<ue;V=++Xt){if(at=st[V],_=E[V],at===65535){I.push(0),Lt.push(0);break}if(at-(wt=o[at].new)>=32768)for(I.push(0),Lt.push(2*(F.length+Mt-V)),l=Wt=at;at<=_?Wt<=_:Wt>=_;l=at<=_?++Wt:--Wt)F.push(o[l].new);else I.push(wt-at),Lt.push(0)}for(yt.writeUInt16(3),yt.writeUInt16(1),yt.writeUInt32(12),yt.writeUInt16(4),yt.writeUInt16(16+8*Mt+2*F.length),yt.writeUInt16(0),yt.writeUInt16(qt),yt.writeUInt16(ft),yt.writeUInt16(U),yt.writeUInt16(vt),ie=0,J=E.length;ie<J;ie++)l=E[ie],yt.writeUInt16(l);for(yt.writeUInt16(0),le=0,dt=st.length;le<dt;le++)l=st[le],yt.writeUInt16(l);for(Qe=0,mt=I.length;Qe<mt;Qe++)m=I[Qe],yt.writeUInt16(m);for(Ee=0,Ut=Lt.length;Ee<Ut;Ee++)bt=Lt[Ee],yt.writeUInt16(bt);for(We=0,Pt=F.length;We<Pt;We++)H=F[We],yt.writeUInt16(H);return{charMap:o,subtable:yt.data,maxGlyphID:ot+1}}},n}(),oS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="cmap",e.prototype.parse=function(r){var o,l,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)o=new V5(r,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},e.encode=function(r,o){var l,s;return o==null&&(o="macroman"),l=V5.encode(r,o),(s=new Sc).writeUInt16(0),s.writeUInt16(1),l.table=s.data.concat(l.subtable),l},e}(),gK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),dK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var o,l;for(l=[],o=0;o<10;++o)l.push(r.readByte());return l}(),this.charRange=function(){var o,l;for(l=[],o=0;o<4;++o)l.push(r.readInt());return l}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var o,l;for(l=[],o=0;o<2;o=++o)l.push(r.readInt());return l}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),pK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="post",e.prototype.parse=function(r){var o,l,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var p;for(l=r.readUInt16(),this.glyphNameIndex=[],p=0;0<=l?p<l:p>l;p=0<=l?++p:--p)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)o=r.readByte(),s.push(this.names.push(r.readString(o)));return s;case 151552:return l=r.readUInt16(),this.offsets=r.read(l);case 196608:break;case 262144:return this.map=function(){var m,I,w;for(w=[],p=m=0,I=this.file.maxp.numGlyphs;0<=I?m<I:m>I;p=0<=I?++m:--m)w.push(r.readUInt32());return w}.call(this)}},e}(),fK=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},mK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="name",e.prototype.parse=function(r){var o,l,s,p,m,I,w,_,E,U,F;for(r.pos=this.offset,r.readShort(),o=r.readShort(),I=r.readShort(),l=[],p=0;0<=o?p<o:p>o;p=0<=o?++p:--p)l.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+I+r.readShort()});for(w={},p=E=0,U=l.length;E<U;p=++E)s=l[p],r.pos=s.offset,_=r.readString(s.length),m=new fK(_,s),w[F=s.nameID]==null&&(w[F]=[]),w[s.nameID].push(m);this.strings=w,this.copyright=w[0],this.fontFamily=w[1],this.fontSubfamily=w[2],this.uniqueSubfamily=w[3],this.fontName=w[4],this.version=w[5];try{this.postscriptName=w[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=w[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=w[7],this.manufacturer=w[8],this.designer=w[9],this.description=w[10],this.vendorUrl=w[11],this.designerUrl=w[12],this.license=w[13],this.licenseUrl=w[14],this.preferredFamily=w[15],this.preferredSubfamily=w[17],this.compatibleFull=w[18],this.sampleText=w[19]},e}(),CK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),IK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="hmtx",e.prototype.parse=function(r){var o,l,s,p,m,I,w;for(r.pos=this.offset,this.metrics=[],o=0,I=this.file.hhea.numberOfMetrics;0<=I?o<I:o>I;o=0<=I?++o:--o)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var _,E;for(E=[],o=_=0;0<=s?_<s:_>s;o=0<=s?++_:--_)E.push(r.readInt16());return E}(),this.widths=function(){var _,E,U,F;for(F=[],_=0,E=(U=this.metrics).length;_<E;_++)p=U[_],F.push(p.advance);return F}.call(this),l=this.widths[this.widths.length-1],w=[],o=m=0;0<=s?m<s:m>s;o=0<=s?++m:--m)w.push(this.widths.push(l));return w},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),aS=[].slice,yK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var o,l,s,p,m,I,w,_,E,U;return r in this.cache?this.cache[r]:(p=this.file.loca,o=this.file.contents,l=p.indexOf(r),(s=p.lengthOf(r))===0?this.cache[r]=null:(o.pos=this.offset+l,m=(I=new Sc(o.read(s))).readShort(),_=I.readShort(),U=I.readShort(),w=I.readShort(),E=I.readShort(),this.cache[r]=m===-1?new vK(I,_,U,w,E):new bK(I,m,_,U,w,E),this.cache[r]))},e.prototype.encode=function(r,o,l){var s,p,m,I,w;for(m=[],p=[],I=0,w=o.length;I<w;I++)s=r[o[I]],p.push(m.length),s&&(m=m.concat(s.encode(l)));return p.push(m.length),{table:m,offsets:p}},e}(),bK=function(){function n(e,r,o,l,s,p){this.raw=e,this.numberOfContours=r,this.xMin=o,this.yMin=l,this.xMax=s,this.yMax=p,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),vK=function(){function n(e,r,o,l,s){var p,m;for(this.raw=e,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;m=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&m;)p.pos+=1&m?4:2,128&m?p.pos+=8:64&m?p.pos+=4:8&m&&(p.pos+=2)}return n.prototype.encode=function(){var e,r,o;for(r=new Sc(aS.call(this.raw.data)),e=0,o=this.glyphIDs.length;e<o;++e)r.pos=this.glyphOffsets[e];return r.data},n}(),wK=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return tl(e,uA),e.prototype.tag="loca",e.prototype.parse=function(r){var o,l;return r.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?function(){var s,p;for(p=[],l=0,s=this.length;l<s;l+=2)p.push(2*r.readUInt16());return p}.call(this):function(){var s,p;for(p=[],l=0,s=this.length;l<s;l+=4)p.push(r.readUInt32());return p}.call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,o){for(var l=new Uint32Array(this.offsets.length),s=0,p=0,m=0;m<l.length;++m)if(l[m]=s,p<o.length&&o[p]==m){++p,l[m]=s;var I=this.offsets[m],w=this.offsets[m+1]-I;w>0&&(s+=w)}for(var _=new Array(4*l.length),E=0;E<l.length;++E)_[4*E+3]=255&l[E],_[4*E+2]=(65280&l[E])>>8,_[4*E+1]=(16711680&l[E])>>16,_[4*E]=(4278190080&l[E])>>24;return _},e}(),BK=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,r,o,l,s;for(r in l=this.font.cmap.tables[0].codeMap,e={},s=this.subset)o=s[r],e[r]=l[o];return e},n.prototype.glyphsFor=function(e){var r,o,l,s,p,m,I;for(l={},p=0,m=e.length;p<m;p++)l[s=e[p]]=this.font.glyf.glyphFor(s);for(s in r=[],l)(o=l[s])!=null&&o.compound&&r.push.apply(r,o.glyphIDs);if(r.length>0)for(s in I=this.glyphsFor(r))o=I[s],l[s]=o;return l},n.prototype.encode=function(e,r){var o,l,s,p,m,I,w,_,E,U,F,V,H,Y,D;for(l in o=oS.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(e),F={0:0},D=o.charMap)F[(I=D[l]).old]=I.new;for(V in U=o.maxGlyphID,p)V in F||(F[V]=U++);return _=function(tt){var ot,bt;for(ot in bt={},tt)bt[tt[ot]]=ot;return bt}(F),E=Object.keys(_).sort(function(tt,ot){return tt-ot}),H=function(){var tt,ot,bt;for(bt=[],tt=0,ot=E.length;tt<ot;tt++)m=E[tt],bt.push(_[m]);return bt}(),s=this.font.glyf.encode(p,H,F),w=this.font.loca.encode(s.offsets,H),Y={cmap:this.font.cmap.raw(),glyf:s.table,loca:w,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(Y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Y)},n}();Xi.API.PDFObject=function(){var n;function e(){}return n=function(r,o){return(Array(o+1).join("0")+r).slice(-o)},e.convert=function(r){var o,l,s,p;if(Array.isArray(r))return"["+function(){var m,I,w;for(w=[],m=0,I=r.length;m<I;m++)o=r[m],w.push(e.convert(o));return w}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+n(r.getUTCFullYear(),4)+n(r.getUTCMonth(),2)+n(r.getUTCDate(),2)+n(r.getUTCHours(),2)+n(r.getUTCMinutes(),2)+n(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(l in s=["<<"],r)p=r[l],s.push("/"+l+" "+e.convert(p));return s.push(">>"),s.join(`
`)}return""+r},e}();(function(n){var e={};function r(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return n[o].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=n,r.c=e,r.d=function(o,l,s){r.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:s})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,l){if(1&l&&(o=r(o)),8&l||4&l&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&l&&typeof o!="string")for(var p in o)r.d(s,p,function(m){return o[m]}.bind(null,p));return s},r.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(l,"a",l),l},r.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},r.p="",r(r.s=0)})([function(n,e,r){n.exports=r(1)},function(n,e){function r(l,s){for(var p=0;p<s.length;p++){var m=s[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var o=function(){function l(){(function(m,I){if(!(m instanceof I))throw new TypeError("Cannot call a class as a function")})(this,l),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var s,p;return s=l,(p=[{key:"show",value:function(m){this.setOptions(m),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var m=document.getElementById("loading-overlay-stylesheet");m&&(m.disabled=!0,m.parentNode.removeChild(m),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(m){if(m!==void 0)for(var I in m)this.options[I]=m[I]}},{key:"generateAndAddOverlayElement",value:function(){var m="50%";this.options.offsetX!==0&&(m="calc(50% + "+this.options.offsetX+")");var I="50%";if(this.options.offsetY!==0&&(I="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var w='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(I,"; left: ").concat(m,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),_=document.getElementById(this.options.containerID);return _.style.position="relative",void _.insertAdjacentHTML("beforeend",w)}var E='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(I,"; left: ").concat(m,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",E)}},{key:"generateSpinnerElement",value:function(){var m=this,I=Object.keys(this.numberOfEmptyDivForSpinner).find(function(_){return _===m.options.spinnerIcon}),w=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[I]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(w,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var m=document.createElement("link");m.setAttribute("id","loading-overlay-stylesheet"),m.setAttribute("rel","stylesheet"),m.setAttribute("type","text/css"),m.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(m)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(m){for(var I="",w=1;w<=m;w++)I+="<div></div>";return I}}])&&r(s.prototype,p),l}();window.JsLoadingOverlay=new o,n.exports=JsLoadingOverlay}]);Bc={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},rd={in:"in",mm:"mm"},Bh={LETTER:[279,216],A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},$g={Landscape:"landscape",Portrait:"portrait"},jy={72:72,96:96,200:200,300:300,400:400},qy=class{constructor(e,r=Bh.A4,o=300,l=Bc.PNG.toString(),s=rd.mm,p="map"){en(this,"map"),en(this,"width"),en(this,"height"),en(this,"dpi"),en(this,"format"),en(this,"unit"),en(this,"fileName"),this.map=e,this.width=r[0],this.height=r[1],this.dpi=o,this.format=l,this.unit=s,this.fileName=p}generate(){let e=this;JsLoadingOverlay.show({overlayBackgroundColor:"#5D5959",overlayOpacity:"0.6",spinnerIcon:"ball-spin",spinnerColor:"#2400FD",spinnerSize:"2x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetX:0,offsetY:0,containerID:null,lockScroll:!1,overlayZIndex:9998,spinnerZIndex:9999});let r=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return e.dpi/96}});let o=document.createElement("div");o.className="hidden-map",document.body.appendChild(o);let l=document.createElement("div");l.style.width=this.toPixels(this.width),l.style.height=this.toPixels(this.height),o.appendChild(l);let s=this.map.getStyle();if(s&&s.sources){let m=s.sources;Object.keys(m).forEach(I=>{let w=m[I];Object.keys(w).forEach(_=>{w[_]||delete w[_]})})}let p=new K5.Map({container:l,style:s,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});p.once("idle",()=>{var m;let I=p.getCanvas(),w=`${this.fileName}.${e.format}`;switch(e.format){case Bc.PNG:e.toPNG(I,w);break;case Bc.JPEG:e.toJPEG(I,w);break;case Bc.PDF:e.toPDF(p,w);break;case Bc.SVG:e.toSVG(I,w);break;default:console.error(`Invalid file format: ${e.format}`);break}p.remove(),(m=o.parentNode)==null||m.removeChild(o),Object.defineProperty(window,"devicePixelRatio",{get(){return r}}),o.remove(),JsLoadingOverlay.hide()})}toPNG(e,r){let o=document.createElement("a");o.href=e.toDataURL(),o.download=r,o.click(),o.remove()}toJPEG(e,r){let o=e.toDataURL("image/jpeg",.85),l=document.createElement("a");l.href=o,l.download=r,l.click(),l.remove()}toPDF(e,r){let o=e.getCanvas(),l=new Xi({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});l.addImage(o.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");let{lng:s,lat:p}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${s}, ${p}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(r)}toSVG(e,r){let o=e.toDataURL("image/png"),l=Number(this.toPixels(this.width,this.dpi).replace("px","")),s=Number(this.toPixels(this.height,this.dpi).replace("px","")),p=`
    <svg xmlns="http://www.w3.org/2000/svg" 
      xmlns:xlink="http://www.w3.org/1999/xlink" 
      version="1.1" 
      width="${l}" 
      height="${s}" 
      viewBox="0 0 ${l} ${s}" 
      xml:space="preserve">
        <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
      xlink:href="${o}" width="${l}" height="${s}"></image>
    </svg>`,m=document.createElement("a");m.href=`data:application/xml,${encodeURIComponent(p)}`,m.download=r,m.click(),m.remove()}toPixels(e,r=96){return this.unit===rd.mm&&(r/=25.4),`${r*e}px`}},gm=class{constructor(e){en(this,"map"),en(this,"width"),en(this,"height"),en(this,"unit"),en(this,"svgCanvas"),en(this,"svgPath");var r,o,l;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);let s=(r=this.map)==null?void 0:r.getCanvas().clientWidth,p=(o=this.map)==null?void 0:o.getCanvas().clientHeight,m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.style.position="absolute",m.style.top="0px",m.style.left="0px",m.setAttribute("width",`${s}px`),m.setAttribute("height",`${p}px`);let I=document.createElementNS("http://www.w3.org/2000/svg","path");I.setAttribute("style","fill:#888888;stroke-width:0"),I.setAttribute("fill-opacity","0.5"),m.append(I),(l=this.map)==null||l.getCanvasContainer().appendChild(m),this.svgCanvas=m,this.svgPath=I}mapResize(){this.generateCutOut()}updateArea(e,r){this.width=e,this.height=r,this.unit=rd.mm,this.generateCutOut()}generateCutOut(){var e,r;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;let o=this.toPixels(this.width),l=this.toPixels(this.height),s=(e=this.map)==null?void 0:e.getCanvas().clientWidth,p=(r=this.map)==null?void 0:r.getCanvas().clientHeight,m=s/2-o/2,I=m+o,w=p/2-l/2,_=w+l;this.svgCanvas.setAttribute("width",`${s}px`),this.svgCanvas.setAttribute("height",`${p}px`),this.svgPath.setAttribute("d",`M 0 0 L ${s} 0 L ${s} ${p} L 0 ${p} M ${m} ${w} L ${m} ${_} L ${I} ${_} L ${I} ${w}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e,r=96){return this.unit===rd.mm&&(r/=25.4),r*e}},D5={PageSize:"Page Size",PageOrientation:"Page Orientation",Format:"Format",DPI:"DPI",Generate:"Generate",LanguageName:"English"},_K={PageSize:"Taille de page",PageOrientation:"Orientation de la page",Format:"Format",DPI:"DPI",Generate:"G\xE9n\xE9rer",LanguageName:"French"},xK={PageSize:"Sivukoko",PageOrientation:"Sivun suunta",Format:"Muoto",DPI:"DPI",Generate:"Generoi",LanguageName:"Finish"},SK={PageSize:"Papierformat",PageOrientation:"Papierausrichtung",Format:"Dateiformat",DPI:"Druckaufl\xF6sung",Generate:"Erstellen",LanguageName:"German"},FK={PageSize:"Sidstorlek",PageOrientation:"Sidorientering",Format:"Format",DPI:"DPI",Generate:"Generera",LanguageName:"Swedish"},kK={PageSize:"Tama\xF1o de p\xE1gina",PageOrientation:"Orientaci\xF3n de p\xE1gina",Format:"Formato",DPI:"DPI",Generate:"Generar",LanguageName:"Spanish"},LK={PageSize:"K\xEDch th\u01B0\u1EDBc trang",PageOrientation:"Lo\u1EA1i trang",Format:"\u0110\u1ECBnh d\u1EA1ng",DPI:"M\u1EADt \u0111\u1ED9 \u0111i\u1EC3m \u1EA3nh (DPI)",Generate:"T\u1EA1o",LanguageName:"Vietnam"},EK={PageSize:"\u0420\u043E\u0437\u043C\u0456\u0440 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438",PageOrientation:"\u041E\u0440\u0456\u0454\u043D\u0442\u0430\u0446\u0456\u044F \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438",Format:"\u0424\u043E\u0440\u043C\u0430\u0442",DPI:"DPI",Generate:"\u0417\u0433\u0435\u043D\u0435\u0440\u0443\u0432\u0430\u0442\u0438",LanguageName:"Ukranian"},TK={PageSize:"\u9875\u9762\u5927\u5C0F",PageOrientation:"\u9875\u9762\u65B9\u5411",Format:"\u683C\u5F0F",DPI:"\u50CF\u7D20",Generate:"\u5BFC\u51FA",LanguageName:"Chinese simplified"},UK={PageSize:"\u9801\u9762\u5927\u5C0F",PageOrientation:"\u9801\u9762\u65B9\u5411",Format:"\u683C\u5F0F",DPI:"\u50CF\u7D20",Generate:"\u5C0E\u51FA",LanguageName:"Chinese traditional"},QK={PageSize:"\u30DA\u30FC\u30B8\u30B5\u30A4\u30BA",PageOrientation:"\u30DA\u30FC\u30B8\u65B9\u5411",Format:"\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8",DPI:"DPI\uFF08\u89E3\u50CF\u5EA6\uFF09",Generate:"\u51FA\u529B",LanguageName:"Japanese"},AS=n=>{switch(n){case"de":return SK;case"en":return D5;case"fr":return _K;case"fi":return xK;case"sv":return FK;case"es":return kK;case"vi":return LK;case"uk":return EK;case"zhHans":return TK;case"zhHant":return UK;case"ja":return QK;default:return D5}},nd=class{constructor(e){en(this,"controlContainer"),en(this,"exportContainer"),en(this,"crosshair"),en(this,"printableArea"),en(this,"map"),en(this,"exportButton"),en(this,"options",{PageSize:Bh.A4,PageOrientation:$g.Landscape,Format:Bc.PDF,DPI:jy[300],Crosshair:!1,PrintableArea:!1,Local:"en",AllowedSizes:Object.keys(Bh),Filename:"map"}),e&&(this.options=Object.assign(this.options,e)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}getTranslation(){let e=this.options.Local??"en";return AS(e)}onAdd(e){var r;this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add("maplibregl-export-list"),this.exportButton=document.createElement("button"),this.exportButton.classList.add("maplibregl-ctrl-icon"),this.exportButton.classList.add("maplibregl-export-control"),this.exportButton.type="button",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);let o=document.createElement("TABLE");o.className="print-table";let l={};(r=this.options.AllowedSizes)==null||r.forEach(_=>{Bh[_]&&(l[_]=Bh[_])});let s=this.createSelection(l,this.getTranslation().PageSize,"page-size",this.options.PageSize,(_,E)=>JSON.stringify(_[E]));o.appendChild(s);let p=this.createSelection($g,this.getTranslation().PageOrientation,"page-orientation",this.options.PageOrientation,(_,E)=>_[E]);o.appendChild(p);let m=this.createSelection(Bc,this.getTranslation().Format,"format-type",this.options.Format,(_,E)=>_[E]);o.appendChild(m);let I=this.createSelection(jy,this.getTranslation().DPI,"dpi-type",this.options.DPI,(_,E)=>_[E]);o.appendChild(I),this.exportContainer.appendChild(o);let w=document.createElement("button");return w.type="button",w.textContent=this.getTranslation().Generate,w.classList.add("generate-button"),w.addEventListener("click",()=>{let _=document.getElementById("mapbox-gl-export-page-size"),E=document.getElementById("mapbox-gl-export-page-orientation"),U=document.getElementById("mapbox-gl-export-format-type"),F=document.getElementById("mapbox-gl-export-dpi-type"),V=E.value,H=JSON.parse(_.value);V===$g.Portrait&&(H=H.reverse()),new qy(e,H,Number(F.value),U.value,rd.mm,this.options.Filename).generate()}),this.exportContainer.appendChild(w),this.controlContainer}createSelection(e,r,o,l,s){let p=document.createElement("label");p.textContent=r;let m=document.createElement("select");m.setAttribute("id",`mapbox-gl-export-${o}`),m.style.width="100%",Object.keys(e).forEach(E=>{let U=document.createElement("option");U.setAttribute("value",s(e,E)),U.appendChild(document.createTextNode(E)),U.setAttribute("name",o),l===e[E]&&(U.selected=!0),m.appendChild(U)}),m.addEventListener("change",()=>{this.updatePrintableArea()});let I=document.createElement("TR"),w=document.createElement("TD"),_=document.createElement("TD");return w.appendChild(p),_.appendChild(m),I.appendChild(w),I.appendChild(_),I}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(e){this.options.Crosshair===!0&&(e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new cm(this.map),this.crosshair.create()))}togglePrintableArea(e){this.options.PrintableArea===!0&&(e===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new gm(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;let e=document.getElementById("mapbox-gl-export-page-size"),r=document.getElementById("mapbox-gl-export-page-orientation").value,o=JSON.parse(e.value);r===$g.Portrait&&(o=o.reverse()),this.printableArea.updateArea(o[0],o[1])}}});var fs=xd(sC()),lS=xd(Lb()),cS=xd(hv());Ey();function TO(n,e){n.importCSS("main.css"),n.root.innerHTML=`
    <div id='map' style='width: 896px; height: 400px;'></div>
  `;let r="map",o=e.spec,{markers:l=[],clusters:s=[],controls:p=[],locate:m=[],terrain:I=[],geocode:w=[],fullscreen:_=[],scale:E=[],export_map:U=[],hover:F=[],center:V=[],info:H=[],images:Y=[],jumps:D=[],fit_bounds:tt=[]}=e.events,ot=new fs.Map({container:r,style:o});lS.default.addProtocols(fs),ot.on("load",function(){l.forEach(({location:Ct,options:Et})=>{bt({location:Ct,options:Et})}),s.forEach(Ct=>{jt(Ct)}),p.forEach(({position:Ct,options:Et})=>{kt({position:Ct,options:Et})}),m.forEach(({high_accuracy:Ct,options:Et})=>{Lt({high_accuracy:Ct,options:Et})}),I.forEach(()=>{vt()}),w.forEach(()=>{ft()}),_.forEach(()=>{Mt()}),E.forEach(Ct=>{qt(Ct)}),U.forEach(Ct=>{at(Ct)}),F.forEach(Ct=>{te(Ct)}),V.forEach(Ct=>{wt(Ct)}),H.forEach(({layer:Ct,property:Et})=>{yt({layer:Ct,property:Et})}),Y.forEach(({name:Ct,url:Et,options:ue})=>{st({name:Ct,url:Et,options:ue})}),D.forEach(({location:Ct,options:Et})=>{ot.easeTo({center:Ct,...Et})}),tt.forEach(({bounds:Ct,options:Et})=>{ot.fitBounds(Ct,Et)})}),n.handleEvent("add_markers",Ct=>{Ct.forEach(({location:Et,options:ue})=>{bt({location:Et,options:ue})})}),n.handleEvent("add_marker",({location:Ct,options:Et})=>{bt({location:Ct,options:Et})}),n.handleEvent("add_nav_controls",({position:Ct,options:Et})=>{kt({position:Ct,options:Et})}),n.handleEvent("add_locate",({high_accuracy:Ct,options:Et})=>{Lt({high_accuracy:Ct,options:Et})}),n.handleEvent("add_terrain",()=>{vt()}),n.handleEvent("add_geocode",()=>{ft()}),n.handleEvent("add_fullscreen",()=>{Mt()}),n.handleEvent("add_scale",Ct=>{qt(Ct)}),n.handleEvent("add_export_map",Ct=>{at(Ct)}),n.handleEvent("clusters_expansion",Ct=>{jt(Ct)}),n.handleEvent("add_hover",Ct=>{te(Ct)}),n.handleEvent("center_on_click",Ct=>{wt(Ct)}),n.handleEvent("info_on_click",({layer:Ct,property:Et})=>{yt({layer:Ct,property:Et})}),n.handleEvent("add_custom_image",({name:Ct,url:Et,options:ue})=>{st({name:Ct,url:Et,options:ue})}),n.handleEvent("jump_to",({location:Ct,options:Et})=>{ot.easeTo({center:Ct,...Et})}),n.handleEvent("fit_bounds",({bounds:Ct,options:Et})=>{ot.fitBounds(Ct,Et)});function bt({location:Ct,options:Et}){new fs.Marker(Et).setLngLat(Ct).addTo(ot)}function kt({position:Ct,options:Et}){let ue=new fs.NavigationControl(Et);ot.addControl(ue,Ct)}function Lt({high_accuracy:Ct,options:Et}){let ue=new fs.GeolocateControl({positionOptions:{enableHighAccuracy:Ct,maximumAge:0,timeout:6e3},...Et});ot.addControl(ue)}function vt(){let Ct=ot.getTerrain(),Et=new fs.TerrainControl(Ct);ot.addControl(Et)}function ft(){ot.addControl(Wt())}function Mt(){let Ct=new fs.FullscreenControl;ot.addControl(Ct)}function qt(Ct){let Et=new fs.ScaleControl(Ct);ot.addControl(Et)}function at({filename:Ct,options:Et}){let ue=new nd({Filename:Ct,...Et});ot.addControl(ue)}async function st({name:Ct,url:Et,options:ue}){let J=await ot.loadImage(Et);ot.addImage(Ct,J.data,ue)}function wt(Ct){ot.on("click",Ct,Et=>{let ue=Et.features[0].geometry.coordinates;ot.easeTo({center:ue})})}function yt({layer:Ct,property:Et}){ot.on("click",Ct,ue=>{new fs.Popup().setLngLat(ue.lngLat).setHTML(ue.features[0].properties[Et]).addTo(ot)}),Xt(Ct)}function te(Ct){let Et=null,ue=ot.getLayer(Ct).source;ot.on("mousemove",Ct,J=>{J.features.length>0&&(Et&&ot.setFeatureState({source:ue,id:Et},{hover:!1}),Et=J.features[0].id,ot.setFeatureState({source:ue,id:Et},{hover:!0}))}),ot.on("mouseleave",Ct,()=>{Et&&ot.setFeatureState({source:ue,id:Et},{hover:!1}),Et=null})}function jt(Ct){ot.on("click",Ct,Et=>{let ue=ot.getLayer(Ct).source,J=ot.queryRenderedFeatures(Et.point,{layers:[Ct]}),dt=J[0].properties.cluster_id;ot.getSource(ue).getClusterExpansionZoom(dt,(mt,Ut)=>{mt||ot.easeTo({center:J[0].geometry.coordinates,zoom:Ut})})}),Xt(Ct)}function Xt(Ct){ot.on("mouseenter",Ct,()=>{ot.getCanvas().style.cursor="pointer"}),ot.on("mouseleave",Ct,()=>{ot.getCanvas().style.cursor=""})}function Wt(){let Ct={forwardGeocode:async Et=>{let ue=[];try{let J=`https://nominatim.openstreetmap.org/search?q=${Et.query}&format=geojson&polygon_geojson=1&addressdetails=1`,mt=await(await fetch(J)).json();for(let Ut of mt.features){let Pt=[Ut.bbox[0]+(Ut.bbox[2]-Ut.bbox[0])/2,Ut.bbox[1]+(Ut.bbox[3]-Ut.bbox[1])/2],ie={type:"Feature",geometry:{type:"Point",coordinates:Pt},place_name:Ut.properties.display_name,properties:Ut.properties,text:Ut.properties.display_name,place_type:["place"],center:Pt};ue.push(ie)}}catch(J){console.error(`Failed to forwardGeocode with error: ${J}`)}return{features:ue}}};return new cS.default(Ct,{maplibregl:fs})}}export{TO as init};
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */
/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
 */
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */
